<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.9.1: http://docutils.sourceforge.net/" />
<title>欢迎使用MarkBook</title>
<link rel="stylesheet" href="/media/css/markbook.css" type="text/css" />
</head>
<body>
<div class="document" id="markbook-version">
<h1 class="title">MarkBook用户手册(v0.4)</h1>

<div class="contents topic" id="id1">
<p class="topic-title first">目录</p>
<ul class="simple">
<li><a class="reference internal" href="#markbook" id="id36">欢迎使用MarkBook</a></li>
<li><a class="reference internal" href="#id2" id="id37">MarkBook是什么？</a></li>
<li><a class="reference internal" href="#id3" id="id38">创作理念</a></li>
<li><a class="reference internal" href="#id5" id="id39">使用MarkBook</a><ul>
<li><a class="reference internal" href="#id6" id="id40">笔记管理</a><ul>
<li><a class="reference internal" href="#id7" id="id41">新建笔记</a></li>
<li><a class="reference internal" href="#id8" id="id42">编辑笔记</a></li>
<li><a class="reference internal" href="#id9" id="id43">预览笔记</a></li>
<li><a class="reference internal" href="#id10" id="id44">删除笔记</a></li>
<li><a class="reference internal" href="#id11" id="id45">刷新笔记缩略图</a></li>
<li><a class="reference internal" href="#id12" id="id46">增加笔记本</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id13" id="id47">MarkBook偏好设置</a><ul>
<li><a class="reference internal" href="#id14" id="id48">设置默认编辑器</a></li>
<li><a class="reference internal" href="#id15" id="id49">修改主题</a></li>
<li><a class="reference internal" href="#id16" id="id50">添加图片</a></li>
</ul>
</li>
<li><a class="reference internal" href="#evernote" id="id51">Evernote相关</a><ul>
<li><a class="reference internal" href="#id17" id="id52">导入Evernote笔记</a></li>
</ul>
</li>
<li><a class="reference internal" href="#jekyll-octopress" id="id53">Jekyll/Octopress相关</a><ul>
<li><a class="reference internal" href="#id18" id="id54">导入jekyll/Octopress博客</a></li>
<li><a class="reference internal" href="#id19" id="id55">发布到jekyll/Octopress博客</a></li>
<li><a class="reference internal" href="#farbox" id="id56">发布到FarBox</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id22" id="id57">读书</a><ul>
<li><a class="reference internal" href="#pro-git" id="id58">Pro Git</a></li>
</ul>
</li>
<li><a class="reference internal" href="#web" id="id59">写WEB页面</a></li>
<li><a class="reference internal" href="#id24" id="id60">管理代码</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id25" id="id61">MarkBook目录组织</a><ul>
<li><a class="reference internal" href="#source" id="id62">source目录</a><ul>
<li><a class="reference internal" href="#id26" id="id63">三层目录规范</a></li>
<li><a class="reference internal" href="#media" id="id64">media目录</a></li>
</ul>
</li>
<li><a class="reference internal" href="#build" id="id65">build目录</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id27" id="id66">MarkBook进阶</a><ul>
<li><a class="reference internal" href="#id28" id="id67">修改初始化文件内容</a><ul>
<li><a class="reference internal" href="#rst" id="id68">rst文件初始化</a></li>
<li><a class="reference internal" href="#md" id="id69">md文件初始化</a></li>
<li><a class="reference internal" href="#html" id="id70">html文件初始化</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id29" id="id71">增加笔记格式</a><ul>
<li><a class="reference internal" href="#id30" id="id72">脚本输入输入接口规范</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id31" id="id73">修改笔记HTML模板</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id32" id="id74">更新</a><ul>
<li><a class="reference internal" href="#id33" id="id75">更新本手册</a></li>
<li><a class="reference internal" href="#id34" id="id76">更新本软件</a></li>
</ul>
</li>
<li><a class="reference internal" href="#todo" id="id77">TODO</a><ul>
<li><a class="reference internal" href="#git-ui" id="id78">Git UI</a></li>
<li><a class="reference internal" href="#htmlmarkdown" id="id79">HTML转Markdown</a></li>
</ul>
</li>
</ul>
</div>
<!-- author: amoblin <amoblin@gmail.com> -->
<div class="section" id="markbook">
<h1><a class="toc-backref" href="#id36">欢迎使用MarkBook</a></h1>
<p>欢迎您使用MarkBook，目前版本为 v0.4</p>
<p>如果本手册中图片不能显示，请检查软件是否为最新版本（<a class="reference internal" href="#id34">更新本软件</a> ）</p>
<p>如果是最新版本仍出现上述问题，请联系 <a class="reference external" href="mailto:amoblin&#64;gmail.com">amoblin&#64;gmail.com</a></p>
</div>
<div class="section" id="id2">
<h1><a class="toc-backref" href="#id37">MarkBook是什么？</a></h1>
<p>MarkBook是用来管理置标语言文档及其相关资源的，内置支持格式有如下几种：</p>
<ul class="simple">
<li>reStructuredText</li>
<li>Markdown</li>
<li>HTML (use <a class="reference external" href="http://twitter.github.com/bootstrap/">twitter bootstrap</a>)</li>
<li>css</li>
<li>javascript</li>
<li>png, jpg, gif</li>
<li>shell</li>
</ul>
<p>通过 <a class="reference internal" href="#id29">增加笔记格式</a> 可以支持任意一种置标语言，包括但不限于：</p>
<ul class="simple">
<li>AsciiDoc</li>
<li>Wiki</li>
<li>TextTile</li>
</ul>
<p>此外，还通过管理CSS和图片来实现Theme样式。</p>
<p>通过像类似Sparrow/Reeder/Evernote的三栏式界面来管理组织Markup文件，实时更新显示HTML输出页面。</p>
<p>自动发布Jekyll/Octopress博客到GitHub/FarBox等。</p>
<p>程序代码文件高亮显示。</p>
</div>
<div class="section" id="id3">
<h1><a class="toc-backref" href="#id38">创作理念</a></h1>
<ul>
<li><p class="first">KISS</p>
<blockquote>
<p>KISS: Keep It Small and Simple</p>
<p>MarkBook只负责显示最终效果，其他的功能像编辑，生成HTML等都可以通过配置来调用程序完成，甚至像增加文件夹这样的操作都是调用Finder来实现的。</p>
</blockquote>
</li>
<li><p class="first">内容和排版分离</p>
<p>markdown等适合写内容，css适合排版。下面是一个markdown文件</p>
</li>
</ul>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"># Twinkle Twinkle Little Star<br/>## by Jane Taylor, 1806<br/><br/>Twinkle, twinkle, little star,&lt;br/&gt;<br/>How I wonder what you are!&lt;br/&gt;<br/>Up above the world so high,&lt;br/&gt;<br/>Like a diamond in the sky!&lt;br/&gt;<br/><br/>When the blazing sun is gone,&lt;br/&gt;<br/>When he nothing shines upon,&lt;br/&gt;<br/>Then you show your little light,&lt;br/&gt;<br/>Twinkle, twinkle, all the night.&lt;br/&gt;<br/><br/>Then the traveller in the dark,&lt;br/&gt;<br/>Thanks you for your tiny spark,&lt;br/&gt;<br/>He could not see which way to go,&lt;br/&gt;<br/>If you did not twinkle so.&lt;br/&gt;<br/><br/>In the dark blue sky you keep,&lt;br/&gt;<br/>And often through my curtains peep,&lt;br/&gt;<br/>For you never shut your eye,&lt;br/&gt;<br/>Till the sun is in the sky.&lt;br/&gt;<br/><br/>As your bright and tiny spark,&lt;br/&gt;<br/>Lights the traveller in the dark,—&lt;br/&gt;<br/>Though I know not what you are,&lt;br/&gt;<br/>Twinkle, twinkle, little star.&lt;br/&gt;<br/></pre></div>
<p>最终的展示效果如下：</p>
<img alt="/media/images/markbook-poem.png" src="/media/images/markbook-poem.png" />
<p>关于MarkBook的创作理念，还可以看我的 <a class="reference external" href="http://amoblin.farbox.com/2012/12/25/MarkBook-release.html">这篇文章</a></p>
</div>
<div class="section" id="id5">
<h1><a class="toc-backref" href="#id39">使用MarkBook</a></h1>
<p>首先通过Gallery看一下各种创意用法吧：<a class="reference external" href="http://markbook.farbox.com/gallery/">MarkBook Gallery</a></p>
<div class="section" id="id6">
<h2><a class="toc-backref" href="#id40">笔记管理</a></h2>
<div class="section" id="id7">
<h3><a class="toc-backref" href="#id41">新建笔记</a></h3>
<p>键入 <strong>Control + N</strong> 或点击窗口上方标题栏中的图标 <img alt="new" src="/media/images/markbook-icon-new.png" /> 来新建一个笔记，新建时需要指定笔记类型（自定义类型见 <a class="reference internal" href="#id24">管理代码</a> ）。</p>
<p>注意如果稍后要通过jekyll发布的话，输入的笔记名称最好不要有中文。</p>
<p>因为输入的名字会生成文件名，jekyll对中文文件名的支持不太好。</p>
</div>
<div class="section" id="id8">
<h3><a class="toc-backref" href="#id42">编辑笔记</a></h3>
<p>双击中栏笔记缩略图，会启动关联的外部编辑器(参见 <a class="reference internal" href="#id14">设置默认编辑器</a> )来编辑笔记。保存修改后，MarkBook会同步更新内容。</p>
<p>下面是c代码样例：</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #BC7A00">#include &lt;stdio.h&gt;</span><br/><br/><span style="color: #B00040">int</span> <span style="color: #0000FF">main</span>() {<br/>    <span style="color: #B00040">char</span><span style="color: #666666">*</span> a[<span style="color: #666666">3</span>];<br/>    <span style="color: #B00040">int</span> i;<br/>    a[<span style="color: #666666">0</span>] <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;你好&quot;</span>;<br/>    a[<span style="color: #666666">1</span>] <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;hello&quot;</span>;<br/>    a[<span style="color: #666666">2</span>] <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;world!&quot;</span>;<br/><br/>    printf(<span style="color: #BA2121">&quot;a&#39;s address is: %p</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>, a);<br/>    <span style="color: #008000; font-weight: bold">for</span>(i<span style="color: #666666">=0</span>; i<span style="color: #666666">&lt;3</span>; i<span style="color: #666666">++</span>) {<br/>        printf(<span style="color: #BA2121">&quot;%p: %s</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>, a[i], a[i]);<br/>    }<br/>}<br/></pre></div>
</div>
<div class="section" id="id9">
<h3><a class="toc-backref" href="#id43">预览笔记</a></h3>
<p>右栏实时更新生成的HTML页面，若要同时浏览多个页面，点击 <img alt="open" src="/media/images/markbook-icon-open.png" /> 来用默认浏览器打开当前页面。</p>
</div>
<div class="section" id="id10">
<h3><a class="toc-backref" href="#id44">删除笔记</a></h3>
<p>点击窗口上方标题栏中的图标 <img alt="delete" src="/media/images/markbook-icon-delete.png" /> 或者右键调出菜单选择&quot;删除&quot;来删除笔记。</p>
<p>或者键入 <strong>Delete</strong> 来删除笔记。</p>
</div>
<div class="section" id="id11">
<h3><a class="toc-backref" href="#id45">刷新笔记缩略图</a></h3>
<p>有时中栏缩略图可能显示为空白，或者是旧主题，这时可以右键点击缩略图，选 “刷新”。</p>
</div>
<div class="section" id="id12">
<h3><a class="toc-backref" href="#id46">增加笔记本</a></h3>
<p>双击左栏目录，会在Finder中显示该目录，然后创建文件夹即可，注意须遵循 <a class="reference internal" href="#id26">三层目录规范</a></p>
</div>
</div>
<div class="section" id="id13">
<h2><a class="toc-backref" href="#id47">MarkBook偏好设置</a></h2>
<div class="section" id="id14">
<h3><a class="toc-backref" href="#id48">设置默认编辑器</a></h3>
<p>点击 <img alt="config" src="/media/images/markbook-icon-config.png" /> 或 键入[ <strong>Command + ,</strong> ] 来打开偏好设置，选择喜欢的编辑器即可。</p>
</div>
<div class="section" id="id15">
<h3><a class="toc-backref" href="#id49">修改主题</a></h3>
<p>点击 <img alt="theme" src="/media/images/markbook-icon-theme.png" /> 来打开关联的css文件，通过修改css内容来控制所有笔记的外观。</p>
</div>
<div class="section" id="id16">
<h3><a class="toc-backref" href="#id50">添加图片</a></h3>
<p>写MarkDown或RST的同学是不是觉得载入图片的语法太麻烦了？使用MarkBook，一切就这么简单：</p>
<ol class="arabic simple">
<li>点击 <img alt="import-images" src="/media/images/markbook-icon-import-images.png" /> 来选择添加图片</li>
<li>在编辑器中粘贴系统剪切板内容</li>
</ol>
<p>也可以这样：</p>
<ol class="arabic simple">
<li>双击左栏media文件夹下的bg-images或images目录，复制文件进去</li>
<li>在中栏找到图片，右键选择&quot;复制该文件路径&quot;</li>
<li>粘贴到css或markdown文件中即可</li>
</ol>
</div>
</div>
<div class="section" id="evernote">
<h2><a class="toc-backref" href="#id51">Evernote相关</a></h2>
<div class="section" id="id17">
<h3><a class="toc-backref" href="#id52">导入Evernote笔记</a></h3>
<p>支持将Evernote笔记导出的HTML导入MarkBook。</p>
<ol class="arabic simple">
<li>Evernote菜单中选择 文件-&gt;导出所有笔记，保存格式为HTML</li>
<li>File -&gt; Import Notes...，选中从Evernote中导出的文件夹，点击 open 导入</li>
</ol>
<p>如果要导入的文件比较多可能需要等待一些时间。</p>
</div>
</div>
<div class="section" id="jekyll-octopress">
<h2><a class="toc-backref" href="#id53">Jekyll/Octopress相关</a></h2>
<div class="section" id="id18">
<h3><a class="toc-backref" href="#id54">导入jekyll/Octopress博客</a></h3>
<p>File -&gt; Import Notes...，选择jekyll或Octopress博客的_posts目录，即可将该目录下的博客文章导入到MarkBook中。</p>
</div>
<div class="section" id="id19">
<h3><a class="toc-backref" href="#id55">发布到jekyll/Octopress博客</a></h3>
<p>由于amoblin主要使用rst来写文档，对rst比较熟悉，而md就不太熟悉，所以目前此功能仅支持rst格式。后续会加入md支持。</p>
<p>如果在文件名为my-first-blog.rst的笔记中定义了如下内容：</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">.. <span style="color: #008000; font-weight: bold">|date|</span> <span style="color: #AA22FF; font-weight: bold">date</span>:: 2012-08-31<br/>.. <span style="color: #AA22FF; font-weight: bold">title</span>:: 博客标题<br/>.. <span style="color: #AA22FF; font-weight: bold">publish</span>:: YES<br/></pre></div>
<p>就会在 <strong>~/.MarkBook/source/blogs/my_blog</strong> 目录下创建 2012-08-31-my-first-blog.rst的博客文件，publish为NO时删除上述文件。</p>
<p>本文rst源文件第10行正是定义publish之处，现在值为NO，你可以试着修改为YES，保存，然后点blogs/my_blog看看，是不是出现了？</p>
<p>jekyll/Octorpress用户可以把自己的_posts目录软链到上述目录。具体例子可以看我的文章：<a class="reference external" href="http://amoblin.farbox.com/2012/12/26/markbook-to-jekyll.html">使用MarkBook发布博客到Jekyll</a></p>
<p>若要保留源文档而只将生成的HTML发布，请移步 <a class="reference external" href="http://amoblin.puti.biz/2013/01/24/markbook-to-farbox.html">这里</a></p>
</div>
<div class="section" id="farbox">
<h3><a class="toc-backref" href="#id56">发布到FarBox</a></h3>
<p><a class="reference external" href="http://amoblin.puti.biz/2013/01/24/markbook-to-farbox.html">http://amoblin.puti.biz/2013/01/24/markbook-to-farbox.html</a></p>
</div>
</div>
<div class="section" id="id22">
<h2><a class="toc-backref" href="#id57">读书</a></h2>
<div class="section" id="pro-git">
<h3><a class="toc-backref" href="#id58">Pro Git</a></h3>
<p>Git学习的经典著作Pro Git托管在GitHub上，以Creative Commons Attribution-Non Commercial-Share Alike 3.0 license发布。</p>
<p>amoblin整理了Pro Git的源文件，使其符合MarkBook的 <a class="reference internal" href="#id26">三层目录规范</a> ，发布在GitHub上。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #000080; font-weight: bold">$</span> git clone git@github.com:amoblin/progit-for-markbook.git ~/.MarkBook/source/progit-for-markbook<br/></pre></div>
<p>重启MarkBook后，就可以拜读Pro Git了。</p>
</div>
</div>
<div class="section" id="web">
<h2><a class="toc-backref" href="#id59">写WEB页面</a></h2>
<p>MarkBook的 <a class="reference external" href="http://markbook.farbox.com/">主页</a> 就是借助它实现的，有图为证：</p>
<img alt="/media/images/markbook-self-generate.png" src="/media/images/markbook-self-generate.png" />
</div>
<div class="section" id="id24">
<h2><a class="toc-backref" href="#id60">管理代码</a></h2>
<p>新建笔记，笔记标题输入程序名，比如hello.py，笔记类型选择最下面的“自定义”，这样生成的文件就不会再添加额外的后缀名了。</p>
<p>粘贴代码进去，保存，MarkBook会高亮显示代码。</p>
<p>如果显示内容为：Unknown type of file: [filename]。那么说明MarkBook不能识别文件的MIME类型。</p>
</div>
</div>
<div class="section" id="id25">
<h1><a class="toc-backref" href="#id61">MarkBook目录组织</a></h1>
<p>MarkBook的主目录为~/.MarkBook，下面有2个目录：</p>
<ul class="simple">
<li>build         用来存放生成的HTML文件</li>
<li>source        源文件</li>
</ul>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id62">source目录</a></h2>
<p>source目录下3层之内(包括第三层)的目录/文件都会被MarkBook管理。</p>
<div class="section" id="id26">
<h3><a class="toc-backref" href="#id63">三层目录规范</a></h3>
<p>source目录下有三层：</p>
<p>第一层(MyNotes.localized)是笔记本库，一般也是一个git库(MarkBook会忽略.git目录)。</p>
<p>第二层(markbook-doc)是笔记本，用于存放各种分类的笔记。</p>
<p>第三层(README.rst)是笔记</p>
<p>凡是符合上述要求的文件/目录都会被MarkBook识别，source目录下的任何改变都会被MarkBook捕获，从而更新用户界面。</p>
<p>典型的3层目录树结构如下：</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #808080">source</span><br/><span style="color: #808080">└── MyNotes.localized</span><br/><span style="color: #808080">    └── markbook-doc</span><br/><span style="color: #808080">        └── README.rst</span><br/></pre></div>
</div>
<div class="section" id="media">
<h3><a class="toc-backref" href="#id64">media目录</a></h3>
<p>source目录下默认有一个名为media的目录，MarkBook的主题样式表、初始化文件模板等存放在这里。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #000080; font-weight: bold">$</span> ls media<br/><span style="color: #808080">bg-images  bin        css        file_types images     templates</span><br/></pre></div>
<ul class="simple">
<li>bg-images     背景图片</li>
<li>bin           生成html的脚本</li>
<li>css           存放主题样式表</li>
<li>file_types    存放初始化文件模板</li>
<li>images        存放笔记文档中的图片</li>
<li>templates     生成html后外嵌HTML模板</li>
</ul>
<p>其中 bin/mkldir 是用来创建本地化目录的脚本，上面的MyNotes.localized正是用此创建。(参看 <a class="reference external" href="http://amoblin.farbox.com/2013/01/10/create-localized-directory-on-os-x.html">Mac下创建本地化目录</a>)</p>
</div>
</div>
<div class="section" id="build">
<h2><a class="toc-backref" href="#id65">build目录</a></h2>
<p>存放source目录生成的HTML等文件，结构上基本和source保持一致，但多出来一个bootstrap目录。</p>
<p>这个bootstrap就是著名的twitter bootstrap，MarkBook在引入HTML笔记支持时选择了twitter bootstrap。</p>
</div>
</div>
<div class="section" id="id27">
<h1><a class="toc-backref" href="#id66">MarkBook进阶</a></h1>
<p>MarkBook通过CSS来控制笔记的显示效果。</p>
<p>可以配置不同内容的CSS来生成不同的显示版式。相同显示版式的笔记使用相同的二级后缀名，比如</p>
<ul class="simple">
<li>我的日记.diary.md     版式为diary的markdown格式笔记</li>
<li>志摩的诗.poetry.md    版式为poetry的markdown格式笔记</li>
</ul>
<p>这样虽然同为markdown文件，使用同一个HTML生成器，但是可以在初始化和最终生成HTML的时候，采取不同的行为。</p>
<div class="section" id="id28">
<h2><a class="toc-backref" href="#id67">修改初始化文件内容</a></h2>
<p>在 <a class="reference internal" href="#id7">新建笔记</a> 时，输入笔记名，点击 ‘创建’ 后会生成一个笔记，打开笔记会发现里面已经有内容了，这些内容就是从 media/file_types目录下的文件初始化而来的。</p>
<p>该目录结构如下：</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #000080; font-weight: bold">$</span> ls file_types<br/><span style="color: #808080">default.html default.md   default.rst  poetry.md</span><br/></pre></div>
<p>默认版式的笔记会使用名为default的同格式文件来初始化，而特定版式的笔记会使用对应版式名的同格式文件来初始化。</p>
<p>比如新建一个笔记名为 new.peotry 的MarkDown格式笔记，会使用 poetry.md文件来初始化内容。</p>
<p>通过在此目录添加文件来增加版式。</p>
<p>目前还不支持增加新格式(新格式文件只能自己通过其他途径自己创建)。</p>
<div class="section" id="rst">
<h3><a class="toc-backref" href="#id68">rst文件初始化</a></h3>
<p>默认的rst文件初始化内容如下</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">%@<br/>%@<br/>%@<br/><br/><span style="color: #BC7A00">.. Author: your_name</span><br/>.. <span style="color: #AA22FF; font-weight: bold">title</span>:: 可以是中文名<br/>.. <span style="color: #008000; font-weight: bold">|date|</span> <span style="color: #AA22FF; font-weight: bold">date</span>:: %@<br/>.. <span style="color: #AA22FF; font-weight: bold">publish</span>:: NO<br/></pre></div>
<p>参数用 &quot;%&#64;&quot;表示， 一共4个参数。</p>
<ul class="simple">
<li>第2个参数是笔记名</li>
<li>第1个和第3个是根据笔记名计算出来的 ‘=’ (RST语法要求)</li>
<li>第4个参数是当前日期，主要用于生成jekyll格式的文件名。</li>
</ul>
</div>
<div class="section" id="md">
<h3><a class="toc-backref" href="#id69">md文件初始化</a></h3>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">%@<br/>%@<br/></pre></div>
<ul class="simple">
<li>第1个参数是笔记名</li>
<li>第2个是创建时间。</li>
</ul>
</div>
<div class="section" id="html">
<h3><a class="toc-backref" href="#id70">html文件初始化</a></h3>
<p>这个比较长，不在这里写了，可以打开 media/file_types下的default.html来看。</p>
<p>3个参数：第1个是笔记名，第2个是创建时间，第3个还是笔记名。</p>
</div>
</div>
<div class="section" id="id29">
<h2><a class="toc-backref" href="#id71">增加笔记格式</a></h2>
<p>对MarkBook没有内置的格式，可以在 media/bin 下编写shell脚本来增加支持。</p>
<p>MarkBook内置对markdown、rst的支持，但如果该目录下也有对应的HTML生成器，会优先使用该生成器来生成。</p>
<p>比如下面的markdown.sh脚本，在生成的html末尾加上了一行文字：</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #000080; font-weight: bold">#</span>!/bin/sh<br/><span style="color: #808080">echo &quot;`/usr/local/bin/markdown $1` &lt;br/&gt; generated by markdown.sh&quot;</span><br/></pre></div>
<p>这样，后缀为markdown.sh的文件，生成的html页面下面都会有这一行文字。</p>
<p>也可以用二级版式来对特定版式的笔记做特定转化。</p>
<div class="section" id="id30">
<h3><a class="toc-backref" href="#id72">脚本输入输入接口规范</a></h3>
<p>输入：1个参数，为源文件路径
输出：到标准输出，为HTML内容</p>
<p>MarkBook通过管道获取脚本的输出来做进一步加工，所以请确保脚本一定要输出内容。</p>
</div>
</div>
<div class="section" id="id31">
<h2><a class="toc-backref" href="#id73">修改笔记HTML模板</a></h2>
<p>在 media/templates 下保存文件输出模板。</p>
<p>通过标准markdown生成的html文件是只有内容的，并没有html的外部框架，所以通过模板进行包装，从而能够应用css主题。</p>
<p>默认有下面3个模板文件：</p>
<ul>
<li><dl class="first docutils">
<dt>md.html</dt>
<dd><p class="first last">*.md 笔记的输出模板</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>poetry.md.html</dt>
<dd><p class="first last">*.peotry.md 笔记的输出模板</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>pygmentize.html</dt>
<dd><p class="first last">程序文件的输出模板</p>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="id32">
<h1><a class="toc-backref" href="#id74">更新</a></h1>
<div class="section" id="id33">
<h2><a class="toc-backref" href="#id75">更新本手册</a></h2>
<p>本文所在目录为一个git仓库，远程仓库地址为：</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #000080; font-weight: bold">$</span> <span style="color: #008000">cd</span> ~/.MarkBook/source/MyNotes.localized/markbook-doc<br/><span style="color: #000080; font-weight: bold">$</span> git remote -v<br/><span style="color: #808080">origin      git@github.com:amoblin/markbook-doc.git (fetch)</span><br/><span style="color: #808080">origin      git@github.com:amoblin/markbook-doc.git (push)</span><br/></pre></div>
<p>获取更新：</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #000080; font-weight: bold">$</span> git pull<br/></pre></div>
</div>
<div class="section" id="id34">
<h2><a class="toc-backref" href="#id76">更新本软件</a></h2>
<p>菜单项：MarkBook -&gt; Check for updates..</p>
<p>或者至 <a class="reference external" href="http://code.google.com/p/markbook/downloads/list">MarkBook的下载页</a></p>
</div>
</div>
<div class="section" id="todo">
<h1><a class="toc-backref" href="#id77">TODO</a></h1>
<div class="section" id="git-ui">
<h2><a class="toc-backref" href="#id78">Git UI</a></h2>
<p>像Xcode一样显示文件状态，同时添加git pull，git push按钮。</p>
</div>
<div class="section" id="htmlmarkdown">
<h2><a class="toc-backref" href="#id79">HTML转Markdown</a></h2>
<p>这样导入的Evernote笔记就可以编辑了。</p>
</div>
</div>
</div>
</body>
</html>

<!DOCTYPE html>
<html>
    <head>
        <title> ace.template </title>
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="date" content="2013-03-20 14:00:57" />
        <meta name="generator" content="Marboo 0.6: http://marboo.biz" />
        <style type="text/css" media="screen">
            #editor {
                bottom: 0px;
                right: 0px;
                width: 600px;
                height: 400px;
            }
        </style>

        <script src="http://marboo.biz/media/lib/markdown.js" type="text/javascript"></script>
        <!-- highlight.js -->
        <link rel="stylesheet" href="http://marboo.biz/media/css/highlight.css/default.css">
        <script src="http://marboo.biz/media/js/highlight.pack.js" type="text/javascript"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </head>
    <body style="background-color:transparent">
        <textarea id="source" style="display:none">import sys
print "你好"
</textarea>
        <div id="preview"></div>
        <div id="editor"></div>

        <script src="http://d1n0x3qji82z53.cloudfront.net/src-min-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
        <script>
            var editor = ace.edit("editor");
            editor.setTheme("ace/theme/monokai");

            var editorSession = editor.getSession();
            editorSession.setMode("ace/mode/python");
            editorSession.setValue(document.getElementById("source").value);

            var src = editorSession.getValue();
            src = "    " + src.replace(/\n/g, "\n    ");
            document.getElementById("preview").innerHTML = markdown.toHTML(src);

            editorSession.on('change', function() {
                var src = editorSession.getValue();
                src = "    " + src.replace(/\n/g, "\n    ");
                document.getElementById("preview").innerHTML = markdown.toHTML(src);
            });
        </script>
    </body>
</html>

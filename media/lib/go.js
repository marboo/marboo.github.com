/*
 * GoJS v1.2.7 JavaScript Library for HTML Canvas Diagrams
 * Northwoods Software, http://www.nwoods.com/
 * GoJS and Northwoods Software are registered trademarks of Northwoods Software Corporation.
 * Copyright (C) 1998-2013 by Northwoods Software Corporation.  All Rights Reserved.
 * THIS SOFTWARE IS LICENSED.  THE LICENSE AGREEMENT IS AT: http://www.gojs.net/1.2.7/doc/license.html.
 */
(function(window) { var f=void 0,h=!0,q=null,s=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function w(a){return function(){return this[a]}}function ca(a){return function(){return a}}var da,fa={};
if(document.createElement("canvas").getContext===f)throw window.console&&window.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");if(!Object.prototype.__defineGetter__&&!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");
Object.prototype.__defineGetter__&&!Object.defineProperty&&(Object.defineProperty=function(a,b,c){c.get&&a.__defineGetter__(b,c.get);c.set&&a.__defineSetter__(b,c.set)});Object.prototype.__lookupGetter__&&!Object.getOwnPropertyDescriptor&&(Object.getOwnPropertyDescriptor=function(a,b){return{get:a.__lookupGetter__(b),set:a.__lookupSetter__(b)}});Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__});Object.isFrozen||(Object.isFrozen=function(a){return a.WE===h});
Object.freeze||(Object.freeze=function(a){a.WE=h});Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return g.apply(a,e.concat(d.call(arguments)))}function c(){}var d=Array.prototype.slice,e=d.call(arguments,1),g=this;c.prototype=this.prototype;b.prototype=new c;return b});
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),g=Math.max(8,16-(c-a)),k=window.setTimeout(function(){b(c+g)},g);a=c+g;return k});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)})})();var x={my:s,oI:s,kD:s,yC:s,HH:s,trace:aa(),GF:s,assert:s,ZH:q,eI:aa(),gI:aa(),fI:aa(),dI:aa(),lI:aa(),hI:aa(),jI:aa(),iI:aa(),cI:s,mJ:s,jJ:s,kJ:s,lG:s,kI:aa()},x=q;fa.Debug=q;
var y={rh:Object.freeze([]),By:{},mC:0,DG:{},zv:document.createElement("canvas").getContext("2d"),Av:"",Fz:[],pv:q,eC:[],zz:"ontouchstart"in window,eE:"ongesturestart"in window,XB:s,or:q,pr:q,nr:q,Bu:"",zE:s,CE:s,BE:s,AE:s,YB:q,Eo:s,xE:s,yE:s,m:function(a){x&&x.GF&&alert(a);throw Error(a);},K:function(a,b){if(a.$a){var c="The object is frozen, so its properties cannot be set: "+a.toString();b!==f&&(c+="  to value: "+b);y.m(c)}},l:function(a,b,c,d){a instanceof b||(c=y.eh(c),d!==f&&(c+="."+d),y.Jb(a,
b,c))},j:function(a,b,c,d){typeof a!==b&&(c=y.eh(c),d!==f&&(c+="."+d),y.Jb(a,b,c))},p:function(a,b,c){isFinite(a)||(b=y.eh(b),c!==f&&(b+="."+c),y.m(b+" must be a real number and not NaN or Infinity: "+a))},rb:function(a,b,c,d){if(!(a instanceof ga)||a.re!==b)c=y.eh(c),d!==f&&(c+="."+d),y.Jb(a,"a constant of class "+y.dh(b),c)},Jb:function(a,b,c,d){b=y.eh(b);c=y.eh(c);d!==f&&(c+="."+d);y.m(c+" value is not an instance of "+b+": "+a)},ka:function(a,b,c,d){c=y.eh(c);d!==f&&(c+="."+d);y.m(c+" is not in the range "+
b+": "+a)},trace:function(a){window&&window.console&&window.console.log(a);x&&x.HH&&y.m(a)},tb:function(a){return"object"===typeof a&&a!==q},isArray:function(a){return Array.isArray(a)||a instanceof NodeList||a instanceof HTMLCollection},mr:function(a,b,c){y.isArray(a)||y.Jb(a,"Array or NodeList or HTMLCollection",b,c)},Tb:function(a){return a.length},Gb:function(a,b){return a[b]},EB:function(a,b,c){Array.isArray(a)?a[b]=c:y.m("Cannot replace an object in an HTMLCollection or NodeList at "+b)},ky:function(a,
b){if(Array.isArray(a))return a.indexOf(b);for(var c=a.length,d=0;d<c;d++)if(a[d]===b)return d;return-1},Wh:function(a,b,c){Array.isArray(a)?b>=a.length?a.push(c):a.splice(b,0,c):y.m("Cannot insert an object into an HTMLCollection or NodeList: "+c+" at "+b)},Xh:function(a,b){Array.isArray(a)?b>=a.length?a.pop():a.splice(b,1):y.m("Cannot remove an object from an HTMLCollection or NodeList at "+b)},gw:[],M:function(){var a=y.gw.pop();return a===f?new A:a},ec:function(a,b){var c=y.gw.pop();if(c===f)return new A(a,
b);c.x=a;c.y=b;return c},B:function(a){y.gw.push(a)},Tz:[],Nk:function(){var a=y.Tz.pop();return a===f?new ha:a},qj:function(a){y.Tz.push(a)},hw:[],df:function(){var a=y.hw.pop();return a===f?new B:a},xj:function(a,b,c,d){var e=y.hw.pop();if(e===f)return new B(a,b,c,d);e.x=a;e.y=b;e.width=c;e.height=d;return e},Bc:function(a){y.hw.push(a)},Uz:[],yg:function(){var a=y.Uz.pop();return a===f?new ka:a},ye:function(a){y.Uz.push(a)},iw:q,u:function(){var a=y.iw;return a!==q?(y.iw=q,a):new la},v:function(a){a.reset();
y.iw=a},Sz:[],ub:function(){var a=y.Sz.pop();return a===f?[]:a},ya:function(a){a.length=0;y.Sz.push(a)},Wz:1,mc:function(a){a.__gohashid=y.Wz++},Dr:function(a){var b=a.__gohashid;b===f&&(b=y.Wz++,a.__gohashid=b);return b},bc:function(a){return a.__gohashid},g:function(a,b,c){"name"!==b&&"length"!==b&&(a[b]=c)},ba:function(a,b){b.sw=a;fa[a]=b},Ka:function(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a},defineProperty:function(a,b,c,d,e){y.j(a,"function","Util.defineProperty:classfunc");
y.j(b,"object","Util.defineProperty:propobj");y.j(c,"function","Util.defineProperty:getter");y.j(d,"function","Util.defineProperty:setter");for(var g in b){b=b[g];c={get:c,set:d};if(e!==f)for(var k in e)c[k]=e[k];Object.defineProperty(a.prototype,g,c);e=Object.getOwnPropertyDescriptor(a.prototype,g);b&&e&&Object.defineProperty(a.prototype,b,e);break}},A:function(a,b,c,d){y.j(a,"function","Util.defineReadOnlyProperty:classfunc");y.j(b,"object","Util.defineReadOnlyProperty:propobj");y.j(c,"function",
"Util.defineReadOnlyProperty:getter");for(var e in b){var g=b[e];b={get:c,set:function(a){y.m('The property "'+g+'" is read-only and cannot be set to '+a)}};if(d!==f)for(var k in d)b[k]=d[k];Object.defineProperty(a.prototype,e,b);d=Object.getOwnPropertyDescriptor(a.prototype,e);g&&d&&Object.defineProperty(a.prototype,g,d);break}},Md:function(a,b){for(var c in b)b[c]=h;a.prototype.ZE=b},eh:function(a){return a===f?"":"string"===typeof a?a:"function"===typeof a?y.dh(a):a===q?"*":""},dh:function(a){if("function"===
typeof a){if(a.sw)return a.sw;if(a.name)return a.name;var b=a.toString(),c=b.indexOf("(");if(b=b.substring(9,c).trim())return a.sw=b}else if("object"===typeof a&&a.constructor)return y.dh(a.constructor);return typeof a},w:function(a,b,c){y.j(a,"function","Util.defineEnumValue:classfunc");y.j(b,"string","Util.defineEnumValue:name");y.j(c,"number","Util.defineEnumValue:num");c=new ga(a,b,c);Object.freeze(c);a[b]=c;var d=a.Vz;d||(d=new ma("string",ga),a.Vz=d);d.add(b,c);return c},Il:function(a,b){if(!b)return q;
y.j(a,"function","Util.findEnumValueForName:classfunc");y.j(b,"string","Util.findEnumValueForName:name");var c=a.Vz;return!c?q:c.wa(b)},OF:function(a,b,c,d){var e={},g;for(g in a){for(var k=s,l=1;l<arguments.length;l++)if(arguments[l]===g){k=h;break}k||(e[g]=a[g])}return e},Xa:function(a,b){if(!a||!b)return q;var c=f;try{"function"===typeof b?c=b(a):"function"===typeof a.getAttribute?(c=a.getAttribute(b),c===q&&(c=f)):c=a[b]}catch(d){x&&y.trace("property get error: "+d.toString())}return c},Oa:function(a,
b,c){if(a&&b)try{"function"===typeof b?b(a,c):"function"===typeof a.setAttribute?a.setAttribute(b,c):a[b]=c}catch(d){x&&y.trace("property set error: "+d.toString())}},vv:function(a,b){y.j(a,"object","Setting properties requires Objects as arguments");y.j(b,"object","Setting properties requires Objects as arguments");var c=x;c||(x=y);var d=a instanceof D,e=a instanceof E,g;for(g in b){var k=a,l=g;if(d||e){var m=g.indexOf(".");if(0<m){var n=g.substring(0,m);d?k=a.xe(n):(k=a[n])||(k=a.pb[n]);k?l=g.substr(m+
1):y.m("Unable to find object named: "+n+" in "+a.toString()+" when trying to set property: "+g)}}"_"!==l[0]&&!y.Wu(k,l)&&(e&&y.Wu(a.pb,l)?k=a.pb:y.m('Trying to set undefined property "'+l+'" on object: '+k.toString()));k[l]=b[g];"_"===l[0]&&(m=k.Wk,m||(m=[],k.Wk=m),m.push(l))}x=c;return a},Wu:function(a,b){for(var c=Object.getPrototypeOf(a);c&&c!==Function;){if(c.hasOwnProperty(b))return h;var d=c.ZE;if(d&&d[b])return h;c=Object.getPrototypeOf(c)}return s},JB:function(a,b){if(!y.tb(b)||b instanceof
Element||b instanceof CanvasRenderingContext2D)return"";var c="",d;for(d in b)if("string"!==typeof d)""===c&&(c=b+"\n"),c+="  "+d+" is not a string property\n";else if("_"!==d.charAt(0)&&!(2>=d.length)){var e=y.Xa(b,d);e!==q&&("function"!==typeof e&&!y.Wu(b,d))&&(""===c&&(c=b+"\n"),c+='  unknown property "'+d+'" has value: '+e+" at "+a+"\n")}return c},Au:function(a,b){if(b&&!("number"===typeof b||"string"===typeof b||"boolean"===typeof b||"function"===typeof b))if(y.bc(b)!==f){if(!y.Xt.contains(b))if(y.Xt.add(b),
y.yt.add(y.JB(a,b)),b instanceof F||b instanceof na||b instanceof ma)for(var c=b.k;c.next();)y.Au(a+"["+c.key+"]",c.value);else for(c in b){var d=y.Xa(b,c);if(!(d===f||d===q||!y.tb(d))&&"_ownProperties"!==c){if(b instanceof oa){if("_lines"===c)continue}else if(b instanceof D){if("data"===c||"_data"===c)continue;if("itemArray"===c||"_itemArray"===c)continue}else if(!(b instanceof E))if(b instanceof pa){if("archetypeGroupData"===c||"_archetypeGroupData"===c)continue}else if(b instanceof qa){if("archetypeLinkData"===
c||"_archetypeLinkData"===c)continue;if("archetypeLabelNodeData"===c||"_archetypeLabelNodeData"===c)continue}else if(b instanceof ra){if("archetypeNodeData"===c||"_archetypeNodeData"===c)continue}else if(b instanceof G){if("nodeDataArray"===c||"_nodeDataArray"===c)continue;if("linkDataArray"===c||"_linkDataArray"===c||"_linkDataSet"===c)continue;if("_mapKeyNodeData"===c||"_delayedNodeReferences"===c)continue}y.Au(a+"."+c,d)}}}else if(Array.isArray(b))for(c=0;c<b.length;c++)y.Au(a+"["+c+"]",b[c]);
else y.yt.add(y.JB(a,b))},JF:function(a){y.Xt===f?y.Xt=new na:y.Xt.clear();y.yt=new sa;y.Au("",a);a=y.yt.toString();y.yt=q;return a},jH:function(a){for(var b=[],c=0;256>c;c++)b[c]=c;for(var d=0,e,c=0;256>c;c++)d=(d+b[c]+119)%256,e=b[c],b[c]=b[d],b[d]=e;for(var d=c=0,g="",k=0;k<a.length;k++)c=(c+1)%256,d=(d+b[c])%256,e=b[c],b[c]=b[d],b[d]=e,g+=String.fromCharCode(a.charCodeAt(k)^b[(b[c]+b[d])%256]);return g},CG:function(a){for(var b=[],c=0;256>c;c++)b["0123456789abcdef".charAt(c>>4)+"0123456789abcdef".charAt(c&
15)]=String.fromCharCode(c);a.length%2&&(a="0"+a);for(var d=[],e=0,c=0;c<a.length;c+=2)d[e++]=b[a.substr(c,2)];a=d.join("");return""===a?"0":a},Sa:function(a){return y.jH(y.CG(a))},Qk:q,gy:"7da71ca0ad381e90",KF:"@COLOR1",LF:"@COLOR2"},ua=y,xa=document.createElement("canvas"),ya=xa.getContext("2d");ya[y.Sa("7ca11abfd022028846")]=y.Sa("398c3597c01238");
for(var za=["5da73c80a3330d854f9e5e671d6633","32ab5ff3b26f42dc0ed90f22472913b54ae6247590da4bb21c324ba3a84e385776","54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387","74bf19bce72555874c86"],Ba=1;5>Ba;Ba++)ya[y.Sa("7ca11abfd7330390")](y.Sa(za[Ba-1]),10,15*Ba+0);ya[y.Sa("7ca11abfd022028846")]=y.Sa("39f046ebb36e4b");for(Ba=1;5>Ba;Ba++)ya[y.Sa("7ca11abfd7330390")](y.Sa(za[Ba-1]),10,15*Ba+0);ua.Qk=xa;function ga(a,b,c){y.mc(this);this.aA=a;this.Fb=b;this.fF=c}
ga.prototype.toString=function(){return y.dh(this.aA)+"."+this.Fb};y.A(ga,{re:"classType"},w("aA"));y.A(ga,{name:"name"},w("Fb"));y.A(ga,{value:"value"},w("fF"));function sa(){this.$z=[];this.KH=0;this.MH="  "}sa.prototype.toString=function(){return this.$z.join("")};sa.prototype.add=function(a){a&&this.$z.push(a)};function Ca(){}y.A(Ca,{k:"iterator"},function(){return this});Ca.prototype.reset=Ca.prototype.reset=aa();Ca.prototype.next=Ca.prototype.next=ca(s);Ca.prototype.first=Ca.prototype.ob=ca(q);
y.A(Ca,{count:"count"},ca(0));Ca.prototype.eg=aa();Ca.prototype.toString=ca("EmptyIterator");y.$f=new Ca;function Da(a){this.key=-1;this.value=a}y.Md(Da,{key:h,value:h});y.A(Da,{k:"iterator"},function(){return this});Da.prototype.reset=Da.prototype.reset=function(){this.key=-1};Da.prototype.next=Da.prototype.next=function(){return-1===this.key?(this.key=0,h):s};Da.prototype.first=Da.prototype.ob=function(){this.key=0;return this.value};y.A(Da,{count:"count"},ca(1));
Da.prototype.eg=function(){this.value=q};Da.prototype.toString=function(){return"SingletonIterator("+this.value+")"};function Ea(a){this.jf=a;this.bn=q;this.reset()}y.Md(Ea,{key:h,value:h});y.A(Ea,{k:"iterator"},function(){return this});y.g(Ea,"predicate",Ea.prototype.Hk);y.defineProperty(Ea,{Hk:"predicate"},w("bn"),ba("bn"));Ea.prototype.reset=Ea.prototype.reset=function(){var a=this.jf;a.Mg=q;this.Ya=a.Kb;this.Vd=-1};
Ea.prototype.next=Ea.prototype.next=function(){var a=this.jf;a.Kb!==this.Ya&&y.m("the List has been modified during iteration");var a=a.n,b=a.length,c=++this.Vd,d=this.bn;if(d!==q)for(;c<b;){var e=a[c];if(d(e))return this.key=this.Vd=c,this.value=e,h;c++}else{if(c<b)return this.key=c,this.value=a[c],h;this.eg()}return s};
Ea.prototype.first=Ea.prototype.ob=function(){var a=this.jf;this.Ya=a.Kb;this.Vd=0;var a=a.n,b=a.length,c=this.bn;if(c!==q){for(var d=0;d<b;){var e=a[d];if(c(e))return this.key=this.Vd=d,this.value=e;d++}return q}return 0<b?(e=a[0],this.key=0,this.value=e):q};y.A(Ea,{count:"count"},function(){var a=this.bn;if(a!==q){for(var b=0,c=this.jf.n,d=c.length,e=0;e<d;e++)a(c[e])&&b++;return b}return this.jf.n.length});Ea.prototype.eg=function(){this.key=-1;this.value=q;this.Ya=-1;this.bn=q;this.jf.Mg=this};
Ea.prototype.toString=function(){return"ListIterator@"+this.Vd+"/"+this.jf.count};function Ga(a){this.jf=a;this.reset()}y.Md(Ga,{key:h,value:h});y.A(Ga,{k:"iterator"},function(){return this});Ga.prototype.reset=Ga.prototype.reset=function(){var a=this.jf;a.ex=q;this.Ya=a.Kb;this.Vd=a.n.length};Ga.prototype.next=Ga.prototype.next=function(){var a=this.jf;a.Kb!==this.Ya&&y.m("the List has been modified during iteration");var b=--this.Vd;if(0<=b)return this.key=b,this.value=a.n[b],h;this.eg();return s};
Ga.prototype.first=Ga.prototype.ob=function(){var a=this.jf;this.Ya=a.Kb;var b=a.n;this.Vd=a=b.length-1;return 0<=a?(b=b[a],this.key=a,this.value=b):q};y.A(Ga,{count:"count"},function(){return this.jf.n.length});Ga.prototype.eg=function(){this.key=-1;this.value=q;this.Ya=-1;this.jf.ex=this};Ga.prototype.toString=function(){return"ListIteratorBackwards("+this.Vd+"/"+this.jf.count+")"};
function F(a){y.mc(this);this.$a=s;this.n=[];this.Kb=0;this.ex=this.Mg=q;a===f||a===q?this.Y=q:"string"===typeof a?"object"===a||"string"===a||"number"===a||"boolean"===a||"function"===a?this.Y=a:y.ka(a,"the string 'object', 'number', 'string', 'boolean', or 'function'","List constructor: type"):"function"===typeof a?this.Y=a===Object?"object":a===String?"string":a===Number?"number":a===Boolean?"boolean":a===Function?"function":a:y.ka(a,"null, a primitive type name, or a class type","List constructor: type")}
y.ba("List",F);F.prototype.ag=function(a){this.Y!==q&&("string"===typeof this.Y?(typeof a!==this.Y||a===q)&&y.Jb(a,this.Y):a instanceof this.Y||y.Jb(a,this.Y))};F.prototype.rd=function(){var a=this.Kb;a++;999999999<a&&(a=0);this.Kb=a};F.prototype.freeze=F.prototype.freeze=function(){this.$a=h;return this};F.prototype.thaw=F.prototype.Pa=function(){this.$a=s;return this};F.prototype.toString=function(){return"List("+y.eh(this.Y)+")#"+y.bc(this)};
F.prototype.add=F.prototype.add=function(a){a!==q&&(x&&this.ag(a),y.K(this,a),this.n.push(a),this.rd())};F.prototype.addAll=F.prototype.Me=function(a){if(a===q)return this;y.K(this);var b=this.n;if(y.isArray(a))for(var c=y.Tb(a),d=0;d<c;d++){var e=y.Gb(a,d);x&&this.ag(e);b.push(e)}else for(a=a.k;a.next();)e=a.value,x&&this.ag(e),b.push(e);this.rd();return this};F.prototype.clear=F.prototype.clear=function(){y.K(this);this.n.length=0;this.rd()};
F.prototype.contains=F.prototype.contains=function(a){if(a===q)return s;x&&this.ag(a);return-1!==this.n.indexOf(a)};F.prototype.indexOf=F.prototype.indexOf=function(a){if(a===q)return-1;x&&this.ag(a);return this.n.indexOf(a)};F.prototype.elt=F.prototype.sa=function(a){x&&y.p(a,F,"elt:i");var b=this.n;(0>a||a>=b.length)&&y.ka(a,"0 <= i < length",F,"elt:i");return b[a]};
F.prototype.setElt=F.prototype.Vf=function(a,b){x&&(this.ag(b),y.p(a,F,"setElt:i"));var c=this.n;(0>a||a>=c.length)&&y.ka(a,"0 <= i < length",F,"setElt:i");y.K(this,a);c[a]=b};F.prototype.first=F.prototype.ob=function(){var a=this.n;return 0===a.length?q:a[0]};F.prototype.insertAt=F.prototype.wd=function(a,b){x&&(this.ag(b),y.p(a,F,"insertAt:i"));0>a&&y.ka(a,">= 0",F,"insertAt:i");y.K(this,a);var c=this.n;a>=c.length?c.push(b):c.splice(a,0,b);this.rd();return h};
F.prototype.remove=F.prototype.remove=function(a){if(a===q)return s;x&&this.ag(a);y.K(this,a);var b=this.n;a=b.indexOf(a);if(-1===a)return s;a===b.length-1?b.pop():b.splice(a,1);this.rd();return h};F.prototype.removeAt=F.prototype.kd=function(a){x&&y.p(a,F,"removeAt:i");var b=this.n;(0>a||a>=b.length)&&y.ka(a,"0 <= i < length",F,"removeAt:i");y.K(this,a);a===b.length-1?b.pop():b.splice(a,1);this.rd()};
F.prototype.removeRange=F.prototype.removeRange=function(a,b){x&&(y.p(a,F,"removeRange:from"),y.p(b,F,"removeRange:to"));var c=this.n;(0>a||a>=c.length)&&y.ka(a,"0 <= from < length",F,"elt:from");(0>b||b>=c.length)&&y.ka(b,"0 <= to < length",F,"elt:to");y.K(this,a);var d=c.slice((b||a)+1||c.length);c.length=0>a?c.length+a:a;c.push.apply(c,d);this.rd()};F.prototype.copy=function(){for(var a=new F(this.Y),b=this.n,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};
F.prototype.toArray=F.prototype.Ee=function(){for(var a=this.n,b=this.count,c=Array(b),d=0;d<b;d++)c[d]=a[d];return c};F.prototype.toSet=F.prototype.FH=function(){for(var a=new na(this.Y),b=this.n,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};F.prototype.sort=F.prototype.sort=function(a){x&&y.j(a,"function",F,"sort:sortfunc");y.K(this);this.n.sort(a);this.rd();return this};
F.prototype.sortRange=F.prototype.Bo=function(a,b,c){var d=this.n,e=d.length;b===f&&(b=0);c===f&&(c=e);x&&(y.j(a,"function",F,"sortRange:sortfunc"),y.p(b,F,"sortRange:from"),y.p(c,F,"sortRange:to"));y.K(this);var g=c-b;if(1>=g)return this;(0>b||b>=e-1)&&y.ka(b,"0 <= from < length",F,"sortRange:from");if(2===g)return c=d[b],e=d[b+1],0<a(c,e)&&(d[b]=e,d[b+1]=c,this.rd()),this;if(0===b)if(c>=e)d.sort(a);else{g=d.slice(0,c);g.sort(a);for(a=0;a<c;a++)d[a]=g[a]}else if(c>=e){g=d.slice(b);g.sort(a);for(a=
b;a<e;a++)d[a]=g[a-b]}else{g=d.slice(b,c);g.sort(a);for(a=b;a<c;a++)d[a]=g[a-b]}this.rd();return this};F.prototype.reverse=F.prototype.reverse=function(){y.K(this);this.n.reverse();this.rd();return this};y.A(F,{count:"count"},function(){return this.n.length});y.A(F,{length:"length"},function(){return this.n.length});y.A(F,{k:"iterator"},function(){if(0>=this.n.length)return y.$f;var a=this.Mg;return a!==q?(a.reset(),a):new Ea(this)});
y.A(F,{Rl:"iteratorBackwards"},function(){if(0>=this.n.length)return y.$f;var a=this.ex;return a!==q?(a.reset(),a):new Ga(this)});function Ha(a){this.q=a;this.reset()}y.Md(Ha,{key:h,value:h});y.A(Ha,{k:"iterator"},function(){return this});Ha.prototype.reset=Ha.prototype.reset=function(){var a=this.q;a.Mg=q;this.Ya=a.Kb;this.Gd=q};
Ha.prototype.next=Ha.prototype.next=function(){var a=this.q;a.Kb!==this.Ya&&y.m("the Set has been modified during iteration");var b=this.Gd,b=b===q?a.le:b.Li;if(b!==q)return this.Gd=b,this.value=b.value,this.key=b.key,h;this.eg();return s};Ha.prototype.first=Ha.prototype.ob=function(){var a=this.q;this.Ya=a.Kb;a=a.le;if(a!==q){this.Gd=a;var b=a.value;this.key=a.key;return this.value=b}return q};y.A(Ha,{count:"count"},function(){return this.q.Fd});
Ha.prototype.eg=function(){this.value=q;this.Ya=-1;this.q.Mg=this};Ha.prototype.toString=function(){return this.Gd!==q?"SetIterator@"+this.Gd.value:"SetIterator"};
function na(a){y.mc(this);this.$a=s;a===f||a===q?this.Y=q:"string"===typeof a?"object"===a||"string"===a||"number"===a?this.Y=a:y.ka(a,"the string 'object', 'number' or 'string'","Set constructor: type"):"function"===typeof a?this.Y=a===Object?"object":a===String?"string":a===Number?"number":a:y.ka(a,"null, a primitive type name, or a class type","Set constructor: type");this.Gc={};this.Fd=0;this.Mg=q;this.Kb=0;this.Og=this.le=q}y.ba("Set",na);
na.prototype.ag=function(a){this.Y!==q&&("string"===typeof this.Y?(typeof a!==this.Y||a===q)&&y.Jb(a,this.Y):a instanceof this.Y||y.Jb(a,this.Y))};na.prototype.rd=function(){var a=this.Kb;a++;999999999<a&&(a=0);this.Kb=a};na.prototype.freeze=na.prototype.freeze=function(){this.$a=h;return this};na.prototype.thaw=na.prototype.Pa=function(){this.$a=s;return this};na.prototype.toString=function(){return"Set("+y.eh(this.Y)+")#"+y.bc(this)};
na.prototype.add=na.prototype.add=function(a){if(a===q)return s;x&&this.ag(a);y.K(this,a);var b=a;y.tb(a)&&(b=y.Dr(a));return this.Gc[b]===f?(this.Fd++,a=new Ia(a,a),this.Gc[b]=a,b=this.Og,b===q?this.le=a:(a.cn=b,b.Li=a),this.Og=a,this.rd(),h):s};na.prototype.addAll=na.prototype.Me=function(a){if(a===q)return this;y.K(this);if(y.isArray(a))for(var b=y.Tb(a),c=0;c<b;c++)this.add(y.Gb(a,c));else for(a=a.k;a.next();)this.add(a.value);return this};
na.prototype.contains=na.prototype.contains=function(a){if(a===q)return s;x&&this.ag(a);var b=a;return y.tb(a)&&(b=y.bc(a),b===f)?s:this.Gc[b]!==f};na.prototype.containsAll=na.prototype.WH=function(a){if(a===q)return h;for(a=a.k;a.next();)if(!this.contains(a.value))return s;return h};na.prototype.containsAny=na.prototype.XH=function(a){if(a===q)return h;for(a=a.k;a.next();)if(this.contains(a.value))return h;return s};na.prototype.first=na.prototype.ob=function(){var a=this.le;return a===q?q:a.value};
na.prototype.remove=na.prototype.remove=function(a){if(a===q)return s;x&&this.ag(a);y.K(this,a);var b=a;if(y.tb(a)&&(b=y.bc(a),b===f))return s;a=this.Gc[b];if(a===f)return s;var c=a.Li,d=a.cn;c!==q&&(c.cn=d);d!==q&&(d.Li=c);this.le===a&&(this.le=c);this.Og===a&&(this.Og=d);delete this.Gc[b];this.Fd--;this.rd();return h};na.prototype.removeAll=na.prototype.oJ=function(a){if(a===q)return this;y.K(this);for(a=a.k;a.next();)this.remove(a.value);return this};
na.prototype.retainAll=na.prototype.sJ=function(a){if(a===q||0===this.count)return this;y.K(this);var b=new na(this.Y);b.Me(a);a=new F(this.Y);for(var c=this.k;c.next();)b.contains(c.value)||a.add(c.value);for(b=a.k;b.next();)this.remove(b.value);return this};na.prototype.clear=na.prototype.clear=function(){y.K(this);this.Gc={};this.Fd=0;this.Og=this.le=q;this.rd()};na.prototype.copy=function(){var a=new na(this.Y),b=this.Gc,c;for(c in b)a.add(b[c].value);return a};
na.prototype.toArray=na.prototype.Ee=function(){var a=Array(this.Fd),b=this.Gc,c=0,d;for(d in b)a[c]=b[d].value,c++;return a};na.prototype.toList=na.prototype.EH=function(){var a=new F(this.Y),b=this.Gc,c;for(c in b)a.add(b[c]);return a};y.A(na,{count:"count"},w("Fd"));y.A(na,{k:"iterator"},function(){if(0>=this.Fd)return y.$f;var a=this.Mg;return a!==q?(a.reset(),a):new Ha(this)});function Ja(a){this.Ic=a;this.reset()}y.Md(Ja,{key:h,value:h});y.A(Ja,{k:"iterator"},function(){return this});
Ja.prototype.reset=Ja.prototype.reset=function(){this.Ya=this.Ic.Kb;this.Gd=q};Ja.prototype.next=Ja.prototype.next=function(){var a=this.Ic;a.Kb!==this.Ya&&y.m("the Map has been modified during iteration");var b=this.Gd,b=b===q?a.le:b.Li;if(b!==q)return this.Gd=b,this.value=b.key,h;this.eg();return s};Ja.prototype.first=Ja.prototype.ob=function(){var a=this.Ic;this.Ya=a.Kb;a=a.le;if(a!==q){this.Gd=a;var b=a.value;this.key=a.key;return this.value=b}return q};y.A(Ja,{count:"count"},function(){return this.Ic.Fd});
Ja.prototype.eg=function(){this.value=q;this.Ya=-1};Ja.prototype.toString=function(){return this.Gd!==q?"MapKeySetIterator@"+this.Gd.value:"MapKeySetIterator"};function Ka(a){y.mc(this);this.Ic=a}y.Ka(Ka,na);Ka.prototype.freeze=function(){return this};Ka.prototype.Pa=function(){return this};Ka.prototype.toString=function(){return"MapKeySet("+this.Ic.toString()+")"};Ka.prototype.add=Ka.prototype.add=function(){y.m("This Set is read-only: "+this.toString());return s};
Ka.prototype.contains=Ka.prototype.contains=function(a){return this.Ic.contains(a)};Ka.prototype.remove=Ka.prototype.remove=function(){y.m("This Set is read-only: "+this.toString());return s};Ka.prototype.clear=Ka.prototype.clear=function(){y.m("This Set is read-only: "+this.toString())};Ka.prototype.copy=function(){return new Ka(this.Ic)};Ka.prototype.toSet=Ka.prototype.FH=function(){var a=new na(this.Ic.Ng),b=this.Ic.Gc,c;for(c in b)a.add(b[c].key);return a};
Ka.prototype.toArray=Ka.prototype.Ee=function(){var a=this.Ic.Gc,b=Array(this.Ic.Fd),c=0,d;for(d in a)b[c]=a[d].key,c++;return b};Ka.prototype.toList=Ka.prototype.EH=function(){var a=new F(this.Y),b=this.Ic.Gc,c;for(c in b)a.add(b[c].key);return a};y.A(Ka,{count:"count"},function(){return this.Ic.Fd});y.A(Ka,{k:"iterator"},function(){return 0>=this.Ic.Fd?y.$f:new Ja(this.Ic)});function Ia(a,b){this.key=a;this.value=b;this.cn=this.Li=q}y.Md(Ia,{key:h,value:h});
Ia.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"};function Ma(a){this.Ic=a;this.reset()}y.Md(Ma,{key:h,value:h});y.A(Ma,{k:"iterator"},function(){return this});Ma.prototype.reset=Ma.prototype.reset=function(){var a=this.Ic;a.Mg=q;this.Ya=a.Kb;this.Gd=q};
Ma.prototype.next=Ma.prototype.next=function(){var a=this.Ic;a.Kb!==this.Ya&&y.m("the Map has been modified during iteration");var b=this.Gd,b=b===q?a.le:b.Li;if(b!==q)return this.Gd=b,this.key=b.key,this.value=b.value,h;this.eg();return s};Ma.prototype.first=Ma.prototype.ob=function(){var a=this.Ic;this.Ya=a.Kb;a=a.le;if(a!==q){this.Gd=a;var b=a.key;this.key=b;this.value=a.value;return b}return q};y.A(Ma,{count:"count"},function(){return this.Ic.Fd});
Ma.prototype.eg=function(){this.value=this.key=q;this.Ya=-1;this.Ic.Mg=this};Ma.prototype.toString=function(){return this.Gd!==q?"MapIterator@"+this.Gd:"MapIterator"};
function ma(a,b){y.mc(this);this.$a=s;a===f||a===q?this.Ng=q:"string"===typeof a?"object"===a||"string"===a||"number"===a?this.Ng=a:y.ka(a,"the string 'object', 'number' or 'string'","Map constructor: keytype"):"function"===typeof a?this.Ng=a===Object?"object":a===String?"string":a===Number?"number":a:y.ka(a,"null, a primitive type name, or a class type","Map constructor: keytype");b===f||b===q?this.Vh=q:"string"===typeof b?"object"===b||"string"===b||"boolean"===b||"number"===b||"function"===b?this.Vh=
b:y.ka(b,"the string 'object', 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):"function"===typeof b?this.Vh=b===Object?"object":b===String?"string":b===Number?"number":b===Boolean?"boolean":b===Function?"function":b:y.ka(b,"null, a primitive type name, or a class type","Map constructor: valtype");this.Gc={};this.Fd=0;this.Mg=q;this.Kb=0;this.Og=this.le=q}y.ba("Map",ma);
function Na(a,b){a.Ng!==q&&("string"===typeof a.Ng?(typeof b!==a.Ng||b===q)&&y.Jb(b,a.Ng):b instanceof a.Ng||y.Jb(b,a.Ng))}ma.prototype.rd=function(){var a=this.Kb;a++;999999999<a&&(a=0);this.Kb=a};ma.prototype.freeze=ma.prototype.freeze=function(){this.$a=h;return this};ma.prototype.thaw=ma.prototype.Pa=function(){this.$a=s;return this};ma.prototype.toString=function(){return"Map("+y.eh(this.Ng)+","+y.eh(this.Vh)+")#"+y.bc(this)};
ma.prototype.add=ma.prototype.add=function(a,b){x&&(Na(this,a),this.Vh!==q&&("string"===typeof this.Vh?(typeof b!==this.Vh||b===q)&&y.Jb(b,this.Vh):b instanceof this.Vh||y.Jb(b,this.Vh)));y.K(this,a);var c=a;y.tb(a)&&(c=y.Dr(a));var d=this.Gc[c];if(d===f)return this.Fd++,d=new Ia(a,b),this.Gc[c]=d,c=this.Og,c===q?this.le=d:(d.cn=c,c.Li=d),this.Og=d,this.rd(),h;d.value=b;return s};
ma.prototype.addAll=ma.prototype.Me=function(a){if(a===q)return this;x&&y.l(a,ma,ma,"addAll:map");for(a=a.k;a.next();)this.add(a.key,a.value);return this};ma.prototype.contains=ma.prototype.contains=function(a){x&&Na(this,a);var b=a;return y.tb(a)&&(b=y.bc(a),b===f)?s:this.Gc[b]!==f};ma.prototype.getValue=ma.prototype.wa=function(a){x&&Na(this,a);var b=a;if(y.tb(a)&&(b=y.bc(a),b===f))return q;a=this.Gc[b];return a===f?q:a.value};
ma.prototype.remove=ma.prototype.remove=function(a){if(a===q)return s;x&&Na(this,a);y.K(this,a);var b=a;if(y.tb(a)&&(b=y.bc(a),b===f))return s;a=this.Gc[b];if(a===f)return s;var c=a.Li,d=a.cn;c!==q&&(c.cn=d);d!==q&&(d.Li=c);this.le===a&&(this.le=c);this.Og===a&&(this.Og=d);delete this.Gc[b];this.Fd--;this.rd();return h};ma.prototype.clear=ma.prototype.clear=function(){y.K(this);this.Gc={};this.Fd=0;this.Og=this.le=q;this.rd()};
ma.prototype.copy=function(){var a=new ma(this.Ng,this.Vh),b=this.Gc,c;for(c in b){var d=b[c];a.add(d.key,d.value)}return a};ma.prototype.toArray=ma.prototype.Ee=function(){var a=this.Gc,b=Array(this.Fd),c=0,d;for(d in a){var e=a[d];b[c]=new Ia(e.key,e.value);c++}return b};ma.prototype.toKeySet=ma.prototype.Ok=function(){return new Ka(this)};y.A(ma,{count:"count"},w("Fd"));y.A(ma,{k:"iterator"},function(){if(0>=this.count)return y.$f;var a=this.Mg;return a!==q?(a.reset(),a):new Ma(this)});
function A(a,b){a===f||b===f?this.y=this.x=0:!x||"number"===typeof a&&"number"===typeof b?(this.x=a,this.y=b):y.m("Invalid arguments to Point constructor")}y.ba("Point",A);y.Md(A,{x:h,y:h});A.prototype.assign=function(a){this.x=a.x;this.y=a.y};A.prototype.q=function(a,b){this.x=a;this.y=b};A.prototype.setTo=A.prototype.Ao=function(a,b){x&&(y.j(a,"number",A,"setTo:x"),y.j(b,"number",A,"setTo:y"));y.K(this);this.x=a;this.y=b;return this};
A.prototype.set=A.prototype.set=function(a){x&&y.l(a,A,A,"set:p");y.K(this);this.x=a.x;this.y=a.y;return this};A.prototype.copy=function(){var a=new A;a.x=this.x;a.y=this.y;return a};A.prototype.Ja=function(){this.$a=h;Object.freeze(this);return this};A.prototype.U=function(){return Object.isFrozen(this)?this:this.copy().freeze()};A.prototype.freeze=function(){this.$a=h;return this};A.prototype.Pa=function(){Object.isFrozen(this)&&y.m("cannot thaw constant: "+this);this.$a=s;return this};
A.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new A(c,e)}return new A};A.stringify=function(a){return a instanceof A?a.x.toString()+" "+a.y.toString():a.toString()};A.prototype.toString=function(){return"Point("+this.x+","+this.y+")"};A.prototype.equals=A.prototype.L=function(a){return!(a instanceof A)?s:this.x===a.x&&this.y===a.y};
A.prototype.equalTo=A.prototype.xy=function(a,b){return this.x===a&&this.y===b};A.prototype.nj=function(a){return H.Ha(this.x,a.x)&&H.Ha(this.y,a.y)};A.prototype.di=function(a){return H.I(this.x,a.x)&&H.I(this.y,a.y)};A.prototype.add=A.prototype.add=function(a){x&&y.l(a,A,A,"add:p");y.K(this);this.x+=a.x;this.y+=a.y;return this};A.prototype.subtract=A.prototype.ss=function(a){x&&y.l(a,A,A,"subtract:p");y.K(this);this.x-=a.x;this.y-=a.y;return this};
A.prototype.offset=A.prototype.offset=function(a,b){x&&(y.p(a,A,"offset:dx"),y.p(b,A,"offset:dy"));y.K(this);this.x+=a;this.y+=b;return this};A.prototype.rotate=A.prototype.rotate=function(a){x&&y.p(a,A,"rotate:angle");y.K(this);if(0===a)return this;var b=this.x,c=this.y;if(0===b&&0===c)return this;var d=a*Math.PI/180;a=Math.cos(d);d=Math.sin(d);this.x=a*b-d*c;this.y=d*b+a*c;return this};
A.prototype.scale=A.prototype.scale=function(a,b){x&&(y.p(a,A,"scale:sx"),y.p(b,A,"scale:sy"));this.x*=a;this.y*=b;return this};A.prototype.distanceSquaredPoint=A.prototype.xk=function(a){x&&y.l(a,A,A,"distanceSquaredPoint:p");var b=a.x-this.x;a=a.y-this.y;return b*b+a*a};A.prototype.distanceSquared=A.prototype.sr=function(a,b){x&&(y.p(a,A,"distanceSquared:px"),y.p(b,A,"distanceSquared:py"));var c=a-this.x,d=b-this.y;return c*c+d*d};
A.prototype.normalize=A.prototype.normalize=function(){y.K(this);var a=this.x,b=this.y,c=Math.sqrt(a*a+b*b);0<c&&(this.x=a/c,this.y=b/c);return this};A.prototype.directionPoint=A.prototype.ai=function(a){x&&y.l(a,A,A,"directionPoint:p");return Ra(a.x-this.x,a.y-this.y)};A.prototype.direction=A.prototype.direction=function(a,b){x&&(y.p(a,A,"direction:px"),y.p(b,A,"direction:py"));return Ra(a-this.x,b-this.y)};
function Ra(a,b){if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;var c=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?c=0>b?c+180:180-c:0>b&&(c=360-c);return c}A.prototype.setRectSpot=A.prototype.ms=function(a,b){x&&(y.l(a,B,A,"setRectSpot:r"),y.l(b,J,A,"setRectSpot:spot"));y.K(this);this.x=a.x+b.x*a.width+b.offsetX;this.y=a.y+b.y*a.height+b.offsetY;return this};
A.prototype.setSpot=A.prototype.ns=function(a,b,c,d,e){x&&(y.p(a,A,"setSpot:x"),y.p(b,A,"setSpot:y"),y.p(c,A,"setSpot:w"),y.p(d,A,"setSpot:h"),(0>c||0>d)&&y.m("Point.setSpot:Width and height cannot be negative"),y.l(e,J,A,"setSpot:spot"));y.K(this);this.x=a+e.x*c+e.offsetX;this.y=b+e.y*d+e.offsetY;return this};A.prototype.transform=function(a){x&&y.l(a,ka,A,"transform:t");a.Qa(this);return this};function Ta(a,b){x&&y.l(b,ka,A,"transformInverted:t");b.gi(a);return a}var Ua;
A.distanceLineSegmentSquared=Ua=function(a,b,c,d,e,g){x&&(y.p(a,A,"distanceLineSegmentSquared:px"),y.p(b,A,"distanceLineSegmentSquared:py"),y.p(c,A,"distanceLineSegmentSquared:ax"),y.p(d,A,"distanceLineSegmentSquared:ay"),y.p(e,A,"distanceLineSegmentSquared:bx"),y.p(g,A,"distanceLineSegmentSquared:by"));var k=e-c,l=g-d,m=k*k+l*l;c-=a;d-=b;var n=-c*k-d*l;if(0>=n||n>=m)return k=e-a,l=g-b,Math.min(c*c+d*d,k*k+l*l);a=k*d-l*c;return a*a/m};var Va;
A.distanceSquared=Va=function(a,b,c,d){x&&(y.p(a,A,"distanceSquared:px"),y.p(b,A,"distanceSquared:py"),y.p(c,A,"distanceSquared:qx"),y.p(d,A,"distanceSquared:qy"));a=c-a;b=d-b;return a*a+b*b};var Ya;
A.direction=Ya=function(a,b,c,d){x&&(y.p(a,A,"direction:px"),y.p(b,A,"direction:py"),y.p(c,A,"direction:qx"),y.p(d,A,"direction:qy"));a=c-a;b=d-b;if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;d=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?d=0>b?d+180:180-d:0>b&&(d=360-d);return d};A.prototype.isReal=A.prototype.V=function(){return isFinite(this.x)&&isFinite(this.y)};
function ha(a,b){a===f||b===f?this.height=this.width=0:!x||"number"===typeof a&&(0<=a||isNaN(a))&&"number"===typeof b&&(0<=b||isNaN(b))?(this.width=a,this.height=b):y.m("Invalid arguments to Size constructor")}y.ba("Size",ha);y.Md(ha,{width:h,height:h});ha.prototype.assign=function(a){this.width=a.width;this.height=a.height};ha.prototype.q=function(a,b){this.width=a;this.height=b};
ha.prototype.setTo=ha.prototype.Ao=function(a,b){x&&(y.j(a,"number",ha,"setTo:w"),y.j(b,"number",ha,"setTo:h"));0>a&&y.ka(a,">= 0",ha,"setTo:w");0>b&&y.ka(b,">= 0",ha,"setTo:h");y.K(this);this.width=a;this.height=b;return this};ha.prototype.set=ha.prototype.set=function(a){x&&y.l(a,ha,ha,"set:s");y.K(this);this.width=a.width;this.height=a.height;return this};ha.prototype.copy=function(){var a=new ha;a.width=this.width;a.height=this.height;return a};
ha.prototype.Ja=function(){this.$a=h;Object.freeze(this);return this};ha.prototype.U=function(){return Object.isFrozen(this)?this:this.copy().freeze()};ha.prototype.freeze=function(){this.$a=h;return this};ha.prototype.Pa=function(){Object.isFrozen(this)&&y.m("cannot thaw constant: "+this);this.$a=s;return this};
ha.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new ha(c,e)}return new ha};ha.stringify=function(a){return a instanceof ha?a.width.toString()+" "+a.height.toString():a.toString()};ha.prototype.toString=function(){return"Size("+this.width+","+this.height+")"};
ha.prototype.equals=ha.prototype.L=function(a){return!(a instanceof ha)?s:this.width===a.width&&this.height===a.height};ha.prototype.equalTo=ha.prototype.xy=function(a,b){return this.width===a&&this.height===b};ha.prototype.nj=function(a){return H.Ha(this.width,a.width)&&H.Ha(this.height,a.height)};ha.prototype.di=function(a){return H.I(this.width,a.width)&&H.I(this.height,a.height)};ha.prototype.isReal=ha.prototype.V=function(){return isFinite(this.width)&&isFinite(this.height)};
function B(a,b,c,d){a===f?this.height=this.width=this.y=this.x=0:a instanceof A?b instanceof A?(this.x=Math.min(a.x,b.x),this.y=Math.min(a.y,b.y),this.width=Math.abs(a.x-b.x),this.height=Math.abs(a.y-b.y)):b instanceof ha?(this.x=a.x,this.y=a.y,this.width=b.width,this.height=b.height):y.m("Incorrect arguments supplied"):!x||"number"===typeof a&&"number"===typeof b&&"number"===typeof c&&(0<=c||isNaN(c))&&"number"===typeof d&&(0<=d||isNaN(d))?(this.x=a,this.y=b,this.width=c,this.height=d):y.m("Invalid arguments to Rect constructor")}
y.ba("Rect",B);y.Md(B,{x:h,y:h,width:h,height:h});B.prototype.assign=function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height};B.prototype.q=function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d};function Za(a,b,c){a.width=b;a.height=c}
B.prototype.setTo=B.prototype.Ao=function(a,b,c,d){x&&(y.j(a,"number",B,"setTo:x"),y.j(b,"number",B,"setTo:y"),y.j(c,"number",B,"setTo:w"),y.j(d,"number",B,"setTo:h"));0>c&&y.ka(c,">= 0",B,"setTo:w");0>d&&y.ka(d,">= 0",B,"setTo:h");y.K(this);this.x=a;this.y=b;this.width=c;this.height=d;return this};B.prototype.set=B.prototype.set=function(a){x&&y.l(a,B,B,"set:r");y.K(this);this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height;return this};
B.prototype.setPoint=B.prototype.bf=function(a){x&&y.l(a,A,B,"setPoint:p");y.K(this);this.x=a.x;this.y=a.y;return this};B.prototype.setSize=B.prototype.vJ=function(a){x&&y.l(a,ha,B,"setSize:s");y.K(this);this.width=a.width;this.height=a.height;return this};B.prototype.copy=function(){var a=new B;a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;return a};B.prototype.Ja=function(){this.$a=h;Object.freeze(this);return this};B.prototype.U=function(){return Object.isFrozen(this)?this:this.copy().freeze()};
B.prototype.freeze=function(){this.$a=h;return this};B.prototype.Pa=function(){Object.isFrozen(this)&&y.m("cannot thaw constant: "+this);this.$a=s;return this};B.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));for(var k=0;""===a[b];)b++;(d=a[b++])&&(k=parseFloat(d));return new B(c,e,g,k)}return new B};
B.stringify=function(a){return a instanceof B?a.x.toString()+" "+a.y.toString()+" "+a.width.toString()+" "+a.height.toString():a.toString()};B.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"};B.prototype.equals=B.prototype.L=function(a){return!(a instanceof B)?s:this.x===a.x&&this.y===a.y&&this.width===a.width&&this.height===a.height};B.prototype.equalTo=B.prototype.xy=function(a,b,c,d){return this.x===a&&this.y===b&&this.width===c&&this.height===d};
B.prototype.nj=function(a){return H.Ha(this.x,a.x)&&H.Ha(this.y,a.y)&&H.Ha(this.width,a.width)&&H.Ha(this.height,a.height)};B.prototype.di=function(a){return H.I(this.x,a.x)&&H.I(this.y,a.y)&&H.I(this.width,a.width)&&H.I(this.height,a.height)};B.prototype.containsPoint=B.prototype.Ea=function(a){x&&y.l(a,A,B,"containsPoint:p");return this.x<=a.x&&this.x+this.width>=a.x&&this.y<=a.y&&this.y+this.height>=a.y};
B.prototype.containsRect=B.prototype.ij=function(a){x&&y.l(a,B,B,"containsRect:r");return this.x<=a.x&&a.x+a.width<=this.x+this.width&&this.y<=a.y&&a.y+a.height<=this.y+this.height};
B.prototype.contains=B.prototype.contains=function(a,b,c,d){x?(y.p(a,B,"contains:x"),y.p(b,B,"contains:y"),c===f?c=0:y.p(c,B,"contains:w"),d===f?d=0:y.p(d,B,"contains:h"),(0>c||0>d)&&y.m("Rect.contains:Width and height cannot be negative")):(c===f&&(c=0),d===f&&(d=0));return this.x<=a&&a+c<=this.x+this.width&&this.y<=b&&b+d<=this.y+this.height};B.prototype.reset=function(){y.K(this);this.height=this.width=this.y=this.x=0};
B.prototype.offset=B.prototype.offset=function(a,b){x&&(y.p(a,B,"offset:dx"),y.p(b,B,"offset:dy"));y.K(this);this.x+=a;this.y+=b;return this};B.prototype.inflate=B.prototype.qg=function(a,b){x&&(y.p(a,B,"inflate:w"),y.p(b,B,"inflate:h"));return $a(this,b,a,b,a)};B.prototype.addMargin=B.prototype.qu=function(a){x&&y.l(a,ab,B,"addMargin:m");return $a(this,a.top,a.right,a.bottom,a.left)};
B.prototype.subtractMargin=B.prototype.zH=function(a){x&&y.l(a,ab,B,"subtractMargin:m");return $a(this,-a.top,-a.right,-a.bottom,-a.left)};B.prototype.grow=B.prototype.MI=function(a,b,c,d){x&&(y.p(a,B,"grow:t"),y.p(b,B,"grow:r"),y.p(c,B,"grow:b"),y.p(d,B,"grow:l"));return $a(this,a,b,c,d)};function $a(a,b,c,d,e){y.K(a);var g=a.width;c+e<=-g?(a.x+=g/2,a.width=0):(a.x-=e,a.width+=c+e);c=a.height;b+d<=-c?(a.y+=c/2,a.height=0):(a.y-=b,a.height+=b+d);return a}
B.prototype.intersectRect=B.prototype.RI=function(a){x&&y.l(a,B,B,"intersectRect:r");return bb(this,a.x,a.y,a.width,a.height)};B.prototype.intersect=B.prototype.QI=function(a,b,c,d){x&&(y.p(a,B,"intersect:x"),y.p(b,B,"intersect:y"),y.p(c,B,"intersect:w"),y.p(d,B,"intersect:h"),(0>c||0>d)&&y.m("Rect.intersect:Width and height cannot be negative"));return bb(this,a,b,c,d)};
function bb(a,b,c,d,e){y.K(a);var g=Math.max(a.x,b),k=Math.max(a.y,c);b=Math.min(a.x+a.width,b+d);c=Math.min(a.y+a.height,c+e);a.x=g;a.y=k;a.width=Math.max(0,b-g);a.height=Math.max(0,c-k);return a}B.prototype.intersectsRect=B.prototype.qf=function(a){x&&y.l(a,B,B,"intersectsRect:r");return this.IC(a.x,a.y,a.width,a.height)};
B.prototype.intersects=B.prototype.IC=function(a,b,c,d){x&&(y.p(a,B,"intersects:x"),y.p(b,B,"intersects:y"),y.p(a,B,"intersects:w"),y.p(b,B,"intersects:h"),(0>c||0>d)&&y.m("Rect.intersects:Width and height cannot be negative"));var e=this.width,g=this.x;if(Infinity!==e&&Infinity!==c&&(e+=g,c+=a,isNaN(c)||isNaN(e)||g>c||a>e))return s;a=this.height;c=this.y;return Infinity!==a&&Infinity!==d&&(a+=c,d+=b,isNaN(d)||isNaN(a)||c>d||b>a)?s:h};
function cb(a,b){var c=a.width,d=b.width+10+10,e=a.x,g=b.x-10;if(e>d+g||g>c+e)return s;c=a.height;d=b.height+10+10;e=a.y;g=b.y-10;return e>d+g||g>c+e?s:h}B.prototype.unionPoint=B.prototype.yj=function(a){x&&y.l(a,A,B,"unionPoint:p");return hb(this,a.x,a.y,0,0)};B.prototype.unionRect=B.prototype.zj=function(a){x&&y.l(a,B,B,"unionRect:r");return hb(this,a.x,a.y,a.width,a.height)};
B.prototype.union=B.prototype.tE=function(a,b,c,d){y.K(this);x?(y.p(a,B,"union:x"),y.p(b,B,"union:y"),c===f?c=0:y.p(c,B,"union:w"),d===f?d=0:y.p(d,B,"union:h"),(0>c||0>d)&&y.m("Rect.union:Width and height cannot be negative")):(c===f&&(c=0),d===f&&(d=0));return hb(this,a,b,c,d)};function hb(a,b,c,d,e){var g=Math.min(a.x,b),k=Math.min(a.y,c);b=Math.max(a.x+a.width,b+d);c=Math.max(a.y+a.height,c+e);a.x=g;a.y=k;a.width=b-g;a.height=c-k;return a}
B.prototype.setSpot=B.prototype.ns=function(a,b,c){x&&(y.p(a,B,"setSpot:x"),y.p(b,B,"setSpot:y"),y.l(c,J,B,"setSpot:spot"));y.K(this);this.x=a-c.offsetX-c.x*this.width;this.y=b-c.offsetY-c.y*this.height;return this};var kb;
B.contains=kb=function(a,b,c,d,e,g,k,l){x?(y.p(a,B,"contains:rx"),y.p(b,B,"contains:ry"),y.p(c,B,"contains:rw"),y.p(d,B,"contains:rh"),y.p(e,B,"contains:x"),y.p(g,B,"contains:y"),k===f?k=0:y.p(k,B,"contains:w"),l===f?l=0:y.p(l,B,"contains:h"),(0>c||0>d||0>k||0>l)&&y.m("Rect.contains:Width and height cannot be negative")):(k===f&&(k=0),l===f&&(l=0));return a<=e&&e+k<=a+c&&b<=g&&g+l<=b+d};
B.intersects=function(a,b,c,d,e,g,k,l){x&&(y.p(a,B,"intersects:rx"),y.p(b,B,"intersects:ry"),y.p(c,B,"intersects:rw"),y.p(d,B,"intersects:rh"),y.p(e,B,"intersects:x"),y.p(g,B,"intersects:y"),y.p(k,B,"intersects:w"),y.p(l,B,"intersects:h"),(0>c||0>d||0>k||0>l)&&y.m("Rect.intersects:Width and height cannot be negative"));c+=a;k+=e;if(a>k||e>c)return s;a=d+b;l+=g;return b>l||g>a?s:h};y.g(B,"left",B.prototype.left);
y.defineProperty(B,{left:"left"},w("x"),function(a){y.K(this,a);x&&y.j(a,"number",B,"left");this.x=a});y.g(B,"top",B.prototype.top);y.defineProperty(B,{top:"top"},w("y"),function(a){y.K(this,a);x&&y.j(a,"number",B,"top");this.y=a});y.g(B,"right",B.prototype.right);y.defineProperty(B,{right:"right"},function(){return this.x+this.width},function(a){y.K(this,a);x&&y.p(a,B,"right");this.x+=a-(this.x+this.width)});y.g(B,"bottom",B.prototype.bottom);
y.defineProperty(B,{bottom:"bottom"},function(){return this.y+this.height},function(a){y.K(this,a);x&&y.p(a,B,"top");this.y+=a-(this.y+this.height)});y.g(B,"position",B.prototype.position);y.defineProperty(B,{position:"position"},function(){return new A(this.x,this.y)},function(a){y.K(this,a);x&&y.l(a,A,B,"position");this.x=a.x;this.y=a.y});y.g(B,"size",B.prototype.size);
y.defineProperty(B,{size:"size"},function(){return new ha(this.width,this.height)},function(a){y.K(this,a);x&&y.l(a,ha,B,"size");this.width=a.width;this.height=a.height});y.g(B,"center",B.prototype.ny);y.defineProperty(B,{ny:"center"},function(){return new A(this.x+this.width/2,this.y+this.height/2)},function(a){y.K(this,a);x&&y.l(a,A,B,"center");this.x=a.x-this.width/2;this.y=a.y-this.height/2});y.g(B,"centerX",B.prototype.xa);
y.defineProperty(B,{xa:"centerX"},function(){return this.x+this.width/2},function(a){y.K(this,a);x&&y.p(a,B,"centerX");this.x=a-this.width/2});y.g(B,"centerY",B.prototype.Ga);y.defineProperty(B,{Ga:"centerY"},function(){return this.y+this.height/2},function(a){y.K(this,a);x&&y.p(a,B,"centerY");this.y=a-this.height/2});B.prototype.isReal=B.prototype.V=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)};
B.prototype.isEmpty=B.prototype.SI=function(){return 0===this.width&&0===this.height};function ab(a,b,c,d){a===f?this.left=this.bottom=this.right=this.top=0:b===f?this.left=this.bottom=this.right=this.top=a:c===f?(d=b,this.top=a,this.right=b,this.bottom=a,this.left=d):d!==f?(this.top=a,this.right=b,this.bottom=c,this.left=d):y.m("Invalid arguments to Margin constructor")}y.ba("Margin",ab);y.Md(ab,{top:h,right:h,bottom:h,left:h});
ab.prototype.assign=function(a){this.top=a.top;this.right=a.right;this.bottom=a.bottom;this.left=a.left};ab.prototype.setTo=ab.prototype.Ao=function(a,b,c,d){x&&(y.j(a,"number",ab,"setTo:t"),y.j(b,"number",ab,"setTo:r"),y.j(c,"number",ab,"setTo:b"),y.j(d,"number",ab,"setTo:l"));y.K(this);this.top=a;this.right=b;this.bottom=c;this.left=d;return this};
ab.prototype.set=ab.prototype.set=function(a){x&&y.l(a,ab,ab,"assign:m");y.K(this);this.top=a.top;this.right=a.right;this.bottom=a.bottom;this.left=a.left;return this};ab.prototype.copy=function(){var a=new ab;a.top=this.top;a.right=this.right;a.bottom=this.bottom;a.left=this.left;return a};ab.prototype.Ja=function(){this.$a=h;Object.freeze(this);return this};ab.prototype.U=function(){return Object.isFrozen(this)?this:this.copy().freeze()};ab.prototype.freeze=function(){this.$a=h;return this};
ab.prototype.Pa=function(){Object.isFrozen(this)&&y.m("cannot thaw constant: "+this);this.$a=s;return this};ab.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));for(var k=0;""===a[b];)b++;(d=a[b++])&&(k=parseFloat(d));return new ab(c,e,g,k)}return new ab};
ab.stringify=function(a){return a instanceof ab?a.top.toString()+" "+a.right.toString()+" "+a.bottom.toString()+" "+a.left.toString():a.toString()};ab.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"};ab.prototype.equals=ab.prototype.L=function(a){return!(a instanceof ab)?s:this.top===a.top&&this.right===a.right&&this.bottom===a.bottom&&this.left===a.left};
ab.prototype.equalTo=ab.prototype.xy=function(a,b,c,d){return this.top===a&&this.right===b&&this.bottom===c&&this.left===d};ab.prototype.nj=function(a){return H.Ha(this.top,a.top)&&H.Ha(this.right,a.right)&&H.Ha(this.bottom,a.bottom)&&H.Ha(this.left,a.left)};ab.prototype.di=function(a){return H.I(this.top,a.top)&&H.I(this.right,a.right)&&H.I(this.bottom,a.bottom)&&H.I(this.left,a.left)};
ab.prototype.isReal=ab.prototype.V=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)};function ka(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0}y.Md(ka,{m11:h,m12:h,m21:h,m22:h,dx:h,dy:h});ka.prototype.set=ka.prototype.set=function(a){x&&y.l(a,ka,ka,"set:t");this.m11=a.m11;this.m12=a.m12;this.m21=a.m21;this.m22=a.m22;this.dx=a.dx;this.dy=a.dy;return this};
ka.prototype.copy=function(){var a=new ka;a.m11=this.m11;a.m12=this.m12;a.m21=this.m21;a.m22=this.m22;a.dx=this.dx;a.dy=this.dy;return a};ka.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"};ka.prototype.equals=ka.prototype.L=function(a){return!(a instanceof ka)?s:this.m11===a.m11&&this.m12===a.m12&&this.m21===a.m21&&this.m22===a.m22&&this.dx===a.dx&&this.dy===a.dy};
ka.prototype.reset=ka.prototype.reset=function(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0};ka.prototype.multiply=ka.prototype.multiply=function(a){x&&y.l(a,ka,ka,"multiply:matrix");var b=this.m12*a.m11+this.m22*a.m12,c=this.m11*a.m21+this.m21*a.m22,d=this.m12*a.m21+this.m22*a.m22,e=this.m11*a.dx+this.m21*a.dy+this.dx,g=this.m12*a.dx+this.m22*a.dy+this.dy;this.m11=this.m11*a.m11+this.m21*a.m12;this.m12=b;this.m21=c;this.m22=d;this.dx=e;this.dy=g;return this};
ka.prototype.multiplyInverted=ka.prototype.iD=function(a){x&&y.l(a,ka,ka,"multiplyInverted:matrix");var b=1/(a.m11*a.m22-a.m12*a.m21),c=a.m22*b,d=-a.m12*b,e=-a.m21*b,g=a.m11*b,k=b*(a.m21*a.dy-a.m22*a.dx),l=b*(a.m12*a.dx-a.m11*a.dy);a=this.m12*c+this.m22*d;b=this.m11*e+this.m21*g;e=this.m12*e+this.m22*g;g=this.m11*k+this.m21*l+this.dx;k=this.m12*k+this.m22*l+this.dy;this.m11=this.m11*c+this.m21*d;this.m12=a;this.m21=b;this.m22=e;this.dx=g;this.dy=k;return this};
ka.prototype.invert=ka.prototype.Iy=function(){var a=1/(this.m11*this.m22-this.m12*this.m21),b=-this.m12*a,c=-this.m21*a,d=this.m11*a,e=a*(this.m21*this.dy-this.m22*this.dx),g=a*(this.m12*this.dx-this.m11*this.dy);this.m11=this.m22*a;this.m12=b;this.m21=c;this.m22=d;this.dx=e;this.dy=g};
ka.prototype.rotate=ka.prototype.rotate=function(a,b,c){x&&(y.p(a,ka,"rotate:angle"),y.p(b,ka,"rotate:rx"),y.p(c,ka,"rotate:ry"));this.translate(b,c);var d=a*Math.PI/180;a=Math.cos(d);var d=Math.sin(d),e=this.m12*a+this.m22*d,g=this.m11*-d+this.m21*a,k=this.m12*-d+this.m22*a;this.m11=this.m11*a+this.m21*d;this.m12=e;this.m21=g;this.m22=k;this.translate(-b,-c)};
ka.prototype.translate=ka.prototype.translate=function(a,b){x&&(y.p(a,ka,"translate:x"),y.p(b,ka,"translate:y"));this.dx+=this.m11*a+this.m21*b;this.dy+=this.m12*a+this.m22*b};ka.prototype.scale=ka.prototype.scale=function(a,b){b===f&&(b=a);x&&(y.p(a,ka,"translate:sx"),y.p(b,ka,"translate:sy"));this.m11*=a;this.m12*=a;this.m21*=b;this.m22*=b};
ka.prototype.transformPoint=ka.prototype.Qa=function(a){x&&y.l(a,A,ka,"transformPoint:p");var b=a.x,c=a.y;a.x=b*this.m11+c*this.m21+this.dx;a.y=b*this.m12+c*this.m22+this.dy;return a};ka.prototype.invertedTransformPoint=ka.prototype.gi=function(a){x&&y.l(a,A,ka,"invertedTransformPoint:p");var b=1/(this.m11*this.m22-this.m12*this.m21),c=-this.m12*b,d=this.m11*b,e=b*(this.m12*this.dx-this.m11*this.dy),g=a.x,k=a.y;a.x=g*this.m22*b+k*-this.m21*b+b*(this.m21*this.dy-this.m22*this.dx);a.y=g*c+k*d+e;return a};
ka.prototype.transformRect=ka.prototype.oE=function(a){x&&y.l(a,B,ka,"transformRect:rect");var b=a.x,c=a.y,d=b+a.width,e=c+a.height,g=this.m11,k=this.m12,l=this.m21,m=this.m22,n=this.dx,p=this.dy,r=b*g+c*l+n,t=b*k+c*m+p,u=d*g+c*l+n,c=d*k+c*m+p,v=b*g+e*l+n,b=b*k+e*m+p,g=d*g+e*l+n,d=d*k+e*m+p,e=r,k=t,r=Math.min(r,u),e=Math.max(e,u),k=Math.min(k,c),t=Math.max(t,c),r=Math.min(r,v),e=Math.max(e,v),k=Math.min(k,b),t=Math.max(t,b),r=Math.min(r,g),e=Math.max(e,g),k=Math.min(k,d),t=Math.max(t,d);a.x=r;a.y=
k;a.width=e-r;a.height=t-k};ka.prototype.isIdentity=ka.prototype.Ir=function(){return 1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22&&0===this.dx&&0===this.dy};function J(a,b,c,d){a===f?this.offsetY=this.offsetX=this.y=this.x=0:(b===f&&(b=0),c===f&&(c=0),d===f&&(d=0),this.x=a,this.y=b,this.offsetX=c,this.offsetY=d)}y.ba("Spot",J);y.Md(J,{x:h,y:h,offsetX:h,offsetY:h});J.prototype.assign=function(a){this.x=a.x;this.y=a.y;this.offsetX=a.offsetX;this.offsetY=a.offsetY};
J.prototype.setTo=J.prototype.Ao=function(a,b,c,d){x&&(lb(a,"setTo:x"),lb(b,"setTo:y"),mb(c,"setTo:offx"),mb(d,"setTo:offy"));y.K(this);this.x=a;this.y=b;this.offsetX=c;this.offsetY=d;return this};J.prototype.set=J.prototype.set=function(a){x&&y.l(a,J,J,"set:s");y.K(this);this.x=a.x;this.y=a.y;this.offsetX=a.offsetX;this.offsetY=a.offsetY;return this};J.prototype.copy=function(){var a=new J;a.x=this.x;a.y=this.y;a.offsetX=this.offsetX;a.offsetY=this.offsetY;return a};
J.prototype.Ja=function(){this.$a=h;Object.freeze(this);return this};J.prototype.U=function(){return Object.isFrozen(this)?this:this.copy().freeze()};J.prototype.freeze=function(){this.$a=h;return this};J.prototype.Pa=function(){Object.isFrozen(this)&&y.m("cannot thaw constant: "+this);this.$a=s;return this};function nb(a,b){a.x=NaN;a.y=NaN;a.offsetX=b;return a}function lb(a,b){(isNaN(a)||1<a||0>a)&&y.ka(a,"0 <= "+b+" <= 1",J,b)}
function mb(a,b){(isNaN(a)||Infinity===a||-Infinity===a)&&y.ka(a,"real number, not NaN or Infinity",J,b)}var vb;
J.parse=vb=function(a){if("string"===typeof a){a=a.trim();if("None"===a)return y.NONE;if("TopLeft"===a)return y.bw;if("Top"===a||"TopCenter"===a||"MiddleTop"===a)return y.Jo;if("TopRight"===a)return y.dw;if("Left"===a||"LeftCenter"===a||"MiddleLeft"===a)return y.Ho;if("Center"===a)return y.Rv;if("Right"===a||"RightCenter"===a||"MiddleRight"===a)return y.Io;if("BottomLeft"===a)return y.Mv;if("Bottom"===a||"BottomCenter"===a||"MiddleBottom"===a)return y.Go;if("BottomRight"===a)return y.Ov;if("TopSide"===
a)return y.fw;if("LeftSide"===a)return y.Uv;if("RightSide"===a)return y.$v;if("BottomSide"===a)return y.Qv;if("TopBottomSides"===a)return y.aw;if("LeftRightSides"===a)return y.Tv;if("TopLeftSides"===a)return y.cw;if("TopRightSides"===a)return y.ew;if("BottomLeftSides"===a)return y.Nv;if("BottomRightSides"===a)return y.Pv;if("NotTopSide"===a)return y.Yv;if("NotLeftSide"===a)return y.Wv;if("NotRightSide"===a)return y.Xv;if("NotBottomSide"===a)return y.Vv;if("AllSides"===a)return y.Lv;if("Default"===
a)return y.Sv;a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));for(var k=0;""===a[b];)b++;(d=a[b++])&&(k=parseFloat(d));return new J(c,e,g,k)}return new J};J.stringify=function(a){return a instanceof J?yb(a)?a.x.toString()+" "+a.y.toString()+" "+a.offsetX.toString()+" "+a.offsetY.toString():a.toString():a.toString()};
J.prototype.toString=function(){return yb(this)?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.L(y.NONE)?"None":this.L(y.bw)?"TopLeft":this.L(y.Jo)?"Top":this.L(y.dw)?"TopRight":this.L(y.Ho)?"Left":this.L(y.Rv)?"Center":this.L(y.Io)?"Right":this.L(y.Mv)?"BottomLeft":this.L(y.Go)?"Bottom":this.L(y.Ov)?"BottomRight":this.L(y.fw)?"TopSide":this.L(y.Uv)?"LeftSide":this.L(y.$v)?"RightSide":this.L(y.Qv)?"BottomSide":
this.L(y.aw)?"TopBottomSides":this.L(y.Tv)?"LeftRightSides":this.L(y.cw)?"TopLeftSides":this.L(y.ew)?"TopRightSides":this.L(y.Nv)?"BottomLeftSides":this.L(y.Pv)?"BottomRightSides":this.L(y.Yv)?"NotTopSide":this.L(y.Wv)?"NotLeftSide":this.L(y.Xv)?"NotRightSide":this.L(y.Vv)?"NotBottomSide":this.L(y.Lv)?"AllSides":this.L(y.Sv)?"Default":"None"};
J.prototype.equals=J.prototype.L=function(a){return!(a instanceof J)?s:(this.x===a.x||isNaN(this.x)&&isNaN(a.x))&&(this.y===a.y||isNaN(this.y)&&isNaN(a.y))&&this.offsetX===a.offsetX&&this.offsetY===a.offsetY};J.prototype.opposite=J.prototype.iJ=function(){return new J(0.5-(this.x-0.5),0.5-(this.y-0.5),-this.offsetX,-this.offsetY)};J.prototype.includesSide=J.prototype.NI=function(a){if(!Bb(this)||!Bb(a))return s;a=a.offsetY;return(this.offsetY&a)===a};
function yb(a){return!isNaN(a.x)&&!isNaN(a.y)}function Cb(a){return isNaN(a.x)||isNaN(a.y)}function Bb(a){return Cb(a)&&1===a.offsetX&&0!==a.offsetY}function Db(a){return isNaN(a.x)&&isNaN(a.y)&&-1===a.offsetX&&0===a.offsetY}y.ld=1;y.Sc=2;y.ad=4;y.$c=8;y.NONE=nb(new J(0,0,0,0),0).Ja();y.Sv=nb(new J(0,0,-1,0),-1).Ja();y.bw=(new J(0,0,0,0)).Ja();y.Jo=(new J(0.5,0,0,0)).Ja();y.dw=(new J(1,0,0,0)).Ja();y.Ho=(new J(0,0.5,0,0)).Ja();y.Rv=(new J(0.5,0.5,0,0)).Ja();y.Io=(new J(1,0.5,0,0)).Ja();
y.Mv=(new J(0,1,0,0)).Ja();y.Go=(new J(0.5,1,0,0)).Ja();y.Ov=(new J(1,1,0,0)).Ja();y.fw=nb(new J(0,0,1,y.ld),1).Ja();y.Uv=nb(new J(0,0,1,y.Sc),1).Ja();y.$v=nb(new J(0,0,1,y.ad),1).Ja();y.Qv=nb(new J(0,0,1,y.$c),1).Ja();y.aw=nb(new J(0,0,1,y.ld|y.$c),1).Ja();y.Tv=nb(new J(0,0,1,y.Sc|y.ad),1).Ja();y.cw=nb(new J(0,0,1,y.ld|y.Sc),1).Ja();y.ew=nb(new J(0,0,1,y.ld|y.ad),1).Ja();y.Nv=nb(new J(0,0,1,y.$c|y.Sc),1).Ja();y.Pv=nb(new J(0,0,1,y.$c|y.ad),1).Ja();y.Yv=nb(new J(0,0,1,y.Sc|y.ad|y.$c),1).Ja();
y.Wv=nb(new J(0,0,1,y.ld|y.ad|y.$c),1).Ja();y.Xv=nb(new J(0,0,1,y.ld|y.Sc|y.$c),1).Ja();y.Vv=nb(new J(0,0,1,y.ld|y.Sc|y.ad),1).Ja();y.Lv=nb(new J(0,0,1,y.ld|y.Sc|y.ad|y.$c),1).Ja();var Hb;J.None=Hb=y.NONE;var Ib;J.Default=Ib=y.Sv;var Mb;J.TopLeft=Mb=y.bw;var Ob;J.TopCenter=Ob=y.Jo;var Rb;J.TopRight=Rb=y.dw;J.LeftCenter=y.Ho;var Sb;J.Center=Sb=y.Rv;J.RightCenter=y.Io;var Vb;J.BottomLeft=Vb=y.Mv;var Wb;J.BottomCenter=Wb=y.Go;var Zb;J.BottomRight=Zb=y.Ov;var $b;J.MiddleTop=$b=y.Jo;var ac;
J.MiddleLeft=ac=y.Ho;var bc;J.MiddleRight=bc=y.Io;var cc;J.MiddleBottom=cc=y.Go;J.Top=y.Jo;var dc;J.Left=dc=y.Ho;var fc;J.Right=fc=y.Io;J.Bottom=y.Go;var gc;J.TopSide=gc=y.fw;var hc;J.LeftSide=hc=y.Uv;var ic;J.RightSide=ic=y.$v;var jc;J.BottomSide=jc=y.Qv;J.TopBottomSides=y.aw;J.LeftRightSides=y.Tv;J.TopLeftSides=y.cw;J.TopRightSides=y.ew;J.BottomLeftSides=y.Nv;J.BottomRightSides=y.Pv;J.NotTopSide=y.Yv;J.NotLeftSide=y.Wv;J.NotRightSide=y.Xv;J.NotBottomSide=y.Vv;var kc;J.AllSides=kc=y.Lv;
var H={ra:4*((Math.sqrt(2)-1)/3),Aj:(new A(0,0)).Ja(),OE:(new B(0,0,0,0)).Ja(),Ko:(new ab(0,0,0,0)).Ja(),ME:(new ab(2,2,2,2)).Ja(),NE:(new ha(Infinity,Infinity)).Ja(),JE:(new A(-Infinity,-Infinity)).Ja(),IE:(new A(Infinity,Infinity)).Ja(),ys:(new ha(0,0)).Ja(),Zv:(new ha(1,1)).Ja(),fm:(new ha(6,6)).Ja(),Lz:(new ha(8,8)).Ja(),KE:(new A(NaN,NaN)).Ja(),Qz:q,sqrt:function(a){if(0>=a)return 0;var b=H.Qz;if(b===q){for(var b=[],c=0;2E3>=c;c++)b[c]=Math.sqrt(c);H.Qz=b}return 1>a?(c=1/a,2E3>=c?1/b[c|0]:Math.sqrt(a)):
2E3>=a?b[a|0]:Math.sqrt(a)},I:function(a,b){var c=a-b;return 0.5>c&&-0.5<c},Ha:function(a,b){var c=a-b;return 5E-8>c&&-5E-8<c},jd:function(a,b,c,d,e,g,k){0>=e&&(e=1E-6);var l,m,n,p;a<c?(m=a,l=c):(m=c,l=a);b<d?(p=b,n=d):(p=d,n=b);if(a===c)return p<=k&&k<=n&&a-e<=g&&g<=a+e;if(b===d)return m<=g&&g<=l&&b-e<=k&&k<=b+e;l+=e;m-=e;if(m<=g&&g<=l&&(n+=e,p-=e,p<=k&&k<=n))if(l-m>n-p)if(a-c>e||c-a>e){if(g=(d-b)/(c-a)*(g-a)+b,g-e<=k&&k<=g+e)return h}else return h;else if(b-d>e||d-b>e){if(k=(c-a)/(d-b)*(k-b)+a,
k-e<=g&&g<=k+e)return h}else return h;return s},yu:function(a,b,c,d,e,g,k,l,m,n,p,r){if(!H.jd(a,b,k,l,r,c,d)||!H.jd(a,b,k,l,r,e,g)){var t=(a+c)/2,u=(b+d)/2,v=(c+e)/2,z=(d+g)/2;e=(e+k)/2;g=(g+l)/2;d=(t+v)/2;c=(u+z)/2;var v=(v+e)/2,z=(z+g)/2,C=(d+v)/2,K=(c+z)/2;return H.yu(a,b,t,u,d,c,C,K,m,n,p,r)||H.yu(C,K,v,z,e,g,k,l,m,n,p,r)}return H.jd(a,b,k,l,r,n,p)},IF:function(a,b,c,d,e,g,k,l,m){var n=(c+e)/2,p=(d+g)/2;m.x=(((a+c)/2+n)/2+(n+(e+k)/2)/2)/2;m.y=(((b+d)/2+p)/2+(p+(g+l)/2)/2)/2;return m},HF:function(a,
b,c,d,e,g,k,l){var m=(c+e)/2,n=(d+g)/2;return Ya(((a+c)/2+m)/2,((b+d)/2+n)/2,(m+(e+k)/2)/2,(n+(g+l)/2)/2)},Dn:function(a,b,c,d,e,g,k,l,m,n){if(!H.jd(a,b,k,l,m,c,d)||!H.jd(a,b,k,l,m,e,g)){var p=(a+c)/2,r=(b+d)/2,t=(c+e)/2,u=(d+g)/2;e=(e+k)/2;g=(g+l)/2;d=(p+t)/2;c=(r+u)/2;var t=(t+e)/2,u=(u+g)/2,v=(d+t)/2,z=(c+u)/2;H.Dn(a,b,p,r,d,c,v,z,m,n);H.Dn(v,z,t,u,e,g,k,l,m,n)}else hb(n,a,b,0,0),hb(n,k,l,0,0);return n},ae:function(a,b,c,d,e,g,k,l,m,n){if(!H.jd(a,b,k,l,m,c,d)||!H.jd(a,b,k,l,m,e,g)){var p=(a+c)/
2,r=(b+d)/2,t=(c+e)/2,u=(d+g)/2;e=(e+k)/2;g=(g+l)/2;d=(p+t)/2;c=(r+u)/2;var t=(t+e)/2,u=(u+g)/2,v=(d+t)/2,z=(c+u)/2;H.ae(a,b,p,r,d,c,v,z,m,n);H.ae(v,z,t,u,e,g,k,l,m,n)}else 0===n.length&&n.push([a,b]),n.push([k,l]);return n},iz:function(a,b,c,d,e,g,k,l,m,n){if(H.jd(a,b,e,g,n,c,d))return H.jd(a,b,e,g,n,l,m);var p=(a+c)/2,r=(b+d)/2;c=(c+e)/2;d=(d+g)/2;var t=(p+c)/2,u=(r+d)/2;return H.iz(a,b,p,r,t,u,k,l,m,n)||H.iz(t,u,c,d,e,g,k,l,m,n)},nJ:function(a,b,c,d,e,g,k){k.x=((a+c)/2+(c+e)/2)/2;k.y=((b+d)/2+
(d+g)/2)/2;return k},hz:function(a,b,c,d,e,g,k,l){if(H.jd(a,b,e,g,k,c,d))hb(l,a,b,0,0),hb(l,e,g,0,0);else{var m=(a+c)/2,n=(b+d)/2;c=(c+e)/2;d=(d+g)/2;var p=(m+c)/2,r=(n+d)/2;H.hz(a,b,m,n,p,r,k,l);H.hz(p,r,c,d,e,g,k,l)}return l},uo:function(a,b,c,d,e,g,k,l){if(H.jd(a,b,e,g,k,c,d))0===l.length&&l.push([a,b]),l.push([e,g]);else{var m=(a+c)/2,n=(b+d)/2;c=(c+e)/2;d=(d+g)/2;var p=(m+c)/2,r=(n+d)/2;H.uo(a,b,m,n,p,r,k,l);H.uo(p,r,c,d,e,g,k,l)}return l},kr:function(a,b,c,d,e,g,k,l,m,n,p,r,t,u){0>=t&&(t=1E-6);
if(!H.jd(a,b,k,l,t,c,d)||!H.jd(a,b,k,l,t,e,g)){var v=(a+c)/2,z=(b+d)/2;c=(c+e)/2;d=(d+g)/2;e=(e+k)/2;g=(g+l)/2;var C=(v+c)/2,K=(z+d)/2;c=(c+e)/2;d=(d+g)/2;var I=(C+c)/2,Q=(K+d)/2,L=(p-m)*(p-m)+(r-n)*(r-n),S=s;H.kr(a,b,v,z,C,K,I,Q,m,n,p,r,t,u)&&(a=(u.x-m)*(u.x-m)+(u.y-n)*(u.y-n),a<L&&(L=a,S=h));b=u.x;v=u.y;H.kr(I,Q,c,d,e,g,k,l,m,n,p,r,t,u)&&(a=(u.x-m)*(u.x-m)+(u.y-n)*(u.y-n),a<L?S=h:(u.x=b,u.y=v));return S}v=(a-k)*(n-r)-(b-l)*(m-p);if(!v)return s;t=((a*l-b*k)*(m-p)-(a-k)*(m*r-n*p))/v;v=((a*l-b*k)*
(n-r)-(b-l)*(m*r-n*p))/v;if((m>p?m-p:p-m)<(n>r?n-r:r-n)){if(b<l?(m=b,k=l):(m=l,k=b),v<m||v>k)return s}else if(a<k?m=a:(m=k,k=a),t<m||t>k)return s;u.x=t;u.y=v;return h},lr:function(a,b,c,d,e,g,k,l,m,n,p,r,t){var u=0;0>=t&&(t=1E-6);if(!H.jd(a,b,k,l,t,c,d)||!H.jd(a,b,k,l,t,e,g)){var v=(a+c)/2,z=(b+d)/2,C=(c+e)/2,K=(d+g)/2;e=(e+k)/2;g=(g+l)/2;d=(v+C)/2;c=(z+K)/2;var C=(C+e)/2,K=(K+g)/2,I=(d+C)/2,Q=(c+K)/2,u=u+H.lr(a,b,v,z,d,c,I,Q,m,n,p,r,t),u=u+H.lr(I,Q,C,K,e,g,k,l,m,n,p,r,t)}else{t=(a-k)*(n-r)-(b-l)*
(m-p);if(!t)return u;v=((a*l-b*k)*(m-p)-(a-k)*(m*r-n*p))/t;z=((a*l-b*k)*(n-r)-(b-l)*(m*r-n*p))/t;if(v>=p)return u;if((m>p?m-p:p-m)<(n>r?n-r:r-n)){if(b<l?(m=b,a=l):(m=l,a=b),z<m||z>a)return u}else if(a<k?(m=a,a=k):m=k,v<m||v>a)return u;0<t?u++:0>t&&u--}return u},Vr:function(a,b,c,d,e,g,k){if(H.Ha(a,c)){var l;b<d?(l=b,c=d):(l=d,c=b);d=g;if(d<l)return k.x=a,k.y=l,s;if(d>c)return k.x=a,k.y=c,s;k.x=a;k.y=d;return h}if(H.Ha(b,d)){a<c?l=a:(l=c,c=a);d=e;if(d<l)return k.x=l,k.y=b,s;if(d>c)return k.x=c,k.y=
b,s;k.x=d;k.y=b;return h}l=((a-e)*(a-c)+(b-g)*(b-d))/((c-a)*(c-a)+(d-b)*(d-b));if(-5E-6>l)return k.x=a,k.y=b,s;if(1.000005<l)return k.x=c,k.y=d,s;k.x=a+l*(c-a);k.y=b+l*(d-b);return h},wg:function(a,b,c,d,e,g,k,l,m){if(H.I(a,c)&&H.I(b,d))return m.x=a,m.y=b,s;if(H.Ha(e,k)){if(H.Ha(a,c))return H.Vr(a,b,c,d,e,g,m),s;g=(d-b)/(c-a)*(e-a)+b;return H.Vr(a,b,c,d,e,g,m)}l=(l-g)/(k-e);if(H.Ha(a,c)){g=l*(a-e)+g;b<d?(k=b,c=d):(k=d,c=b);if(g<k)return m.x=a,m.y=k,s;if(g>c)return m.x=a,m.y=c,s;m.x=a;m.y=g;return h}k=
(d-b)/(c-a);if(H.Ha(l,k))return H.Vr(a,b,c,d,e,g,m),s;e=(k*a-l*e+g-b)/(k-l);if(H.Ha(k,0)){a<c?k=a:(k=c,c=a);if(e<k)return m.x=k,m.y=b,s;if(e>c)return m.x=c,m.y=b,s;m.x=e;m.y=b;return h}g=k*(e-a)+b;return H.Vr(a,b,c,d,e,g,m)},XI:function(a,b,c,d,e){return H.wg(c.x,c.y,d.x,d.y,a.x,a.y,b.x,b.y,e)},II:function(a,b,c,d,e,g,k,l,m,n){function p(c,d){var e=(c-a)*(c-a)+(d-b)*(d-b);e<r&&(r=e,m.x=c,m.y=d)}var r=Infinity;p(m.x,m.y);var t,u,v,z;e<k?(t=e,u=k):(t=k,u=e);g<l?(v=e,z=k):(v=k,z=e);t=(u-t)/2+n;n=(z-
v)/2+n;e=(e+k)/2;g=(g+l)/2;if(0===t||0===n)return m;if(0.5>(c>a?c-a:a-c)){t=1-(c-e)*(c-e)/(t*t);if(0>t)return m;t=Math.sqrt(t);d=-n*t+g;p(c,n*t+g);p(c,d)}else{c=(d-b)/(c-a);d=1/(t*t)+c*c/(n*n);l=2*c*(b-c*a)/(n*n)-2*c*g/(n*n)-2*e/(t*t);t=l*l-4*d*(2*c*a*g/(n*n)-2*b*g/(n*n)+g*g/(n*n)+e*e/(t*t)-1+(b-c*a)*(b-c*a)/(n*n));if(0>t)return m;t=Math.sqrt(t);n=(-l+t)/(2*d);p(n,c*n-c*a+b);t=(-l-t)/(2*d);p(t,c*t-c*a+b)}return m},Un:function(a,b,c,d,e,g,k,l,m){var n=1E21,p=a,r=b;if(H.wg(a,b,a,d,e,g,k,l,m)){var t=
(m.x-e)*(m.x-e)+(m.y-g)*(m.y-g);t<n&&(n=t,p=m.x,r=m.y)}H.wg(c,b,c,d,e,g,k,l,m)&&(t=(m.x-e)*(m.x-e)+(m.y-g)*(m.y-g),t<n&&(n=t,p=m.x,r=m.y));H.wg(a,b,c,b,e,g,k,l,m)&&(t=(m.x-e)*(m.x-e)+(m.y-g)*(m.y-g),t<n&&(n=t,p=m.x,r=m.y));H.wg(a,d,c,d,e,g,k,l,m)&&(t=(m.x-e)*(m.x-e)+(m.y-g)*(m.y-g),t<n&&(n=t,p=m.x,r=m.y));m.x=p;m.y=r;return 1E21>n},Yu:function(a,b,c){var d=b.x,e=b.y,g=c.x,k=c.y,l=a.left,m=a.right,n=a.top,p=a.bottom;return d===g?(e<k?(a=e,g=k):(a=k,g=e),l<=d&&d<=m&&a<=p&&g>=n):e===k?(d<g?a=d:(a=g,
g=d),n<=e&&e<=p&&a<=m&&g>=l):a.Ea(b)||a.Ea(c)||H.Xu(l,n,m,n,d,e,g,k)||H.Xu(m,n,m,p,d,e,g,k)||H.Xu(m,p,l,p,d,e,g,k)||H.Xu(l,p,l,n,d,e,g,k)?h:s},Xu:function(a,b,c,d,e,g,k,l){return 0>=H.Du(a,b,c,d,e,g)*H.Du(a,b,c,d,k,l)&&0>=H.Du(e,g,k,l,a,b)*H.Du(e,g,k,l,c,d)},Du:function(a,b,c,d,e,g){c-=a;d-=b;a=e-a;b=g-b;g=a*d-b*c;0===g&&(g=a*c+b*d,0<g&&(g=(a-c)*c+(b-d)*d,0>g&&(g=0)));return 0>g?-1:0<g?1:0},Yr:function(a){0>a&&(a+=360);360<=a&&(a-=360);return a},VB:function(a,b,c,d,e,g){var k=Math.PI;g||(d*=k/180,
e*=k/180);g=d<e?1:-1;var l=[],m=k/2,n=d;for(d=Math.min(2*k+1E-5,Math.abs(e-d));1E-5<d;)e=n+g*Math.min(d,m),l.push(H.RF(c,n,e,a,b)),d-=Math.abs(e-n),n=e;return l},RF:function(a,b,c,d,e){var g=(c-b)/2,k=a*Math.cos(g),l=a*Math.sin(g),m=0.5522847498*Math.tan(g),n=k+m*l,k=-l+m*k,l=-k,m=g+b,g=Math.cos(m),m=Math.sin(m);return{x1:d+a*Math.cos(b),y1:e+a*Math.sin(b),x2:d+n*g-k*m,y2:e+n*m+k*g,Bd:d+n*g-l*m,Cd:e+n*m+l*g,Cb:d+a*Math.cos(c),Db:e+a*Math.sin(c)}},yy:function(a,b,c,d,e,g,k){c=Math.floor((a-c)/e)*e+
c;d=Math.floor((b-d)/g)*g+d;var l=c;c+e-a<e/2&&(l=c+e);a=d;d+g-b<g/2&&(a=d+g);k.q(l,a);return k},qC:function(a,b){var c=Math.max(a,b),d=Math.min(a,b),e=1,g=1;do e=c%d,c=g=d,d=e;while(0<e);return g},iG:function(a,b,c,d){var e=0>c,g=0>d,k,l;a<b?(k=1,l=0):(k=0,l=1);var m,n;m=0===k?a:b;n=0===k?c:d;if(0===k?e:g)n=-n;k=l;c=0===k?c:d;if(0===k?e:g)c=-c;return H.jG(m,0===k?a:b,n,c,0,0)},jG:function(a,b,c,d,e,g){if(0<d)if(0<c){g=a*a;e=b*b;a*=c;var k=b*d,l=-e+k,m=-e+Math.sqrt(a*a+k*k);b=l;for(var n=0;9999999999>
n;++n){b=0.5*(l+m);if(b===l||b===m)break;var p=a/(b+g),r=k/(b+e),p=p*p+r*r-1;if(0<p)l=b;else if(0>p)m=b;else break}c=g*c/(b+g)-c;d=e*d/(b+e)-d;c=Math.sqrt(c*c+d*d)}else c=Math.abs(d-b);else d=a*a-b*b,e=a*c,e<d?(d=e/d,e=a*d,g=b*Math.sqrt(Math.abs(1-d*d)),c=e-c,c=Math.sqrt(c*c+g*g)):c=Math.abs(c-a);return c}};
function nc(a){1<arguments.length&&y.m("Geometry constructor can take at most one optional argument, the Geometry type.");y.mc(this);a===f?a=oc:x&&y.rb(a,nc,nc,"constructor:type");this.Y=a;this.cd=this.Vc=this.ac=this.Sb=0;this.Uj=new F(pc);this.at=this.Uj.Kb;this.Ns=(new B).freeze();this.Ua=h;this.Qh=Mb;this.Rh=Zb;this.lt=this.mt=NaN;this.Hd=H.ys;this.fc=qc}y.ba("Geometry",nc);
nc.prototype.copy=function(){var a=new nc;a.Y=this.Y;a.Sb=this.Sb;a.ac=this.ac;a.Vc=this.Vc;a.cd=this.cd;for(var b=this.Uj,c=b.length,d=a.Uj,e=0;e<c;e++){var g=b.n[e].copy();d.add(g)}a.at=this.at;a.Ns.assign(this.Ns);a.Ua=this.Ua;a.Qh=this.Qh.U();a.Rh=this.Rh.U();a.mt=this.mt;a.lt=this.lt;a.Hd=this.Hd.U();a.fc=this.fc;return a};var wc;nc.Line=wc=y.w(nc,"Line",0);var xc;nc.Rectangle=xc=y.w(nc,"Rectangle",1);var yc;nc.Ellipse=yc=y.w(nc,"Ellipse",2);var oc;nc.Path=oc=y.w(nc,"Path",3);
nc.prototype.Ja=function(){this.freeze();Object.freeze(this);return this};nc.prototype.freeze=function(){this.$a=h;var a=this.fb;a.freeze();for(var b=a.length,c=0;c<b;c++)a.n[c].freeze();return this};nc.prototype.Pa=function(){Object.isFrozen(this)&&y.m("cannot thaw constant: "+this);this.$a=s;var a=this.fb;a.Pa();for(var b=a.length,c=0;c<b;c++)a.n[c].Pa();return this};
nc.prototype.equalsApprox=nc.prototype.nj=function(a){if(!(a instanceof nc))return s;if(this.type!==a.type)return this.type===wc&&a.type===oc?Dc(this,a):a.type===wc&&this.type===oc?Dc(a,this):s;if(this.type===oc){var b=this.fb;a=a.fb;var c=b.length;if(c!==a.length)return s;for(var d=0;d<c;d++)if(!b.n[d].nj(a.n[d]))return s;return h}return H.I(this.ia,a.ia)&&H.I(this.ja,a.ja)&&H.I(this.D,a.D)&&H.I(this.F,a.F)};
function Dc(a,b){if(a.type!==wc||b.type!==oc)return s;if(1===b.fb.count){var c=b.fb.sa(0);if(1===c.Ca.count&&(H.I(a.ia,c.ia)&&H.I(a.ja,c.ja))&&(c=c.Ca.sa(0),c.type===Ec&&H.I(a.D,c.D)&&H.I(a.F,c.F)))return h}return s}var Fc;nc.stringify=Fc=function(a){return a.toString()};
nc.prototype.toString=function(a){switch(this.type){case wc:return a===f?"M"+this.ia.toString()+" "+this.ja.toString()+"L"+this.D.toString()+" "+this.F.toString():"M"+this.ia.toFixed(a)+" "+this.ja.toFixed(a)+"L"+this.D.toFixed(a)+" "+this.F.toFixed(a);case xc:var b=new B(this.ia,this.ja,0,0);b.tE(this.D,this.F,0,0);return a===f?"M"+b.x.toString()+" "+b.y.toString()+"H"+b.right.toString()+"V"+b.bottom.toString()+"H"+b.left.toString()+"z":"M"+b.x.toFixed(a)+" "+b.y.toFixed(a)+"H"+b.right.toFixed(a)+
"V"+b.bottom.toFixed(a)+"H"+b.left.toFixed(a)+"z";case yc:b=new B(this.ia,this.ja,0,0);b.tE(this.D,this.F,0,0);if(a===f){var c=b.left.toString()+" "+(b.y+b.height/2).toString(),d=b.right.toString()+" "+(b.y+b.height/2).toString();return"M"+c+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+d+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+c}c=b.left.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);d=b.right.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);return"M"+c+"A"+(b.width/
2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+d+"A"+(b.width/2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+c;case oc:for(var b="",c=this.fb,d=c.length,e=0;e<d;e++){var g=c.n[e];0<e&&(b+=" x ");g.Yn&&(b+="F ");b+=g.toString(a)}return b;default:return this.type.toString()}};var Gc;
nc.fillPath=Gc=function(a){"string"!==typeof a&&y.Jb(a,"string",nc,"fillPath:str");a=a.split(/[Xx]/);for(var b=a.length,c="",d=0;d<b;d++)var e=a[d],c=e.match(/[Ff]/)!==q?0===d?c+e:c+("X"+(" "===e[0]?"":" ")+e):c+((0===d?"":"X ")+"F"+(" "===e[0]?"":" ")+e);return c};var Lc;
nc.parse=Lc=function(a,b){function c(){return p>=C-1?h:n[p+1].match(/[A-Za-z]/)!==q}function d(){p++;return n[p]}function e(){var a=new A(parseFloat(d()),parseFloat(d()));r===r.toLowerCase()&&(a.x=z.x+a.x,a.y=z.y+a.y);return a}function g(){return z=e()}function k(){return v=e()}function l(){var a=[parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d())];c()||(a.push(parseFloat(d())),c()||a.push(parseFloat(d())));r===r.toLowerCase()&&(a[2]+=z.x,a[3]+=z.y);return a}function m(){return"c"!==
t.toLowerCase()&&"s"!==t.toLowerCase()?z:new A(2*z.x-v.x,2*z.y-v.y)}b===f&&(b=s);"string"!==typeof a&&y.Jb(a,"string",nc,"parse:str");a=a.replace(/,/gm," ");a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2");a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2");a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2");a=a.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2");a=a.replace(/([0-9])([+\-])/gm,"$1 $2");a=a.replace(/(\.[0-9]*)(\.)/gm,
"$1 $2");a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");a=a.replace(/[\s\r\t\n]+/gm," ");a=a.replace(/^\s+|\s+$/g,"");for(var n=a.split(" "),p=-1,r="",t="",u=new A(0,0),v=new A(0,0),z=new A(0,0),C=n.length,K=y.u(),I,Q=s,L=s,S=h;!(p>=C-1);)if(t=r,r=d(),""!==r)switch(r.toUpperCase()){case "X":S=h;L=Q=s;break;case "M":I=g();K.Eb===q||S===h?(M(K,I.x,I.y,Q,s,!L),S=s):K.moveTo(I.x,I.y);for(u=z;!c();)I=g(),K.lineTo(I.x,I.y);break;case "L":for(;!c();)I=g(),K.lineTo(I.x,I.y);break;case "H":for(;!c();)z=
I=new A((r===r.toLowerCase()?z.x:0)+parseFloat(d()),z.y),K.lineTo(z.x,z.y);break;case "V":for(;!c();)z=I=new A(z.x,(r===r.toLowerCase()?z.y:0)+parseFloat(d())),K.lineTo(z.x,z.y);break;case "C":for(;!c();){var Z=e(),X=k();I=g();N(K,Z.x,Z.y,X.x,X.y,I.x,I.y)}break;case "S":for(;!c();)Z=m(),X=k(),I=g(),N(K,Z.x,Z.y,X.x,X.y,I.x,I.y);break;case "Q":for(;!c();)X=k(),I=g(),Oc(K,X.x,X.y,I.x,I.y);break;case "T":for(;!c();)v=X=m(),I=g(),Oc(K,X.x,X.y,I.x,I.y);break;case "B":for(;!c();)I=l(),K.arcTo(I[0],I[1],
I[2],I[3],I[4],I[5],I[6]);break;case "A":for(;!c();){var Z=Math.abs(parseFloat(d())),X=Math.abs(parseFloat(d())),ea=parseFloat(d()),ia=!!parseFloat(d()),W=!!parseFloat(d());I=g();Pc(K,Z,X,ea,ia,W,I.x,I.y)}break;case "Z":Qc(K);z=u;break;case "F":I=q;for(Z=1;n[p+Z];)if(n[p+Z].match(/[Uu]/)!==q)Z++;else if(n[p+Z].match(/[A-Za-z]/)===q)Z++;else{I=n[p+Z];break}I.match(/[Mm]/)?Q=h:Rc(K);break;case "U":I=q;for(Z=1;n[p+Z];)if(n[p+Z].match(/[Ff]/)!==q)Z++;else if(n[p+Z].match(/[A-Za-z]/)===q)Z++;else{I=n[p+
Z];break}I.match(/[Mm]/)?L=h:Sc(K)}u=K.s;y.v(K);if(b)for(K=u.fb.k;K.next();)K.value.Yn=h;return u};function Tc(a,b){for(var c=a.length,d=y.M(),e=0;e<c;e++){var g=a[e];d.x=g.x1;d.y=g.y1;b.Qa(d);g.x1=d.x;g.y1=d.y;d.x=g.x2;d.y=g.y2;b.Qa(d);g.x2=d.x;g.y2=d.y;d.x=g.Bd;d.y=g.Cd;b.Qa(d);g.Bd=d.x;g.Cd=d.y;d.x=g.Cb;d.y=g.Db;b.Qa(d);g.Cb=d.x;g.Db=d.y}y.B(d)}nc.prototype.My=function(){if(this.Ua)return h;var a=this.fb;if(this.at!==a.Kb)return h;for(var b=a.length,c=0;c<b;c++)if(a.n[c].My())return h;return s};
nc.prototype.Hz=function(){this.Ua=s;var a=this.fb;this.at=a.Kb;for(var b=a.length,c=0;c<b;c++)a.n[c].Hz()};nc.prototype.Qe=function(){var a=this.Ns;a.Pa();a.q(0,0,this.Hd.width,this.Hd.height);Uc(this,a,s);hb(a,0,0,0,0);a.freeze()};nc.prototype.computeBoundsWithoutOrigin=nc.prototype.NF=function(){var a=new B;Uc(this,a,h);return a};
function Uc(a,b,c){switch(a.type){case wc:case xc:case yc:c?b.q(a.Sb,a.ac,0,0):hb(b,a.Sb,a.ac,0,0);hb(b,a.Vc,a.cd,0,0);break;case oc:a=a.fb;for(var d=a.length,e=0;e<d;e++){var g=a.n[e];c&&0===e?b.q(g.ia,g.ja,0,0):hb(b,g.ia,g.ja,0,0);for(var k=g.Ca,l=k.length,m=g.ia,n=g.ja,p=0;p<l;p++){var r=k.n[p];switch(r.type){case Ec:case Vc:m=r.D;n=r.F;hb(b,m,n,0,0);break;case Wc:H.Dn(m,n,r.ib,r.Bb,r.Rd,r.Sd,r.D,r.F,0.5,b);m=r.D;n=r.F;break;case bd:H.hz(m,n,r.ib,r.Bb,r.D,r.F,0.5,b);m=r.D;n=r.F;break;case cd:case dd:for(var r=
r.type===cd?ed(r,g):fd(r,g,m,n),t=r.length,u=q,v=0;v<t;v++)u=r[v],H.Dn(u.x1,u.y1,u.x2,u.y2,u.Bd,u.Cd,u.Cb,u.Db,0.5,b);u!==q&&(m=u.Cb,n=u.Db);break;default:y.m("Unknown Segment type: "+r.type)}}}break;default:y.m("Unknown Geometry type: "+a.type)}}nc.prototype.normalize=nc.prototype.normalize=function(){y.K(this);var a=this.NF();this.offset(-a.x,-a.y);return new A(-a.x,-a.y)};
nc.prototype.offset=nc.prototype.offset=function(a,b){y.K(this);x&&(y.p(a,nc,"offset"),y.p(b,nc,"offset"));this.transform(1,0,0,1,a,b)};nc.prototype.scale=nc.prototype.scale=function(a,b){y.K(this);x&&(y.p(a,nc,"scale:x"),y.p(b,nc,"scale:y"),0>=a&&y.ka(a,"scale must be greater than zero",nc,"scale:x"),0>=b&&y.ka(b,"scale must be greater than zero",nc,"scale:y"));this.transform(a,0,0,b,0,0)};
nc.prototype.rotate=nc.prototype.rotate=function(a,b,c){y.K(this);b===f&&(b=0);c===f&&(c=0);x&&(y.p(a,nc,"rotate:angle"),y.p(b,nc,"rotate:x"),y.p(c,nc,"rotate:y"));var d=y.yg();d.reset();d.rotate(a,b,c);this.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);y.ye(d)};
nc.prototype.transform=nc.prototype.transform=function(a,b,c,d,e,g){var k,l;switch(this.type){case wc:case xc:case yc:k=this.Sb;l=this.ac;this.Sb=k*a+l*c+e;this.ac=k*b+l*d+g;k=this.Vc;l=this.cd;this.Vc=k*a+l*c+e;this.cd=k*b+l*d+g;break;case oc:for(var m=this.fb,n=m.length,p=0;p<n;p++){var r=m.n[p];k=r.ia;l=r.ja;r.ia=k*a+l*c+e;r.ja=k*b+l*d+g;for(var r=r.Ca,t=r.length,u=0;u<t;u++){var v=r.n[u];switch(v.type){case Ec:case Vc:k=v.D;l=v.F;v.D=k*a+l*c+e;v.F=k*b+l*d+g;break;case Wc:k=v.ib;l=v.Bb;v.ib=k*
a+l*c+e;v.Bb=k*b+l*d+g;k=v.Rd;l=v.Sd;v.Rd=k*a+l*c+e;v.Sd=k*b+l*d+g;k=v.D;l=v.F;v.D=k*a+l*c+e;v.F=k*b+l*d+g;break;case bd:k=v.ib;l=v.Bb;v.ib=k*a+l*c+e;v.Bb=k*b+l*d+g;k=v.D;l=v.F;v.D=k*a+l*c+e;v.F=k*b+l*d+g;break;case cd:k=v.xa;l=v.Ga;v.xa=k*a+l*c+e;v.Ga=k*b+l*d+g;v.radiusX*=Math.sqrt(a*a+c*c);v.radiusY!==f&&(v.radiusY*=Math.sqrt(b*b+d*d));break;case dd:k=v.D;l=v.F;v.D=k*a+l*c+e;v.F=k*b+l*d+g;v.radiusX*=Math.sqrt(a*a+c*c);v.radiusY*=Math.sqrt(b*b+d*d);break;default:y.m("Unknown Segment type: "+v.type)}}}}this.Ua=
h};nc.prototype.Zq=function(a,b){var c=this.Sb,d=this.ac,e=this.Vc,g=this.cd,k=Math.min(c,e),l=Math.min(d,g),c=Math.abs(e-c),d=Math.abs(g-d),g=y.M();g.x=k;g.y=l;b.Qa(g);e=new pc(g.x,g.y);g.x=k+c;g.y=l;b.Qa(g);e.Ca.add(new gd(Ec,g.x,g.y));g.x=k+c;g.y=l+d;b.Qa(g);e.Ca.add(new gd(Ec,g.x,g.y));g.x=k;g.y=l+d;b.Qa(g);e.Ca.add((new gd(Ec,g.x,g.y)).close());y.B(g);a.type=oc;a.fb.add(e);return a};
nc.prototype.Ea=function(a,b,c,d){var e=a.x,g=a.y,k=this.Hb.x-20;a=a.y;for(var l=0,m,n,p,r,t,u,v,z=this.fb.n,C=z.length,K=0;K<C;K++){var I=z[K];if(I.Yn){if(c&&I.Ea(e,g,b))return h;var Q=I.Ca;m=I.ia;n=I.ja;for(var L=m,S=n,Z=0;Z<=Q.length;Z++){Z!==Q.length?(p=Q.n[Z],r=p.type,u=p.D,v=p.F):(r=Ec,u=L,v=S);switch(r){case Vc:t=hd(e,g,k,a,m,n,L,S);if(t===h)return h;l+=t;L=u;S=v;break;case Ec:t=hd(e,g,k,a,m,n,u,v);if(t===h)return h;l+=t;break;case Wc:t=H.lr(m,n,p.ib,p.Bb,p.Rd,p.Sd,u,v,k,a,e,g,0.5);l+=t;break;
case bd:t=H.lr(m,n,(m+2*p.ib)/3,(n+2*p.Bb)/3,(p.ib+2*u)/3,(p.ib+2*u)/3,u,v,k,a,e,g,0.5);l+=t;break;case cd:case dd:r=p.type===cd?ed(p,I):fd(p,I,m,n);for(var X=r.length,ea=q,ia=0;ia<X;ia++){ea=r[ia];if(0===ia){t=hd(e,g,k,a,m,n,ea.x1,ea.y1);if(t===h)return h;l+=t}t=H.lr(ea.x1,ea.y1,ea.x2,ea.y2,ea.Bd,ea.Cd,ea.Cb,ea.Db,k,a,e,g,0.5);l+=t}ea!==q&&(u=ea.Cb,v=ea.Db);break;default:y.m("Unknown Segment type: "+p.type)}m=u;n=v}if(0!==l)return h;l=0}else if(I.Ea(e,g,d?b:b+2))return h}return 0!==l};
function hd(a,b,c,d,e,g,k,l){if(H.jd(e,g,k,l,0.05,a,b))return h;var m=(a-c)*(g-l);if(0===m)return 0;var n=((a*d-b*c)*(e-k)-(a-c)*(e*l-g*k))/m;b=(a*d-b*c)*(g-l)/m;if(n>=a)return 0;if((e>k?e-k:k-e)<(g>l?g-l:l-g)){if(g<l?(a=g,e=l):(a=l,e=g),b<a||b>e)return 0}else if(e<k?(a=e,e=k):a=k,n<a||n>e)return 0;return 0<m?1:-1}function id(a,b,c,d){for(var e=a.fb.length,g=0;g<e;g++)if(a.fb.n[g].Ea(b,c,d))return h;return s}
nc.prototype.getPointAlongPath=nc.prototype.LI=function(a){(0>a||1<a)&&y.ka(a,"0 <= fraction <= 1",nc,"getPointAlongPath:fraction");var b=this.fb.ob(),c=y.ub(),d=[];d.push([b.ia,b.ja]);for(var e=b.ia,g=b.ja,k=e,l=g,m=b.Ca.n,n=m.length,p=0;p<n;p++){var r=m[p];switch(r.Y){case Vc:c.push(d);d=[];d.push([r.D,r.F]);e=r.D;g=r.F;k=e;l=g;break;case Ec:d.push([r.D,r.F]);e=r.D;g=r.F;break;case Wc:H.ae(e,g,r.mg,r.ng,r.jk,r.kk,r.Xd,r.Yd,0.5,d);e=r.D;g=r.F;break;case bd:H.uo(e,g,r.mg,r.ng,r.Xd,r.Yd,0.5,d);e=r.D;
g=r.F;break;case cd:for(var t=ed(r,b),u=t.length,v=0;v<u;v++){var z=t[v];H.ae(e,g,z.x2,z.y2,z.Bd,z.Cd,z.Cb,z.Db,0.5,d);e=z.Cb;g=z.Db}break;case dd:t=fd(r,b,e,g);u=t.length;for(v=0;v<u;v++)z=t[v],H.ae(e,g,z.x2,z.y2,z.Bd,z.Cd,z.Cb,z.Db,0.5,d),e=z.Cb,g=z.Db;break;default:y.m("Segment not of valid type")}r.Lg&&d.push([k,l])}c.push(d);n=0;e=c.length;b=q;for(g=0;g<e;g++){k=c[g];l=k.length;for(p=0;p<l;p++)d=k[p],0!==p&&(m=Math.sqrt(Va(b[0],b[1],d[0],d[1])),n+=m),b=d}a*=n;for(g=n=0;g<e;g++){k=c[g];l=k.length;
for(p=0;p<l;p++){d=k[p];if(0!==p){m=Math.sqrt(Va(b[0],b[1],d[0],d[1]));if(n+m>a)return p=(a-n)/m,y.ya(c),new A(b[0]+(d[0]-b[0])*p,b[1]+(d[1]-b[1])*p);n+=m}b=d}}y.ya(c);return q};y.g(nc,"type",nc.prototype.type);y.defineProperty(nc,{type:"type"},w("Y"),function(a){this.Y!==a&&(x&&y.rb(a,nc,nc,"type"),y.K(this,a),this.Y=a,this.Ua=h)});y.g(nc,"startX",nc.prototype.ia);y.defineProperty(nc,{ia:"startX"},w("Sb"),function(a){this.Sb!==a&&(x&&y.p(a,nc,"startX"),y.K(this,a),this.Sb=a,this.Ua=h)});
y.g(nc,"startY",nc.prototype.ja);y.defineProperty(nc,{ja:"startY"},w("ac"),function(a){this.ac!==a&&(x&&y.p(a,nc,"startY"),y.K(this,a),this.ac=a,this.Ua=h)});y.g(nc,"endX",nc.prototype.D);y.defineProperty(nc,{D:"endX"},w("Vc"),function(a){this.Vc!==a&&(x&&y.p(a,nc,"endX"),y.K(this,a),this.Vc=a,this.Ua=h)});y.g(nc,"endY",nc.prototype.F);y.defineProperty(nc,{F:"endY"},w("cd"),function(a){this.cd!==a&&(x&&y.p(a,nc,"endY"),y.K(this,a),this.cd=a,this.Ua=h)});y.g(nc,"figures",nc.prototype.fb);
y.defineProperty(nc,{fb:"figures"},w("Uj"),function(a){this.Uj!==a&&(x&&y.l(a,F,nc,"figures"),y.K(this,a),this.Uj=a,this.Ua=h)});y.defineProperty(nc,{G:"spot1"},w("Qh"),function(a){x&&y.l(a,J,nc,"spot1");y.K(this,a);this.Qh=a.U()});y.defineProperty(nc,{H:"spot2"},w("Rh"),function(a){x&&y.l(a,J,nc,"spot2");y.K(this,a);this.Rh=a.U()});y.A(nc,{Hb:"bounds"},function(){this.My()&&(this.Hz(),this.Qe());return this.Ns});y.g(nc,"minSize",nc.prototype.Ce);
y.defineProperty(nc,{Ce:"minSize"},w("Hd"),function(a){this.Hd.L(a)||(x&&y.l(a,ha,nc,"minSize"),a=a.U(),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a.freeze(),this.Hd=a)});function pc(a,b,c){y.mc(this);c===f&&(c=h);this.bl=c;this.Mm=h;a!==f?(x&&y.p(a,pc,"sx"),this.Sb=a):this.Sb=0;b!==f?(x&&y.p(b,pc,"sy"),this.ac=b):this.ac=0;this.Fq=new F(gd);this.Yt=this.Fq.Kb;this.Ua=h}y.ba("PathFigure",pc);
pc.prototype.copy=function(){var a=new pc;a.bl=this.bl;a.Mm=this.Mm;a.Sb=this.Sb;a.ac=this.ac;for(var b=this.Fq,c=b.length,d=a.Fq,e=0;e<c;e++){var g=b.n[e].copy();d.add(g)}a.Yt=this.Yt;a.Ua=this.Ua;return a};pc.prototype.equalsApprox=pc.prototype.nj=function(a){if(!(a instanceof pc)||!H.I(this.ia,a.ia)||!H.I(this.ja,a.ja))return s;var b=this.Ca;a=a.Ca;var c=b.length;if(c!==a.length)return s;for(var d=0;d<c;d++)if(!b.n[d].nj(a.n[d]))return s;return h};da=pc.prototype;
da.toString=function(a){for(var b=a===f?"M"+this.ia.toString()+" "+this.ja.toString():"M"+this.ia.toFixed(a)+" "+this.ja.toFixed(a),c=this.Ca,d=c.length,e=0;e<d;e++)b+=" "+c.n[e].toString(a);return b};da.freeze=function(){this.$a=h;var a=this.Ca;a.freeze();for(var b=a.length,c=0;c<b;c++)a.n[c].freeze();return this};da.Pa=function(){this.$a=s;var a=this.Ca;a.Pa();for(var b=a.length,c=0;c<b;c++)a.n[c].Pa();return this};
da.My=function(){if(this.Ua)return h;var a=this.Ca;if(this.Yt!==a.Kb)return h;for(var b=a.length,c=0;c<b;c++)if(a.n[c].Ua)return h;return s};da.Hz=function(){this.Ua=s;var a=this.Ca;this.Yt=a.Kb;for(var b=a.length,c=0;c<b;c++){var d=a.n[c];d.Ua=s;d.oi=q}};y.g(pc,"isFilled",pc.prototype.Yn);y.defineProperty(pc,{Yn:"isFilled"},w("bl"),function(a){x&&y.j(a,"boolean",pc,"isFilled");y.K(this,a);this.bl=a});y.g(pc,"isShadowed",pc.prototype.Ck);
y.defineProperty(pc,{Ck:"isShadowed"},w("Mm"),function(a){x&&y.j(a,"boolean",pc,"isShadowed");y.K(this,a);this.Mm=a});y.g(pc,"startX",pc.prototype.ia);y.defineProperty(pc,{ia:"startX"},w("Sb"),function(a){x&&y.p(a,pc,"startX");y.K(this,a);this.Sb=a;this.Ua=h});y.g(pc,"startY",pc.prototype.ja);y.defineProperty(pc,{ja:"startY"},w("ac"),function(a){x&&y.p(a,pc,"startY");y.K(this,a);this.ac=a;this.Ua=h});y.g(pc,"segments",pc.prototype.Ca);
y.defineProperty(pc,{Ca:"segments"},w("Fq"),function(a){x&&y.l(a,F,pc,"segments");y.K(this,a);this.Fq=a;this.Ua=h});
pc.prototype.Ea=function(a,b,c){for(var d=this.ia,e=this.ja,g=d,k=e,l=this.Ca.n,m=l.length,n=0;n<m;n++){var p=l[n];switch(p.type){case Vc:g=p.D;k=p.F;d=p.D;e=p.F;break;case Ec:if(H.jd(d,e,p.D,p.F,c,a,b))return h;d=p.D;e=p.F;break;case Wc:if(H.yu(d,e,p.ib,p.Bb,p.Rd,p.Sd,p.D,p.F,0.5,a,b,c))return h;d=p.D;e=p.F;break;case bd:if(H.iz(d,e,p.ib,p.Bb,p.D,p.F,0.5,a,b,c))return h;d=p.D;e=p.F;break;case cd:case dd:for(var r=p.type===cd?ed(p,this):fd(p,this,d,e),t=r.length,u=q,v=0;v<t;v++)if(u=r[v],0===v&&H.jd(d,
e,u.x1,u.y1,c,a,b)||H.yu(u.x1,u.y1,u.x2,u.y2,u.Bd,u.Cd,u.Cb,u.Db,0.5,a,b,c))return h;u!==q&&(d=u.Cb,e=u.Db);break;default:y.m("Unknown Segment type: "+p.type)}if(p.Hr&&(d!==g||e!==k)&&H.jd(d,e,g,k,c,a,b))return h}return s};
function gd(a,b,c,d,e,g,k,l){y.mc(this);a===f?a=Ec:x&&y.rb(a,gd,gd,"constructor:type");this.Y=a;a===cd?(b!==f?(x&&y.p(b,gd,"ex"),this.Zd=b):this.Zd=0,c!==f?(x&&y.p(c,gd,"ey"),this.$d=c):this.$d=0,d!==f&&(x&&y.p(d,gd,"x1"),this.nm=d),e!==f&&(x&&y.p(e,gd,"y1"),this.om=e),g!==f&&(x&&y.p(g,gd,"x2"),this.Oi=Math.max(g||0,0)),k!==f&&"number"===typeof k?(x&&y.p(k,gd,"y2"),this.Pi=Math.max(k||0,0)):this.Pi=this.Oi):a===dd?(b!==f&&x&&y.p(b,gd,"ex"),c!==f&&x&&y.p(c,gd,"ey"),d!==f&&x&&y.p(d,gd,"x1"),e!==f&&
x&&y.p(e,gd,"y1"),this.Xd=b||0,this.Yd=c||0,this.Oi=Math.max(d||0,0),this.Pi=Math.max(e||0,0),this.Zd=k?1:0,this.$d=l?1:0,a=(g||0)%360,0>a&&(a+=360),this.sn=a):(b!==f?(x&&y.p(b,gd,"ex"),this.Xd=b):this.Xd=0,c!==f?(x&&y.p(c,gd,"ey"),this.Yd=c):this.Yd=0,d!==f&&(x&&y.p(d,gd,"x1"),this.mg=d),e!==f&&(x&&y.p(e,gd,"y1"),this.ng=e),g!==f&&(x&&y.p(g,gd,"x2"),this.jk=g),k!==f&&"number"===typeof k&&(x&&y.p(k,gd,"y2"),this.kk=k));this.Ua=h;this.Lg=s;this.oi=q}y.ba("PathSegment",gd);
gd.prototype.copy=function(){var a=new gd;a.Y=this.Y;this.Y===cd?(a.Zd=this.Zd,a.$d=this.$d,a.nm=this.nm,a.om=this.om,a.Oi=this.Oi,a.Pi=this.Pi):this.Y===dd?(a.Zd=this.Zd,a.$d=this.$d,a.Xd=this.Xd,a.Yd=this.Yd,a.Oi=this.Oi,a.Pi=this.Pi,a.sn=this.sn):(a.Xd=this.Xd,a.Yd=this.Yd,a.mg=this.mg,a.ng=this.ng,a.jk=this.jk,a.kk=this.kk);a.Ua=this.Ua;a.Lg=this.Lg;return a};
gd.prototype.equalsApprox=gd.prototype.nj=function(a){if(!(a instanceof gd)||this.type!==a.type||this.Hr!==a.Hr)return s;switch(this.type){case Vc:case Ec:return H.I(this.D,a.D)&&H.I(this.F,a.F);case Wc:return H.I(this.D,a.D)&&H.I(this.F,a.F)&&H.I(this.ib,a.ib)&&H.I(this.Bb,a.Bb)&&H.I(this.Rd,a.Rd)&&H.I(this.Sd,a.Sd);case bd:return H.I(this.D,a.D)&&H.I(this.F,a.F)&&H.I(this.ib,a.ib)&&H.I(this.Bb,a.Bb);case cd:return H.I(this.Wf,a.Wf)&&H.I(this.nh,a.nh)&&H.I(this.xa,a.xa)&&H.I(this.Ga,a.Ga)&&H.I(this.radiusX,
a.radiusX)&&H.I(this.radiusY,a.radiusY);case dd:return this.$u===a.$u&&this.bv===a.bv&&H.I(this.Kv,a.Kv)&&H.I(this.D,a.D)&&H.I(this.F,a.F)&&H.I(this.radiusX,a.radiusX)&&H.I(this.radiusY,a.radiusY);default:return s}};
gd.prototype.toString=function(a){switch(this.type){case Vc:a=a===f?"M"+this.D.toString()+" "+this.F.toString():"M"+this.D.toFixed(a)+" "+this.F.toFixed(a);break;case Ec:a=a===f?"L"+this.D.toString()+" "+this.F.toString():"L"+this.D.toFixed(a)+" "+this.F.toFixed(a);break;case Wc:a=a===f?"C"+this.ib.toString()+" "+this.Bb.toString()+" "+this.Rd.toString()+" "+this.Sd.toString()+" "+this.D.toString()+" "+this.F.toString():"C"+this.ib.toFixed(a)+" "+this.Bb.toFixed(a)+" "+this.Rd.toFixed(a)+" "+this.Sd.toFixed(a)+
" "+this.D.toFixed(a)+" "+this.F.toFixed(a);break;case bd:a=a===f?"Q"+this.ib.toString()+" "+this.Bb.toString()+" "+this.D.toString()+" "+this.F.toString():"Q"+this.ib.toFixed(a)+" "+this.Bb.toFixed(a)+" "+this.D.toFixed(a)+" "+this.F.toFixed(a);break;case cd:a=a===f?"B"+this.Wf.toString()+" "+this.nh.toString()+" "+this.xa.toString()+" "+this.Ga.toString()+" "+this.radiusX:"B"+this.Wf.toFixed(a)+" "+this.nh.toFixed(a)+" "+this.xa.toFixed(a)+" "+this.Ga.toFixed(a)+" "+this.radiusX;break;case dd:a=
a===f?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.Kv.toString()+" "+(this.bv?1:0)+" "+(this.$u?1:0)+" "+this.D.toString()+" "+this.F.toString():"A"+this.radiusX.toFixed(a)+" "+this.radiusY.toFixed(a)+" "+this.Kv.toFixed(a)+" "+(this.bv?1:0)+" "+(this.$u?1:0)+" "+this.D.toFixed(a)+" "+this.F.toFixed(a);break;default:a=this.type.toString()}return a+(this.Lg?"z":"")};var Vc;gd.Move=Vc=y.w(gd,"Move",0);var Ec;gd.Line=Ec=y.w(gd,"Line",1);var Wc;gd.Bezier=Wc=y.w(gd,"Bezier",2);var bd;
gd.QuadraticBezier=bd=y.w(gd,"QuadraticBezier",3);var cd;gd.Arc=cd=y.w(gd,"Arc",4);var dd;gd.SvgArc=dd=y.w(gd,"SvgArc",4);gd.prototype.freeze=function(){this.$a=h;return this};gd.prototype.Pa=function(){this.$a=s;return this};gd.prototype.close=gd.prototype.close=function(){this.Lg=h;return this};
function ed(a,b){if(a.oi!==q&&b.Ua===s)return a.oi;var c=a.radiusX,d=a.radiusY;d===f&&(d=c);var e=H.VB(a.nm,a.om,c<d?c:d,a.Wf,a.Wf+a.nh);if(c!==d){var g=y.yg();g.reset();c<d?g.scale(1,d/c):g.scale(c/d,1);for(var c=e.length,d=y.M(),k=0,l=0,m=0;m<c;m++){var n=e[m];0===m&&(k=n.x1,l=n.y1);n.x1-=k;n.y1-=l;n.x2-=k;n.y2-=l;n.Bd-=k;n.Cd-=l;n.Cb-=k;n.Db-=l}for(m=0;m<c;m++)n=e[m],d.x=n.x1,d.y=n.y1,g.Qa(d),n.x1=d.x+k,n.y1=d.y+l,d.x=n.x2,d.y=n.y2,g.Qa(d),n.x2=d.x+k,n.y2=d.y+l,d.x=n.Bd,d.y=n.Cd,g.Qa(d),n.Bd=d.x+
k,n.Cd=d.y+l,d.x=n.Cb,d.y=n.Db,g.Qa(d),n.Cb=d.x+k,n.Db=d.y+l;y.B(d);y.ye(g)}a.oi=e;return a.oi}
function fd(a,b,c,d){function e(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(g(a,b))}function g(a,b){return(a[0]*b[0]+a[1]*b[1])/(Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))*Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)))}if(a.oi!==q&&b.Ua===s)return a.oi;b=a.Oi;var k=a.Pi,l=a.sn*(Math.PI/180),m=a.Wf,n=a.$d,p=a.Xd,r=a.Yd,t=Math.cos(l)*(c-p)/2+Math.sin(l)*(d-r)/2,u=-Math.sin(l)*(c-p)/2+Math.cos(l)*(d-r)/2,v=Math.pow(t,2)/Math.pow(b,2)+Math.pow(u,2)/Math.pow(k,2);1<v&&(b*=Math.sqrt(v),k*=Math.sqrt(v));
v=(m===n?-1:1)*Math.sqrt((Math.pow(b,2)*Math.pow(k,2)-Math.pow(b,2)*Math.pow(u,2)-Math.pow(k,2)*Math.pow(t,2))/(Math.pow(b,2)*Math.pow(u,2)+Math.pow(k,2)*Math.pow(t,2)));isNaN(v)&&(v=0);m=v*b*u/k;v=v*-k*t/b;isNaN(m)&&(m=0);isNaN(v)&&(v=0);c=(c+p)/2+Math.cos(l)*m-Math.sin(l)*v;d=(d+r)/2+Math.sin(l)*m+Math.cos(l)*v;l=e([1,0],[(t-m)/b,(u-v)/k]);r=[(t-m)/b,(u-v)/k];u=[(-t-m)/b,(-u-v)/k];t=e(r,u);-1>=g(r,u)&&(t=Math.PI);1<=g(r,u)&&(t=0);0===n&&0<t&&(t-=2*Math.PI);1===n&&0>t&&(t+=2*Math.PI);n=b>k?1:b/k;
u=b>k?k/b:1;b=H.VB(0,0,b>k?b:k,l,l+t,h);k=y.yg();k.reset();k.translate(c,d);k.rotate(a.sn,0,0);k.scale(n,u);Tc(b,k);y.ye(k);a.oi=b;return a.oi}y.g(gd,"isClosed",gd.prototype.Hr);y.defineProperty(gd,{Hr:"isClosed"},w("Lg"),function(a){this.Lg!==a&&(this.Lg=a,this.Ua=h)});y.g(gd,"type",gd.prototype.type);y.defineProperty(gd,{type:"type"},w("Y"),function(a){x&&y.rb(a,gd,gd,"type");y.K(this,a);this.Y=a;this.Ua=h});y.g(gd,"endX",gd.prototype.D);
y.defineProperty(gd,{D:"endX"},w("Xd"),function(a){x&&y.p(a,gd,"endX");y.K(this,a);this.Xd=a;this.Ua=h});y.g(gd,"endY",gd.prototype.F);y.defineProperty(gd,{F:"endY"},w("Yd"),function(a){x&&y.p(a,gd,"endY");y.K(this,a);this.Yd=a;this.Ua=h});y.defineProperty(gd,{ib:"point1X"},w("mg"),function(a){x&&y.p(a,gd,"point1X");y.K(this,a);this.mg=a;this.Ua=h});y.defineProperty(gd,{Bb:"point1Y"},w("ng"),function(a){x&&y.p(a,gd,"point1Y");y.K(this,a);this.ng=a;this.Ua=h});
y.defineProperty(gd,{Rd:"point2X"},w("jk"),function(a){x&&y.p(a,gd,"point2X");y.K(this,a);this.jk=a;this.Ua=h});y.defineProperty(gd,{Sd:"point2Y"},w("kk"),function(a){x&&y.p(a,gd,"point2Y");y.K(this,a);this.kk=a;this.Ua=h});y.defineProperty(gd,{xa:"centerX"},w("nm"),function(a){x&&y.p(a,gd,"centerX");y.K(this,a);this.nm=a;this.Ua=h});y.defineProperty(gd,{Ga:"centerY"},w("om"),function(a){x&&y.p(a,gd,"centerY");y.K(this,a);this.om=a;this.Ua=h});
y.defineProperty(gd,{radiusX:"radiusX"},w("Oi"),function(a){x&&y.p(a,gd,"radiusX");0>a&&y.ka(a,">= zero",gd,"radiusX");y.K(this,a);this.Oi=a;this.Ua=h});y.defineProperty(gd,{radiusY:"radiusY"},w("Pi"),function(a){x&&y.p(a,gd,"radiusY");0>a&&y.ka(a,">= zero",gd,"radiusY");y.K(this,a);this.Pi=a;this.Ua=h});y.defineProperty(gd,{Wf:"startAngle"},w("Zd"),function(a){this.Zd!==a&&(y.K(this,a),x&&y.p(a,gd,"startAngle"),a%=360,0>a&&(a+=360),this.Zd=a,this.Ua=h)});
y.defineProperty(gd,{nh:"sweepAngle"},w("$d"),function(a){x&&y.p(a,gd,"sweepAngle");y.K(this,a);360<a&&(a=360);-360>a&&(a=-360);this.$d=a;this.Ua=h});y.defineProperty(gd,{$u:"isClockwiseArc"},function(){return!!this.$d},function(a){y.K(this,a);this.$d=a?1:0;this.Ua=h});y.defineProperty(gd,{bv:"isLargeArc"},function(){return!!this.Zd},function(a){y.K(this,a);this.Zd=a?1:0;this.Ua=h});
y.defineProperty(gd,{Kv:"xAxisRotation"},w("sn"),function(a){x&&y.p(a,gd,"xAxisRotation");a%=360;0>a&&(a+=360);y.K(this,a);this.sn=a;this.Ua=h});function jd(){this.ca=q;this.Wx=(new A(0,0)).freeze();this.Ew=(new A(0,0)).freeze();this.Js=this.Bt=0;this.pt="";this.ku=this.Xs=s;this.Vs=this.Ms=0;this.pi=this.et=s;this.lp=q;this.iu=0;this.Df=this.gu=q}y.ba("InputEvent",jd);
jd.prototype.copy=function(){var a=new jd;a.ca=this.ca;a.Wx=this.Rc.copy().freeze();a.Ew=this.T.copy().freeze();a.Bt=this.Bt;a.Js=this.Js;a.pt=this.pt;a.Xs=this.Xs;a.ku=this.ku;a.Ms=this.Ms;a.Vs=this.Vs;a.et=this.et;a.pi=this.pi;a.lp=this.lp;a.iu=this.iu;a.gu=this.gu;a.Df=this.Df;return a};
jd.prototype.toString=function(){var a="^";this.ih&&(a+="M:"+this.ih);this.button&&(a+="B:"+this.button);this.key&&(a+="K:"+this.key);this.ce&&(a+="C:"+this.ce);this.lj&&(a+="D:"+this.lj);this.ee&&(a+="h");this.bubbles&&(a+="b");this.T!==q&&(a+="@"+this.T.toString());return a};y.g(jd,"diagram",jd.prototype.h);y.defineProperty(jd,{h:"diagram"},w("ca"),ba("ca"));y.g(jd,"viewPoint",jd.prototype.Rc);y.defineProperty(jd,{Rc:"viewPoint"},w("Wx"),function(a){y.l(a,A,jd,"viewPoint");this.Wx.assign(a)});
y.g(jd,"documentPoint",jd.prototype.T);y.defineProperty(jd,{T:"documentPoint"},w("Ew"),function(a){y.l(a,A,jd,"documentPoint");this.Ew.assign(a)});y.g(jd,"modifiers",jd.prototype.ih);y.defineProperty(jd,{ih:"modifiers"},w("Bt"),ba("Bt"));y.g(jd,"button",jd.prototype.button);y.defineProperty(jd,{button:"button"},w("Js"),ba("Js"));y.g(jd,"key",jd.prototype.key);y.defineProperty(jd,{key:"key"},w("pt"),ba("pt"));y.g(jd,"down",jd.prototype.mj);y.defineProperty(jd,{mj:"down"},w("Xs"),ba("Xs"));
y.g(jd,"up",jd.prototype.ni);y.defineProperty(jd,{ni:"up"},w("ku"),ba("ku"));y.g(jd,"clickCount",jd.prototype.ce);y.defineProperty(jd,{ce:"clickCount"},w("Ms"),ba("Ms"));y.g(jd,"delta",jd.prototype.lj);y.defineProperty(jd,{lj:"delta"},w("Vs"),ba("Vs"));y.g(jd,"handled",jd.prototype.ee);y.defineProperty(jd,{ee:"handled"},w("et"),ba("et"));y.g(jd,"bubbles",jd.prototype.bubbles);y.defineProperty(jd,{bubbles:"bubbles"},w("pi"),ba("pi"));y.g(jd,"event",jd.prototype.event);
y.defineProperty(jd,{event:"event"},w("lp"),ba("lp"));y.A(jd,{dv:"isTouchEvent"},function(){var a=window.TouchEvent;return a&&this.event instanceof a});y.g(jd,"timestamp",jd.prototype.timestamp);y.defineProperty(jd,{timestamp:"timestamp"},w("iu"),ba("iu"));y.g(jd,"targetDiagram",jd.prototype.Xf);y.defineProperty(jd,{Xf:"targetDiagram"},w("gu"),ba("gu"));y.g(jd,"targetObject",jd.prototype.zd);y.defineProperty(jd,{zd:"targetObject"},w("Df"),ba("Df"));
y.A(jd,{control:"control"},function(){return 0!==(this.ih&1)});y.A(jd,{shift:"shift"},function(){return 0!==(this.ih&4)});y.A(jd,{alt:"alt"},function(){return 0!==(this.ih&2)});y.A(jd,{dJ:"meta"},function(){return 0!==(this.ih&8)});y.A(jd,{left:"left"},function(){return 0===this.button});y.A(jd,{eJ:"middle"},function(){return 1===this.button});y.A(jd,{right:"right"},function(){return 2===this.button});function kd(){this.ca=q;this.Fb="";this.Qt=this.cu=q;this.Ks=s}y.ba("DiagramEvent",kd);
kd.prototype.copy=function(){var a=new kd;a.ca=this.ca;a.Fb=this.Fb;a.cu=this.cu;a.Qt=this.Qt;a.Ks=this.Ks;return a};kd.prototype.toString=function(){var a="*"+this.name;this.cancel&&(a+="x");this.Dv!==q&&(a+=":"+this.Dv.toString());this.ov!==q&&(a+="("+this.ov.toString()+")");return a};y.g(kd,"diagram",kd.prototype.h);y.defineProperty(kd,{h:"diagram"},w("ca"),ba("ca"));y.g(kd,"name",kd.prototype.name);y.defineProperty(kd,{name:"name"},w("Fb"),ba("Fb"));y.g(kd,"subject",kd.prototype.Dv);
y.defineProperty(kd,{Dv:"subject"},w("cu"),ba("cu"));y.g(kd,"parameter",kd.prototype.ov);y.defineProperty(kd,{ov:"parameter"},w("Qt"),ba("Qt"));y.g(kd,"cancel",kd.prototype.cancel);y.defineProperty(kd,{cancel:"cancel"},w("Ks"),ba("Ks"));function ld(){this.clear()}y.ba("ChangedEvent",ld);var md;ld.Transaction=md=y.w(ld,"Transaction",-1);var rd;ld.Property=rd=y.w(ld,"Property",0);var sd;ld.Insert=sd=y.w(ld,"Insert",1);var td;ld.Remove=td=y.w(ld,"Remove",2);
ld.prototype.clear=ld.prototype.clear=function(){this.Ls=rd;this.Tt=this.At="";this.Et=this.Ft=this.Lt=this.Mt=this.Kt=this.ca=this.Jd=q};ld.prototype.copy=function(){var a=new ld;a.Jd=this.Jd;a.ca=this.ca;a.Ls=this.Ls;a.At=this.At;a.Tt=this.Tt;a.Kt=this.Kt;var b=this.Mt;a.Mt=y.tb(b)&&"function"===typeof b.U?b.U():b;b=this.Lt;a.Lt=y.tb(b)&&"function"===typeof b.U?b.U():b;b=this.Ft;a.Ft=y.tb(b)&&"function"===typeof b.U?b.U():b;b=this.Et;a.Et=y.tb(b)&&"function"===typeof b.U?b.U():b;return a};
ld.prototype.toString=function(){var a="",a=this.Yc===md?a+"* ":this.Yc===rd?a+(this.ea!==q?"!m":"!d"):a+((this.ea!==q?"!m":"!d")+this.Yc);this.propertyName&&"string"===typeof this.propertyName&&(a+=" "+this.propertyName);this.Ye&&this.Ye!==this.propertyName&&(a+=" "+this.Ye);a+=": ";this.Yc===md?this.oldValue!==q&&(a+=" "+this.oldValue):(this.object!==q&&(a+=ud(this.object)),this.oldValue!==q&&(a+="  old: "+ud(this.oldValue)),this.tf!==q&&(a+=" "+this.tf),this.newValue!==q&&(a+="  new: "+ud(this.newValue)),
this.rf!==q&&(a+=" "+this.rf));return a};ld.prototype.getValue=ld.prototype.wa=function(a){return a?this.oldValue:this.newValue};ld.prototype.getParam=ld.prototype.KI=function(a){return a?this.tf:this.rf};ld.prototype.canUndo=ld.prototype.canUndo=function(){return this.ea!==q||this.h!==q?h:s};ld.prototype.undo=ld.prototype.undo=function(){this.canUndo()&&(this.ea!==q?this.ea.changeState(this,h):this.h!==q&&this.h.changeState(this,h))};
ld.prototype.canRedo=ld.prototype.canRedo=function(){return this.ea!==q||this.h!==q?h:s};ld.prototype.redo=ld.prototype.redo=function(){this.canRedo()&&(this.ea!==q?this.ea.changeState(this,s):this.h!==q&&this.h.changeState(this,s))};y.g(ld,"model",ld.prototype.ea);y.defineProperty(ld,{ea:"model"},w("Jd"),ba("Jd"));y.g(ld,"diagram",ld.prototype.h);y.defineProperty(ld,{h:"diagram"},w("ca"),ba("ca"));y.g(ld,"change",ld.prototype.Yc);
y.defineProperty(ld,{Yc:"change"},w("Ls"),function(a){x&&y.rb(a,ld,ld,"change");this.Ls=a});y.g(ld,"modelChange",ld.prototype.Ye);y.defineProperty(ld,{Ye:"modelChange"},w("At"),function(a){x&&y.j(a,"string",ld,"modelChange");this.At=a});y.g(ld,"propertyName",ld.prototype.propertyName);y.defineProperty(ld,{propertyName:"propertyName"},w("Tt"),function(a){x&&"string"!==typeof a&&y.l(a,Function,ld,"propertyName");this.Tt=a});y.g(ld,"object",ld.prototype.object);
y.defineProperty(ld,{object:"object"},w("Kt"),ba("Kt"));y.g(ld,"oldValue",ld.prototype.oldValue);y.defineProperty(ld,{oldValue:"oldValue"},w("Mt"),ba("Mt"));y.g(ld,"oldParam",ld.prototype.tf);y.defineProperty(ld,{tf:"oldParam"},w("Lt"),ba("Lt"));y.g(ld,"newValue",ld.prototype.newValue);y.defineProperty(ld,{newValue:"newValue"},w("Ft"),ba("Ft"));y.g(ld,"newParam",ld.prototype.rf);y.defineProperty(ld,{rf:"newParam"},w("Et"),ba("Et"));
function G(a){1<arguments.length&&y.m("Model constructor can only take one optional argument, the Array of node data.");y.mc(this);this.yw=this.Fb="";this.ak=s;this.lf=[];this.nc=new ma(q,Object);this.ll="key";this.Qs=this.tt=q;this.iq="category";this.dg=new ma(q,na);this.Ii=q;this.Ph=s;this.Vx=q;this.va=new vd;a!==f&&(this.Qf=a)}y.ba("Model",G);G.prototype.clear=G.prototype.clear=function(){this.lf=[];this.nc.clear();this.dg.clear();this.va.clear()};
G.prototype.writeJsonProtected=function(){var a="";""!==this.name&&(a+=',\n  "name": '+this.quote(this.name));""!==this.Dl&&(a+=',\n  "dataFormat": '+this.quote(this.Dl));this.Za&&(a+=',\n  "isReadOnly": '+this.Za);"key"!==this.Gk&&"string"===typeof this.Gk&&(a+=',\n  "nodeKeyProperty": '+this.quote(this.Gk));"category"!==this.Fk&&"string"===typeof this.Fk&&(a+=',\n  "nodeCategoryProperty": '+this.quote(this.Fk));return a};G.prototype.Kz=function(){return',\n  "nodeDataArray": '+wd(this,this.Qf,h)};
G.prototype.readJsonProtected=function(a){a.name&&(this.name=a.name);a.dataFormat&&(this.Dl=a.dataFormat);a.isReadOnly&&(this.Za=a.isReadOnly);a.nodeKeyProperty&&(this.Gk=a.nodeKeyProperty);a.nodeCategoryProperty&&(this.Fk=a.nodeCategoryProperty)};G.prototype.kz=function(a){a.nodeDataArray&&(a=a.nodeDataArray,xd(this,a),this.Qf=a)};
G.prototype.toString=function(a){a===f&&(a=0);if(1<a)return this.Cz();var b=(""!==this.name?this.name:"")+" Model";if(0<a){b+="\n node data:";a=this.Qf;var c=y.Tb(a),d;for(d=0;d<c;d++)var e=y.Gb(a,d),b=b+(" "+this.sb(e)+":"+ud(e))}return b};G.prototype.toJson=G.prototype.Cz=function(a){a===f&&(a=this.constructor===G?"go.Model":this.constructor===O?"go.GraphLinksModel":this.constructor===yd?"go.TreeModel":y.dh(this));return'{ "class": '+this.quote(a)+this.writeJsonProtected()+this.Kz()+"}"};
G.fromJson=function(a,b){b===f&&(b=q);b&&y.l(b,G,G,"fromJson:model");var c=q;if("string"===typeof a)if(window&&window.JSON&&window.JSON.parse)try{c=window.JSON.parse(a)}catch(d){x&&y.trace("JSON.parse error: "+d.toString())}else y.trace("WARNING: no JSON.parse available");else"object"===typeof a?c=a:y.m("Unable to construct a Model from: "+a);if(b===q){var e;e=q;var g=c["class"];if("string"===typeof g)try{var k=q;0===g.indexOf("go.")?(g=g.substr(3),k=fa[g]):(k=fa[g])||(k=window[g]);"function"===typeof k&&
(e=new k)}catch(l){}e===q||e instanceof G?b=e:y.m("Unable to construct a Model of declared class: "+c["class"])}b===q&&(b=new O);b.readJsonProtected(c);b.kz(c);return b};
function xd(a,b){if(y.isArray(b))for(var c=y.Tb(b),d=0;d<c;d++){var e=y.Gb(b,d);y.tb(e)&&y.EB(b,d,xd(a,e))}else if(y.tb(b)){for(d in b)if(e=b[d],y.tb(e)&&(e=xd(a,e),b[d]=e,"points"===d&&Array.isArray(e))){for(var g=h,k=0;k<e.length;k++)if("number"!==typeof e[k]){g=s;break}if(g){g=new F(A);for(k=0;k<e.length/2;k++){var l=new A(e[2*k],e[2*k+1]);g.add(l)}g.freeze();b[d]=g}}if("object"!==typeof b)c=b;else{d=b;e=b["class"];if("NaN"===e)d=NaN;else if("go.Point"===e)d=new A(zd(b.x),zd(b.y));else if("go.Size"===
e)d=new ha(zd(b.width),zd(b.height));else if("go.Rect"===e)d=new B(zd(b.x),zd(b.y),zd(b.width),zd(b.height));else if("go.Margin"===e)d=new ab(zd(b.top),zd(b.right),zd(b.bottom),zd(b.left));else if("go.Spot"===e)d="string"===typeof b["enum"]?vb(b["enum"]):new J(zd(b.x),zd(b.y),zd(b.offsetX),zd(b.offsetY));else if("go.Brush"===e){if(d=new Gd,d.type=y.Il(Gd,b.type),b.start instanceof J&&(d.start=b.start),b.end instanceof J&&(d.end=b.end),"number"===typeof b.startRadius&&(d.Co=zd(b.startRadius)),"number"===
typeof b.endRadius&&(d.Ln=zd(b.endRadius)),e=b.colorStops)for(c in e)d.addColorStop(parseFloat(c),e[c])}else"go.Geometry"===e&&(d="string"===typeof b.path?Lc(b.path):new nc,d.type=y.Il(nc,b.type),"number"===typeof b.startX&&(d.ia=zd(b.startX)),"number"===typeof b.startY&&(d.ja=zd(b.startY)),"number"===typeof b.endX&&(d.D=zd(b.endX)),"number"===typeof b.endY&&(d.F=zd(b.endY)),b.spot1 instanceof J&&(d.G=b.spot1),b.spot2 instanceof J&&(d.H=b.spot2));c=d}return c}return b}
G.prototype.quote=function(a){for(var b="",c=a.length,d=0;d<c;d++)var e=a[d],b='"'===e||"\\"===e?b+("\\"+e):"\b"===e?b+"\\b":"\f"===e?b+"\\f":"\n"===e?b+"\\n":"\r"===e?b+"\\r":"\t"===e?b+"\\t":b+e;return'"'+b+'"'};
G.prototype.writeJsonValue=G.prototype.Jv=function(a){var b;if(a===f)b="undefined";else if(a===q)b="null";else if(a===h)b="true";else if(a===s)b="false";else if("string"===typeof a)b=this.quote(a);else if("number"===typeof a)b=Infinity===a?"9e9999":-Infinity===a?"-9e9999":isNaN(a)?'{"class":"NaN"}':a.toString();else if(y.isArray(a))b=wd(this,a);else if(y.tb(a)){var c=a;if(c instanceof A)a={"class":"go.Point",x:Hd(c.x),y:Hd(c.y)};else if(c instanceof ha)a={"class":"go.Size",width:Hd(c.width),height:Hd(c.height)};
else if(c instanceof B)a={"class":"go.Rect",x:Hd(c.x),y:Hd(c.y),width:Hd(c.width),height:Hd(c.height)};else if(c instanceof ab)a={"class":"go.Margin",top:Hd(c.top),right:Hd(c.right),bottom:Hd(c.bottom),left:Hd(c.left)};else if(c instanceof J)a=yb(c)?{"class":"go.Spot",x:Hd(c.x),y:Hd(c.y),offsetX:Hd(c.offsetX),offsetY:Hd(c.offsetY)}:{"class":"go.Spot","enum":c.toString()};else if(c instanceof Gd){a={"class":"go.Brush",type:c.type.name};if(c.type===Id)a.color=c.color;else if(c.type===Jd||c.type===Kd)a.start=
c.start,a.end=c.end,c.type===Kd&&(0!==c.Co&&(a.startRadius=Hd(c.Co)),isNaN(c.Ln)||(a.endRadius=Hd(c.Ln)));if(c.Fn!==q){for(var d={},c=c.Fn.k;c.next();)d[c.key.toString()]=c.value;a.colorStops=d}}else c instanceof nc&&(a={"class":"go.Geometry",type:c.type.name},0!==c.ia&&(a.startX=Hd(c.ia)),0!==c.ja&&(a.startY=Hd(c.ja)),0!==c.D&&(a.endX=Hd(c.D)),0!==c.F&&(a.endY=Hd(c.F)),c.G.L(Mb)||(a.spot1=c.G),c.H.L(Zb)||(a.spot2=c.H),c.type===oc&&(a.path=Fc(c)));var d="{",e=h;for(b in a)if(c=y.Xa(a,b),!(c===f||
"__gohashid"===b||"_"===b[0]||"function"===typeof c))if(e?e=s:d+=", ",d+='"'+b+'":',"points"===b&&c instanceof F&&c.Y===A){for(var g="[",c=c.k;c.next();){var k=c.value;1<g.length&&(g+=",");g+=this.Jv(k.x);g+=",";g+=this.Jv(k.y)}g+="]";d+=g}else d+=this.Jv(c);b=d+"}"}else b="function"===typeof a?"null":a.toString();return b};function wd(a,b,c){var d=y.Tb(b),e="[ ";c&&1<d&&(e+="\n");for(var g=0;g<d;g++){var k=y.Gb(b,g);k!==f&&(0<g&&(e+=",",c&&(e+="\n")),e+=a.Jv(k))}c&&1<d&&(e+="\n");return e+" ]"}
function Hd(a){return isNaN(a)?"NaN":Infinity===a?"9e9999":-Infinity===a?"-9e9999":a}function zd(a){return"number"===typeof a?a:"NaN"===a?NaN:"9e9999"===a?Infinity:"-9e9999"===a?-Infinity:parseFloat(a)}y.g(G,"name",G.prototype.name);y.defineProperty(G,{name:"name"},w("Fb"),function(a){var b=this.Fb;b!==a&&(y.j(a,"string",G,"name"),this.Fb=a,this.i("name",b,a))});y.g(G,"dataFormat",G.prototype.Dl);
y.defineProperty(G,{Dl:"dataFormat"},w("yw"),function(a){var b=this.yw;b!==a&&(y.j(a,"string",G,"dataFormat"),this.yw=a,this.i("dataFormat",b,a))});y.g(G,"isReadOnly",G.prototype.Za);y.defineProperty(G,{Za:"isReadOnly"},w("ak"),function(a){var b=this.ak;b!==a&&(y.j(a,"boolean",G,"isReadOnly"),this.ak=a,this.i("isReadOnly",b,a))});G.prototype.addChangedListener=G.prototype.ey=function(a){y.j(a,"function",G,"addChangedListener:listener");this.Ii===q&&(this.Ii=new F("function"));this.Ii.add(a)};
G.prototype.removeChangedListener=G.prototype.nz=function(a){y.j(a,"function",G,"removeChangedListener:listener");this.Ii!==q&&(this.Ii.remove(a),0===this.Ii.count&&(this.Ii=q))};G.prototype.zu=function(a){this.Xb||this.va.xC(a);if(this.Ii!==q){var b=this.Ii,c=b.length;if(1===c)b=b.sa(0),b(a);else if(0!==c)for(var d=b.Ee(),e=0;e<c;e++)b=d[e],b(a)}};G.prototype.raiseChangedEvent=G.prototype.Qc=function(a,b,c,d,e,g,k){Ld(this,"",a,b,c,d,e,g,k)};
G.prototype.raiseChanged=G.prototype.i=function(a,b,c,d,e){Ld(this,"",rd,a,this,b,c,d,e)};G.prototype.raiseDataChanged=G.prototype.jz=function(a,b,c,d,e,g){Ld(this,"",rd,b,a,c,d,e,g)};function Ld(a,b,c,d,e,g,k,l,m){l===f&&(l=q);m===f&&(m=q);var n=new ld;n.ea=a;n.Yc=c;n.Ye=b;n.propertyName=d;n.object=e;n.oldValue=g;n.tf=l;n.newValue=k;n.rf=m;a.zu(n)}y.g(G,"undoManager",G.prototype.va);
y.defineProperty(G,{va:"undoManager"},w("Vx"),function(a){var b=this.Vx;b!==a&&(y.l(a,vd,G,"undoManager"),b!==q&&b.oH(this),this.Vx=a,a!==q&&a.kF(this))});y.g(G,"skipsUndoManager",G.prototype.Xb);y.defineProperty(G,{Xb:"skipsUndoManager"},w("Ph"),function(a){y.j(a,"boolean",G,"skipsUndoManager");this.Ph=a});
G.prototype.changeState=function(a,b){if(a!==q&&a.ea===this)if(a.Yc===rd){var c=a.object,d=a.propertyName,e=a.wa(b);y.Oa(c,d,e)}else a.Yc===sd?"nodeDataArray"===a.Ye?(c=a.newValue,y.tb(c)&&(d=this.sb(c),d!==f&&(b?(y.Xh(this.lf,a.rf),this.nc.remove(d)):(y.Wh(this.lf,a.rf,c),this.nc.add(d,c))))):""===a.Ye?(c=a.object,!y.isArray(c)&&a.propertyName&&(c=y.Xa(a.object,a.propertyName)),y.isArray(c)&&(d=a.newValue,e=a.rf,b?y.Xh(c,e):y.Wh(c,e,d))):y.m("unknown ChangedEvent.Insert object: "+a.toString()):a.Yc===
td?"nodeDataArray"===a.Ye?(c=a.oldValue,y.tb(c)&&(d=this.sb(c),d!==f&&(b?(y.Wh(this.lf,a.tf,c),this.nc.add(d,c)):(y.Xh(this.lf,a.tf),this.nc.remove(d))))):""===a.Ye?(c=a.object,!y.isArray(c)&&a.propertyName&&(c=y.Xa(a.object,a.propertyName)),y.isArray(c)&&(d=a.oldValue,e=a.tf,b?y.Wh(c,e,d):y.Xh(c,e))):y.m("unknown ChangedEvent.Remove object: "+a.toString()):a.Yc!==md&&y.m("unknown ChangedEvent: "+a.toString())};G.prototype.startTransaction=G.prototype.lc=function(a){return this.va.lc(a)};
G.prototype.commitTransaction=G.prototype.se=function(a){return this.va.se(a)};G.prototype.rollbackTransaction=G.prototype.es=function(){return this.va.es()};G.prototype.updateTargetBindings=G.prototype.zb=function(a,b){b===f&&(b="");Ld(this,"SourceChanged",md,b,a,q,q)};y.g(G,"nodeKeyProperty",G.prototype.Gk);
y.defineProperty(G,{Gk:"nodeKeyProperty"},w("ll"),function(a){var b=this.ll;b!==a&&(Md(a,G,"nodeKeyProperty"),0<this.nc.count&&y.m("Cannot set Model.nodeKeyProperty when there is existing node data"),this.ll=a,this.i("nodeKeyProperty",b,a))});function Md(a,b,c){"string"!==typeof a&&"function"!==typeof a&&y.Jb(a,"string or function",b,c)}
G.prototype.getKeyForNodeData=G.prototype.sb=function(a){if(a!==q){var b=this.ll;if(""!==b&&(b=y.Xa(a,b),b!==f)){if(Nd(b))return b;x&&y.trace("Key value for node data "+a+" is not a number or a string: "+b)}}};
G.prototype.setKeyForNodeData=G.prototype.uz=function(a,b){b===q&&(b=f);b!==f&&!Nd(b)&&y.Jb(b,"number or string",G,"setKeyForNodeData:key");if(a!==q){var c=this.ll;if(""!==c)if(this.te(a)){var d=y.Xa(a,c);d!==b&&this.Te(b)===q&&(y.Oa(a,c,b),this.nc.remove(d),this.nc.add(b,a),Ld(this,"nodeKey",rd,c,a,d,b),"string"===typeof c&&this.zb(a,c),this.cs(d,b))}else y.Oa(a,c,b)}};y.g(G,"makeUniqueKeyFunction",G.prototype.WG);
y.defineProperty(G,{WG:"makeUniqueKeyFunction"},w("tt"),function(a){var b=this.tt;b!==a&&(a!==q&&y.j(a,"function",G,"makeUniqueKeyFunction"),this.tt=a,this.i("makeUniqueKeyFunction",b,a))});function Nd(a){return"number"===typeof a||"string"===typeof a}G.prototype.containsNodeData=G.prototype.te=function(a){a=this.sb(a);return a===f?s:this.nc.contains(a)};G.prototype.findNodeDataForKey=G.prototype.Te=function(a){a===q&&y.m("Model.findNodeDataForKey:key must not be null");return a===f||!Nd(a)?q:this.nc.wa(a)};
y.g(G,"nodeDataArray",G.prototype.Qf);
y.defineProperty(G,{Qf:"nodeDataArray"},w("lf"),function(a){var b=this.lf;if(b!==a){y.mr(a,G,"nodeDataArray");this.nc.clear();this.Gz();for(var c=y.Tb(a),d=0;d<c;d++){var e=y.Gb(a,d);if(!y.tb(e)){y.m("Model.nodeDataArray must only contain Objects, not: "+e);return}y.Dr(e)}this.lf=a;for(var g=new F(Object),d=0;d<c;d++){var e=y.Gb(a,d),k=this.sb(e);k===f?g.add(e):this.nc.wa(k)!==q?g.add(e):this.nc.add(k,e)}for(d=g.k;d.next();)e=d.value,this.YC(e),g=this.sb(e),this.nc.add(g,e);Ld(this,"nodeDataArray",
rd,"nodeDataArray",this,b,a);for(d=0;d<c;d++)e=y.Gb(a,d),this.xo(e),this.wo(e);this.KB();Array.isArray(a)||(this.Za=h)}});
G.prototype.makeNodeDataKeyUnique=G.prototype.YC=function(a){if(a!==q){var b=this.ll;if(""!==b){var c=this.sb(a);if(c===f||this.nc.contains(c)){var d=this.tt;if(d!==q&&(c=d(this,a),c!==f&&c!==q&&!this.nc.contains(c))){y.Oa(a,b,c);return}if("string"===typeof c){for(d=2;this.nc.contains(c+d);)d++;y.Oa(a,b,c+d)}else if(c===f||"number"===typeof c){for(d=-this.nc.count-1;this.nc.contains(d);)d--;y.Oa(a,b,d)}else y.m("Model.getKeyForNodeData returned something other than a string or a number: "+c)}}}};
G.prototype.addNodeData=G.prototype.fr=function(a){if(a!==q){y.Dr(a);var b=this.sb(a);b!==f&&this.nc.wa(b)===a||(this.YC(a),b=this.sb(a),this.nc.add(b,a),b=y.Tb(this.lf),y.Wh(this.lf,b,a),Ld(this,"nodeDataArray",sd,"nodeDataArray",this,q,a,q,b),this.xo(a),this.wo(a))}};G.prototype.removeNodeData=G.prototype.wD=function(a){if(a!==q){var b=this.sb(a);b!==f&&this.nc.contains(b)&&(this.nc.remove(b),b=y.ky(this.lf,a),0>b||(y.Xh(this.lf,b),Ld(this,"nodeDataArray",td,"nodeDataArray",this,a,q,b,q),this.ws(a)))}};
da=G.prototype;da.cs=function(a,b){var c=Yd(this,a);c instanceof na&&this.dg.add(b,c)};da.Gz=aa();da.xo=aa();da.wo=aa();da.ws=aa();function Zd(a,b,c){if(b!==f){var d=a.dg.wa(b);d===q&&(d=new na,a.dg.add(b,d));d.add(c)}}function $d(a,b,c){if(b!==f){var d=a.dg.wa(b);d instanceof na&&(c===f||c===q?a.dg.remove(b):(d.remove(c),0===d.count&&a.dg.remove(b)))}}
G.prototype.dumpDelayedReferences=G.prototype.rI=function(){y.trace("DelayedReferences ("+this.dg.count+")");for(var a=this.dg.k;a.next();){for(var b="",c=a.value.k;c.next();)b+=ud(c.value)+", ";y.trace("  "+a.key+": "+b)}};function Yd(a,b){if(b===f)return q;var c=a.dg.wa(b);return c instanceof na?c:q}G.prototype.clearUnresolvedReferences=G.prototype.KB=function(a){a===f?this.dg.clear():this.dg.remove(a)};y.g(G,"copyNodeDataFunction",G.prototype.QF);
y.defineProperty(G,{QF:"copyNodeDataFunction"},w("Qs"),function(a){var b=this.Qs;b!==a&&(a!==q&&y.j(a,"function",G,"copyNodeDataFunction"),this.Qs=a,this.i("copyNodeDataFunction",b,a))});G.prototype.copyNodeData=G.prototype.jj=function(a){if(a===q)return q;var b=q,b=this.Qs;if(b!==q)b=b(a,this);else{var b=new a.constructor,c;for(c in a)y.Oa(b,c,y.Xa(a,c))}b&&y.mc(b);return b};
G.prototype.setDataProperty=G.prototype.wv=function(a,b,c){x&&(y.j(a,"object",G,"setDataProperty:data"),y.j(b,"string",G,"setDataProperty:propname"),""===b&&y.m("Model.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.te(a))if(b===this.Gk)this.uz(a,c);else{if(b===this.Fk){this.uv(a,c);return}}else!y.Eo&&a instanceof P&&(y.Eo=h,y.trace('Model.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),y.trace("  Is that really your intent?"));var d=
y.Xa(a,b);d!==c&&(y.Oa(a,b,c),this.jz(a,b,d,c))};G.prototype.addArrayItem=G.prototype.OH=function(a,b){this.IG(a,-1,b)};G.prototype.insertArrayItem=G.prototype.IG=function(a,b,c){x&&(y.mr(a,G,"insertArrayItem:arr"),y.p(b,G,"insertArrayItem:idx"));a===this.lf&&y.m("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray");0>b&&(b=y.Tb(a));y.Wh(a,b,c);Ld(this,"",sd,"",a,q,c,q,b)};
G.prototype.removeArrayItem=G.prototype.pJ=function(a,b){b===f&&(b=-1);x&&(y.mr(a,G,"removeArrayItem:arr"),y.p(b,G,"removeArrayItem:idx"));a===this.lf&&y.m("Model.removeArrayItem should not be called on the Model.nodeDataArray");-1===b&&(b=y.Tb(a)-1);var c=y.Gb(a,b);y.Xh(a,b);Ld(this,"",td,"",a,c,q,b,q)};y.g(G,"nodeCategoryProperty",G.prototype.Fk);
y.defineProperty(G,{Fk:"nodeCategoryProperty"},w("iq"),function(a){var b=this.iq;b!==a&&(Md(a,G,"nodeCategoryProperty"),this.iq=a,this.i("nodeCategoryProperty",b,a))});G.prototype.getCategoryForNodeData=G.prototype.getCategoryForNodeData=function(a){if(a===q)return"";var b=this.iq;if(""===b)return"";b=y.Xa(a,b);if(b===f)return"";if("string"===typeof b)return b;x&&y.trace("getCategoryForNodeData found a non-string category for "+a+": "+b);return""};
G.prototype.setCategoryForNodeData=G.prototype.uv=function(a,b){y.j(b,"string",G,"setCategoryForNodeData:cat");if(a!==q){var c=this.iq;if(""!==c)if(this.te(a)){var d=y.Xa(a,c);d===f&&(d="");d!==b&&(y.Oa(a,c,b),Ld(this,"nodeCategory",rd,c,a,d,b))}else y.Oa(a,c,b)}};
function O(a,b){2<arguments.length&&y.m("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data.");G.call(this);this.ck=[];this.Vm=new na(Object);this.Nj=this.Ps=q;this.Fi="from";this.Hi="to";this.Rp=this.Pp="";this.Mp="category";this.Qg=this.Ht="";this.Gt="isGroup";this.Mi="group";a!==f&&(this.Qf=a);b!==f&&(this.sg=b)}y.ba("GraphLinksModel",O);y.Ka(O,G);
O.prototype.clear=O.prototype.clear=function(){G.prototype.clear.call(this);this.ck=[];this.Vm.clear()};O.prototype.toString=function(a){a===f&&(a=0);if(2<=a)return this.Cz();var b=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<a){b+="\n node data:";a=this.Qf;var c=y.Tb(a),d;for(d=0;d<c;d++)var e=y.Gb(a,d),b=b+(" "+this.sb(e)+":"+ud(e));b+="\n link data:";a=this.sg;c=y.Tb(a);for(d=0;d<c;d++)e=y.Gb(a,d),b+=" "+this.Ll(e)+"--\x3e"+this.Ml(e)}return b};
O.prototype.writeJsonProtected=function(){var a=G.prototype.writeJsonProtected.call(this),b="";"category"!==this.co&&"string"===typeof this.co&&(b+=',\n  "linkCategoryProperty": '+this.quote(this.co));"from"!==this.eo&&"string"===typeof this.eo&&(b+=',\n "linkFromKeyProperty": '+this.quote(this.eo));"to"!==this.jo&&"string"===typeof this.jo&&(b+=',\n  "linkToKeyProperty": '+this.quote(this.jo));""!==this.fo&&"string"===typeof this.fo&&(b+=',\n  "linkFromPortIdProperty": '+this.quote(this.fo));""!==
this.ko&&"string"===typeof this.ko&&(b+=',\n  "linkToPortIdProperty": '+this.quote(this.ko));""!==this.so&&"string"===typeof this.so&&(b+=',\n "nodeIsLinkLabelProperty": '+this.quote(this.so));""!==this.ho&&"string"===typeof this.ho&&(b+=',\n  "linkLabelKeysProperty": '+this.quote(this.ho));"isGroup"!==this.ro&&"string"===typeof this.ro&&(b+=',\n "nodeIsGroupProperty": '+this.quote(this.ro));"group"!==this.qo&&"string"===typeof this.qo&&(b+=',\n  "nodeGroupKeyProperty": '+this.quote(this.qo));return a+
b};O.prototype.Kz=function(){var a=G.prototype.Kz.call(this),b=',\n  "linkDataArray": '+wd(this,this.sg,h);return a+b};
O.prototype.readJsonProtected=function(a){G.prototype.readJsonProtected.call(this,a);a.linkFromKeyProperty&&(this.eo=a.linkFromKeyProperty);a.linkToKeyProperty&&(this.jo=a.linkToKeyProperty);a.linkFromPortIdProperty&&(this.fo=a.linkFromPortIdProperty);a.linkToPortIdProperty&&(this.ko=a.linkToPortIdProperty);a.linkCategoryProperty&&(this.co=a.linkCategoryProperty);a.nodeIsLinkLabelProperty&&(this.so=a.nodeIsLinkLabelProperty);a.linkLabelKeysProperty&&(this.ho=a.linkLabelKeysProperty);a.nodeIsGroupProperty&&
(this.ro=a.nodeIsGroupProperty);a.nodeGroupKeyProperty&&(this.qo=a.nodeGroupKeyProperty)};O.prototype.kz=function(a){G.prototype.kz.call(this,a);a.linkDataArray&&(a=a.linkDataArray,xd(this,a),this.sg=a)};
O.prototype.changeState=function(a,b){if(a.Yc===sd){var c=q;"linkDataArray"===a.Ye?c=this.sg:"linkLabelKeys"===a.Ye&&(c=this.Ak(a.object));if(y.isArray(c)){b?y.Xh(c,a.rf):y.Wh(c,a.rf,a.newValue);return}}else if(a.Yc===td&&(c=q,"linkDataArray"===a.Ye?c=this.sg:"linkLabelKeys"===a.Ye&&(c=this.Ak(a.object)),y.isArray(c))){b?y.Wh(c,a.tf,a.oldValue):y.Xh(c,a.tf);return}G.prototype.changeState.call(this,a,b)};y.g(O,"archetypeNodeData",O.prototype.jr);
y.defineProperty(O,{jr:"archetypeNodeData"},w("Nj"),function(a){var b=this.Nj;b!==a&&(a!==q&&y.l(a,Object,O,"archetypeNodeData"),this.Nj=a,this.i("archetypeNodeData",b,a))});O.prototype.Tl=function(a){if(a!==f){var b=this.Nj;if(b!==q){var c=this.Te(a);c===q&&(c=this.jj(b),y.Oa(c,this.ll,a),this.fr(c))}return a}};y.g(O,"linkFromKeyProperty",O.prototype.eo);
y.defineProperty(O,{eo:"linkFromKeyProperty"},w("Fi"),function(a){var b=this.Fi;b!==a&&(Md(a,O,"linkFromKeyProperty"),this.Fi=a,this.i("linkFromKeyProperty",b,a))});O.prototype.getFromKeyForLinkData=O.prototype.Ll=function(a){if(a!==q){var b=this.Fi;if(""!==b&&(b=y.Xa(a,b),b!==f)){if(Nd(b))return b;x&&y.trace("FromKey value for link data "+a+" is not a number or a string: "+b)}}};
O.prototype.setFromKeyForLinkData=O.prototype.xv=function(a,b){b===q&&(b=f);b!==f&&!Nd(b)&&y.Jb(b,"number or string",O,"setFromKeyForLinkData:key");if(a!==q){var c=this.Fi;if(""!==c)if(b=this.Tl(b),this.$h(a)){var d=y.Xa(a,c);d!==b&&($d(this,d,a),y.Oa(a,c,b),this.Te(b)===q&&Zd(this,b,a),Ld(this,"linkFromKey",rd,c,a,d,b),"string"===typeof c&&this.zb(a,c))}else y.Oa(a,c,b)}};y.g(O,"linkToKeyProperty",O.prototype.jo);
y.defineProperty(O,{jo:"linkToKeyProperty"},w("Hi"),function(a){var b=this.Hi;b!==a&&(Md(a,O,"linkToKeyProperty"),this.Hi=a,this.i("linkToKeyProperty",b,a))});O.prototype.getToKeyForLinkData=O.prototype.Ml=function(a){if(a!==q){var b=this.Hi;if(""!==b&&(b=y.Xa(a,b),b!==f)){if(Nd(b))return b;x&&y.trace("ToKey value for link data "+a+" is not a number or a string: "+b)}}};
O.prototype.setToKeyForLinkData=O.prototype.yv=function(a,b){b===q&&(b=f);b!==f&&!Nd(b)&&y.Jb(b,"number or string",O,"setToKeyForLinkData:key");if(a!==q){var c=this.Hi;if(""!==c)if(b=this.Tl(b),this.$h(a)){var d=y.Xa(a,c);d!==b&&($d(this,d,a),y.Oa(a,c,b),this.Te(b)===q&&Zd(this,b,a),Ld(this,"linkToKey",rd,c,a,d,b),"string"===typeof c&&this.zb(a,c))}else y.Oa(a,c,b)}};y.g(O,"linkFromPortIdProperty",O.prototype.fo);
y.defineProperty(O,{fo:"linkFromPortIdProperty"},w("Pp"),function(a){var b=this.Pp;b!==a&&(Md(a,O,"linkFromPortIdProperty"),this.Pp=a,this.i("linkFromPortIdProperty",b,a))});O.prototype.getFromPortIdForLinkData=O.prototype.vG=function(a){if(a===q)return"";var b=this.Pp;if(""===b)return"";a=y.Xa(a,b);return a===f?"":a};
O.prototype.setFromPortIdForLinkData=O.prototype.ls=function(a,b){y.j(b,"string",O,"setFromPortIdForLinkData:portname");if(a!==q){var c=this.Pp;if(""!==c)if(this.$h(a)){var d=y.Xa(a,c);d===f&&(d="");d!==b&&(y.Oa(a,c,b),Ld(this,"linkFromPortId",rd,c,a,d,b),"string"===typeof c&&this.zb(a,c))}else y.Oa(a,c,b)}};y.g(O,"linkToPortIdProperty",O.prototype.ko);
y.defineProperty(O,{ko:"linkToPortIdProperty"},w("Rp"),function(a){var b=this.Rp;b!==a&&(Md(a,O,"linkToPortIdProperty"),this.Rp=a,this.i("linkToPortIdProperty",b,a))});O.prototype.getToPortIdForLinkData=O.prototype.yG=function(a){if(a===q)return"";var b=this.Rp;if(""===b)return"";a=y.Xa(a,b);return a===f?"":a};
O.prototype.setToPortIdForLinkData=O.prototype.os=function(a,b){y.j(b,"string",O,"setToPortIdForLinkData:portname");if(a!==q){var c=this.Rp;if(""!==c)if(this.$h(a)){var d=y.Xa(a,c);d===f&&(d="");d!==b&&(y.Oa(a,c,b),Ld(this,"linkToPortId",rd,c,a,d,b),"string"===typeof c&&this.zb(a,c))}else y.Oa(a,c,b)}};y.g(O,"nodeIsLinkLabelProperty",O.prototype.so);
y.defineProperty(O,{so:"nodeIsLinkLabelProperty"},w("Ht"),function(a){var b=this.Ht;b!==a&&(Md(a,O,"nodeIsLinkLabelProperty"),this.Ht=a,this.i("nodeIsLinkLabelProperty",b,a))});O.prototype.isLinkLabelForNodeData=O.prototype.Oy=function(a){if(a===q)return s;var b=this.Ht;return""===b?s:y.Xa(a,b)?h:s};y.g(O,"linkLabelKeysProperty",O.prototype.ho);
y.defineProperty(O,{ho:"linkLabelKeysProperty"},w("Qg"),function(a){var b=this.Qg;b!==a&&(Md(a,O,"linkLabelKeysProperty"),this.Qg=a,this.i("linkLabelKeysProperty",b,a))});O.prototype.getLabelKeysForLinkData=O.prototype.Ak=function(a){if(a===q)return y.rh;var b=this.Qg;if(""===b)return y.rh;a=y.Xa(a,b);return a===f?y.rh:a};
O.prototype.setLabelKeysForLinkData=O.prototype.VD=function(a,b){y.mr(b,O,"setLabelKeysForLinkData:arr");if(a!==q){var c=this.Qg;if(""!==c)if(this.$h(a)){var d=y.Xa(a,c);d===f&&(d=y.rh);if(d!==b){for(var e=y.Tb(d),g=0;g<e;g++){var k=y.Gb(d,g);$d(this,k,a)}y.Oa(a,c,b);e=y.Tb(b);for(g=0;g<e;g++)k=y.Gb(b,g),this.Te(k)===q&&Zd(this,k,a);Ld(this,"linkLabelKeys",rd,c,a,d,b);"string"===typeof c&&this.zb(a,c)}}else y.Oa(a,c,b)}};
O.prototype.addLabelKeyForLinkData=O.prototype.xB=function(a,b){if(!(b===q||b===f))if(Nd(b)||y.Jb(b,"number or string",O,"addLabelKeyForLinkData:key"),a!==q){var c=this.Qg;if(""!==c){var d=y.Xa(a,c);d===f?this.VD(a,[b]):y.isArray(d)?0<=y.ky(d,b)||(y.Wh(d,Infinity,b),this.$h(a)&&(this.Te(b)===q&&Zd(this,b,a),Ld(this,"linkLabelKeys",sd,c,a,q,b))):y.m(c+" property is not an Array; cannot addLabelKeyForLinkData: "+a)}}};
O.prototype.removeLabelKeyForLinkData=O.prototype.mH=function(a,b){if(!(b===q||b===f))if(Nd(b)||y.Jb(b,"number or string",O,"removeLabelKeyForLinkData:key"),a!==q){var c=this.Qg;if(""!==c){var d=y.Xa(a,c);if(y.isArray(d)){var e=y.ky(d,b);0>e||(y.Xh(d,e),this.$h(a)&&($d(this,b,a),Ld(this,"linkLabelKeys",td,c,a,b,q)))}else d!==f&&y.m(c+" property is not an Array; cannot removeLabelKeyforLinkData: "+a)}}};y.g(O,"linkDataArray",O.prototype.sg);
y.defineProperty(O,{sg:"linkDataArray"},w("ck"),function(a){var b=this.ck;if(b!==a){y.mr(a,O,"linkDataArray");for(var c=y.Tb(a),d=0;d<c;d++){var e=y.Gb(a,d);if(!y.tb(e)){y.m("GraphLinksModel.linkDataArray must only contain Objects, not: "+e);return}y.Dr(e)}this.ck=a;for(var g=new na(Object),d=0;d<c;d++)e=y.Gb(a,d),g.add(e);this.Vm=g;Ld(this,"linkDataArray",rd,"linkDataArray",this,b,a);for(d=0;d<c;d++)e=y.Gb(a,d),ae(this,e)}});
O.prototype.containsLinkData=O.prototype.$h=function(a){return a===q?s:this.Vm.contains(a)};O.prototype.addLinkData=O.prototype.yB=function(a){if(a!==q){if(y.bc(a)===f)y.mc(a);else if(this.$h(a))return;this.Vm.add(a);var b=y.Tb(this.ck);y.Wh(this.ck,b,a);Ld(this,"linkDataArray",sd,"linkDataArray",this,q,a,q,b);ae(this,a)}};
O.prototype.removeLinkData=O.prototype.nH=function(a){if(a!==q){this.Vm.remove(a);var b=this.ck.indexOf(a);if(!(0>b)){y.Xh(this.ck,b);Ld(this,"linkDataArray",td,"linkDataArray",this,a,q,b,q);b=this.Ll(a);$d(this,b,a);b=this.Ml(a);$d(this,b,a);for(var c=this.Ak(a),d=y.Tb(c),e=0;e<d;e++)b=y.Gb(c,e),$d(this,b,a)}}};function ae(a,b){var c=a.Ll(b),c=a.Tl(c);a.Te(c)===q&&Zd(a,c,b);c=a.Ml(b);c=a.Tl(c);a.Te(c)===q&&Zd(a,c,b);for(var d=a.Ak(b),e=y.Tb(d),g=0;g<e;g++)c=y.Gb(d,g),a.Te(c)===q&&Zd(a,c,b)}
y.g(O,"copyLinkDataFunction",O.prototype.PF);y.defineProperty(O,{PF:"copyLinkDataFunction"},w("Ps"),function(a){var b=this.Ps;b!==a&&(a!==q&&y.j(a,"function",O,"copyLinkDataFunction"),this.Ps=a,this.i("copyLinkDataFunction",b,a))});
O.prototype.copyLinkData=O.prototype.SB=function(a){if(a===q)return q;var b=q,b=this.Ps;if(b!==q)b=b(a,this);else{var b=new a.constructor,c;for(c in a)y.Oa(b,c,y.Xa(a,c))}b&&(y.mc(b),""!==this.Fi&&y.Oa(b,this.Fi,f),""!==this.Hi&&y.Oa(b,this.Hi,f),""!==this.Qg&&y.Oa(b,this.Qg,[]));return b};y.g(O,"nodeIsGroupProperty",O.prototype.ro);y.defineProperty(O,{ro:"nodeIsGroupProperty"},w("Gt"),function(a){var b=this.Gt;b!==a&&(Md(a,O,"nodeIsGroupProperty"),this.Gt=a,this.i("nodeIsGroupProperty",b,a))});
O.prototype.isGroupForNodeData=O.prototype.Ky=function(a){if(a===q)return s;var b=this.Gt;return""===b?s:y.Xa(a,b)?h:s};y.g(O,"nodeGroupKeyProperty",O.prototype.qo);y.defineProperty(O,{qo:"nodeGroupKeyProperty"},w("Mi"),function(a){var b=this.Mi;b!==a&&(Md(a,O,"nodeGroupKeyProperty"),this.Mi=a,this.i("nodeGroupKeyProperty",b,a))});
O.prototype.getGroupKeyForNodeData=O.prototype.Tn=function(a){if(a!==q){var b=this.Mi;if(""!==b&&(b=y.Xa(a,b),b!==f)){if(Nd(b))return b;x&&y.trace("GroupKey value for node data "+a+" is not a number or a string: "+b)}}};
O.prototype.setGroupKeyForNodeData=O.prototype.tz=function(a,b){b===q&&(b=f);b!==f&&!Nd(b)&&y.Jb(b,"number or string",O,"setGroupKeyForNodeData:key");if(a!==q){var c=this.Mi;if(""!==c)if(this.te(a)){var d=y.Xa(a,c);d!==b&&($d(this,d,a),y.Oa(a,c,b),this.Te(b)===q&&Zd(this,b,a),Ld(this,"nodeGroupKey",rd,c,a,d,b),"string"===typeof c&&this.zb(a,c))}else y.Oa(a,c,b)}};O.prototype.copyNodeData=O.prototype.jj=function(a){if(a===q)return q;a=G.prototype.jj.call(this,a);""!==this.Mi&&y.Oa(a,this.Mi,f);return a};
O.prototype.setDataProperty=O.prototype.wv=function(a,b,c){x&&(y.j(a,"object",O,"setDataProperty:data"),y.j(b,"string",O,"setDataProperty:propname"),""===b&&y.m("GraphLinksModel.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.te(a))if(b===this.Gk)this.uz(a,c);else{if(b===this.Fk){this.uv(a,c);return}if(b===this.qo){this.tz(a,c);return}b===this.ro?y.m("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+b):b===this.so&&
y.m("GraphLinksModel.setDataProperty: property name must not be the nodeIsLinkLabelProperty: "+b)}else if(this.$h(a)){if(b===this.eo){this.xv(a,c);return}if(b===this.jo){this.yv(a,c);return}if(b===this.fo){this.ls(a,c);return}if(b===this.ko){this.os(a,c);return}if(b===this.co){this.UD(a,c);return}if(b===this.ho){this.VD(a,c);return}}else!y.Eo&&a instanceof P&&(y.Eo=h,y.trace('GraphLinksModel.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),y.trace("  Is that really your intent?"));
var d=y.Xa(a,b);d!==c&&(y.Oa(a,b,c),this.jz(a,b,d,c))};da=O.prototype;
da.cs=function(a,b){G.prototype.cs.call(this,a,b);for(var c=this.nc.k;c.next();)this.pz(c.value,a,b);for(c=this.Vm.k;c.next();){var d=c.value,e=a,g=b;if(this.Ll(d)===e){var k=this.Fi;y.Oa(d,k,g);Ld(this,"linkFromKey",rd,k,d,e,g);"string"===typeof k&&this.zb(d,k)}this.Ml(d)===e&&(k=this.Hi,y.Oa(d,k,g),Ld(this,"linkToKey",rd,k,d,e,g),"string"===typeof k&&this.zb(d,k));for(var l=this.Ak(d),m=y.Tb(l),k=this.Qg,n=0;n<m;n++)y.Gb(l,n)===e&&(y.EB(l,n,g),Ld(this,"linkLabelKeys",sd,k,d,e,g))}};
da.pz=function(a,b,c){if(this.Tn(a)===b){var d=this.Mi;y.Oa(a,d,c);Ld(this,"nodeGroupKey",rd,d,a,b,c);"string"===typeof d&&this.zb(a,d)}};da.Gz=function(){G.prototype.Gz.call(this);for(var a=this.sg,b=y.Tb(a),c=0;c<b;c++)ae(this,y.Gb(a,c))};
da.xo=function(a){G.prototype.xo.call(this,a);a=this.sb(a);var b=Yd(this,a);if(b!==q){for(var c=new F(Object),b=b.k;b.next();){var d=b.value;if(this.te(d)){if(this.Tn(d)===a){var e=this.Mi;Ld(this,"nodeGroupKey",rd,e,d,a,a);"string"===typeof e&&this.zb(d,e);c.add(d)}}else{this.Ll(d)===a&&(e=this.Fi,Ld(this,"linkFromKey",rd,e,d,a,a),"string"===typeof e&&this.zb(d,e),c.add(d));this.Ml(d)===a&&(e=this.Hi,Ld(this,"linkToKey",rd,e,d,a,a),"string"===typeof e&&this.zb(d,e),c.add(d));for(var g=this.Ak(d),
k=y.Tb(g),e=this.Qg,l=0;l<k;l++)y.Gb(g,l)===a&&(Ld(this,"linkLabelKeys",sd,e,d,a,a),c.add(d))}}for(c=c.k;c.next();)$d(this,a,c.value)}};da.wo=function(a){G.prototype.wo.call(this,a);var b=this.Tn(a);this.Te(b)===q&&Zd(this,b,a)};da.ws=function(a){G.prototype.ws.call(this,a);var b=this.Tn(a);$d(this,b,a)};y.g(O,"linkCategoryProperty",O.prototype.co);
y.defineProperty(O,{co:"linkCategoryProperty"},w("Mp"),function(a){var b=this.Mp;b!==a&&(Md(a,O,"linkCategoryProperty"),this.Mp=a,this.i("linkCategoryProperty",b,a))});O.prototype.getCategoryForLinkData=O.prototype.getCategoryForLinkData=function(a){if(a===q)return"";var b=this.Mp;if(""===b)return"";b=y.Xa(a,b);if(b===f)return"";if("string"===typeof b)return b;x&&y.trace("getCategoryForLinkData found a non-string category for "+a+": "+b);return""};
O.prototype.setCategoryForLinkData=O.prototype.UD=function(a,b){y.j(b,"string",O,"setCategoryForLinkData:cat");if(a!==q){var c=this.Mp;if(""===c)return"";if(this.$h(a)){var d=y.Xa(a,c);d===f&&(d="");d!==b&&(y.Oa(a,c,b),Ld(this,"linkCategory",rd,c,a,d,b),"string"===typeof c&&this.zb(a,c))}else y.Oa(a,c,b)}};
function yd(a){1<arguments.length&&y.m("TreeModel constructor can only take one optional argument, the Array of node data.");G.call(this);this.Ni="parent";this.mq="parentLinkCategory";a!==f&&(this.Qf=a)}y.ba("TreeModel",yd);y.Ka(yd,G);yd.prototype.toString=function(a){a===f&&(a=0);if(2<=a)return this.Cz();var b=(""!==this.name?this.name:"")+" TreeModel";if(0<a){b+="\n node data:";a=this.Qf;var c=y.Tb(a),d;for(d=0;d<c;d++)var e=y.Gb(a,d),b=b+(" "+this.sb(e)+":"+ud(e))}return b};
yd.prototype.writeJsonProtected=function(){var a=G.prototype.writeJsonProtected.call(this),b="";"parent"!==this.to&&"string"===typeof this.to&&(b+=',\n  "nodeParentKeyProperty": '+this.quote(this.to));return a+b};yd.prototype.readJsonProtected=function(a){G.prototype.readJsonProtected.call(this,a);a.nodeParentKeyProperty&&(this.to=a.nodeParentKeyProperty)};yd.prototype.Tl=function(a){return a};y.g(yd,"nodeParentKeyProperty",yd.prototype.to);
y.defineProperty(yd,{to:"nodeParentKeyProperty"},w("Ni"),function(a){var b=this.Ni;b!==a&&(Md(a,yd,"nodeParentKeyProperty"),this.Ni=a,this.i("nodeParentKeyProperty",b,a))});yd.prototype.getParentKeyForNodeData=yd.prototype.Vn=function(a){if(a!==q){var b=this.Ni;if(""!==b&&(b=y.Xa(a,b),b!==f)){if(Nd(b))return b;x&&y.trace("ParentKey value for node data "+a+" is not a number or a string: "+b)}}};
yd.prototype.setParentKeyForNodeData=yd.prototype.vf=function(a,b){b===q&&(b=f);b!==f&&!Nd(b)&&y.Jb(b,"number or string",yd,"setParentKeyForNodeData:key");if(a!==q){var c=this.Ni;if(""!==c)if(b=this.Tl(b),this.te(a)){var d=y.Xa(a,c);d!==b&&($d(this,d,a),y.Oa(a,c,b),this.Te(b)===q&&Zd(this,b,a),Ld(this,"nodeParentKey",rd,c,a,d,b),"string"===typeof c&&this.zb(a,c))}else y.Oa(a,c,b)}};y.g(yd,"parentLinkCategoryProperty",yd.prototype.iH);
y.defineProperty(yd,{iH:"parentLinkCategoryProperty"},w("mq"),function(a){var b=this.mq;b!==a&&(Md(a,yd,"parentLinkCategoryProperty"),this.mq=a,this.i("parentLinkCategoryProperty",b,a))});yd.prototype.getParentLinkCategoryForNodeData=yd.prototype.xG=function(a){if(a===q)return"";var b=this.mq;if(""===b)return"";b=y.Xa(a,b);if(b===f)return"";if("string"===typeof b)return b;x&&y.trace("getParentLinkCategoryForNodeData found a non-string category for "+a+": "+b);return""};
yd.prototype.setParentLinkCategoryForNodeData=yd.prototype.tH=function(a,b){y.j(b,"string",yd,"setParentLinkCategoryForNodeData:cat");if(a!==q){var c=this.mq;if(""===c)return"";if(this.te(a)){var d=y.Xa(a,c);d===f&&(d="");d!==b&&(y.Oa(a,c,b),Ld(this,"parentLinkCategory",rd,c,a,d,b),"string"===typeof c&&this.zb(a,c))}else y.Oa(a,c,b)}};yd.prototype.copyNodeData=yd.prototype.jj=function(a){if(a===q)return q;a=G.prototype.jj.call(this,a);""!==this.Ni&&y.Oa(a,this.Ni,f);return a};
yd.prototype.setDataProperty=yd.prototype.wv=function(a,b,c){x&&(y.j(a,"object",yd,"setDataProperty:data"),y.j(b,"string",yd,"setDataProperty:propname"),""===b&&y.m("TreeModel.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.te(a))if(b===this.Gk)this.uz(a,c);else{if(b===this.Fk){this.uv(a,c);return}if(b===this.to){this.vf(a,c);return}}else!y.Eo&&a instanceof P&&(y.Eo=h,y.trace('TreeModel.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),
y.trace("  Is that really your intent?"));var d=y.Xa(a,b);d!==c&&(y.Oa(a,b,c),this.jz(a,b,d,c))};da=yd.prototype;da.cs=function(a,b){G.prototype.cs.call(this,a,b);for(var c=this.nc.k;c.next();)this.pz(c.value,a,b)};da.pz=function(a,b,c){if(this.Vn(a)===b){var d=this.Ni;y.Oa(a,d,c);Ld(this,"nodeParentKey",rd,d,a,b,c);"string"===typeof d&&this.zb(a,d)}};
da.xo=function(a){G.prototype.xo.call(this,a);a=this.sb(a);var b=Yd(this,a);if(b!==q){for(var c=new F(Object),b=b.k;b.next();){var d=b.value;if(this.te(d)&&this.Vn(d)===a){var e=this.Ni;Ld(this,"nodeParentKey",rd,e,d,a,a);"string"===typeof e&&this.zb(d,e);c.add(d)}}for(c=c.k;c.next();)$d(this,a,c.value)}};da.wo=function(a){G.prototype.wo.call(this,a);var b=this.Vn(a),b=this.Tl(b);this.Te(b)===q&&Zd(this,b,a)};da.ws=function(a){G.prototype.ws.call(this,a);var b=this.Vn(a);$d(this,b,a)};
function be(a,b,c){y.mc(this);a===f?a="":y.j(a,"string",be,"constructor:targetprop");b===f?b=a:y.j(b,"string",be,"constructor:sourceprop");c===f?c=q:c!==q&&y.j(c,"function",be,"constructor:conv");this.iB="";this.Df=q;this.hu=a;this.fu=this.Lx=0;this.bB=q;this.au=b;this.vw=c;this.jx=le;this.qw=q}y.ba("Binding",be);var le;be.OneWay=le=y.w(be,"OneWay",1);var me;be.TwoWay=me=y.w(be,"TwoWay",2);
be.parseEnum=function(a,b){y.j(a,"function",be,"parseEnum:ctor");y.rb(b,a,be,"parseEnum:defval");return function(c){return y.Il(a,c)||b}};var ud;be.toString=ud=function(a){var b=a;y.tb(a)&&(a.text?b=a.text:a.Text?b=a.Text:a.name?b=a.name:a.Name?b=a.Name:a.key!==f?b=a.key:a.Key!==f?b=a.Key:a.id!==f?b=a.id:a.Id!==f?b=a.Id:a.ID!==f&&(b=a.ID));return b===f?"undefined":b===q?"null":b.toString()};be.prototype.toString=function(){return"Binding("+this.Zl+" "+this.Az+":"+this.wz+")"};
be.prototype.freeze=function(){this.$a=h;return this};be.prototype.Pa=function(){this.$a=s;return this};y.g(be,"targetId",be.prototype.Zl);y.defineProperty(be,{Zl:q},w("iB"),function(a){y.K(this);y.j(a,"string",be,"targetId");this.iB=a});y.g(be,"targetProperty",be.prototype.Az);y.defineProperty(be,{Az:"targetProperty"},w("hu"),function(a){y.K(this);y.j(a,"string",be,"targetProperty");this.hu=a});y.g(be,"sourceName",be.prototype.rs);
y.defineProperty(be,{rs:"sourceName"},w("bB"),function(a){y.K(this);y.j(a,"string",be,"sourceName");this.bB=a});y.g(be,"sourceProperty",be.prototype.wz);y.defineProperty(be,{wz:"sourceProperty"},w("au"),function(a){y.K(this);y.j(a,"string",be,"sourceProperty");this.au=a});y.g(be,"converter",be.prototype.PB);y.defineProperty(be,{PB:"converter"},w("vw"),function(a){y.K(this);a!==q&&y.j(a,"function",be,"converter");this.vw=a});y.g(be,"backConverter",be.prototype.IB);
y.defineProperty(be,{IB:"backConverter"},w("qw"),function(a){y.K(this);a!==q&&y.j(a,"function",be,"backConverter");this.qw=a});y.g(be,"mode",be.prototype.mode);y.defineProperty(be,{mode:"mode"},w("jx"),function(a){y.K(this);y.rb(a,be,be,"mode");this.jx=a});be.prototype.makeTwoWay=be.prototype.ZI=function(a){a===f&&(a=q);this.mode=me;this.IB=a;return this};be.prototype.ofObject=be.prototype.dz=function(a){a===f&&(a="");x&&y.j(a,"string",be,"ofObject:srcname");this.rs=a;return this};
be.prototype.updateTarget=be.prototype.vE=function(a,b,c){var d=this.au;if(!(c&&d!==c)){c=this.hu;var e=this.vw;if(!(e===q&&""===c)){x&&("string"===typeof c&&"function"!==typeof a.setAttribute&&"_"!==c[0]&&!y.Wu(a,c))&&y.trace("Binding error: undefined target property: "+c+" on "+a.toString());var g=b;""!==d&&(g=y.Xa(b,d));if(g!==f)if(e===q)""!==c&&y.Oa(a,c,g);else try{if(""!==c){var k=e(g,a);y.Oa(a,c,k)}else e(g,a)}catch(l){x&&y.trace("Binding error: "+l.toString())}}}};
be.prototype.updateSource=be.prototype.uE=function(a,b,c,d){if(this.jx===me){var e=this.hu;if(!(c&&e!==c)){c=this.au;var g=this.qw;if(!(g===q&&""===c)){var k=a;""!==e&&(k=y.Xa(a,e));if(k!==f)if(g===q)d&&d.ea?d.ea.wv(b,c,k):y.Oa(b,c,k);else try{if(""!==c){var l=g(k,b);d&&d.ea?d.ea.wv(b,c,l):y.Oa(b,c,l)}else g(k,b)}catch(m){x&&y.trace("Binding error: "+m.toString())}}}}};function ne(){this.SE=(new F(ld)).freeze();this.Fb="";this.AA=s}y.ba("Transaction",ne);
ne.prototype.toString=function(a){var b="Transaction: "+this.name+" "+this.ah.count.toString()+(this.Xn?"":", incomplete");if(a!==f&&0<a)for(var c=this.ah.count,d=0;d<c;d++){var e=this.ah.sa(d);e!==q&&(b+="\n  "+e.toString(a-1))}return b};ne.prototype.clear=ne.prototype.clear=function(){var a=this.ah;a.Pa();for(var b=a.count-1;0<=b;b--){var c=a.sa(b);c!==q&&c.clear()}a.clear();a.freeze()};ne.prototype.canUndo=ne.prototype.canUndo=w("Xn");
ne.prototype.undo=ne.prototype.undo=function(){if(this.canUndo())for(var a=this.ah.count-1;0<=a;a--){var b=this.ah.sa(a);b!==q&&b.undo()}};ne.prototype.canRedo=ne.prototype.canRedo=w("Xn");ne.prototype.redo=ne.prototype.redo=function(){if(this.canRedo())for(var a=this.ah.count,b=0;b<a;b++){var c=this.ah.sa(b);c!==q&&c.redo()}};y.A(ne,{ah:"changes"},w("SE"));y.g(ne,"name",ne.prototype.name);y.defineProperty(ne,{name:"name"},w("Fb"),ba("Fb"));y.g(ne,"isComplete",ne.prototype.Xn);
y.defineProperty(ne,{Xn:"isComplete"},w("AA"),ba("AA"));function vd(){this.kx=new na(G);this.Dh=s;this.VE=(new F(ne)).freeze();this.Yj=-1;this.IA=999;this.Eh=s;this.Us=q;this.nk=0;this.rw=s;x&&(this.rw=h);this.lg=(new F("string")).freeze();this.Zm=new F("number");this.Lw=h}y.ba("UndoManager",vd);
vd.prototype.toString=function(a){for(var b="UndoManager "+this.sj+"<"+this.history.count+"<="+this.Vy,b=b+"[",c=this.jD.count,d=0;d<c;d++)0<d&&(b+=" "),b+=this.jD.sa(d);b+="]";if(a!==f&&0<a){c=this.history.count;for(d=0;d<c;d++)b+="\n "+this.history.sa(d).toString(a-1)}return b};
vd.prototype.clear=vd.prototype.clear=function(){var a=this.history;a.Pa();for(var b=a.count-1;0<=b;b--){var c=a.sa(b);c!==q&&c.clear()}a.clear();this.Yj=-1;a.freeze();this.Eh=s;this.Us=q;this.nk=0;this.lg.Pa();this.lg.clear();this.lg.freeze();this.Zm.clear()};vd.prototype.addModel=vd.prototype.kF=function(a){this.kx.add(a)};vd.prototype.removeModel=vd.prototype.oH=function(a){this.kx.remove(a)};
vd.prototype.startTransaction=vd.prototype.lc=function(a){a===f&&(a="");a===q&&(a="");if(this.cb)return s;this.Lw===h&&(this.Lw=s,this.nk++,this.xc("StartingFirstTransaction",a,this.wk),0<this.nk&&this.nk--);this.isEnabled&&(this.lg.Pa(),this.lg.add(a),this.lg.freeze(),this.wk===q?this.Zm.add(0):this.Zm.add(this.wk.ah.count));this.nk++;var b=1===this.Pk;b&&this.xc("StartedTransaction",a,this.wk);return b};vd.prototype.commitTransaction=vd.prototype.se=function(a){return oe(this,h,a)};
vd.prototype.rollbackTransaction=vd.prototype.es=function(){return oe(this,s,"")};
function oe(a,b,c){if(a.cb)return s;a.oy&&1>a.Pk&&y.trace("Ending transaction without having started a transaction: "+c);var d=1===a.Pk;d&&(b&&a.isEnabled)&&a.xc("CommittingTransaction",c,a.wk);var e=0;if(0<a.Pk&&(a.nk--,a.isEnabled)){var g=a.lg.count;0<g&&(""===c&&(c=a.lg.sa(0)),a.lg.Pa(),a.lg.kd(g-1),a.lg.freeze());g=a.Zm.count;0<g&&(e=a.Zm.sa(g-1),a.Zm.kd(g-1))}g=a.wk;if(d){if(b){if(a.isEnabled&&g!==q){b=g;b.Xn=h;b.name=c;d=a.history;d.Pa();for(e=d.count-1;e>a.sj;e--)g=d.sa(e),g!==q&&g.clear(),
d.kd(e);e=a.Vy;0===e&&(e=1);0<e&&d.count>=e&&(g=d.sa(0),g!==q&&g.clear(),d.kd(0),a.Yj--);d.add(b);a.Yj++;d.freeze();g=b}a.xc("CommittedTransaction",c,g)}else{a.Eh=h;try{a.isEnabled&&g!==q&&(g.Xn=h,g.undo())}finally{a.xc("RolledBackTransaction",c,g),a.Eh=s}g!==q&&g.clear()}a.Us=q;return h}if(a.isEnabled&&!b&&g!==q){a=e;c=g.ah;for(b=c.count-1;b>=a;b--)d=c.sa(b),d!==q&&d.undo(),c.Pa(),c.kd(b);c.freeze()}return s}
vd.prototype.canUndo=vd.prototype.canUndo=function(){if(!this.isEnabled||0<this.Pk||this.cb)return s;var a=this.nE;return a!==q&&a.canUndo()?h:s};vd.prototype.undo=vd.prototype.undo=function(){if(this.canUndo()){var a=this.nE;try{this.xc("StartingUndo","Undo",a),this.Eh=h,this.Yj--,a.undo()}catch(b){y.trace("undo error: "+b.toString())}finally{this.Eh=s,this.xc("FinishedUndo","Undo",a)}}};
vd.prototype.canRedo=vd.prototype.canRedo=function(){if(!this.isEnabled||0<this.Pk||this.cb)return s;var a=this.mE;return a!==q&&a.canRedo()?h:s};vd.prototype.redo=vd.prototype.redo=function(){if(this.canRedo()){var a=this.mE;try{this.xc("StartingRedo","Redo",a),this.Eh=h,this.Yj++,a.redo()}catch(b){y.trace("redo error: "+b.toString())}finally{this.Eh=s,this.xc("FinishedRedo","Redo",a)}}};
vd.prototype.xc=function(a,b,c){c===f&&(c=q);var d=new ld;d.Yc=md;d.propertyName=a;d.object=c;d.oldValue=b;for(a=this.YG;a.next();)b=a.value,d.ea=b,b.zu(d)};vd.prototype.handleChanged=vd.prototype.xC=function(a){if(this.isEnabled&&!this.cb&&!this.skipsEvent(a)){var b=this.wk;b===q&&(this.Us=b=new ne);var c=a.copy(),b=b.ah;b.Pa();b.add(c);b.freeze();this.oy&&(0>=this.Pk&&!this.Lw)&&(a=a.h,a!==q&&a.gg===s||y.trace("Change not within a transaction: "+c.toString()))}};
vd.prototype.skipsEvent=function(a){if(a===q||0>a.Yc.value)return h;a=a.object;if(a instanceof P){if(a=a.layer,a!==q&&a.cc)return h}else if(a instanceof pe&&a.cc)return h;return s};y.A(vd,{YG:"models"},function(){return this.kx.k});y.g(vd,"isEnabled",vd.prototype.isEnabled);y.defineProperty(vd,{isEnabled:"isEnabled"},w("Dh"),ba("Dh"));y.A(vd,{nE:"transactionToUndo"},function(){return 0<=this.sj&&this.sj<=this.history.count-1?this.history.sa(this.sj):q});
y.A(vd,{mE:"transactionToRedo"},function(){return this.sj<this.history.count-1?this.history.sa(this.sj+1):q});y.A(vd,{cb:"isUndoingRedoing"},w("Eh"));y.A(vd,{history:"history"},w("VE"));y.g(vd,"maxHistoryLength",vd.prototype.Vy);y.defineProperty(vd,{Vy:"maxHistoryLength"},w("IA"),ba("IA"));y.A(vd,{sj:"historyIndex"},w("Yj"));y.A(vd,{wk:"currentTransaction"},w("Us"));y.A(vd,{Pk:"transactionLevel"},w("nk"));y.A(vd,{KG:"isInTransaction"},function(){return 0<this.nk});
y.defineProperty(vd,{oy:"checksTransactionLevel"},w("rw"),ba("rw"));y.A(vd,{jD:"nestedTransactionNames"},w("lg"));function pa(){0<arguments.length&&y.m("CommandHandler constructor cannot take any arguments.");this.ca=q;this.mA=this.fA=s;this.fk=this.Zz=q;this.sB=1.05;this.gx=NaN;this.FA=q;this.tB=NaN}y.ba("CommandHandler",pa);pa.prototype.toString=ca("CommandHandler");y.A(pa,{h:"diagram"},w("ca"));pa.prototype.ie=function(a){x&&a!==q&&y.l(a,E,pa,"setDiagram");this.ca=a};
pa.prototype.doKeyDown=function(){var a=this.h;if(a!==q){var b=a.Q,c=b.control,d=b.shift,e=b.alt,g=b.key;c&&("C"===g||"Insert"===g)?this.canCopySelection()&&this.copySelection():c&&"X"===g||d&&"Del"===g?this.canCutSelection()&&this.cutSelection():"Del"===g?this.canDeleteSelection()&&this.deleteSelection():c&&"V"===g||d&&"Insert"===g?this.canPasteSelection()&&this.pasteSelection():c&&"Y"===g||e&&d&&"Backspace"===g?this.canRedo()&&this.redo():c&&"Z"===g||e&&"Backspace"===g?this.canUndo()&&this.undo():
c&&"A"===g?this.canSelectAll()&&this.selectAll():"Esc"===g?this.canStopCommand()&&this.stopCommand():"Up"===g?a.Oe&&(c?a.scroll("pixel","up"):a.scroll("line","up")):"Down"===g?a.Oe&&(c?a.scroll("pixel","down"):a.scroll("line","down")):"Left"===g?a.Ne&&(c?a.scroll("pixel","left"):a.scroll("line","left")):"Right"===g?a.Ne&&(c?a.scroll("pixel","right"):a.scroll("line","right")):"PageUp"===g?d&&a.Ne?a.scroll("page","left"):a.Oe&&a.scroll("page","up"):"PageDown"===g?d&&a.Ne?a.scroll("page","right"):a.Oe&&
a.scroll("page","down"):"Home"===g?(b=a.fd,c&&a.Oe?a.position=new A(a.position.x,b.y):!c&&a.Ne&&(a.position=new A(b.x,a.position.y))):"End"===g?(b=a.fd,d=a.eb,c&&a.Oe?a.position=new A(d.x,b.bottom-d.height):!c&&a.Ne&&(a.position=new A(b.right-d.width,d.y))):"Subtract"===g?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===g?this.canIncreaseZoom()&&this.increaseZoom():c&&"0"===g?this.canResetZoom()&&this.resetZoom():d&&"Z"===g?this.canZoomToFit()&&this.zoomToFit():c&&!d&&"G"===g?this.canGroupSelection()&&
this.groupSelection():c&&d&&"G"===g?this.canUngroupSelection()&&this.ungroupSelection():b.event&&113===b.event.which?this.canEditTextBlock()&&this.editTextBlock():b.event&&93===b.event.which?this.canShowContextMenu()&&this.showContextMenu():b.bubbles=h}};pa.prototype.doKeyUp=function(){var a=this.h;a!==q&&(a.Q.bubbles=h)};pa.prototype.stopCommand=function(){var a=this.h;if(a!==q){var b=a.Ma;b instanceof Ee&&a.pe&&a.py();b!==q&&b.doCancel()}};pa.prototype.canStopCommand=ca(h);
pa.prototype.selectAll=function(){var a=this.h;if(a!==q){a.ta();try{a.Nc="wait";a.Fa("ChangingSelection");for(var b=a.as;b.next();)b.value.Wa=h;for(b=a.uj;b.next();)b.value.Wa=h;for(b=a.links;b.next();)b.value.Wa=h}finally{a.Fa("ChangedSelection"),a.Nc=""}}};pa.prototype.canSelectAll=function(){var a=this.h;return a!==q&&a.pe};
pa.prototype.deleteSelection=function(){var a=this.h;if(a!==q&&!a.Fa("SelectionDeleting",a.selection))try{a.Nc="wait";a.lc("Delete");a.Fa("ChangingSelection");for(var b=new na(R),c=a.selection.k;c.next();)Fe(b,c.value,h,this.dC?Infinity:0,function(a){return a.canDelete()});a.oz(b,h);a.Fa("SelectionDeleted",b)}finally{a.Fa("ChangedSelection"),a.se("Delete"),a.Nc=""}};pa.prototype.canDeleteSelection=function(){var a=this.h;return a===q||(a.Za||a.Be)||!a.rk||0===a.selection.count?s:h};
function Fe(a,b,c,d,e){if(!a.contains(b)&&(e===f&&(e=q),(e===q||e(b))&&!(b instanceof Ge)))if(a.add(b),b instanceof T){if(c&&b instanceof He)for(var g=b.Ec;g.next();){var k=g.value;Fe(a,k,c,d,e)}for(k=b.Qd;k.next();)if(g=k.value,!a.contains(g)){var l=g.da,m=g.fa;l!==q&&a.contains(l)&&m!==q&&a.contains(m)?Fe(a,g,c,d,e):(l===q||m===q)&&Fe(a,g,c,d,e)}if(1<d)for(b=b.kC();b.next();)k=b.value,Fe(a,k,c,d-1,e)}else if(b instanceof U)for(k=b.tj;k.next();)Fe(a,k.value,c,d,e)}
pa.prototype.copyParts=function(a,b,c){var d=new ma(R,R);for(a=a.k;a.next();){var e=a.value;Ie(this,e,b,d,c)}if(b!==q){c=b.ea;a=new na(U);for(var g=new ma(U,U),k=d.k;k.next();)if(e=k.value,e instanceof U)(e.da===q||e.fa===q)&&a.add(e);else if(c instanceof yd&&e instanceof T&&e.data!==q){var l=e,e=k.key,m=e.lC();m!==q&&((m=d.wa(m))?(c.vf(l.data,c.sb(m.data)),l=b.pf(l.data),e=e.yr(),e!==q&&l!==q&&g.add(e,l)):c.vf(l.data,f))}0<a.count&&b.oz(a,s);if(0<g.count)for(b=g.k;b.next();)d.add(b.key,b.value)}for(b=
d.k;b.next();)b.value.zb();return d};
function Ie(a,b,c,d,e){if(b===q||e&&!b.canCopy())return q;if(d.contains(b))return a=d.wa(b),a instanceof R?a:q;var g=q,k=b.data;if(k!==q&&c!==q){var l=c.ea;b instanceof U?l instanceof O&&(k=l.SB(k),y.tb(k)&&(l.yB(k),g=c.pf(k))):(k=l.jj(k),y.tb(k)&&(l.fr(k),g=c.pj(k)))}else Je(b),g=b.copy(),c!==q&&g instanceof R&&c.add(g);if(!(g instanceof R))return q;g.Wa=s;d.add(b,g);if(b instanceof T){for(l=b.Qd;l.next();){k=l.value;if(k.da===b){var m=d.wa(k);m!==q&&(m.da=g)}k.fa===b&&(m=d.wa(k),m!==q&&(m.fa=g))}if(b instanceof
He&&g instanceof He)for(b=b.Ec;b.next();)l=Ie(a,b.value,c,d,e),!(l instanceof U)&&l!==q&&(l.bb=g)}else if(b instanceof U){l=b.da;l!==q&&(l=d.wa(l),l!==q&&(g.da=l));l=b.fa;l!==q&&(l=d.wa(l),l!==q&&(g.fa=l));for(b=b.tj;b.next();)l=Ie(a,b.value,c,d,e),l!==q&&(l.hd=g)}return g}pa.prototype.copySelection=function(){var a=this.h;if(a!==q){for(var b=new na(R),a=a.selection.k;a.next();)Fe(b,a.value,h,this.RB?Infinity:0,function(a){return a.canCopy()});this.copyToClipboard(b)}};
pa.prototype.canCopySelection=function(){var a=this.h;return a===q||(!a.cj||!a.tu)||0===a.selection.count?s:h};pa.prototype.cutSelection=function(){this.copySelection();this.deleteSelection()};pa.prototype.canCutSelection=function(){var a=this.h;return a===q||(a.Za||a.Be)||(!a.cj||!a.rk||!a.tu)||0===a.selection.count?s:h};
pa.prototype.copyToClipboard=function(a){var b=this.h;if(b!==q){var c=q;a===q?(y.nr=q,y.Bu=""):(a=b.copyParts(a,q,h),c=new F(R),c.Me(a),y.nr=c,y.Bu=b.ea.Dl);b.Fa("ClipboardChanged",c)}};pa.prototype.pasteFromClipboard=function(){var a=new na(R),b=y.nr;if(b===q)return a;var c=this.h;if(c===q||y.Bu!==c.ea.Dl)return a;for(b=c.copyParts(b,c,s).k;b.next();)c=b.value,c.location.V()||(c.location=b.key.location),c.position.V()||(c.position=b.key.position),a.add(c);return a};
pa.prototype.pasteSelection=function(a){var b=this.h;if(b!==q)try{b.Nc="wait";b.lc("Paste");b.Fa("ChangingSelection");var c=this.pasteFromClipboard();0<c.count&&Ke(b);for(var d=c.k;d.next();)d.value.Wa=h;b.Fa("ChangedSelection");if(a instanceof A){var e=b.computePartsBounds(b.selection);if(e){var g=b.pb.ve,k=g.computeEffectiveCollection(b.selection);g.moveParts(k,new A(a.x-e.xa,a.y-e.Ga),s)}}b.Fa("ClipboardPasted",c)}finally{b.se("Paste"),b.Nc=""}};
pa.prototype.canPasteSelection=function(){var a=this.h;return a===q||(a.Za||a.Be)||(!a.tl||!a.tu)||y.nr===q||y.Bu!==a.ea.Dl?s:h};pa.prototype.undo=function(){var a=this.h;a!==q&&a.va.undo()};pa.prototype.canUndo=function(){var a=this.h;return a===q||a.Za||a.Be?s:a.iy&&a.va.canUndo()};pa.prototype.redo=function(){var a=this.h;a!==q&&a.va.redo()};pa.prototype.canRedo=function(){var a=this.h;return a===q||a.Za||a.Be?s:a.iy&&a.va.canRedo()};
pa.prototype.decreaseZoom=function(a){a===f&&(a=1/this.xs);y.p(a,pa,"decreaseZoom:factor");var b=this.h;b!==q&&b.wl===Le&&(a*=b.scale,a<b.Of||a>b.Nf||(b.scale=a))};pa.prototype.canDecreaseZoom=function(a){a===f&&(a=1/this.xs);y.p(a,pa,"canDecreaseZoom:factor");var b=this.h;if(b===q||b.wl!==Le)return s;a*=b.scale;return a<b.Of||a>b.Nf?s:b.Bn};
pa.prototype.increaseZoom=function(a){a===f&&(a=this.xs);y.p(a,pa,"increaseZoom:factor");var b=this.h;b!==q&&b.wl===Le&&(a*=b.scale,a<b.Of||a>b.Nf||(b.scale=a))};pa.prototype.canIncreaseZoom=function(a){a===f&&(a=this.xs);y.p(a,pa,"canIncreaseZoom:factor");var b=this.h;if(b===q||b.wl!==Le)return s;a*=b.scale;return a<b.Of||a>b.Nf?s:b.Bn};pa.prototype.resetZoom=function(a){a===f&&(a=1);y.p(a,pa,"resetZoom:newscale");var b=this.h;if(b!==q&&!(a<b.Of||a>b.Nf))b.scale=a};
pa.prototype.canResetZoom=function(a){a===f&&(a=1);y.p(a,pa,"canResetZoom:newscale");var b=this.h;return b===q||a<b.Of||a>b.Nf?s:b.Bn};pa.prototype.zoomToFit=function(){var a=this.h;if(a!==q){var b=a.scale,c=a.position;b===this.tB&&!isNaN(this.gx)?(a.scale=this.gx,a.position=this.FA):(this.gx=b,this.FA=c.copy(),a.zoomToFit(),a.li(),this.tB=a.scale)}};pa.prototype.canZoomToFit=function(){var a=this.h;return a===q?s:a.Bn};
pa.prototype.collapseTree=function(a){a===f&&(a=q);var b=this.h;if(b===q)return s;b.lc("Collapse Tree");var c=new F(T);if(a instanceof T&&a.Cc)a.collapseTree(),c.add(a);else for(a=b.selection.k;a.next();){var d=a.value;d instanceof T&&d.Cc&&(d.collapseTree(),c.add(d))}b.Fa("TreeCollapsed",c);b.se("Collapse Tree")};
pa.prototype.canCollapseTree=function(a){a===f&&(a=q);var b=this.h;if(b===q||b.Za)return s;if(a instanceof T){if(!a.Cc)return s;if(0<a.Qu().count)return h}else for(a=b.selection.k;a.next();)if(b=a.value,b instanceof T&&b.Cc&&0<b.Qu().count)return h;return s};
pa.prototype.expandTree=function(a){a===f&&(a=q);var b=this.h;if(b===q)return s;b.lc("Expand Tree");var c=new F(T);if(a instanceof T&&!a.Cc)a.expandTree(),c.add(a);else for(a=b.selection.k;a.next();){var d=a.value;d instanceof T&&!d.Cc&&(d.expandTree(),c.add(d))}b.Fa("TreeExpanded",c);b.se("Expand Tree")};
pa.prototype.canExpandTree=function(a){a===f&&(a=q);var b=this.h;if(b===q||b.Za)return s;if(a instanceof T){if(a.Cc)return s;if(0<a.Qu().count)return h}else for(a=b.selection.k;a.next();)if(b=a.value,b instanceof T&&!b.Cc&&0<b.Qu().count)return h;return s};
pa.prototype.groupSelection=function(){var a=this.h;if(a!==q){var b=a.ea;if(b!==q&&b instanceof O){var c=this.jy;if(c!==q){var d=q;try{a.Nc="wait";a.lc("Group");a.Fa("ChangingSelection");for(var e=new F(R),g=a.selection.k;g.next();){var k=g.value;k.Pd()&&k.canGroup()&&e.add(k)}for(var l=new F(R),m=e.k;m.next();){for(var n=m.value,k=s,g=e.k;g.next();)if(n.Jr(g.value)){k=h;break}k||l.add(n)}if(0<l.count){g=l.k;g.next();var p=g.value.bb;if(p!==q)for(;p!==q;){g=l.k;g.next();for(e=s;g.next();)if(n=g.value,
!n.Jr(p)){e=h;break}if(e)p=p.bb;else break}if(c instanceof He)Je(c),d=c.copy(),d instanceof He&&a.add(d);else if(b.Ky(c)){var r=b.jj(c);y.tb(r)&&(b.fr(r),d=a.vr(r))}if(d instanceof He){p!==q&&this.isValidMember(p,d)&&(d.bb=p);for(g=l.k;g.next();)n=g.value,this.isValidMember(d,n)&&(n.bb=d);a.select(d)}}a.Fa("ChangedSelection");a.Fa("SelectionGrouped",d)}finally{a.se("Group"),a.Nc=""}}}}};
pa.prototype.canGroupSelection=function(){var a=this.h;if(a===q||a.Za||a.Be||!a.tl||!a.vn)return s;var b=a.ea;if(b===q||!(b instanceof O)||this.jy===q)return s;for(a=a.selection.k;a.next();)if(b=a.value,b.Pd()&&b.canGroup())return h;return s};function Me(a){var b=y.ub();for(a=a.k;a.next();){var c=a.value;c instanceof U||b.push(c)}a=new na(R);for(var c=b.length,d=0;d<c;d++){for(var e=b[d],g=h,k=0;k<c;k++)if(e.Jr(b[k])){g=s;break}g&&a.add(e)}y.ya(b);return a}
pa.prototype.isValidMember=function(a,b){if(b===q||a===b||b instanceof U)return s;if(a!==q){if(a===b||a.Jr(b))return s;var c=a.Pr;if(c!==q&&!c(a,b)||a.data===q&&b.data!==q||a.data!==q&&b.data===q)return s}c=this.Pr;return c!==q?c(a,b):h};
pa.prototype.ungroupSelection=function(a){a===f&&(a=q);var b=this.h;if(b!==q){var c=b.ea;if(c!==q&&c instanceof O)try{b.Nc="wait";b.lc("Ungroup");b.Fa("ChangingSelection");var d=new F(He);if(a instanceof He)d.add(a);else for(var e=b.selection.k;e.next();){var g=e.value;g instanceof He&&g.canUngroup()&&d.add(g)}if(0<d.count){b.py();for(e=d.k;e.next();){var k=e.value,l=k.data,m=k.bb,n=m!==q&&m.data!==q?c.sb(m.data):f,p=new F(R);p.Me(k.Ec);for(var r=p.k;r.next();){var t=r.value;if(!(t instanceof U)){var u=
t.data;u!==q?c.tz(u,n):t.bb=m;t.Wa=h}}l!==q?c.wD(l):b.remove(k)}}b.Fa("ChangedSelection");b.Fa("SelectionUngrouped",d,p)}finally{b.se("Ungroup"),b.Nc=""}}};pa.prototype.canUngroupSelection=function(a){a===f&&(a=q);var b=this.h;if(b===q||b.Za||b.Be||!b.rk||!b.An)return s;var c=b.ea;if(c===q||!(c instanceof O))return s;if(a instanceof He){if(a.canUngroup())return h}else for(a=b.selection.k;a.next();)if(b=a.value,b instanceof He&&b.canUngroup())return h;return s};
pa.prototype.addTopLevelParts=function(a,b){for(var c=h,d=Me(a).k;d.next();){var e=d.value;e.bb!==q&&(!b||this.isValidMember(q,e)?e.bb=q:c=s)}return c};pa.prototype.collapseSubGraph=function(a){a===f&&(a=q);var b=this.h;if(b===q)return s;b.lc("Collapse SubGraph");var c=new F(He);if(a instanceof He&&a.Ue)a.collapseSubGraph(),c.add(a);else for(a=b.selection.k;a.next();){var d=a.value;d instanceof He&&d.Ue&&(d.collapseSubGraph(),c.add(d))}b.Fa("SubGraphCollapsed",c);b.se("Collapse SubGraph")};
pa.prototype.canCollapseSubGraph=function(a){a===f&&(a=q);var b=this.h;if(b===q||b.Za)return s;if(a instanceof He)return!a.Ue?s:h;for(a=b.selection.k;a.next();)if(b=a.value,b instanceof He&&b.Ue)return h;return s};
pa.prototype.expandSubGraph=function(a){a===f&&(a=q);var b=this.h;if(b===q)return s;b.lc("Expand SubGraph");var c=new F(He);if(a instanceof He&&!a.Ue)a.expandSubGraph(),c.add(a);else for(a=b.selection.k;a.next();){var d=a.value;d instanceof He&&!d.Ue&&(d.expandSubGraph(),c.add(d))}b.Fa("SubGraphExpanded",c);b.se("Expand SubGraph")};
pa.prototype.canExpandSubGraph=function(a){a===f&&(a=q);var b=this.h;if(b===q||b.Za)return s;if(a instanceof He)return a.Ue?s:h;for(a=b.selection.k;a.next();)if(b=a.value,b instanceof He&&!b.Ue)return h;return s};
pa.prototype.editTextBlock=function(a){a===f&&(a=q);var b=this.h;if(b!==q&&b.pb!==q){var c=b.pb.Ev;if(c!==q){if(a===q){a=b.selection.k;for(var d=q;a.next();){var e=a.value;if(e.canEdit()){d=e;break}}if(d===q)return;a=Ne(d,function(a){return a instanceof oa&&a.Lu})}a!==q&&a instanceof oa&&(c.Zf=a,b.Ma=c)}}};
pa.prototype.canEditTextBlock=function(a){a===f&&(a=q);var b=this.h;if(b===q||(b.Za||b.Be)||!b.zn||b.pb===q||b.pb.Ev===q)return s;if(a instanceof oa){if(a=a.W,a!==q&&a.canEdit())return h}else for(b=b.selection.k;b.next();)if(a=b.value,a.canEdit()&&(a=Ne(a,function(a){return a instanceof oa&&a.Lu}),a!==q))return h;return s};
pa.prototype.showContextMenu=function(a){var b=this.h;if(b!==q&&b.pb!==q){var c=b.pb.Fu;if(c!==q&&(a===f&&(a=0<b.selection.count?b.selection.ob():b),a=c.findObjectWithContextMenu(a),a!==q)){var d=new jd,e=q;a instanceof P?e=a.hb(Sb):b.Lm||(e=b.eb,e=new A(e.x+e.width/2,e.y+e.height/2));e!==q&&(d.Rc=b.Do(e),d.T=e,b.$b=d);b.Ma=c;Oe(c,s,a)}}};
pa.prototype.canShowContextMenu=function(a){var b=this.h;if(b===q||b.pb===q)return s;var c=b.pb.Fu;if(c===q)return s;a===f&&(a=0<b.selection.count?b.selection.ob():b);return c.findObjectWithContextMenu(a)===q?s:h};y.g(pa,"copiesTree",pa.prototype.RB);y.defineProperty(pa,{RB:"copiesTree"},w("fA"),ba("fA"));y.g(pa,"deletesTree",pa.prototype.dC);y.defineProperty(pa,{dC:"deletesTree"},w("mA"),ba("mA"));y.g(pa,"archetypeGroupData",pa.prototype.jy);
y.defineProperty(pa,{jy:"archetypeGroupData"},w("Zz"),function(a){a!==q&&y.l(a,Object,pa,"archetypeGroupData");var b=this.h;b!==q&&(b=b.ea,b instanceof O&&!(a instanceof He)&&!b.Ky(a)&&y.m("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+a));this.Zz=a});y.g(pa,"memberValidation",pa.prototype.Pr);y.defineProperty(pa,{Pr:"memberValidation"},w("fk"),function(a){a!==q&&y.j(a,"function",pa,"memberValidation");this.fk=a});
y.g(pa,"zoomFactor",pa.prototype.xs);y.defineProperty(pa,{xs:"zoomFactor"},w("sB"),function(a){y.j(a,"number",pa,"zoomFactor");1<a||y.m("zoomFactor must be larger than 1.0, not: "+a);this.sB=a});function Pe(){0<arguments.length&&y.m("Tool constructor cannot take any arguments.");y.mc(this);this.ca=q;this.Fb="";this.Dh=h;this.yA=s;this.qB=q;this.ou=-1}y.ba("Tool",Pe);Pe.prototype.ie=function(a){x&&a!==q&&y.l(a,E,Pe,"setDiagram");this.ca=a};
Pe.prototype.toString=function(){return""!==this.name?this.name+" Tool":y.dh(Object.getPrototypeOf(this))};Pe.prototype.updateAdornments=aa();Pe.prototype.canStart=w("isEnabled");Pe.prototype.doStart=aa();Pe.prototype.doActivate=function(){this.la=h};Pe.prototype.doDeactivate=function(){this.la=s};Pe.prototype.doStop=aa();Pe.prototype.doCancel=function(){this.stopTool()};Pe.prototype.stopTool=function(){var a=this.h;a!==q&&a.Ma===this&&(a.Ma=q,a.Nc="")};
Pe.prototype.doMouseDown=function(){!this.la&&this.canStart()&&this.doActivate()};Pe.prototype.doMouseMove=aa();Pe.prototype.doMouseUp=function(){this.stopTool()};Pe.prototype.doMouseWheel=aa();Pe.prototype.doKeyDown=function(){var a=this.h;a!==q&&"Esc"===a.Q.key&&this.doCancel()};Pe.prototype.doKeyUp=aa();Pe.prototype.startTransaction=Pe.prototype.lc=function(a){this.Fe=q;var b=this.h;return b===q?s:b.lc(a)};
Pe.prototype.stopTransaction=Pe.prototype.wj=function(){var a=this.h;return a===q?s:this.Fe===q?a.es():a.se(this.Fe)};
Pe.prototype.standardMouseSelect=function(){var a=this.h;if(a!==q&&a.pe){var b=a.Q,c=a.wr(b.T,s);if(c!==q)if(b.control){a.Fa("ChangingSelection");for(b=c;b!==q&&!b.canSelect();)b=b.bb;b.Wa=!b.Wa;a.Fa("ChangedSelection")}else if(b.shift){if(!c.Wa){a.Fa("ChangingSelection");for(b=c;b!==q&&!b.canSelect();)b=b.bb;b.Wa=h;a.Fa("ChangedSelection")}}else{if(!c.Wa){for(b=c;b!==q&&!b.canSelect();)b=b.bb;a.select(b)}}else b.left&&(!b.control&&!b.shift)&&a.py()}};
Pe.prototype.standardMouseClick=function(a,b){a===f&&(a=q);b===f&&(b=function(a){return!a.layer.cc});var c=this.h;if(c!==q){var d=c.Q,e=c.vd(d.T,a,b);d.zd=e;Qe(e,d,c)}};
function Qe(a,b,c){var d=0;b.left?d=1===b.ce?1:2===b.ce?2:1:b.right&&1===b.ce&&(d=3);var e="";if(a!==q){switch(d){case 1:e="ObjectSingleClicked";break;case 2:e="ObjectDoubleClicked";break;case 3:e="ObjectContextClicked"}0!==d&&c.Fa(e,a)}else{switch(d){case 1:e="BackgroundSingleClicked";break;case 2:e="BackgroundDoubleClicked";break;case 3:e="BackgroundContextClicked"}0!==d&&c.Fa(e)}if(a!==q)for(;a!==q;){e=q;switch(d){case 1:e=a.click;break;case 2:e=a.Fl?a.Fl:a.click;break;case 3:e=a.qr}if(e!==q&&
(e(b,a),b.ee))break;a=a.ha}else{e=q;switch(d){case 1:e=c.click;break;case 2:e=c.Fl?c.Fl:c.click;break;case 3:e=c.qr}e!==q&&e(b)}}
Pe.prototype.standardMouseOver=function(){var a=this.h;if(a!==q){var b=a.Q;if(b.h!==q){var c=a.vd(b.T,q,q);b.zd=c;var d=a.Xb;a.Xb=h;var e=s;if(c!==a.Hn){var g=a.Hn;a.gz=g;a.Hn=c;for(this.doCurrentObjectChanged(g,c);g!==q;){var k=g.Zy;if(k!==q){if(c===g)break;if(c!==q&&c.hi(g))break;k(b,g,c);e=h;if(b.ee)break}g=g.ha}for(g=a.gz;c!==q;){k=c.Yy;if(k!==q){if(g===c)break;if(g!==q&&g.hi(c))break;k(b,c,g);e=h;if(b.ee)break}c=c.ha}c=a.Hn}if(c!==q){g=c;for(k="";g!==q;){k=g.cursor;if(""!==k)break;g=g.ha}a.Nc=
k;for(g=c;g!==q;){k=g.Tr;if(k!==q&&(k(b,g),e=h,b.ee))break;g=g.ha}}else a.Nc="",k=a.Tr,k!==q&&(k(b),e=h);e&&a.kc();a.Xb=d}}};Pe.prototype.doCurrentObjectChanged=aa();
Pe.prototype.standardMouseWheel=function(){var a=this.h;if(a!==q){var b=a.Q,c=b.lj;if(0!==c){var d=a.pb.Ul;if(a.Bn&&(d===Re&&!b.shift||d===$e&&b.control)){d=a.qh;a.qh=b.Rc;var e=a.Pe;e!==q?0<c?e.increaseZoom():e.decreaseZoom():a.scale=0<c?1.05*a.scale:a.scale/1.05;a.qh=d;b.bubbles=s}else if(d===Re&&b.shift||d===$e&&!b.control)d=a.position.copy(),!b.shift&&a.Oe?0<c?a.scroll("line","up",3):a.scroll("line","down",3):b.shift&&a.Ne&&(0<c?a.scroll("line","left",3):a.scroll("line","right",3)),a.position.L(d)||
(b.bubbles=s)}}};Pe.prototype.standardWaitAfter=function(a){y.j(a,"number",Pe,"standardWaitAfter:delay");this.cancelWaitAfter();var b=this;this.ou=window.setTimeout(function(){b.doWaitAfter()},a)};Pe.prototype.cancelWaitAfter=function(){-1!==this.ou&&window.clearTimeout(this.ou);this.ou=-1};Pe.prototype.doWaitAfter=aa();
Pe.prototype.findToolHandleAt=function(a,b){var c=this.h;if(c===q)return q;c=c.vd(a,q,function(a){a=a.W;return a===q?s:a.zc!==q});if(c===q)return q;var d=c.W;return d===q||d.Ac!==b?q:c};Pe.prototype.isBeyondDragSize=function(a,b){var c=this.h;if(c===q)return s;a===f&&(a=c.uc.Rc);b===f&&(b=c.Q.Rc);var d=c.pb.gC,c=d.width,d=d.height;y.zz&&(c+=6,d+=6);return Math.abs(b.x-a.x)>c||Math.abs(b.y-a.y)>d};y.A(Pe,{h:"diagram"},w("ca"));y.g(Pe,"name",Pe.prototype.name);
y.defineProperty(Pe,{name:"name"},w("Fb"),ba("Fb"));y.g(Pe,"isEnabled",Pe.prototype.isEnabled);y.defineProperty(Pe,{isEnabled:"isEnabled"},w("Dh"),ba("Dh"));y.g(Pe,"isActive",Pe.prototype.la);y.defineProperty(Pe,{la:"isActive"},w("yA"),ba("yA"));y.g(Pe,"transactionResult",Pe.prototype.Fe);y.defineProperty(Pe,{Fe:"transactionResult"},w("qB"),ba("qB"));
function af(){0<arguments.length&&y.m("DraggingTool constructor cannot take any arguments.");Pe.call(this);this.name="Dragging";this.eA=h;this.cl=this.rA=s;this.Vw=h;this.Ow=(new ha(NaN,NaN)).freeze();this.Pw=Mb;this.Qw=(new A(NaN,NaN)).freeze();this.qA=s;this.oA=this.dA=this.pA=this.hA=q;this.hp=this.BA=s;this.ln=new A(NaN,NaN);this.Sh=new A;this.du=s;this.$t=h;this.zm=100;this.Xk=this.St=q}y.ba("DraggingTool",af);y.Ka(af,Pe);y.g(af,"copiesEffectiveCollection",af.prototype.QB);
y.defineProperty(af,{QB:"copiesEffectiveCollection"},w("eA"),ba("eA"));y.g(af,"dragsTree",af.prototype.hC);y.defineProperty(af,{hC:"dragsTree"},w("rA"),ba("rA"));y.g(af,"isGridSnapEnabled",af.prototype.Zn);y.defineProperty(af,{Zn:"isGridSnapEnabled"},w("cl"),function(a){this.cl!==a&&(y.j(a,"boolean",af,"isGridSnapEnabled"),this.cl=a)});y.g(af,"isGridSnapRealtime",af.prototype.KC);
y.defineProperty(af,{KC:"isGridSnapRealtime"},w("Vw"),function(a){this.Vw!==a&&(y.j(a,"boolean",af,"isGridSnapRealtime"),this.Vw=a)});y.g(af,"gridSnapCellSize",af.prototype.Gy);y.defineProperty(af,{Gy:"gridSnapCellSize"},w("Ow"),function(a){this.Ow.L(a)||(y.l(a,ha,af,"gridSnapCellSize"),this.Ow=a=a.U())});y.g(af,"gridSnapCellSpot",af.prototype.tC);y.defineProperty(af,{tC:"gridSnapCellSpot"},w("Pw"),function(a){this.Pw.L(a)||(y.l(a,J,af,"gridSnapCellSpot"),this.Pw=a=a.U())});
y.g(af,"gridSnapOrigin",af.prototype.uC);y.defineProperty(af,{uC:"gridSnapOrigin"},w("Qw"),function(a){this.Qw.L(a)||(y.l(a,A,af,"gridSnapOrigin"),this.Qw=a=a.U())});y.g(af,"dragsLinks",af.prototype.Gl);y.defineProperty(af,{Gl:"dragsLinks"},w("qA"),ba("qA"));y.g(af,"currentPart",af.prototype.In);y.defineProperty(af,{In:"currentPart"},w("hA"),ba("hA"));y.g(af,"copiedParts",af.prototype.Zc);y.defineProperty(af,{Zc:"copiedParts"},w("dA"),ba("dA"));y.g(af,"draggedParts",af.prototype.hc);
y.defineProperty(af,{hc:"draggedParts"},w("pA"),ba("pA"));y.g(af,"draggedLink",af.prototype.gc);y.defineProperty(af,{gc:"draggedLink"},w("oA"),ba("oA"));y.g(af,"isDragOutStarted",af.prototype.av);y.defineProperty(af,{av:"isDragOutStarted"},w("BA"),ba("BA"));y.g(af,"delay",af.prototype.Ju);y.defineProperty(af,{Ju:"delay"},w("zm"),ba("zm"));
af.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;if(a===q||!a.sk&&!a.cj&&!a.uu||!a.pe)return s;var b=a.Q;return!b.left||a.Ma!==this&&(!this.isBeyondDragSize()||b.dv&&b.timestamp-a.uc.timestamp<this.zm)?s:this.findDraggablePart()!==q};af.prototype.findDraggablePart=function(){var a=this.h;if(a===q)return q;a=a.wr(a.uc.T,s);if(a===q)return q;for(;a!==q&&!a.canSelect();)a=a.bb;return a!==q&&(a.canMove()||a.canCopy())?a:q};
af.prototype.standardMouseSelect=function(){var a=this.h;if(a!==q&&a.pe){var b=a.wr(a.uc.T,s);if(b!==q){for(;b!==q&&!b.canSelect();)b=b.bb;this.In=b;this.In.Wa||(a.Fa("ChangingSelection"),b=a.Q,!b.control&&!b.shift&&Ke(a),this.In.Wa=h,a.Fa("ChangedSelection"))}}};
af.prototype.doActivate=function(){var a=this.h;if(a!==q){this.standardMouseSelect();var b=this.In;b===q||!b.canMove()&&!b.canCopy()||(this.la=h,this.ln.set(a.position),bf(this,a.selection),this.Xk=this.St=q,this.hc=this.computeEffectiveCollection(a.selection),a.Dx=h,cf(this,this.hc),this.lc("Drag"),this.Sh.set(a.uc.T),a.gd=h,a.uu&&(this.av=h,this.hp=s,df=this,ef=this.h))}};
function bf(a,b){if(a.Gl){var c=a.h;c!==q&&c.dj&&(1===b.count?(c=b.k,c.next(),a.gc=c.value,a.gc!==q&&(a.gc.canRelinkFrom()&&a.gc.canRelinkTo())&&a.gc.be()):a.gc=q)}}
af.prototype.computeEffectiveCollection=function(a){var b=this.h!==q&&this.h.Ma===this,c=new ma(R,Object);if(a===q)return c;for(var d=a.k;d.next();){var e=d.value;ff(this,c,e,b)}if(this.gc!==q&&this.Gl)return c;for(d=a.k;d.next();)e=d.value,e instanceof U&&(a=e,b=a.da,b!==q&&!c.contains(b)?c.remove(a):(b=a.fa,b!==q&&!c.contains(b)&&c.remove(a)));return c};function gf(a){return a===f?{point:H.Aj,Cx:H.Aj}:{point:a.copy(),Cx:H.Aj}}
function ff(a,b,c,d){if(!b.contains(c)&&(!d||c.canMove()||c.canCopy()))if(c instanceof T){b.add(c,gf(c.location));if(c instanceof He)for(var e=c.Ec;e.next();){var g=e.value;ff(a,b,g,d)}for(g=c.Qd;g.next();)if(e=g.value,!b.contains(e)){var k=e.da,l=e.fa;k!==q&&(b.contains(k)&&l!==q&&b.contains(l))&&ff(a,b,e,d)}if(a.hC)for(c=c.kC();c.next();)g=c.value,ff(a,b,g,d)}else if(c instanceof U){e=c;b.add(e,gf());for(g=e.tj;g.next();)ff(a,b,g.value,d)}else c instanceof Ge||b.add(c,gf(c.location))}
af.prototype.doDeactivate=function(){this.la=s;var a=this.h;a!==q&&hf(a);jf(this);kf(this,this.hc);this.hc=q;this.hp=this.av=s;if(0<lf.count){for(var b=lf.length,c=0;c<b;c++){var d=lf.n[c];d.gc!==q&&(d.gc=q);mf(d);jf(d);d.h!==q&&hf(d.h)}lf.clear()}this.gc!==q&&(this.gc=q);this.ln.Ao(NaN,NaN);df=ef=q;mf(this);a.gd=s;a.Dx=s;this.wj()};function jf(a){var b=a.h;if(b!==q){var c=b.Xb;b.Xb=h;for(var d=b.Q,e=a.Xk;e!==q;){var g=e.Xy;if(g!==q&&(g(d,e,q),d.ee))break;e=e.ha}b.Xb=c}a.St=q;a.Xk=q}
af.prototype.doCancel=function(){mf(this);nf(this);var a=this.h;a!==q&&this.ln.V()&&(a.position=this.ln);this.stopTool()};function cf(a,b){if(b!==q){a.du=h;for(var c=b.k;c.next();){var d=c.key;d instanceof U&&(d.ts=h)}}}function kf(a,b){if(b!==q&&a.du){for(var c=b.k;c.next();){var d=c.key;d instanceof U&&(d.ts=s,d.kh===xf?d.Vb():d.aa())}a.du=s}}af.prototype.doKeyDown=function(){var a=this.h;a!==q&&(a=a.Q,a!==q&&this.la&&("Esc"===a.key?this.doCancel():this.doMouseMove()))};
af.prototype.doKeyUp=function(){var a=this.h;a!==q&&(a.Q!==q&&this.la)&&this.doMouseMove()};function yf(a,b){for(var c=Infinity,d=Infinity,e=-Infinity,g=-Infinity,k=a.k;k.next();){var l=k.value;if(l.Pd()){var m=l.location,l=m.x,m=m.y;!isNaN(l)&&!isNaN(m)&&(l<c&&(c=l),m<d&&(d=m),l>e&&(e=l),m>g&&(g=m))}}Infinity===c?b.q(0,0,0,0):b.q(c,d,e-c,g-d)}
function zf(a,b){if(a.Zc===q){var c=a.h;if(!(c===q||c.Za||c.Be)&&a.hc!==q){nf(a);c.Xb=!b;c.hr=!b;a.Sh.set(c.uc.T);for(var c=a.QB?c.copyParts(a.hc.Ok(),c,h):c.copyParts(c.selection,c,h),d=c.k;d.next();)d.value.location=d.key.location;d=y.df();yf(c,d);y.Bc(d);for(var d=new ma(R,Object),e=a.hc.k;e.next();){var g=e.key;g.Pd()&&g.canCopy()&&(g=c.wa(g),g!==q&&(g.ci(),d.add(g,gf(g.location))))}for(c=c.k;c.next();)e=c.value,e instanceof U&&e.canCopy()&&d.add(e,gf());a.Zc=d;bf(a,d.Ok());a.gc!==q&&(c=a.gc,
d=c.Ai(),c.Ek(a.Sh.x-(d.x+d.width/2),a.Sh.y-(d.y+d.height/2)))}}}function mf(a){var b=a.h;b!==q&&(a.Zc!==q&&(b.oz(a.Zc.Ok(),s),a.Zc=q),b.Xb=s,b.hr=s,a.Sh.set(b.uc.T))}function Af(a,b,c){var d=a.h;if(d!==q){var e=a.Sh,g=y.M();g.assign(d.Q.T);a.moveParts(b,g.ss(e),c);y.B(g)}}
af.prototype.moveParts=function(a,b,c){if(!(a===q||0===a.count)){var d=y.M(),e=y.M();e.assign(b);isNaN(e.x)&&(e.x=0);isNaN(e.y)&&(e.y=0);var g=this.du;g||cf(this,a);for(var k=new F,l=new F(Ia),m=a.k;m.next();){var n=m.key;if(n.Pd()){var p=Bf(this,n,a);if(p!==q)k.add({vc:n,info:m.value,zG:p});else if(!c||n.canMove()){p=m.value.point;d.assign(p);var r=this.computeMove(n,d.add(e),a);n.location=r;m.value.Cx=r.ss(p)}}else m.key instanceof U&&l.add(m.Gd)}for(c=k.k;c.next();)k=c.value,p=k.info.point,d.assign(p),
k.vc.location=d.add(k.zG.Cx);p=y.M();c=y.M();for(l=l.k;l.next();)if(r=l.value,k=r.key,k instanceof U)if(k.ts)if(m=k.da,n=k.fa,this.gc!==q&&this.Gl)r=r.value.point,a.add(k,gf(e)),m=b.x-r.x,n=b.y-r.y,k.Ek(m,n);else{if(m!==q){p.assign(m.location);var t=a.wa(m);t!==q&&p.ss(t.point)}n!==q&&(c.assign(n.location),t=a.wa(n),t!==q&&c.ss(t.point));m!==q&&n!==q?p.di(c)?(r=r.value.point,m=d,m.assign(p),m.ss(r),a.add(k,gf(p)),k.Ek(m.x,m.y)):(k.ts=s,k.Vb()):(r=r.value.point,a.add(k,gf(m!==q?p:n!==q?c:b)),m=e.x-
r.x,n=e.y-r.y,k.Ek(m,n))}else if(k.da===q||k.fa===q)r=r.value.point,a.add(k,gf(b)),m=e.x-r.x,n=e.y-r.y,k.Ek(m,n);y.B(d);y.B(e);y.B(p);y.B(c);g||kf(this,a)}};function Bf(a,b,c){b=b.bb;if(b!==q){a=Bf(a,b,c);if(a!==q)return a;a=c.wa(b);if(a!==q)return a}return q}function nf(a){if(a.hc!==q){for(var b=a.h,c=a.hc.k;c.next();){var d=c.key;d.Pd()&&(d.location=c.value.point)}for(c=a.hc.k;c.next();)if(d=c.key,d instanceof U&&d.ts){var e=c.value.point;a.hc.add(d,gf());d.Ek(-e.x,-e.y)}b.pc()}}
af.prototype.computeMove=function(a,b,c,d){d===f&&(d=new A);d.assign(b);if(a===q)return d;c===f&&(c=q);var e=b;if(this.Zn&&(this.KC||c===q||this.h.Q.ni))if(e=y.M(),c=e,c.assign(b),a!==q){var g=this.h;if(g!==q){var k=g.Wn,l=this.Gy,g=l.width,l=l.height,m=this.uC,n=m.x,m=m.y,p=this.tC;if(k!==q){var r=k.Br;isNaN(g)&&(g=r.width);isNaN(l)&&(l=r.height);k=k.Fy;isNaN(n)&&(n=k.x);isNaN(m)&&(m=k.y)}k=y.ec(0,0);k.ns(0,0,g,l,p);H.yy(b.x,b.y,n+k.x,m+k.y,g,l,c);y.B(k)}}c=a.vy!==q?a.vy(a,b,e):e;l=a.eD;g=l.x;isNaN(g)&&
(g=a.location.x);l=l.y;isNaN(l)&&(l=a.location.y);k=a.ZC;n=k.x;isNaN(n)&&(n=a.location.x);k=k.y;isNaN(k)&&(k=a.location.y);d.q(Math.max(g,Math.min(c.x,n)),Math.max(l,Math.min(c.y,k)));e!==b&&y.B(e);return d};function Cf(a,b){if(b===q)return h;var c=b.W;return c===q||c.Wa||c instanceof Ge||c.layer.cc||a.hc&&a.hc.contains(c)||a.Zc&&a.Zc.contains(c)?h:s}
function Df(a,b,c,d){var e=a.h;if(e!==q){if(a.Gl&&a.gc!==q){var g=a.h.ea;g instanceof O&&(a.gc.da!==q&&g.ls(a.gc.data,""),a.gc.fa!==q&&g.os(a.gc.data,""))}g=s;a.$t===s&&(g=e.Xb,e.Xb=h);var k=s,l=Ef(e,b,q,function(b){return!Cf(a,b)}),m=e.Q;m.zd=l;var n=e.Xb;e.Xb=h;if(l!==a.Xk){var p=a.Xk;a.St=p;for(a.Xk=l;p!==q;){var r=p.Xy;if(r!==q){if(l===p)break;if(l!==q&&l.hi(p))break;r(m,p,l);k=h;if(m.ee)break}p=p.ha}for(p=a.St;l!==q;){r=l.fD;if(r!==q){if(p===l)break;if(p!==q&&p.hi(l))break;r(m,l,p);k=h;if(m.ee)break}l=
l.ha}l=a.Xk}l===q&&(r=e.gD,r!==q&&(r(m),k=h));a.doDragOver(b,l);e.Xb=n;k&&e.li();a.$t===s&&(e.Xb=g);(e.Ne||e.Oe)&&(c||d)&&Ff(e,b)}}af.prototype.doDragOver=aa();function Gf(a,b){var c=a.h;if(c!==q&&c.ea!==q){jf(a);var d=Ef(c,b,q,function(b){return!Cf(a,b)}),e=c.Q;e.zd=d;if(d!==q)for(var g=d;g!==q;){var k=g.Qr;if(k!==q&&(k(e,g),e.ee))break;g=g.ha}else k=c.Qr,k!==q&&k(e);a.doDropOnto(b,d);for(d=c.selection.k;d.next();)e=d.value,e instanceof T&&Hf(c,e.ua)}}af.prototype.doDropOnto=aa();
af.prototype.doMouseMove=function(){if(this.la){var a=this.h;if(a!==q&&this.In!==q&&this.hc!==q){var b=s,c=s;this.mayCopy()?(b=h,zf(this,s),Af(this,this.Zc,h)):this.mayMove()?(c=h,mf(this),Af(this,this.hc,h)):mf(this);Df(this,a.Q.T,c,b);a.kc()}}};
af.prototype.doMouseUp=function(){if(this.la){this.hp=h;var a=this.h;if(a!==q){var b=s,c=this.mayCopy();c&&this.Zc!==q?(nf(this),mf(this),zf(this,h),Af(this,this.Zc,h),this.Zc!==q&&a.PD(this.Zc.Ok())):(b=h,mf(this),this.mayMove()&&(Af(this,this.hc,h),this.$t=s,Df(this,a.Q.T,h,s),this.$t=h));Gf(this,a.Q.T);if(this.la){this.Zc=q;if(b&&this.hc!==q)for(b=this.hc.k;b.next();){var d=b.key;d instanceof T&&(d=d.bb,d!==q&&d.placeholder!==q&&!this.hc.contains(d)&&d.qy&&d.aa())}a.pc();kf(this,this.hc);this.Fe=
c?"Copy":"Move";a.Fa(c?"SelectionCopied":"SelectionMoved",a.selection)}this.stopTool()}}};af.prototype.mayCopy=function(){var a=this.h;if(a===q||(a.Za||a.Be||!a.tl||!a.cj)||!a.Q.control)return s;for(a=a.selection.k;a.next();){var b=a.value;if(b.Pd()&&b.canCopy())return h}return this.gc!==q&&this.Gl&&this.gc.canCopy()?h:s};
af.prototype.mayMove=function(){var a=this.h;if(a===q||a.Za||!a.sk)return s;for(a=a.selection.k;a.next();){var b=a.value;if(b.Pd()&&b.canMove())return h}return this.gc!==q&&this.Gl&&this.gc.canMove()?h:s};var lf=new F(af),df=q,ef=q;af.prototype.mayCopyExternal=function(){var a=this.h;return a===q||(!a.hy||a.Za||a.Be||!a.tl)||a.ea===q?s:h};
af.prototype.doSimulatedDragEnter=function(){if(this.mayCopyExternal()){var a=df;if(a!==q){mf(a);nf(a);var b=a.h;b!==q&&a.ln.V()&&(b.position=a.ln);b!==q&&hf(b)}lf.contains(this)||lf.add(this)}};af.prototype.doSimulatedDragLeave=function(){df.av=s;this.doCancel()};af.prototype.doSimulatedDragOver=function(){if(this.mayCopyExternal()){var a=this.h;if(a!==q){var b=df;b!==q&&b.hc!==q&&(If(this,b.hc.Ok(),s),Af(this,this.Zc,s),Df(this,a.Q.T,s,h),a.kc())}}};
af.prototype.doSimulatedDrop=function(){var a=df;if(a!==q&&(a.hp=h,mf(this),this.mayCopyExternal())){var b=this.h;b!==q&&(this.lc("Drop"),If(this,a.hc.Ok(),h),Af(this,this.Zc,h),this.Zc!==q&&b.PD(this.Zc.Ok()),this.Fe="ExternalCopy",Gf(this,b.Q.T),this.Zc=q,b.Fa("ExternalObjectsDropped",b.selection),this.wj(),b.pc())}};
function If(a,b,c){if(a.Zc===q){var d=a.h;if(!(d===q||d.Za||d.Be)&&d.ea!==q){d.Xb=!c;d.hr=!c;a.Sh.set(d.Q.T);d=d.copyParts(b,d,h);c=y.df();yf(b,c);var e=c.x+c.width/2,g=c.y+c.height/2;y.Bc(c);var k=a.Sh;c=new ma(R,Object);var l=y.M();for(b=b.k;b.next();){var m=b.value;if(m.Pd()&&m.canCopy()){var n=m.location,m=d.wa(m);l.q(k.x-(e-n.x),k.y-(g-n.y));m.location=l;m.ci();c.add(m,gf(l))}}y.B(l);for(d=d.k;d.next();)e=d.value,e instanceof U&&e.canCopy()&&c.add(e,gf());a.Zc=c;bf(a,c.Ok());a.gc!==q&&(c=a.gc,
d=c.Ai(),c.Ek(a.Sh.x-(d.x+d.width/2),a.Sh.y-(d.y+d.height/2)))}}}
function Jf(){0<arguments.length&&y.m("LinkingBaseTool constructor cannot take any arguments.");Pe.call(this);this.wx=100;this.ax=s;var a=new U;a.ks="PATH";var b=new V;b.ji=h;b.name="PATH";b.stroke="blue";a.add(b);b=new V;b.bm="Standard";b.fill="blue";a.add(b);a.ge="Tool";this.Rx=a;a=new T;b=new V;b.Td="";b.xb="Rectangle";b.fill=q;b.stroke="magenta";b.jb=2;b.Aa=H.Zv;a.add(b);a.Jk=s;a.ge="Tool";this.Px=a;this.Qx=b;a=new T;b=new V;b.Td="";b.xb="Rectangle";b.fill=q;b.stroke="magenta";b.jb=2;b.Aa=H.Zv;
a.add(b);a.Jk=s;a.ge="Tool";this.Sx=a;this.Tx=b;this.vx=this.ux=this.ox=this.nx=this.px=q;this.vp=h;this.eF=new ma(P,"boolean");this.WA=this.HA=this.Mx=q}y.ba("LinkingBaseTool",Jf);y.Ka(Jf,Pe);Jf.prototype.doStop=function(){var a=this.h;a!==q&&hf(a);this.Uf=this.Tf=this.Sf=this.Rf=this.Ob=q;this.Hv.clear();this.cf=q};y.g(Jf,"portGravity",Jf.prototype.pD);y.defineProperty(Jf,{pD:"portGravity"},w("wx"),function(a){this.wx!==a&&(x&&y.j(a,"number",Jf,"portGravity"),this.wx=a)});
y.g(Jf,"isUnconnectedLinkValid",Jf.prototype.ao);y.defineProperty(Jf,{ao:"isUnconnectedLinkValid"},w("ax"),function(a){this.ax!==a&&(x&&y.j(a,"boolean",Jf,"isUnconnectedLinkValid"),this.ax=a)});y.g(Jf,"temporaryLink",Jf.prototype.Yf);y.defineProperty(Jf,{Yf:"temporaryLink"},w("Rx"),function(a){this.Rx!==a&&(x&&y.l(a,U,Jf,"temporaryLink"),this.Rx=a)});y.g(Jf,"temporaryFromNode",Jf.prototype.ef);
y.defineProperty(Jf,{ef:"temporaryFromNode"},w("Px"),function(a){this.Px!==a&&(x&&y.l(a,T,Jf,"temporaryFromNode"),this.Px=a)});y.g(Jf,"temporaryFromPort",Jf.prototype.$l);y.defineProperty(Jf,{$l:"temporaryFromPort"},w("Qx"),function(a){this.Qx!==a&&(x&&y.l(a,P,Jf,"temporaryFromPort"),this.Qx=a)});y.g(Jf,"temporaryToNode",Jf.prototype.ff);y.defineProperty(Jf,{ff:"temporaryToNode"},w("Sx"),function(a){this.Sx!==a&&(x&&y.l(a,T,Jf,"temporaryToNode"),this.Sx=a)});y.g(Jf,"temporaryToPort",Jf.prototype.am);
y.defineProperty(Jf,{am:"temporaryToPort"},w("Tx"),function(a){this.Tx!==a&&(x&&y.l(a,P,Jf,"temporaryToPort"),this.Tx=a)});y.g(Jf,"originalLink",Jf.prototype.Ob);y.defineProperty(Jf,{Ob:"originalLink"},w("px"),function(a){this.px!==a&&(x&&a!==q&&y.l(a,U,Jf,"originalLink"),this.px=a)});y.g(Jf,"originalFromNode",Jf.prototype.Rf);y.defineProperty(Jf,{Rf:"originalFromNode"},w("nx"),function(a){this.nx!==a&&(x&&a!==q&&y.l(a,T,Jf,"originalFromNode"),this.nx=a)});y.g(Jf,"originalFromPort",Jf.prototype.Sf);
y.defineProperty(Jf,{Sf:"originalFromPort"},w("ox"),function(a){this.ox!==a&&(x&&a!==q&&y.l(a,P,Jf,"originalFromPort"),this.ox=a)});y.g(Jf,"originalToNode",Jf.prototype.Tf);y.defineProperty(Jf,{Tf:"originalToNode"},w("ux"),function(a){this.ux!==a&&(x&&a!==q&&y.l(a,T,Jf,"originalToNode"),this.ux=a)});y.g(Jf,"originalToPort",Jf.prototype.Uf);y.defineProperty(Jf,{Uf:"originalToPort"},w("vx"),function(a){this.vx!==a&&(x&&a!==q&&y.l(a,P,Jf,"originalToPort"),this.vx=a)});
y.defineProperty(Jf,{Ae:"isForwards"},w("vp"),ba("vp"));y.A(Jf,{Hv:"validPortsCache"},w("eF"));y.g(Jf,"targetPort",Jf.prototype.cf);y.defineProperty(Jf,{cf:"targetPort"},w("Mx"),function(a){this.Mx!==a&&(x&&a!==q&&y.l(a,P,Jf,"targetPort"),this.Mx=a)});Jf.prototype.copyPortProperties=function(a,b,c,d,e){if(!(a===q||b===q||c===q||d===q)){d.Aa=b.ua.size;e?(d.kb=b.kb,d.cm=b.cm):(d.gb=b.gb,d.Kl=b.Kl);c.We=Sb;var g=y.M();c.location=b.hb(Sb,g);y.B(g);d.angle=b.yk();this.bs!==q&&this.bs(a,b,c,d,e)}};
Jf.prototype.setNoTargetPortProperties=function(a,b,c){b!==q&&(b.Aa=H.Zv,b.gb=Hb,b.kb=Hb);a!==q&&(a.location=this.h.Q.T);this.bs!==q&&this.bs(q,q,a,b,c)};Jf.prototype.doMouseDown=function(){this.la&&this.doMouseMove()};
Jf.prototype.doMouseMove=function(){if(this.la){var a=this.h;if(a!==q){this.cf=this.findTargetPort(this.Ae);if(this.cf!==q){var b=this.cf.W;if(b instanceof T){this.Ae?this.copyPortProperties(b,this.cf,this.ff,this.am,h):this.copyPortProperties(b,this.cf,this.ef,this.$l,s);a.kc();return}}this.Ae?this.setNoTargetPortProperties(this.ff,this.am,h):this.setNoTargetPortProperties(this.ef,this.$l,s);a.kc();(a.Ne||a.Oe)&&Ff(a,a.Q.T)}}};
Jf.prototype.findValidLinkablePort=function(a,b){if(a===q)return q;var c=a.W;if(!(c instanceof T))return q;for(;a!==q;){var d=b?a.Dz:a.Cy;if(d===h&&(a.Td!==q||a instanceof T)&&(b?this.isValidTo(c,a):this.isValidFrom(c,a)))return a;if(d===s)break;a=a.ha}return q};
Jf.prototype.findTargetPort=function(a){var b=this.h,c=b.Q.T,d=this.pD;0>=d&&(d=0.1);for(var e=this,g=b.Pn(c,d,function(b){return e.findValidLinkablePort(b,a)},q,h),d=Infinity,b=q,g=g.k;g.next();){var k=g.value,l=k.W;if(l instanceof T){var m=k.hb(Sb,y.M()),n=c.x-m.x,p=c.y-m.y;y.B(m);m=n*n+p*p;m<d&&(n=this.Hv.wa(k),n!==q?n&&(b=k,d=m):a&&this.isValidLink(this.Rf,this.Sf,l,k)||!a&&this.isValidLink(l,k,this.Tf,this.Uf)?(this.Hv.add(k,h),b=k,d=m):this.Hv.add(k,s))}}return b!==q&&(c=b.W,c instanceof T&&
(c.layer===q||c.layer.ul))?b:q};Jf.prototype.isValidFrom=function(a,b){if(a===q||b===q)return this.ao;if(this.h.Ma===this&&(a.layer!==q&&!a.layer.ul||b.Cy!==h))return s;var c=b.pC;if(Infinity>c){if(this.Ob!==q&&a===this.Rf&&b===this.Sf)return h;var d=b.Td;d===q&&(d="");if(a.Pu(d).count>=c)return s}return h};
Jf.prototype.isValidTo=function(a,b){if(a===q||b===q)return this.ao;if(this.h.Ma===this&&(a.layer!==q&&!a.layer.ul||b.Dz!==h))return s;var c=b.iE;if(Infinity>c){if(this.Ob!==q&&a===this.Tf&&b===this.Uf)return h;var d=b.Td;d===q&&(d="");if(a.Jf(d).count>=c)return s}return h};Jf.prototype.isInSameNode=function(a,b){if(a===q||b===q)return s;if(a===b)return h;var c=a.W,d=b.W;return c!==q&&c===d};
Jf.prototype.isLinked=function(a,b){if(a===q||b===q)return s;var c=a.W;if(!(c instanceof T))return s;var d=a.Td;d===q&&(d="");var e=b.W;if(!(e instanceof T))return s;var g=b.Td;g===q&&(g="");for(e=e.Jf(g);e.next();)if(g=e.value,g.da===c&&g.Lf===d)return h;return s};
Jf.prototype.isValidLink=function(a,b,c,d){return!this.isValidFrom(a,b)||!this.isValidTo(c,d)||b!==q&&d!==q&&((!b.oC||!d.hE)&&this.isInSameNode(b,d)||(!b.nC||!d.gE)&&this.isLinked(b,d))||this.Ob!==q&&(a!==q&&Kf(this,a,this.Ob)||c!==q&&Kf(this,c,this.Ob))||a!==q&&c!==q&&(a.data===q&&c.data!==q||a.data!==q&&c.data===q)||!Lf(this,a,c,this.Ob)?s:this.Ty!==q?this.Ty(a,b,c,d,this.Ob):h};
function Kf(a,b,c){if(b===q)return s;var d=b.hd;if(d===q)return s;if(d===c)return h;var e=new na(T);e.add(b);return Mf(a,d,c,e)}function Mf(a,b,c,d){if(b===c)return h;var e=b.da;if(e!==q&&e.ii&&(d.add(e),Mf(a,e.hd,c,d)))return h;b=b.fa;return b!==q&&b.ii&&(d.add(b),Mf(a,b.hd,c,d))?h:s}
function Lf(a,b,c,d){if(b===q||c===q)return s;var e=a.h.wE;if(e!==Nf){if(e===Of){if(d!==q&&!d.ic)return h;for(e=c.Qd;e.next();){var g=e.value;if(g!==d&&g.ic&&g.fa===c)return s}return!Pf(a,b,c,d,h)}if(e===Qf){if(d!==q&&!d.ic)return h;for(e=b.Qd;e.next();)if(g=e.value,g!==d&&g.ic&&g.da===b)return s;return!Pf(a,b,c,d,h)}if(e===$f)return b===c?a=h:(e=new na(T),e.add(c),a=ag(a,e,b,c,d)),!a;if(e===bg)return!Pf(a,b,c,d,s);if(e===cg)return b===c?a=h:(e=new na(T),e.add(c),a=dg(a,e,b,c,d)),!a}return h}
function Pf(a,b,c,d,e){if(b===c)return h;if(b===q||c===q)return s;for(var g=b.Qd;g.next();){var k=g.value;if(k!==d&&(!e||k.ic)&&k.fa===b)if(k=k.da,k!==b&&Pf(a,k,c,d,e))return h}return s}function ag(a,b,c,d,e){if(c===d)return h;if(c===q||d===q||b.contains(c))return s;b.add(c);for(var g=c.Qd;g.next();){var k=g.value;if(k!==e&&k.fa===c&&(k=k.da,k!==c&&ag(a,b,k,d,e)))return h}return s}
function dg(a,b,c,d,e){if(c===d)return h;if(c===q||d===q||b.contains(c))return s;b.add(c);for(var g=c.Qd;g.next();){var k=g.value;if(k!==e){var l=k.da,k=k.fa,l=l===c?k:l;if(l!==c&&dg(a,b,l,d,e))return h}}return s}y.g(Jf,"linkValidation",Jf.prototype.Ty);y.defineProperty(Jf,{Ty:"linkValidation"},w("HA"),function(a){a!==q&&y.j(a,"function",Jf,"linkValidation");this.HA=a});y.g(Jf,"portTargeted",Jf.prototype.bs);
y.defineProperty(Jf,{bs:"portTargeted"},w("WA"),function(a){a!==q&&y.j(a,"function",Jf,"portTargeted");this.WA=a});function qa(){0<arguments.length&&y.m("LinkingTool constructor cannot take any arguments.");Jf.call(this);this.name="Linking";this.ow={};this.nw=q;this.ma=eg;this.Hx=this.Gx=q}y.ba("LinkingTool",qa);y.Ka(qa,Jf);var eg;qa.Either=eg=y.w(qa,"Either",0);var fg;qa.ForwardsOnly=fg=y.w(qa,"ForwardsOnly",0);var gg;qa.BackwardsOnly=gg=y.w(qa,"BackwardsOnly",0);y.g(qa,"archetypeLinkData",qa.prototype.CB);
y.defineProperty(qa,{CB:"archetypeLinkData"},w("ow"),function(a){this.ow!==a&&(a!==q&&y.l(a,Object,qa,"archetypeLinkData"),this.ow=a)});y.g(qa,"archetypeLabelNodeData",qa.prototype.BB);
y.defineProperty(qa,{BB:"archetypeLabelNodeData"},w("nw"),function(a){if(this.nw!==a){a!==q&&y.l(a,Object,qa,"archetypeLabelNodeData");var b=this.h;b!==q&&(b=b.ea,b instanceof O&&!(a instanceof T)&&!b.Oy(a)&&y.m("CommandHandler.archetypeLabelNodeData must be either a Node or a data object for which GraphLinksModel.isLinkLabelForNodeData is true: "+a));this.nw=a}});y.g(qa,"direction",qa.prototype.direction);
y.defineProperty(qa,{direction:"direction"},w("ma"),function(a){this.ma!==a&&(x&&y.rb(a,qa,qa,"direction"),this.ma=a)});y.g(qa,"startObject",qa.prototype.xz);y.defineProperty(qa,{xz:"startObject"},w("Gx"),function(a){this.Gx!==a&&(x&&a!==q&&y.l(a,P,qa,"startObject"),this.Gx=a)});y.A(qa,{Cv:"startPort"},w("Hx"));
qa.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;if(a===q||(a.Za||a.Be)||!a.ul)return s;var b=a.ea;return b===q||!(b instanceof O)&&!(b instanceof yd)||!a.Q.left||a.Ma!==this&&!this.isBeyondDragSize()?s:this.findLinkablePort()!==q};
qa.prototype.findLinkablePort=function(){var a=this.h;if(a===q)return q;var b=this.xz;b===q&&(b=a.vd(a.uc.T,q,q));if(b===q||!(b.W instanceof T))return q;var c=this.direction;if(c===eg||c===fg)if(a=this.findValidLinkablePort(b,s),a!==q)return this.vp=h,a;if(c===eg||c===gg)if(a=this.findValidLinkablePort(b,h),a!==q)return this.vp=s,a;return q};
qa.prototype.doActivate=function(){var a=this.h;if(a!==q&&(this.Cv===q&&(this.Hx=this.findLinkablePort()),this.Cv!==q)){this.lc(this.name);a.gd=h;a.Nc="pointer";if(this.Ae){this.Sf=this.Cv;var b=this.Sf.W;b instanceof T&&(this.Rf=b);this.copyPortProperties(this.Rf,this.Sf,this.ef,this.$l,s)}else this.Uf=this.Cv,b=this.Uf.W,b instanceof T&&(this.Tf=b),this.copyPortProperties(this.Tf,this.Uf,this.ff,this.am,h);a.add(this.ef);a.add(this.ff);this.Yf!==q&&(this.ef!==q&&(this.Yf.da=this.ef),this.ff!==q&&
(this.Yf.fa=this.ff),this.Yf.Vb(),a.add(this.Yf));this.la=h}};qa.prototype.doDeactivate=function(){this.la=s;var a=this.h;a!==q&&(a.remove(this.Yf),a.remove(this.ef),a.remove(this.ff),a.gd=s,a.Nc="",this.wj())};qa.prototype.doStop=function(){Jf.prototype.doStop.call(this);this.xz=this.Hx=q};
qa.prototype.doMouseUp=function(){if(this.la){var a=this.h;if(a===q)return;var b=this.Fe=q,c=q,d=q,e=q,g=this.cf=this.findTargetPort(this.Ae),k=q;g!==q?(k=g.W,k instanceof T&&(this.Ae?(this.Rf!==q&&(b=this.Rf,c=this.Sf),d=k,e=g):(b=k,c=g,this.Tf!==q&&(d=this.Tf,e=this.Uf)))):this.Ae?this.Rf!==q&&this.ao&&(b=this.Rf,c=this.Sf):this.Tf!==q&&this.ao&&(d=this.Tf,e=this.Uf);if(b!==q||d!==q)b=this.insertLink(b,c,d,e),b!==q?(g===q&&(this.Ae?b.fG=a.Q.T:b.YF=a.Q.T),a.pe&&a.select(b),this.Fe=this.name,a.Fa("LinkDrawn",
b)):a.ea.KB()}this.stopTool()};
qa.prototype.insertLink=function(a,b,c,d){var e=this.h;if(e===q)return q;var g=e.ea;if(g===q)return q;if(g instanceof yd){if(b=a,d=c,e.Dc||(b=c,d=a),b!==q&&d!==q)return g.vf(d.data,g.sb(b.data)),d.yr()}else if(g instanceof O){b===q&&(b=a);b=b.Td;b===q&&(b="");d===q&&(d=c);var k=d.Td;k===q&&(k="");d=this.CB;if(d instanceof U){if(Je(d),g=d.copy(),g instanceof U)return g.da=a,g.Lf=b,g.fa=c,g.zg=k,e.add(g),g}else if(d!==q&&(d=g.SB(d),y.tb(d)))return g.xv(d,g.sb(a.data)),g.ls(d,b),g.yv(d,g.sb(c.data)),
g.os(d,k),g.yB(d),a=this.BB,a!==q&&g.Oy(a)&&(a=g.jj(a),y.tb(a)&&(g.fr(a),a=g.sb(a),a!==f&&g.xB(d,a))),g=e.pf(d)}return q};function hg(){0<arguments.length&&y.m("RelinkingTool constructor cannot take any arguments.");Jf.call(this);this.name="Relinking";var a=new V;a.xb="Diamond";a.Aa=H.Lz;a.fill="cyan";a.cursor="pointer";a.af=0;this.vA=a;a=new V;a.xb="Diamond";a.Aa=H.Lz;a.fill="cyan";a.cursor="pointer";a.af=-1;this.mB=a;this.Lb=q;this.UA=new B}y.ba("RelinkingTool",hg);y.Ka(hg,Jf);
hg.prototype.updateAdornments=function(a){if(a instanceof U){var b=q,c="RelinkFrom";if(a.Wa){var d=a.js;a.ua.V()&&(d!==q&&a.yb()&&a.canRelinkFrom()&&d.Dk()&&d.ua.V())&&(b=a.Mn(c),b===q&&(b=this.makeAdornment(d,s),b.Ac=c),b!==q&&b.aa());a.ok(c,b)}else a.Ik(c);b=q;c="RelinkTo";a.Wa?(d=a.js,a.ua.V()&&(d!==q&&a.yb()&&a.canRelinkTo()&&d.Dk()&&d.ua.V())&&(b=a.Mn(c),b===q&&(b=this.makeAdornment(d,h),b.Ac=c,b.Ql=h),b!==q&&b.aa()),a.ok(c,b)):a.Ik(c)}};
hg.prototype.makeAdornment=function(a,b){var c=new Ge;c.type=ig;var d=b?this.DH:this.tG;d!==q&&c.add(d.copy());c.zc=a;return c};y.defineProperty(hg,{tG:"fromHandleArchetype"},w("vA"),function(a){a&&y.l(a,P,hg,"fromHandleArchetype");this.vA=a});y.defineProperty(hg,{DH:"toHandleArchetype"},w("mB"),function(a){a&&y.l(a,P,hg,"toHandleArchetype");this.mB=a});y.A(hg,{handle:"handle"},w("Lb"));
hg.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;if(a===q||(a.Za||a.Be)||!a.dj)return s;var b=a.ea;if(b===q||!(b instanceof O)&&!(b instanceof yd)||!a.Q.left)return s;b=this.findToolHandleAt(a.uc.T,"RelinkFrom");b===q&&(b=this.findToolHandleAt(a.uc.T,"RelinkTo"));return b!==q};
hg.prototype.doActivate=function(){var a=this.h;if(a!==q){if(this.Ob===q){var b=this.findToolHandleAt(a.uc.T,"RelinkFrom");b===q&&(b=this.findToolHandleAt(a.uc.T,"RelinkTo"));if(b===q)return;var c=b.W;if(!(c instanceof Ge)||!(c.aj instanceof U))return;this.Lb=b;this.vp=c===q||"RelinkTo"===c.Ac;this.Ob=c.aj}this.lc(this.name);a.gd=h;a.Nc="pointer";this.Sf=this.Ob.Oc;this.Rf=this.Ob.da;this.Uf=this.Ob.Ad;this.Tf=this.Ob.fa;this.UA.set(this.Ob.ua);this.Ob!==q&&0<this.Ob.qa&&(this.Ob.da===q&&(this.$l!==
q&&(this.$l.Aa=H.ys),this.ef!==q&&(this.ef.location=this.Ob.o(0))),this.Ob.fa===q&&(this.am!==q&&(this.am.Aa=H.ys),this.ff!==q&&(this.ff.location=this.Ob.o(this.Ob.qa-1))));this.copyPortProperties(this.Rf,this.Sf,this.ef,this.$l,s);this.copyPortProperties(this.Tf,this.Uf,this.ff,this.am,h);a.add(this.ef);a.add(this.ff);this.Yf!==q&&(this.ef!==q&&(this.Yf.da=this.ef),this.ff!==q&&(this.Yf.fa=this.ff),this.Yf.Vb(),a.add(this.Yf));this.la=h}};
hg.prototype.doDeactivate=function(){this.la=s;var a=this.h;a!==q&&(a.remove(this.Yf),a.remove(this.ef),a.remove(this.ff),a.gd=s,a.Nc="",this.wj())};hg.prototype.doStop=function(){Jf.prototype.doStop.call(this);this.Lb=q};
hg.prototype.doMouseUp=function(){if(this.la){var a=this.h;if(a===q)return;this.Fe=q;var b=this.Rf,c=this.Sf,d=this.Tf,e=this.Uf,g=this.Ob;this.cf=this.findTargetPort(this.Ae);if(this.cf!==q){var k=this.cf.W;k instanceof T&&(this.Ae?(d=k,e=this.cf):(b=k,c=this.cf))}else this.ao?this.Ae?e=d=q:c=b=q:g=q;g!==q&&(this.reconnectLink(g,this.Ae?d:b,this.Ae?e:c,this.Ae),this.cf===q&&(this.Ae?g.fG=a.Q.T:g.YF=a.Q.T,g.Vb()),a.pe&&(g.Wa=h),this.Fe=this.name,a.Fa("LinkRelinked",g,this.Ae?this.Uf:this.Sf));jg(this.Ob,
this.UA)}this.stopTool()};hg.prototype.reconnectLink=function(a,b,c,d){var e=this.h;if(e===q)return s;var g=b!==q?b.data:q,g=g!==q?e.ea.sb(g):f,k=c.Td!==q?c.Td:"",l=a.data;if(l!==q&&g!==f)if(c=e.ea,c instanceof yd)e=e.Dc,k=a.da,g=a.fa,e||(k=a.fa,g=a.da),a=k,k=g,d&&e||!d&&!e?(k=b,c.vf(g.data,f),c.vf(k.data,c.sb(a.data))):c.vf(g.data,c.sb(b.data));else if(c instanceof O)d?(c.yv(l,g),c.os(l,k)):(c.xv(l,g),c.ls(l,k));else return s;else d?(this.Ob.fa=b,this.Ob.zg=k):(this.Ob.da=b,this.Ob.Lf=k);return h};
function kg(){0<arguments.length&&y.m("LinkReshapingTool constructor cannot take any arguments.");Pe.call(this);this.name="LinkReshaping";var a=new V;a.xb="Rectangle";a.Aa=H.fm;a.fill="cyan";this.Wj=a;a=new V;a.xb="Diamond";a.Aa=H.fm;a.fill="cyan";this.JA=a;this.YA=3;this.lw=this.Lb=q;this.VA=new A;this.sx=q}y.ba("LinkReshapingTool",kg);y.Ka(kg,Pe);var lg;kg.None=lg=y.w(kg,"None",0);var sg;kg.Horizontal=sg=y.w(kg,"Horizontal",1);var tg;kg.Vertical=tg=y.w(kg,"Vertical",2);var ug;
kg.All=ug=y.w(kg,"All",3);kg.prototype.updateAdornments=function(a){if(a instanceof U){var b=q;if(a.Wa){var c=a.path;a.ua.V()&&(c!==q&&a.yb()&&a.canReshape()&&c.Dk()&&c.ua.V())&&(b=a.Mn(this.name),b===q&&(b=this.makeAdornment(c),b.Ac=this.name,b.Ql=h),b!==q&&(b.location=a.position,b.aa()));a.ok(this.name,b)}else a.Ik(this.name)}};
kg.prototype.makeAdornment=function(a){var b=new Ge;b.type=ig;var c=a.W,d=c.qa,e=c.Ib;if(c.points!==q&&1<d){var d=c.zr,g=c.ev,k=e?1:0;if(c.qv&&c.Se!==vg)for(var l=d+k;l<g-k;l++){var m=this.makeResegmentHandle(a,l);m!==q&&(m.af=l,m.hs=0.5,b.add(m))}for(l=d+1;l<g;l++)if(m=this.makeHandle(a,l),m!==q){m.af=l;if(l!==d)if(l===d+1&&e){var k=c.o(d),n=c.o(d+1);H.I(k.x,n.x)&&H.I(k.y,n.y)&&(n=c.o(d-1));H.I(k.x,n.x)?(m.vo=tg,m.cursor="n-resize"):H.I(k.y,n.y)&&(m.vo=sg,m.cursor="w-resize")}else l===g-1&&e?(k=
c.o(g-1),n=c.o(g),H.I(k.x,n.x)&&H.I(k.y,n.y)&&(k=c.o(g+1)),H.I(k.x,n.x)?(m.vo=tg,m.cursor="n-resize"):H.I(k.y,n.y)&&(m.vo=sg,m.cursor="w-resize")):l!==g&&(m.vo=ug,m.cursor="move");b.add(m)}b.zc=a}return b};kg.prototype.makeHandle=function(){var a=this.Cr;return a===q?q:a.copy()};y.defineProperty(kg,{Cr:"handleArchetype"},w("Wj"),function(a){a&&y.l(a,P,kg,"handleArchetype");this.Wj=a});kg.prototype.makeResegmentHandle=function(){var a=this.XG;return a===q?q:a.copy()};
y.defineProperty(kg,{XG:"midHandleArchetype"},w("JA"),function(a){a&&y.l(a,P,kg,"midHandleArchetype");this.JA=a});y.A(kg,{handle:"handle"},w("Lb"));y.A(kg,{ir:"adornedLink"},w("lw"));kg.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;return a===q||a.Za||!a.wn?s:this.findToolHandleAt(a.uc.T,this.name)!==q};
kg.prototype.doActivate=function(){var a=this.h;if(a!==q&&(this.Lb=this.findToolHandleAt(a.uc.T,this.name),this.Lb!==q)){var b=this.Lb.W.aj;if(b instanceof U){this.lw=b;a.gd=h;this.lc(this.name);if(b.qv&&0.5===this.Lb.hs){var c=b.points.copy(),d=this.Lb.hb(Sb);c.wd(this.Lb.af+1,d);b.Ib&&c.wd(this.Lb.af+1,d);b.points=c;b.be();b.updateAdornments();this.Lb=this.findToolHandleAt(a.uc.T,this.name)}this.VA=b.o(this.Lb.af);this.sx=b.points.copy();this.la=h}}};
kg.prototype.doDeactivate=function(){this.wj();this.lw=this.Lb=q;var a=this.h;a!==q&&(a.gd=s);this.la=s};kg.prototype.doCancel=function(){var a=this.ir;a!==q&&(a.points=this.sx);this.stopTool()};kg.prototype.doMouseMove=function(){var a=this.h;this.la&&a!==q&&(a=this.computeReshape(a.Q.T),this.reshape(a))};
kg.prototype.doMouseUp=function(){var a=this.h;if(this.la&&a!==q){var b=this.computeReshape(a.Q.T);this.reshape(b);b=this.ir;if(b!==q&&b.qv){var c=this.handle.af,d=b.o(c-1),e=b.o(c),g=b.o(c+1);if(b.Ib){if(c>b.zr+1&&c<b.ev-1){var k=b.o(c-2);if(Math.abs(d.x-e.x)<this.jh&&Math.abs(d.y-e.y)<this.jh&&(wg(this,k,d,e,g,h)||wg(this,k,d,e,g,s))){var l=b.points.copy();wg(this,k,d,e,g,h)?(l.Vf(c-2,new A(k.x,(g.y+k.y)/2)),l.Vf(c+1,new A(g.x,(g.y+k.y)/2))):(l.Vf(c-2,new A((g.x+k.x)/2,k.y)),l.Vf(c+1,new A((g.x+
k.x)/2,g.y)));l.kd(c);l.kd(c-1);b.points=l;b.be();b.updateAdornments()}else if(k=b.o(c+2),Math.abs(e.x-g.x)<this.jh&&Math.abs(e.y-g.y)<this.jh&&(wg(this,d,e,g,k,h)||wg(this,d,e,g,k,s)))l=b.points.copy(),wg(this,d,e,g,k,h)?(l.Vf(c-1,new A(d.x,(d.y+k.y)/2)),l.Vf(c+2,new A(k.x,(d.y+k.y)/2))):(l.Vf(c-1,new A((d.x+k.x)/2,d.y)),l.Vf(c+2,new A((d.x+k.x)/2,k.y))),l.kd(c+1),l.kd(c),b.points=l,b.be(),b.updateAdornments()}}else k=y.M(),H.Vr(d.x,d.y,g.x,g.y,e.x,e.y,k)&&9>k.xk(e)&&(l=b.points.copy(),l.kd(c),b.points=
l,b.be(),b.updateAdornments()),y.B(k)}a.pc();this.Fe=this.name;a.Fa("LinkReshaped",this.ir)}this.stopTool()};function wg(a,b,c,d,e,g){return g?Math.abs(b.y-c.y)<a.jh&&Math.abs(c.y-d.y)<a.jh&&Math.abs(d.y-e.y)<a.jh:Math.abs(b.x-c.x)<a.jh&&Math.abs(c.x-d.x)<a.jh&&Math.abs(d.x-e.x)<a.jh}y.g(Pe,"resegmentingDistance",Pe.prototype.jh);y.defineProperty(Pe,{jh:"resegmentingDistance"},w("YA"),ba("YA"));
kg.prototype.reshape=function(a){var b=this.ir;b.Mk();var c=this.handle.af,d=this.handle.vo;if(b.Ib)if(c===b.zr+1)c=b.zr+1,d===tg?(b.R(c,b.o(c-1).x,a.y),b.R(c+1,b.o(c+2).x,a.y)):d===sg&&(b.R(c,a.x,b.o(c-1).y),b.R(c+1,a.x,b.o(c+2).y));else if(c===b.ev-1)c=b.ev-1,d===tg?(b.R(c-1,b.o(c-2).x,a.y),b.R(c,b.o(c+1).x,a.y)):d===sg&&(b.R(c-1,a.x,b.o(c-2).y),b.R(c,a.x,b.o(c+1).y));else{var d=c,e=b.o(d),g=b.o(d-1),k=b.o(d+1);H.I(g.x,e.x)&&H.I(e.y,k.y)?(H.I(g.x,b.o(d-2).x)&&!H.I(g.y,b.o(d-2).y)?(b.C(d,a.x,g.y),
c++,d++):b.R(d-1,a.x,g.y),H.I(k.y,b.o(d+2).y)&&!H.I(k.x,b.o(d+2).x)?b.C(d+1,k.x,a.y):b.R(d+1,k.x,a.y)):H.I(g.y,e.y)&&H.I(e.x,k.x)?(H.I(g.y,b.o(d-2).y)&&!H.I(g.x,b.o(d-2).x)?(b.C(d,g.x,a.y),c++,d++):b.R(d-1,g.x,a.y),H.I(k.x,b.o(d+2).x)&&!H.I(k.y,b.o(d+2).y)?b.C(d+1,a.x,k.y):b.R(d+1,a.x,k.y)):H.I(g.x,e.x)&&H.I(e.x,k.x)?(H.I(g.x,b.o(d-2).x)&&!H.I(g.y,b.o(d-2).y)?(b.C(d,a.x,g.y),c++,d++):b.R(d-1,a.x,g.y),H.I(k.x,b.o(d+2).x)&&!H.I(k.y,b.o(d+2).y)?b.C(d+1,a.x,k.y):b.R(d+1,a.x,k.y)):H.I(g.y,e.y)&&H.I(e.y,
k.y)&&(H.I(g.y,b.o(d-2).y)&&!H.I(g.x,b.o(d-2).x)?(b.C(d,g.x,a.y),c++,d++):b.R(d-1,g.x,a.y),H.I(k.y,b.o(d+2).y)&&!H.I(k.x,b.o(d+2).x)?b.C(d+1,k.x,a.y):b.R(d+1,k.x,a.y));b.R(c,a.x,a.y)}else b.R(c,a.x,a.y),1===c&&Cb(b.computeSpot(h))&&(g=b.da,k=b.Oc,d=k.hb(Sb,y.M()),e=y.M(),g=b.getLinkPointFromPoint(g,k,d,a,h,e),b.R(0,g.x,g.y),y.B(d),y.B(e)),c===b.qa-2&&Cb(b.computeSpot(s))&&(c=b.fa,g=b.Ad,d=g.hb(Sb,y.M()),e=y.M(),g=b.getLinkPointFromPoint(c,g,d,a,s,e),b.R(b.qa-1,g.x,g.y),y.B(d),y.B(e));b.Zh()};
kg.prototype.computeReshape=function(a){var b=this.ir,c=this.handle.af;switch(this.handle.vo){case ug:return a;case tg:return b=b.o(c),new A(b.x,a.y);case sg:return b=b.o(c),new A(a.x,b.y);default:case lg:return b.o(c)}};y.g(kg,"originalPoint",kg.prototype.eH);y.A(kg,{eH:"originalPoint"},w("VA"));y.g(kg,"originalPoints",kg.prototype.fH);y.A(kg,{fH:"originalPoints"},w("sx"));
function xg(){0<arguments.length&&y.m("ResizingTool constructor cannot take any arguments.");Pe.call(this);this.name="Resizing";this.Hd=(new ha(1,1)).freeze();this.Ki=(new ha(9999,9999)).freeze();this.qi=(new ha(NaN,NaN)).freeze();this.cl=s;this.La=q;var a=new V;a.bj=Sb;a.xb="Rectangle";a.Aa=H.fm;a.fill="cyan";a.stroke="black";a.jb=1;a.cursor="pointer";this.Wj=a;this.Lb=q;this.$m=0;this.YE=new B;this.Ot=new ha;this.qx=new A;this.Kw=new ha(0,0);this.Jw=new ha(Infinity,Infinity);this.Iw=new ha(1,1)}
y.ba("ResizingTool",xg);y.Ka(xg,Pe);xg.prototype.updateAdornments=function(a){if(!(a===q||a instanceof U)){var b=q;if(a.Wa){var c=a.DD;if(a.canResize()&&(c!==q&&a.ua.V()&&a.yb()&&c.Dk()&&c.ua.V())&&(b=a.Mn(this.name),b===q&&(b=this.makeAdornment(c),b.Ql=h,b.We=Sb),b!==q)){var d=c.yk();b.angle=d;var e=c.hb(Sb,y.M()),g=c.rj();b.location=e;y.B(e);e=b.placeholder;if(e!==q){var c=c.Ta,k=y.Nk();k.q(c.width*g,c.height*g);e.Aa=k;y.qj(k)}yg(this,b,d)}a.ok(this.name,b)}else a.Ik(this.name)}};
xg.prototype.makeAdornment=function(a){var b=q,b=a.W.BD;if(b===q){b=new Ge;b.type=zg;var c=new Ag;c.ji=h;b.add(c);b.add(this.makeHandle(a,Mb));b.add(this.makeHandle(a,Rb));b.add(this.makeHandle(a,Zb));b.add(this.makeHandle(a,Vb));b.add(this.makeHandle(a,$b));b.add(this.makeHandle(a,bc));b.add(this.makeHandle(a,cc));b.add(this.makeHandle(a,ac))}else if(Je(b),b=b.copy(),!(b instanceof Ge))return q;b.Ac=this.name;b.zc=a;return b};
xg.prototype.makeHandle=function(a,b){var c=this.Cr;if(c===q)return q;c=c.copy();c.alignment=b;return c};
function yg(a,b,c){if(b!==q)if(!Db(b.alignment)&&""!==b.cursor)a:{a=b.alignment;Cb(a)&&(a=Sb);if(0>=a.x)c=0>=a.y?c+225:1<=a.y?c+135:c+180;else if(1<=a.x)0>=a.y?c+=315:1<=a.y&&(c+=45);else if(0>=a.y)c+=270;else if(1<=a.y)c+=90;else break a;0>c?c+=360:360<=c&&(c-=360);b.cursor=22.5>c?"e-resize":67.5>c?"se-resize":112.5>c?"s-resize":157.5>c?"sw-resize":202.5>c?"w-resize":247.5>c?"nw-resize":292.5>c?"n-resize":337.5>c?"ne-resize":"e-resize"}else if(b instanceof D)for(b=b.elements;b.next();)yg(a,b.value,
c)}y.defineProperty(xg,{Cr:"handleArchetype"},w("Wj"),function(a){a&&y.l(a,P,xg,"handleArchetype");this.Wj=a});y.A(xg,{handle:"handle"},w("Lb"));y.defineProperty(xg,{zc:"adornedObject"},w("La"),function(a){a&&y.l(a,P,xg,"adornedObject");this.La=a});xg.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;return a===q||a.Za||!a.xn||!a.Q.left?s:this.findToolHandleAt(a.uc.T,this.name)!==q?h:s};
xg.prototype.doActivate=function(){var a=this.h;a!==q&&(this.Lb=this.findToolHandleAt(a.uc.T,this.name),this.Lb!==q&&(this.La=this.Lb.W.zc,this.$m=this.La.angle,this.YE.set(this.La.Ta),this.qx.set(this.La.W.location),this.Ot.set(this.La.Aa),this.Iw=this.computeCellSize(),this.Kw=this.computeMinSize(),this.Jw=this.computeMaxSize(),a.gd=h,this.lc(this.name),this.la=h))};xg.prototype.doDeactivate=function(){var a=this.h;a!==q&&(this.wj(),this.La=this.Lb=q,this.la=a.gd=s)};
xg.prototype.doCancel=function(){this.La.Aa=this.Ot;this.La.W.location=this.qx;this.stopTool()};xg.prototype.doMouseMove=function(){var a=this.h;if(this.la&&a!==q){var b=this.Kw,c=this.Jw,d=this.Iw,e=this.La.sC(a.Q.T,y.M()),g=this.La.Uu;g===Bg&&(g=this.La.Na.fc);b=this.computeResize(e,this.Lb.alignment,b,c,d,!(g===Cg||g===Dg||a.Q.shift));this.resize(b);a.li();y.B(e)}};
xg.prototype.doMouseUp=function(){var a=this.h;if(this.la&&a!==q){var b=this.Kw,c=this.Jw,d=this.Iw,e=this.La.sC(a.Q.T,y.M()),g=this.La.Uu;g===Bg&&(g=this.La.Na.fc);b=this.computeResize(e,this.Lb.alignment,b,c,d,!(g===Cg||g===Dg||a.Q.shift));this.resize(b);y.B(e);a.pc();this.Fe=this.name;a.Fa("PartResized",this.La,this.Ot)}this.stopTool()};
xg.prototype.resize=function(a){var b=this.h;if(b!==q){var c=this.La.W,d=c.position.copy(),e=this.La.Ta.copy(),g=this.La.yk(),k=this.La.rj();360<=g?g-=360:0>g&&(g+=360);var l=Math.PI*g/180,m=Math.cos(l),l=Math.sin(l),n=a.width-e.width,e=a.height-e.height,p=90<g&&270>g?1:0;d.x+=k*((a.x+n*p)*m-(a.y+e*(0<g&&180>g?1:0))*l);d.y+=k*((a.x+n*(180<g&&360>g?1:0))*l+(a.y+e*p)*m);this.La.Aa=a.size;c.ci();c.move(d);b.kc()}};
xg.prototype.computeResize=function(a,b,c,d,e,g){Cb(b)&&(b=Sb);var k=this.La.Ta,l=k.x,m=k.y,n=k.x+k.width,p=k.y+k.height,r=1;if(!g){var r=k.width,t=k.height;0>=r&&(r=1);0>=t&&(t=1);r=t/r}t=y.M();H.yy(a.x,a.y,l,m,e.width,e.height,t);a=k.copy();0>=b.x?0>=b.y?(a.x=Math.max(t.x,n-d.width),a.x=Math.min(a.x,n-c.width),a.width=Math.max(n-a.x,c.width),a.y=Math.max(t.y,p-d.height),a.y=Math.min(a.y,p-c.height),a.height=Math.max(p-a.y,c.height),g||(b=a.height/a.width,r<b?(a.height=r*a.width,a.y=p-a.height):
(a.width=a.height/r,a.x=n-a.width))):1<=b.y?(a.x=Math.max(t.x,n-d.width),a.x=Math.min(a.x,n-c.width),a.width=Math.max(n-a.x,c.width),a.height=Math.max(Math.min(t.y-m,d.height),c.height),g||(b=a.height/a.width,r<b?a.height=r*a.width:(a.width=a.height/r,a.x=n-a.width))):(a.x=Math.max(t.x,n-d.width),a.x=Math.min(a.x,n-c.width),a.width=n-a.x,g||(a.height=r*a.width,a.y=m+0.5*(p-m-a.height))):1<=b.x?0>=b.y?(a.width=Math.max(Math.min(t.x-l,d.width),c.width),a.y=Math.max(t.y,p-d.height),a.y=Math.min(a.y,
p-c.height),a.height=Math.max(p-a.y,c.height),g||(b=a.height/a.width,r<b?(a.height=r*a.width,a.y=p-a.height):a.width=a.height/r)):1<=b.y?(a.width=Math.max(Math.min(t.x-l,d.width),c.width),a.height=Math.max(Math.min(t.y-m,d.height),c.height),g||(b=a.height/a.width,r<b?a.height=r*a.width:a.width=a.height/r)):(a.width=Math.max(Math.min(t.x-l,d.width),c.width),g||(a.height=r*a.width,a.y=m+0.5*(p-m-a.height))):0>=b.y?(a.y=Math.max(t.y,p-d.height),a.y=Math.min(a.y,p-c.height),a.height=p-a.y,g||(a.width=
a.height/r,a.x=l+0.5*(n-l-a.width))):1<=b.y&&(a.height=Math.max(Math.min(t.y-m,d.height),c.height),g||(a.width=a.height/r,a.x=l+0.5*(n-l-a.width)));y.B(t);return a};xg.prototype.computeMinSize=function(){var a=this.La.Ce.copy(),b=this.Ce;!isNaN(b.width)&&b.width>a.width&&(a.width=b.width);!isNaN(b.height)&&b.height>a.height&&(a.height=b.height);return a};
xg.prototype.computeMaxSize=function(){var a=this.La.he.copy(),b=this.he;!isNaN(b.width)&&b.width<a.width&&(a.width=b.width);!isNaN(b.height)&&b.height<a.height&&(a.height=b.height);return a};
xg.prototype.computeCellSize=function(){var a=new ha(NaN,NaN),b=this.La.W;if(b){var c=b.CD;!isNaN(c.width)&&0<c.width&&(a.width=c.width);!isNaN(c.height)&&0<c.height&&(a.height=c.height)}c=this.tk;isNaN(a.width)&&(!isNaN(c.width)&&0<c.width)&&(a.width=c.width);isNaN(a.height)&&(!isNaN(c.height)&&0<c.height)&&(a.height=c.height);b=this.h;if((isNaN(a.width)||isNaN(a.height))&&b)c=b.pb.ve,c!==q&&c.Zn&&(c=c.Gy,isNaN(a.width)&&(!isNaN(c.width)&&0<c.width)&&(a.width=c.width),isNaN(a.height)&&(!isNaN(c.height)&&
0<c.height)&&(a.height=c.height)),b=b.Wn,b!==q&&(b.visible&&this.Zn)&&(c=b.Br,isNaN(a.width)&&(!isNaN(c.width)&&0<c.width)&&(a.width=c.width),isNaN(a.height)&&(!isNaN(c.height)&&0<c.height)&&(a.height=c.height));if(isNaN(a.width)||0===a.width||Infinity===a.width)a.width=1;if(isNaN(a.height)||0===a.height||Infinity===a.height)a.height=1;return a};y.g(xg,"minSize",xg.prototype.Ce);
y.defineProperty(xg,{Ce:"minSize"},w("Hd"),function(a){this.Hd.L(a)||(x&&y.l(a,ha,xg,"minSize"),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),this.Hd.assign(a))});y.g(xg,"maxSize",xg.prototype.he);y.defineProperty(xg,{he:"maxSize"},w("Ki"),function(a){this.Ki.L(a)||(x&&y.l(a,ha,xg,"maxSize"),isNaN(a.width)&&(a.width=Infinity),isNaN(a.height)&&(a.height=Infinity),this.Ki.assign(a))});y.g(xg,"cellSize",xg.prototype.tk);
y.defineProperty(xg,{tk:"cellSize"},w("qi"),function(a){this.qi.L(a)||(x&&y.l(a,ha,xg,"cellSize"),this.qi.assign(a))});y.g(xg,"isGridSnapEnabled",xg.prototype.Zn);y.defineProperty(xg,{Zn:"isGridSnapEnabled"},w("cl"),function(a){this.cl!==a&&(y.j(a,"boolean",xg,"isGridSnapEnabled"),this.cl=a)});y.g(xg,"originalDesiredSize",xg.prototype.cH);y.A(xg,{cH:"originalDesiredSize"},w("Ot"));y.g(xg,"originalLocation",xg.prototype.dH);y.A(xg,{dH:"originalLocation"},w("qx"));
function Eg(){0<arguments.length&&y.m("RotatingTool constructor cannot take any arguments.");Pe.call(this);this.name="Rotating";this.Fx=45;this.Ex=2;this.La=q;var a=new V;a.xb="Ellipse";a.Aa=H.fm;a.fill="yellow";a.stroke="black";a.jb=1;a.cursor="pointer";this.Wj=a;this.Lb=q;this.$m=0;this.ZA=new A}y.ba("RotatingTool",Eg);y.Ka(Eg,Pe);
Eg.prototype.updateAdornments=function(a){if(!(a===q||a instanceof U)){var b=q;if(a.Wa){var c=a.JD;if(a.canRotate()&&(c!==q&&a.ua.V()&&a.yb()&&c.Dk()&&c.ua.V())&&(b=a.Mn(this.name),b===q&&(b=this.makeAdornment(c),b.Ql=h),b!==q)){b.angle=c.yk();var d=q,e=q;c===a||c===a.Wb?(d=a.Wb,e=a.We):(d=c,e=Sb);for(var g=d.Ta,e=y.ec(g.width*e.x+e.offsetX,g.height*e.y+e.offsetY);d!==q&&d!==c;)d.transform.Qa(e),d=d.ha;d=e.y;g=Math.max(e.x-c.Ta.width,0);b.We=Sb;var k=y.M();b.location=c.hb(new J(1,0,50+g,d),k);y.B(k);
y.B(e)}a.ok(this.name,b)}else a.Ik(this.name)}};Eg.prototype.makeAdornment=function(a){var b=q,b=a.W.HD;if(b===q){b=new Ge;b.type=Fg;var c=this.Cr;c!==q&&b.add(c.copy())}else if(Je(b),b=b.copy(),!(b instanceof Ge))return q;b.Ac=this.name;b.zc=a;return b};y.defineProperty(Eg,{Cr:"handleArchetype"},w("Wj"),function(a){a&&y.l(a,P,Eg,"handleArchetype");this.Wj=a});y.A(Eg,{handle:"handle"},w("Lb"));y.defineProperty(Eg,{zc:"adornedObject"},w("La"),function(a){a&&y.l(a,P,Eg,"adornedObject");this.La=a});
Eg.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;return a===q||a.Za||!a.yn||!a.Q.left?s:this.findToolHandleAt(a.uc.T,this.name)!==q?h:s};Eg.prototype.doActivate=function(){var a=this.h;if(a!==q&&(this.Lb=this.findToolHandleAt(a.uc.T,this.name),this.Lb!==q)){this.La=this.Lb.W.zc;var b=this.La.W,c=b.Wb;this.ZA=this.La===b||this.La===c?c.hb(b.We):this.La.hb(Sb);this.$m=this.La.angle;a.gd=h;this.lc(this.name);this.la=h}};
Eg.prototype.doDeactivate=function(){var a=this.h;a!==q&&(this.wj(),this.La=this.Lb=q,this.la=a.gd=s)};Eg.prototype.doCancel=function(){this.rotate(this.$m);this.stopTool()};Eg.prototype.doMouseMove=function(){var a=this.h;this.la&&a!==q&&(a=this.computeRotate(a.Q.T),this.rotate(a))};Eg.prototype.doMouseUp=function(){var a=this.h;if(this.la&&a!==q){var b=this.computeRotate(a.Q.T);this.rotate(b);a.pc();this.Fe=this.name;a.Fa("PartRotated",this.La,this.$m)}this.stopTool()};
Eg.prototype.rotate=function(a){y.p(a,Eg,"rotate:newangle");this.La!==q&&(this.La.angle=a,this.h.kc())};Eg.prototype.computeRotate=function(a){a=this.ZA.ai(a);var b=this.La.ha;b&&(a-=b.yk(),360<=a?a-=360:0>a&&(a+=360));var b=Math.min(Math.abs(this.aE),180),c=Math.min(Math.abs(this.$D),b/2);!this.h.Q.shift&&(0<b&&0<c)&&(a%b<c?a=Math.floor(a/b)*b:a%b>b-c&&(a=(Math.floor(a/b)+1)*b));360<=a?a-=360:0>a&&(a+=360);return a};y.g(Eg,"snapAngleMultiple",Eg.prototype.aE);
y.defineProperty(Eg,{aE:"snapAngleMultiple"},w("Fx"),function(a){this.Fx!==a&&(x&&y.j(a,"number",Eg,"snapAngleMultiple"),this.Fx=a)});y.g(Eg,"snapAngleEpsilon",Eg.prototype.$D);y.defineProperty(Eg,{$D:"snapAngleEpsilon"},w("Ex"),function(a){this.Ex!==a&&(x&&y.j(a,"number",Eg,"snapAngleEpsilon"),this.Ex=a)});y.g(Eg,"originalAngle",Eg.prototype.bH);y.A(Eg,{bH:"originalAngle"},w("$m"));
function Gg(){0<arguments.length&&y.m("ClickSelectingTool constructor cannot take any arguments.");Pe.call(this);this.name="ClickSelecting"}y.ba("ClickSelectingTool",Gg);y.Ka(Gg,Pe);Gg.prototype.canStart=function(){return!this.isEnabled||this.h===q||this.isBeyondDragSize()?s:h};Gg.prototype.doMouseUp=function(){this.la&&(this.standardMouseSelect(),this.standardMouseClick());this.stopTool()};
function Hg(){0<arguments.length&&y.m("ActionTool constructor cannot take any arguments.");Pe.call(this);this.name="Action";this.im=q}y.ba("ActionTool",Hg);y.Ka(Hg,Pe);Hg.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;if(a===q)return s;var b=a.Q,c=a.vd(b.T,function(a){for(;a.ha!==q&&!a.Zu;)a=a.ha;return a},function(a){return a.Zu});return c!==q?(this.im=c,a.Hn=a.vd(b.T,q,q),h):s};
Hg.prototype.doMouseDown=function(){if(this.la){var a=this.h.Q,b=this.im;b!==q&&(a.zd=b,b.$x!==q&&b.$x(a,b))}else this.canStart()&&this.doActivate()};Hg.prototype.doMouseMove=function(){if(this.la){var a=this.h.Q,b=this.im;b!==q&&(a.zd=b,b.ay!==q&&b.ay(a,b))}};Hg.prototype.doMouseUp=function(){if(this.la){var a=this.h,b=a.Q,c=this.im;if(c===q)return;b.zd=c;c.by!==q&&c.by(b,c);this.isBeyondDragSize()||Qe(c,b,a)}this.stopTool()};
Hg.prototype.doCancel=function(){var a=this.h;if(a!==q){var a=a.Q,b=this.im;if(b===q)return;a.zd=b;b.Zx!==q&&b.Zx(a,b)}this.stopTool()};Hg.prototype.doStop=function(){this.im=q};function ra(){0<arguments.length&&y.m("ClickCreatingTool constructor cannot take any arguments.");Pe.call(this);this.name="ClickCreating";this.Nj=q;this.Uw=h;this.uA=new A(0,0)}y.ba("ClickCreatingTool",ra);y.Ka(ra,Pe);
ra.prototype.canStart=function(){if(!this.isEnabled||this.jr===q)return s;var a=this.h;if(a===q||(a.Za||a.Be)||!a.tl||!a.Q.left||this.isBeyondDragSize())return s;if(this.JC){if(1===a.Q.ce&&(this.uA=a.Q.Rc.copy()),2!==a.Q.ce||this.isBeyondDragSize(this.uA))return s}else if(1!==a.Q.ce)return s;return a.Ma!==this&&a.wr(a.Q.T,h)!==q?s:h};ra.prototype.doMouseUp=function(){var a=this.h;this.la&&a!==q&&this.insertPart(a.Q.T);this.stopTool()};
ra.prototype.insertPart=function(a){var b=this.h;if(b===q)return q;var c=this.jr;if(c===q)return q;this.lc(this.name);var d=q;c instanceof R?c.Pd()&&(Je(c),d=c.copy(),d instanceof R&&b.add(d)):c!==q&&(c=b.ea.jj(c),y.tb(c)&&(b.ea.fr(c),d=b.pj(c)));d instanceof R&&(d.location=a,b.pe&&b.select(d));b.pc();this.Fe=this.name;b.Fa("PartCreated",d);this.wj();return d instanceof R?d:q};y.g(ra,"archetypeNodeData",ra.prototype.jr);
y.defineProperty(ra,{jr:"archetypeNodeData"},w("Nj"),function(a){this.Nj!==a&&(a!==q&&y.l(a,Object,ra,"archetypeNodeData"),this.Nj=a)});y.g(ra,"isDoubleClick",ra.prototype.JC);y.defineProperty(ra,{JC:"isDoubleClick"},w("Uw"),function(a){this.Uw!==a&&(y.j(a,"boolean",ra,"isDoubleClick"),this.Uw=a)});
function Ig(){0<arguments.length&&y.m("ContextMenuTool constructor cannot take any arguments.");Pe.call(this);this.name="ContextMenu";this.gA=q;this.MA=new A;this.ym=q;if(y.zz===h){this.ym=new Ge;this.zw=q;var a=this;this.nB=function(){a.stopTool()};if(y.XB===s){var b=document.createElement("div"),c=document.createElement("div");b.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px";
c.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;-moz-opacity: 0.8;opacity:.80;filter: alpha(opacity=80);";var d=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(d);d.sheet.insertRule(".defaultCXul { list-style: none; }",0);d.sheet.insertRule(".defaultCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0);d.sheet.insertRule(".defaultCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",
0);b.addEventListener("contextmenu",function(a){a.preventDefault();return s},s);b.addEventListener("selectstart",function(a){a.preventDefault();return s},s);c.addEventListener("contextmenu",function(a){a.preventDefault();return s},s);document.body&&(document.body.appendChild(b),document.body.appendChild(c));y.pr=b;y.or=c;y.XB=h}}}y.ba("ContextMenuTool",Ig);y.Ka(Ig,Pe);
Ig.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;return a===q||this.isBeyondDragSize()||!a.Q.right?s:this.ym!==q&&!(a.Q.event instanceof MouseEvent)||this.findObjectWithContextMenu()!==q?h:s};Ig.prototype.doStart=function(){var a=this.h;a!==q&&this.MA.set(a.uc.T)};Ig.prototype.doStop=function(){this.hideDefaultContextMenu();this.hideContextMenu()};
Ig.prototype.findObjectWithContextMenu=function(a){var b=this.h;if(b===q)return q;var c=b.Q,d=q,d=a!==f?a:b.vd(c.T,q,function(a){return!a.layer.cc});if(d!==q){for(a=d;a!==q;){c=a.contextMenu;if(c!==q)return a;a=a.ha}if(this.ym!==q&&!(b.Q.event instanceof MouseEvent))return d.W}else if(c=b.contextMenu,c!==q)return b;return q};Ig.prototype.doActivate=aa();
Ig.prototype.doMouseDown=function(){if(this.la){var a=this.h;if(a!==q&&this.Re!==q){var b=a.vd(a.Q.T,q,q);b!==q&&b.hi(this.Re)?(this.standardMouseClick(q,q),this.stopTool()):(this.stopTool(),a.Ma.doMouseDown())}}};Ig.prototype.doMouseUp=function(){this.la||this.canStart()&&Oe(this,h)};
function Oe(a,b,c){a.la=h;b&&a.standardMouseSelect();a.standardMouseClick();c===f&&(c=a.findObjectWithContextMenu());c!==q?(b=c.contextMenu,b!==q?a.showContextMenu(b,c instanceof P?c:q):a.showDefaultContextMenu()):a.showDefaultContextMenu()}Ig.prototype.doMouseMove=function(){this.la&&this.standardMouseOver()};
Ig.prototype.showContextMenu=function(a,b){y.l(a,Ge,Ig,"showContextMenu:contextmenu");b!==q&&y.l(b,P,Ig,"showContextMenu:obj");var c=this.h;if(c!==q){a!==this.Re&&this.hideContextMenu();a.ge="Tool";a.Jk=s;a.scale=1/c.scale;a.Ac=this.name;c.add(a);if(b!==q){var d=q,e=b.Rn();e!==q&&(d=e.data);a.zc=b;a.data=d}else a.data=c.ea;a.ci();this.positionContextMenu(a,b);this.Re=a;c.kc()}};
Ig.prototype.positionContextMenu=function(a){var b=this.h;if(b!==q){var c=b.Q.T.copy(),d=a.Ba,e=b.eb;b.Q.dv&&(c.x-=d.width);c.x+d.width>e.right&&(c.x-=d.width+5);c.x<e.x&&(c.x=e.x);c.y+d.height>e.bottom&&(c.y-=d.height+5);c.y<e.y&&(c.y=e.y);a.position=c}};Ig.prototype.hideContextMenu=function(){var a=this.h;a!==q&&this.Re!==q&&(this.Re.data=q,this.Re.zc=q,a.remove(this.Re),this.Re=q,this.standardMouseOver(),a.kc())};
Ig.prototype.initializeDefaultButtons=function(){if(this.h===q)return q;var a=new F,b=this.h.Pe;a.add({text:"Copy",of:function(){b.copySelection()},visible:function(){return b.canCopySelection()}});a.add({text:"Cut",of:function(){b.cutSelection()},visible:function(){return b.canCutSelection()}});a.add({text:"Delete",of:function(){b.deleteSelection()},visible:function(){return b.canDeleteSelection()}});a.add({text:"Paste",of:function(a){b.pasteSelection(a.Q.T)},visible:function(){return b.canPasteSelection()}});
a.add({text:"Select All",of:function(){b.selectAll()},visible:function(){return b.canSelectAll()}});a.add({text:"Undo",of:function(){b.undo()},visible:function(){return b.canUndo()}});a.add({text:"Redo",of:function(){b.redo()},visible:function(){return b.canRedo()}});a.add({text:"Zoom Out",of:function(){b.decreaseZoom()},visible:function(){return b.canDecreaseZoom()}});a.add({text:"Zoom In",of:function(){b.increaseZoom()},visible:function(){return b.canIncreaseZoom()}});a.add({text:"Zoom To Fit",
of:function(){b.zoomToFit()},visible:function(){return b.canZoomToFit()}});a.add({text:"Reset Zoom",of:function(){b.resetZoom()},visible:function(){return b.canResetZoom()}});a.add({text:"Group Selection",of:function(){b.groupSelection()},visible:function(){return b.canGroupSelection()}});a.add({text:"Ungroup Selection",of:function(){b.ungroupSelection()},visible:function(){return b.canUngroupSelection()}});a.add({text:"Edit Text",of:function(){b.editTextBlock()},visible:function(){return b.canEditTextBlock()}});
return a};
Ig.prototype.showDefaultContextMenu=function(){var a=this.h;if(a!==q){this.zw===q&&(this.zw=this.initializeDefaultButtons());this.ym!==this.Re&&this.hideContextMenu();y.pr.innerHTML="";y.or.addEventListener("click",this.nB,s);var b=this,c=document.createElement("ul");c.className="defaultCXul";y.pr.appendChild(c);c.innerHTML="";for(var d=this.zw.k;d.next();){var e=d.value,g=e.text,k=e.visible;if("function"!==typeof k||k()){k=document.createElement("li");k.className="defaultCXli";var l=document.createElement("a");l.className=
"defaultCXa";l.href="#";l.TE=e.of;l.addEventListener("click",function(c){this.TE(a);b.stopTool();c.preventDefault();return s},s);l.textContent=g;k.appendChild(l);c.appendChild(k)}}y.pr.style.display="block";y.or.style.display="block";this.Re=this.ym}};Ig.prototype.hideDefaultContextMenu=function(){this.Re!==q&&this.Re===this.ym&&(y.pr.style.display="none",y.or.style.display="none",y.or.removeEventListener("click",this.nB,s),this.Re=q)};y.g(Ig,"currentContextMenu",Ig.prototype.Re);
y.defineProperty(Ig,{Re:"currentContextMenu"},w("gA"),ba("gA"));y.A(Ig,{gJ:"mouseDownPoint"},w("MA"));function Mg(){0<arguments.length&&y.m("DragSelectingTool constructor cannot take any arguments.");Pe.call(this);this.name="DragSelecting";this.zm=175;this.DA=s;var a=new R;a.ge="Tool";a.Jk=s;var b=new V;b.name="SHAPE";b.xb="Rectangle";b.fill=q;b.stroke="magenta";a.add(b);this.mm=a}y.ba("DragSelectingTool",Mg);y.Ka(Mg,Pe);
Mg.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;if(a===q||!a.pe)return s;var b=a.Q;return!b.left||a.Ma!==this&&(!this.isBeyondDragSize()||b.timestamp-a.uc.timestamp<this.Ju||a.wr(b.T,h)!==q)?s:h};Mg.prototype.doActivate=function(){var a=this.h;a!==q&&(this.la=h,a.gd=h,a.Xb=h,a.add(this.If),this.doMouseMove())};Mg.prototype.doDeactivate=function(){var a=this.h;a!==q&&(a.remove(this.If),a.Xb=s,this.la=a.gd=s,a.kc())};
Mg.prototype.doMouseMove=function(){var a=this.h;if(a!==q&&this.la&&this.If!==q){var b=this.computeBoxBounds(),c=this.If.xe("SHAPE");c===q&&(c=this.If.qG());c.Aa=b.size;this.If.position=b.position;a.kc()}};Mg.prototype.doMouseUp=function(){if(this.la){var a=this.h;a.remove(this.If);try{a.Nc="wait",this.selectInRect(this.computeBoxBounds())}finally{a.Nc=""}}this.stopTool()};Mg.prototype.computeBoxBounds=function(){var a=this.h;return a===q?new B(0,0,0,0):new B(a.uc.T,a.Q.T)};
Mg.prototype.selectInRect=function(a){var b=this.h;if(b!==q){var c=b.Q;b.Fa("ChangingSelection");a=b.oj(a,q,function(a){return a instanceof R&&a.canSelect()},this.OC);if(c.control)if(c.shift)for(a=a.k;a.next();)c=a.value,c.Wa&&(c.Wa=s);else for(a=a.k;a.next();)c=a.value,c.Wa=!c.Wa;else{if(!c.shift){for(var d=new F(R),e=b.selection.k;e.next();)c=e.value,a.contains(c)||d.add(c);for(d=d.k;d.next();)c=d.value,c.Wa=s}for(a=a.k;a.next();)c=a.value,c.Wa||(c.Wa=h)}b.Fa("ChangedSelection")}};
y.g(Mg,"delay",Mg.prototype.Ju);y.defineProperty(Mg,{Ju:"delay"},w("zm"),ba("zm"));y.g(Mg,"isPartialInclusion",Mg.prototype.OC);y.defineProperty(Mg,{OC:"isPartialInclusion"},w("DA"),ba("DA"));y.g(Mg,"box",Mg.prototype.If);y.defineProperty(Mg,{If:"box"},w("mm"),ba("mm"));
function Og(){0<arguments.length&&y.m("PanningTool constructor cannot take any arguments.");Pe.call(this);this.name="Panning";this.tx=new A;this.pi=s;var a=this;this.dB=function(){document.removeEventListener("scroll",a.dB,s);a.stopTool()}}y.ba("PanningTool",Og);y.Ka(Og,Pe);Og.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;return a===q||!a.Ne&&!a.Oe||!a.Q.left||a.Ma!==this&&!this.isBeyondDragSize()?s:h};
Og.prototype.doActivate=function(){var a=this.h;a!==q&&(this.pi?(a.Q.bubbles=h,document.addEventListener("scroll",this.dB,s)):(a.Nc="move",a.gd=h,this.tx=a.position.copy()),this.la=h)};Og.prototype.doDeactivate=function(){var a=this.h;a!==q&&(a.Nc="",this.la=a.gd=s,a.ta())};Og.prototype.doCancel=function(){var a=this.h;a!==q&&(a.position=this.tx,a.gd=s);this.stopTool()};Og.prototype.doMouseMove=function(){this.move()};Og.prototype.doMouseUp=function(){this.move();this.stopTool()};
Og.prototype.move=function(){var a=this.h;if(this.la&&a)if(this.pi)a.Q.bubbles=h;else{var b=a.position,c=a.uc.T,d=a.Q.T,e=b.x+c.x-d.x,c=b.y+c.y-d.y;a.Ne||(e=b.x);a.Oe||(c=b.y);a.position=new A(e,c)}};y.g(Og,"bubbles",Og.prototype.bubbles);y.defineProperty(Og,{bubbles:"bubbles"},w("pi"),ba("pi"));y.g(Og,"originalPosition",Og.prototype.gH);y.A(Og,{gH:"originalPosition"},w("tx"));
function Pg(){0<arguments.length&&y.m("TextEditingTool constructor cannot take any arguments.");Pe.call(this);this.name="TextEditing";this.Aw=this.iA=this.Ux=this.kB=q;this.Ix=Qg;this.Vi=q;this.Ya=Rg;this.hk=q}y.ba("TextEditingTool",Pg);y.Ka(Pg,Pe);var Sg;Pg.LostFocus=Sg=y.w(Pg,"LostFocus",0);var Tg;Pg.MouseDown=Tg=y.w(Pg,"MouseDown",1);var Ug;Pg.Tab=Ug=y.w(Pg,"Tab",2);var Vg;Pg.Enter=Vg=y.w(Pg,"Enter",3);Pg.SingleClick=y.w(Pg,"SingleClick",0);var Qg;
Pg.SingleClickSelected=Qg=y.w(Pg,"SingleClickSelected",1);var Rg=y.w(Pg,"StateNone",0),Wg=y.w(Pg,"StateActive",1),Xg=y.w(Pg,"StateEditing",2),Yg=y.w(Pg,"StateEditing2",3),Zg=y.w(Pg,"StateValidating",4),$g=y.w(Pg,"StateValidated",5);y.g(Pg,"textBlock",Pg.prototype.Zf);y.defineProperty(Pg,{Zf:"textBlock"},w("Ux"),ba("Ux"));y.g(Pg,"currentTextEditor",Pg.prototype.pg);y.defineProperty(Pg,{pg:"currentTextEditor"},w("iA"),ba("iA"));y.g(Pg,"defaultTextEditor",Pg.prototype.ZB);
y.defineProperty(Pg,{ZB:"defaultTextEditor"},w("Aw"),ba("Aw"));y.g(Pg,"starting",Pg.prototype.bE);y.defineProperty(Pg,{bE:"starting"},w("Ix"),function(a){this.Ix!==a&&(x&&y.rb(a,Pg,Pg,"starting"),this.Ix=a)});Pg.prototype.canStart=function(){if(!this.isEnabled)return s;var a=this.h;if(a===q||a.Za||!a.Q.left||this.isBeyondDragSize())return s;a=a.vd(a.Q.T,q,function(a){return a instanceof oa});if(!(a instanceof oa)||!a.Lu)return s;a=a.W;return a===q||this.bE===Qg&&!a.Wa?s:h};
Pg.prototype.doStart=function(){!this.la&&this.Zf!==q&&this.doActivate()};
Pg.prototype.doActivate=function(){if(!this.la){var a=this.h;if(a!==q){var b=this.Zf;b===q&&(b=a.vd(a.Q.T,function(a){return a instanceof oa?a:q}),b=b instanceof oa?b:q);if(b!==q&&(this.Zf=b,b.W!==q)){this.la=h;this.Ya=Wg;this.lc(this.name);var c=this.ZB,d=s;b.Bz!==q&&(c=b.Bz);c!==q&&!c.Xz&&(d=h);this.kB=this.Zf.copy();c===q&&(c=document.createElement("textarea"),c.Xz=h,this.Aw=c,c.addEventListener("input",function(){var a=this.textEditingTool.kB;a.text=this.value;ah(a,Infinity,Infinity);this.style.width=
20+a.Ba.width*this.CH+"px";this.rows=a.TC},s),c.addEventListener("keydown",function(a){var b=a.which,c=this.textEditingTool;if(c!==q)if(13===b)c.acceptText(Vg);else{if(9===b)return c.acceptText(Ug),a.preventDefault(),s;27===b&&(c.doCancel(),c.h&&c.h.focus())}},s),c.addEventListener("focus",function(){var a=this.textEditingTool;a.Ya===Wg?a.Ya=Xg:a.Ya===$g?a.Ya=Yg:a.Ya===Yg&&(a.Ya=Xg)},s));if(c.Xz){var e=b.hb(Sb),g=a.position,k=a.scale,l=b.rj()*k,m=b.Ta.width*l;bh(b);var n=(e.x-g.x)*k,e=(e.y-g.y)*k;
c.value=b.text;a.bi.style.font=b.font;c.style.font="inherit";c.style.fontSize=100*l+"%";c.style.lineHeight="normal";m=20+m;c.style.width=m+"px";c.style.height="";c.rows=b.TC;a.bi.appendChild(c);c.style.left=(n-m/2|0)+"px";c.style.top=(e-c.clientHeight/2|0)+"px";c.style.textAlign=b.textAlign}else a.bi.appendChild(c);c.style.position="absolute";c.style.zIndex=100;c.className="start";c.textEditingTool=this;c.CH=l;if(d&&c.onActivate!==f)c.onActivate();this.pg=c;c.focus()}}}};
Pg.prototype.doCancel=function(){this.hk!==q&&(this.pg.style.border=this.hk,this.hk=q);this.stopTool()};Pg.prototype.doMouseUp=function(){!this.la&&this.canStart()&&this.doActivate()};Pg.prototype.doMouseDown=function(){this.la&&this.acceptText(Tg)};
Pg.prototype.acceptText=function(a){switch(a){case Tg:if(this.Ya===$g||this.Ya===Yg)this.pg.focus();else if(this.Ya===Wg||this.Ya===Xg)this.Ya=Zg,ch(this);break;case Sg:case Vg:case Ug:if(Vg===a&&this.Ux.cv===h)break;if(this.Ya===Wg||this.Ya===Xg)this.Ya=Zg,ch(this)}};
function ch(a){if(a.Zf!==q&&a.pg!==q){var b=a.Zf,c=a.Zf.text,d=a.pg.value,e="",e="function"===typeof d?d():d;if(!a.isValidText(a.Zf,c,e)){a.Ya=Xg;b.tr!==q&&b.tr(a,c,e);a.hk===q&&(a.hk=a.pg.style.border,a.pg.style.border="3px solid red");a.pg.focus();return}a.Ya=$g;c!==e&&(a.Zf.text=e);a.Fe=a.name;b=a.h;b!==q&&b.Fa("TextEdited",a.Zf,c);a.stopTool();b!==q&&b.focus()}a.hk!==q&&(a.pg.style.border=a.hk,a.hk=q)}
Pg.prototype.doDeactivate=function(){var a=this.h;if(a!==q){this.la&&this.wj();this.Ya=Rg;this.Zf=q;if(this.pg!==q){var b=this.pg;if(b.onDeactivate!==f)b.onDeactivate();b!==q&&a.bi.removeChild(b)}this.la=s}};Pg.prototype.isValidText=function(a,b,c){y.l(a,oa,Pg,"isValidText:textblock");var d=this.us;if(d!==q&&!d(a,b,c))return s;d=a.us;return d!==q&&!d(a,b,c)?s:h};y.g(Pg,"textValidation",Pg.prototype.us);y.defineProperty(Pg,{us:"textValidation"},w("Vi"),function(a){this.Vi!==a&&(this.Vi=a)});
function Ee(){Pe.call(this);this.name="ToolManager";this.NA=new F(Pe);this.OA=new F(Pe);this.PA=new F(Pe);this.wA=this.xA=1E3;this.nA=(new ha(2,2)).Ja();this.Ts=this.xw=q;this.QA=$e}y.ba("ToolManager",Ee);y.Ka(Ee,Pe);var $e;Ee.WheelScroll=$e=y.w(Ee,"WheelScroll",0);var Re;Ee.WheelZoom=Re=y.w(Ee,"WheelZoom",1);Ee.WheelNone=y.w(Ee,"WheelNone",2);y.g(Ee,"mouseWheelBehavior",Ee.prototype.Ul);y.defineProperty(Ee,{Ul:"mouseWheelBehavior"},w("QA"),ba("QA"));
Ee.prototype.initializeStandardTools=function(){this.uB=new Hg;this.tD=new hg;this.WC=new kg;this.FD=new xg;this.LD=new Eg;this.Uy=new qa;this.ve=new af;this.fC=new Mg;this.oD=new Og;this.Fu=new Ig;this.Ev=new Pg;this.LB=new ra;this.MB=new Gg};
Ee.prototype.doMouseDown=function(){var a=this.h;if(a!==q){var b=a.va;b.oy&&0!==b.Pk&&y.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");for(var b=this.Ze.length,c=0;c<b;c++){var d=this.Ze.sa(c);d.h===q&&d.ie(this.h);if(d.canStart()){a.Ma=d;a.Ma===d&&(d.la||d.doActivate(),d.doMouseDown());return}}1===a.Q.button&&(this.Ul===$e?this.Ul=Re:this.Ul===Re&&(this.Ul=$e));this.doActivate();this.standardWaitAfter(this.Hy)}};
Ee.prototype.doMouseMove=function(){var a=this.h;if(a!==q){if(this.la)for(var b=this.tg.length,c=0;c<b;c++){var d=this.tg.sa(c);d.h===q&&d.ie(this.h);if(d.canStart()){a.Ma=d;a.Ma===d&&(d.la||d.doActivate(),d.doMouseMove());return}}this.standardMouseOver();this.isBeyondDragSize()&&this.standardWaitAfter(this.la?this.Hy:this.BC)}};Ee.prototype.doCurrentObjectChanged=function(a,b){var c=this.vk;c!==q&&!(b!==q&&(b===c||b.hi(c)))&&this.hideToolTip()};
Ee.prototype.doWaitAfter=function(){this.h&&this.h.Da&&(this.doMouseHover(),this.la||this.doToolTip())};Ee.prototype.doMouseHover=function(){var a=this.h;if(a!==q){var b=a.Q;b.zd===q&&(b.zd=a.vd(b.T,q,q));var c=b.zd;if(c!==q)for(;c!==q;){a=this.la?c.Rr:c.Sr;if(a!==q&&(a(b,c),b.ee))break;c=c.ha}else a=this.la?a.Rr:a.Sr,a!==q&&a(b)}};
Ee.prototype.doToolTip=function(){var a=this.h;if(a!==q){var b=a.Q;b.zd===q&&(b.zd=a.vd(b.T,q,q));b=b.zd;if(b!==q){if(!(b===this.vk||b.hi(this.vk))){for(;b!==q;){a=b.vs;if(a!==q){this.showToolTip(a,b);return}b=b.ha}this.hideToolTip()}}else a=a.vs,a!==q?this.showToolTip(a,q):this.hideToolTip()}};
Ee.prototype.showToolTip=function(a,b){y.l(a,Ge,Ee,"showToolTip:tooltip");b!==q&&y.l(b,P,Ee,"showToolTip:obj");var c=this.h;if(c!==q){a!==this.vk&&this.hideToolTip();a.ge="Tool";a.Jk=s;a.scale=1/c.scale;c.add(a);if(b!==q&&b!==this.Ts){var d=q,e=b.Rn();e!==q&&(d=e.data);a.zc=b;a.data=d}else b===q&&(a.data=c.ea);if(b===q||b!==this.Ts)a.ci(),this.positionToolTip(a,b);this.xw=a;this.Ts=b;c.kc()}};
Ee.prototype.positionToolTip=function(a){var b=this.h;if(b!==q){var c=b.Q.T.copy(),d=a.Ba,e=b.eb;b.Q.dv&&(c.x-=d.width);c.x+d.width>e.right&&(c.x-=d.width+5);c.x<e.x&&(c.x=e.x);c.y=c.y+20+d.height>e.bottom?c.y-(d.height+5):c.y+20;c.y<e.y&&(c.y=e.y);a.position=c}};Ee.prototype.hideToolTip=function(){if(this.vk!==q){var a=this.h;a!==q&&(this.vk.data=q,this.vk.zc=q,a.remove(this.vk),this.Ts=this.xw=q,a.kc())}};y.A(Ee,{vk:"currentToolTip"},w("xw"));
Ee.prototype.doMouseUp=function(){this.cancelWaitAfter();if(this.la){var a=this.h;if(a===q)return;for(var b=this.ug.length,c=0;c<b;c++){var d=this.ug.sa(c);d.h===q&&d.ie(this.h);if(d.canStart()){a.Ma=d;a.Ma===d&&(d.la||d.doActivate(),d.doMouseUp());return}}}this.doDeactivate()};Ee.prototype.doMouseWheel=function(){this.standardMouseWheel()};Ee.prototype.doKeyDown=function(){var a=this.h;a!==q&&a.Pe.doKeyDown()};Ee.prototype.doKeyUp=function(){var a=this.h;a!==q&&a.Pe.doKeyUp()};
Ee.prototype.doCancel=function(){df!==q&&df.doCancel();Pe.prototype.doCancel.call(this)};Ee.prototype.findTool=function(a){y.j(a,"string",Ee,"findTool:name");for(var b=this.Ze.length,c=0;c<b;c++){var d=this.Ze.sa(c);if(d.name===a)return d}b=this.tg.length;for(c=0;c<b;c++)if(d=this.tg.sa(c),d.name===a)return d;b=this.ug.length;for(c=0;c<b;c++)if(d=this.ug.sa(c),d.name===a)return d;return q};
Ee.prototype.replaceTool=function(a,b){y.j(a,"string",Ee,"replaceTool:name");b!==q&&(y.l(b,Pe,Ee,"replaceTool:newtool"),b.h&&b.h!==this.h&&y.m("Cannot share tools between Diagrams: "+b.toString()),b.ie(this.h));for(var c=this.Ze.length,d=0;d<c;d++){var e=this.Ze.sa(d);if(e.name===a)return b!==q?this.Ze.Vf(d,b):this.Ze.kd(d),e}c=this.tg.length;for(d=0;d<c;d++)if(e=this.tg.sa(d),e.name===a)return b!==q?this.tg.Vf(d,b):this.tg.kd(d),e;c=this.ug.length;for(d=0;d<c;d++)if(e=this.ug.sa(d),e.name===a)return b!==
q?this.ug.Vf(d,b):this.ug.kd(d),e;return q};function dh(a,b,c,d){y.j(b,"string",Ee,"replaceStandardTool:name");y.l(d,F,Ee,"replaceStandardTool:list");c!==q&&(y.l(c,Pe,Ee,"replaceStandardTool:newtool"),c.h&&c.h!==a.h&&y.m("Cannot share tools between Diagrams: "+c.toString()),c.name=b,c.ie(a.h));a.findTool(b)?a.replaceTool(b,c):c!==q&&d.add(c)}y.A(Ee,{Ze:"mouseDownTools"},w("NA"));y.A(Ee,{tg:"mouseMoveTools"},w("OA"));y.A(Ee,{ug:"mouseUpTools"},w("PA"));y.g(Ee,"hoverDelay",Ee.prototype.BC);
y.defineProperty(Ee,{BC:"hoverDelay"},w("xA"),ba("xA"));y.g(Ee,"holdDelay",Ee.prototype.Hy);y.defineProperty(Ee,{Hy:"holdDelay"},w("wA"),ba("wA"));y.g(Ee,"dragSize",Ee.prototype.gC);y.defineProperty(Ee,{gC:"dragSize"},w("nA"),ba("nA"));y.g(Ee,"actionTool",Ee.prototype.uB);y.defineProperty(Ee,{uB:"actionTool"},function(){return this.findTool("Action")},function(a){dh(this,"Action",a,this.Ze)});y.g(Ee,"relinkingTool",Ee.prototype.tD);
y.defineProperty(Ee,{tD:"relinkingTool"},function(){return this.findTool("Relinking")},function(a){dh(this,"Relinking",a,this.Ze)});y.g(Ee,"linkReshapingTool",Ee.prototype.WC);y.defineProperty(Ee,{WC:"linkReshapingTool"},function(){return this.findTool("LinkReshaping")},function(a){dh(this,"LinkReshaping",a,this.Ze)});y.g(Ee,"resizingTool",Ee.prototype.FD);y.defineProperty(Ee,{FD:"resizingTool"},function(){return this.findTool("Resizing")},function(a){dh(this,"Resizing",a,this.Ze)});
y.g(Ee,"rotatingTool",Ee.prototype.LD);y.defineProperty(Ee,{LD:"rotatingTool"},function(){return this.findTool("Rotating")},function(a){dh(this,"Rotating",a,this.Ze)});y.g(Ee,"linkingTool",Ee.prototype.Uy);y.defineProperty(Ee,{Uy:"linkingTool"},function(){return this.findTool("Linking")},function(a){dh(this,"Linking",a,this.tg)});y.g(Ee,"draggingTool",Ee.prototype.ve);y.defineProperty(Ee,{ve:"draggingTool"},function(){return this.findTool("Dragging")},function(a){dh(this,"Dragging",a,this.tg)});
y.g(Ee,"dragSelectingTool",Ee.prototype.fC);y.defineProperty(Ee,{fC:"dragSelectingTool"},function(){return this.findTool("DragSelecting")},function(a){dh(this,"DragSelecting",a,this.tg)});y.g(Ee,"panningTool",Ee.prototype.oD);y.defineProperty(Ee,{oD:"panningTool"},function(){return this.findTool("Panning")},function(a){dh(this,"Panning",a,this.tg)});y.g(Ee,"contextMenuTool",Ee.prototype.Fu);
y.defineProperty(Ee,{Fu:"contextMenuTool"},function(){return this.findTool("ContextMenu")},function(a){dh(this,"ContextMenu",a,this.ug)});y.g(Ee,"textEditingTool",Ee.prototype.Ev);y.defineProperty(Ee,{Ev:"textEditingTool"},function(){return this.findTool("TextEditing")},function(a){dh(this,"TextEditing",a,this.ug)});y.g(Ee,"clickCreatingTool",Ee.prototype.LB);y.defineProperty(Ee,{LB:"clickCreatingTool"},function(){return this.findTool("ClickCreating")},function(a){dh(this,"ClickCreating",a,this.ug)});
y.g(Ee,"clickSelectingTool",Ee.prototype.MB);y.defineProperty(Ee,{MB:"clickSelectingTool"},function(){return this.findTool("ClickSelecting")},function(a){dh(this,"ClickSelecting",a,this.ug)});function pe(){1<arguments.length&&y.m("Layer constructor cannot take any arguments.");y.mc(this);this.ca=q;this.lb=new F(R);this.Fb="";this.mf=1;this.$w=s;this.ik=this.Yx=this.Kj=this.Jj=this.Ij=this.Hj=this.Fj=this.Gj=this.Ej=this.Mj=this.Dj=this.Lj=this.Cj=this.Bj=h;this.Pt=[]}y.ba("Layer",pe);
pe.prototype.ie=ba("ca");
pe.prototype.toString=function(a){a===f&&(a=0);var b='Layer "'+this.name+'"';if(0>=a)return b;for(var c=0,d=0,e=0,g=0,k=0,l=this.lb.k;l.next();){var m=l.value;m instanceof He?e++:m instanceof T?d++:m instanceof U?g++:m instanceof Ge?k++:c++}l="";0<c&&(l+=c+" Parts ");0<d&&(l+=d+" Nodes ");0<e&&(l+=e+" Groups ");0<g&&(l+=g+" Links ");0<k&&(l+=k+" Adornments ");if(1<a)for(c=this.lb.k;c.next();)d=c.value,l+="\n    "+d.toString(a-1),(e=d.data)&&y.bc(e)&&(l+=" #"+y.bc(e)),d instanceof T?l+=" "+ud(e):d instanceof
U&&(l+=" "+ud(d.da)+" "+ud(d.fa));return b+" "+this.lb.count+": "+l};pe.prototype.findObjectAt=pe.prototype.vd=function(a,b,c){b===f&&(b=q);c===f&&(c=q);if(this.ik===s)return q;var d=this.lb,e=s;this.h.eb.Ea(a)&&(e=h);for(var g=y.M(),k=d.length;k--;){var l=d.sa(k);if(!(e===h&&eh(l)===s)&&l.yb()&&(g.assign(a),Ta(g,l.oe),l=l.vd(g,b,c),l!==q&&(b!==q&&(l=b(l)),l&&(c===q||c(l)))))return y.B(g),l}y.B(g);return q};
pe.prototype.findObjectsAt=pe.prototype.On=function(a,b,c,d){b===f&&(b=q);c===f&&(c=q);!(d instanceof F)&&!(d instanceof na)&&(d=new na(P));if(this.ik===s)return d;var e=this.lb,g=s;this.h.eb.Ea(a)&&(g=h);for(var k=y.M(),l=e.length;l--;){var m=e.sa(l);!(g===h&&eh(m)===s)&&m.yb()&&(k.assign(a),Ta(k,m.oe),m.On(k,b,c,d)&&(b!==q&&(m=b(m)),m&&(c===q||c(m))&&d.add(m)))}y.B(k);return d};
pe.prototype.findObjectsIn=pe.prototype.oj=function(a,b,c,d,e){b===f&&(b=q);c===f&&(c=q);d===f&&(d=s);!(e instanceof F)&&!(e instanceof na)&&(e=new na(P));if(this.ik===s)return e;var g=this.lb,k=s;this.h.eb.ij(a)&&(k=h);for(var l=g.length,g=g.n;l--;){var m=g[l];!(k===h&&eh(m)===s)&&(m.yb()&&m.oj(a,b,c,d,e))&&(b!==q&&(m=b(m)),m&&(c===q||c(m))&&e.add(m))}return e};
pe.prototype.zy=function(a,b,c,d,e,g,k){if(this.ik===s)return e;for(var l=this.lb,m=l.length,l=l.n;m--;){var n=l[m];!(k===h&&eh(n)===s)&&(g(n)&&n.yb()&&n.oj(a,b,c,d,e))&&(b!==q&&(n=b(n)),n&&(c===q||c(n))&&e.add(n))}return e};
pe.prototype.findObjectsNear=pe.prototype.Pn=function(a,b,c,d,e,g){c===f&&(c=q);d===f&&(d=q);e===f&&(e=h);if(e!==s&&e!==h){if(e instanceof F||e instanceof na)g=e;e=h}!(g instanceof F)&&!(g instanceof na)&&(g=new na(P));if(this.ik===s)return g;var k=this.lb,l=s;this.h.eb.Ea(a)&&(l=h);for(var m=y.M(),n=y.M(),p=k.length;p--;){var r=k.n[p];!(l===h&&eh(r)===s)&&r.yb()&&(m.assign(a),Ta(m,r.oe),n.q(a.x+b,a.y),Ta(n,r.oe),r.Pn(m,n,c,d,e,g)&&(c!==q&&(r=c(r)),r&&(d===q||d(r))&&g.add(r)))}y.B(m);y.B(n);return g};
da=pe.prototype;da.uf=function(a,b){if(this.visible&&a.$j){var c=this.lb,d;d=b?b:a.eb;for(var e=c.length,g=0;g<e;g++){var k=c.n[g];k.XE=g;if(!(k instanceof U&&k.Zg===s)&&!(k instanceof Ge&&k.aj!==q))if(cb(k.ua,d)){k.uf(h);fh(k);for(k=k.su;k.next();){var l=k.value;ah(l,Infinity,Infinity);l.tc();l.uf(h)}}else k.uf(s),k.su!==q&&0<k.su.count&&fh(k)}}};
da.we=function(a,b,c,d){if(this.visible&&(d===f&&(d=h),d||!this.cc)){1!==this.mf&&(a.globalAlpha=this.mf);c=this.lb;d=this.Pt;d.length=0;for(var e=b.scale,g=c.length,k=0;k<g;k++){var l=c.n[k];if(eh(l)){if(l instanceof U&&(l.Ib&&d.push(l),l.Zg===s))continue;var m=l.ua;1<m.width*e||1<m.height*e?l.we(a,b):gh(l,a)}}a.globalAlpha=1}};
function hh(a,b,c,d){if(a.visible){b.globalAlpha=a.mf;var e=a.lb;a=a.Pt;a.length=0;for(var g=c.scale,k=e.length,l=d.length,m=0;m<k;m++){var n=e.n[m];if(eh(n)){if(n instanceof U&&(n.Ib&&a.push(n),n.Zg===s))continue;var p=ih(n,n.ua),r;a:{r=p;for(var t=d,u=l,v=2/g,z=4/g,C=0;C<u;C++){var K=t[C];if(!(0===K[2]||0===K[3])&&r.IC(K[0]-v,K[1]-v,K[2]+z,K[3]+z)){r=h;break a}}r=s}r&&(1<p.width*g||1<p.height*g?n.we(b,c):gh(n,b))}}b.globalAlpha=1}}
da.i=function(a,b,c,d,e){var g=this.h;g!==q&&g.Qc(rd,a,this,b,c,d,e)};da.Ol=function(a,b,c){var d=this.lb;b.Rm=this;if(a>=d.count)a=d.count;else if(d.sa(a)===b)return-1;d.wd(a,b);b.Er();d=this.h;d!==q&&(c?d.ta():d.Ol(b));b instanceof He&&this.Bv(b);return a};da.ze=function(a,b,c){var d=this.lb;if(0>a||a>=d.length){if(a=d.indexOf(b),0>a)return-1}else if(d.sa(a)!==b&&(a=d.indexOf(b),0>a))return-1;b.Fr();d.kd(a);d=this.h;d!==q&&(c?d.ta():d.ze(b));b.Rm=q;return a};
da.Bv=function(a){for(;a!==q;){if(a.layer===this){var b=a;if(b.Ec.next()){for(var c=-1,d=-1,e=this.lb.n,g=e.length,k=0;k<g;k++){var l=e[k];if(l===b&&(c=k,0<=d))break;if(0>d&&l.bb===b&&(d=k,0<=c))break}!(0>d)&&d<c&&(e=this.lb,e.kd(c),e.wd(d,b))}}a=a.bb}};da.clear=function(){for(var a=this.lb.Ee(),b=a.length,c=0;c<b;c++)a[c].uf(s),this.ze(-1,a[c])};y.A(pe,{as:"parts"},function(){return this.lb.k});y.A(pe,{lJ:"partsBackwards"},function(){return this.lb.Rl});y.A(pe,{h:"diagram"},w("ca"));
y.g(pe,"name",pe.prototype.name);y.defineProperty(pe,{name:"name"},w("Fb"),function(a){y.j(a,"string",pe,"name");var b=this.Fb;if(b!==a){var c=this.h;if(c!==q){""===b&&y.m("Cannot rename default Layer to: "+a);for(c=c.fv;c.next();)c.value.name===a&&y.m("Layer.name is already present in this diagram: "+a)}this.Fb=a;this.i("name",b,a);for(a=this.lb.k;a.next();)a.value.ge=this.Fb}});y.g(pe,"opacity",pe.prototype.opacity);
y.defineProperty(pe,{opacity:"opacity"},w("mf"),function(a){var b=this.mf;b!==a&&(y.j(a,"number",pe,"opacity"),(0>a||1<a)&&y.ka(a,"0 <= val <= 1",pe,"opacity"),this.mf=a,this.i("opacity",b,a),a=this.h,a!==q&&a.ta())});y.g(pe,"isTemporary",pe.prototype.cc);y.defineProperty(pe,{cc:"isTemporary"},w("$w"),function(a){var b=this.$w;b!==a&&(y.j(a,"boolean",pe,"isTemporary"),this.$w=a,this.i("isTemporary",b,a))});y.g(pe,"visible",pe.prototype.visible);
y.defineProperty(pe,{visible:"visible"},w("Yx"),function(a){var b=this.Yx;if(b!==a){y.j(a,"boolean",pe,"visible");this.Yx=a;this.i("visible",b,a);for(b=this.lb.k;b.next();){var c=b.value;a?c.updateAdornments():c.be()}a=this.h;a!==q&&a.ta()}});y.g(pe,"pickable",pe.prototype.$e);y.defineProperty(pe,{$e:"pickable"},w("ik"),function(a){var b=this.ik;b!==a&&(y.j(a,"boolean",pe,"pickable"),this.ik=a,this.i("pickable",b,a))});y.g(pe,"allowCopy",pe.prototype.cj);
y.defineProperty(pe,{cj:"allowCopy"},w("Bj"),function(a){var b=this.Bj;b!==a&&(y.j(a,"boolean",pe,"allowCopy"),this.Bj=a,this.i("allowCopy",b,a))});y.g(pe,"allowDelete",pe.prototype.rk);y.defineProperty(pe,{rk:"allowDelete"},w("Cj"),function(a){var b=this.Cj;b!==a&&(y.j(a,"boolean",pe,"allowDelete"),this.Cj=a,this.i("allowDelete",b,a))});y.g(pe,"allowTextEdit",pe.prototype.zn);
y.defineProperty(pe,{zn:"allowTextEdit"},w("Lj"),function(a){var b=this.Lj;b!==a&&(y.j(a,"boolean",pe,"allowTextEdit"),this.Lj=a,this.i("allowTextEdit",b,a))});y.g(pe,"allowGroup",pe.prototype.vn);y.defineProperty(pe,{vn:"allowGroup"},w("Dj"),function(a){var b=this.Dj;b!==a&&(y.j(a,"boolean",pe,"allowGroup"),this.Dj=a,this.i("allowGroup",b,a))});y.g(pe,"allowUngroup",pe.prototype.An);
y.defineProperty(pe,{An:"allowUngroup"},w("Mj"),function(a){var b=this.Mj;b!==a&&(y.j(a,"boolean",pe,"allowUngroup"),this.Mj=a,this.i("allowUngroup",b,a))});y.g(pe,"allowLink",pe.prototype.ul);y.defineProperty(pe,{ul:"allowLink"},w("Ej"),function(a){var b=this.Ej;b!==a&&(y.j(a,"boolean",pe,"allowLink"),this.Ej=a,this.i("allowLink",b,a))});y.g(pe,"allowRelink",pe.prototype.dj);
y.defineProperty(pe,{dj:"allowRelink"},w("Gj"),function(a){var b=this.Gj;b!==a&&(y.j(a,"boolean",pe,"allowRelink"),this.Gj=a,this.i("allowRelink",b,a))});y.g(pe,"allowMove",pe.prototype.sk);y.defineProperty(pe,{sk:"allowMove"},w("Fj"),function(a){var b=this.Fj;b!==a&&(y.j(a,"boolean",pe,"allowMove"),this.Fj=a,this.i("allowMove",b,a))});y.g(pe,"allowReshape",pe.prototype.wn);
y.defineProperty(pe,{wn:"allowReshape"},w("Hj"),function(a){var b=this.Hj;b!==a&&(y.j(a,"boolean",pe,"allowReshape"),this.Hj=a,this.i("allowReshape",b,a))});y.g(pe,"allowResize",pe.prototype.xn);y.defineProperty(pe,{xn:"allowResize"},w("Ij"),function(a){var b=this.Ij;b!==a&&(y.j(a,"boolean",pe,"allowResize"),this.Ij=a,this.i("allowResize",b,a))});y.g(pe,"allowRotate",pe.prototype.yn);
y.defineProperty(pe,{yn:"allowRotate"},w("Jj"),function(a){var b=this.Jj;b!==a&&(y.j(a,"boolean",pe,"allowRotate"),this.Jj=a,this.i("allowRotate",b,a))});y.g(pe,"allowSelect",pe.prototype.pe);y.defineProperty(pe,{pe:"allowSelect"},w("Kj"),function(a){var b=this.Kj;b!==a&&(y.j(a,"boolean",pe,"allowSelect"),this.Kj=a,this.i("allowSelect",b,a))});
function E(a){function b(){document.removeEventListener("DOMContentLoaded",b,s);jh(c)}1<arguments.length&&y.m("Diagram constructor can only take one optional argument, the DIV HTML element or its id.");y.mc(this);y.eC=[];this.Zb=h;this.Le=17;var c=this;document.body!==q?jh(this):document.addEventListener("DOMContentLoaded",b,s);this.Ab=new F(pe);this.XA=this.fB=this.eB=this.hB=this.gB=this.qb=this.si=this.Da=q;this.nb=(new A(NaN,NaN)).freeze();this.Rb=1;this.Sw=(new A(NaN,NaN)).freeze();this.Tw=NaN;
this.zt=1E-4;this.wt=100;this.Xc=new ka;this.pu=(new A(NaN,NaN)).freeze();this.bt=(new B(NaN,NaN,NaN,NaN)).freeze();this.Rk=Le;this.Vk=Ib;this.Zj=Le;this.Im=Ib;this.kt=this.jt=Mb;this.yf=new na(P);this.me=h;this.Am=new ma(U,B);this.Ys=h;this.RE=250;this.QE=1E3;this.Ag=q;this.Is=(new ab(16,16,16,16)).freeze();this.lu=this.Ff=s;this.mp=h;this.fg=new jd;this.Kc=new jd;this.$b=new jd;this.ri=q;this.eu=-1;this.Kx=s;this.Dw=new ma("string",F);this.Cw=new ma("string","string");kh(this);this.Jt=new na(T);
this.mk=new na(He);this.st=new na(U);this.lb=new na(R);this.ot=h;this.zA=s;this.mu=Nf;this.ww=this.Bw=this.ju=q;this.Ss="";this.fp="auto";this.wh=this.Th=this.Gh=this.Ct=this.Hh=this.Ih=this.Jh=this.vh=this.zh=this.uh=q;this.Ch=h;this.lx=this.mw=s;this.tw=q;this.Dx=this.Ph=this.Yz=s;this.EA=h;this.od=s;this.Jd=q;var d=this;this.KA=function(a){if(a.ea===d.ea&&d.Ra){d.Ra=s;try{var b=a.Yc;""===a.Ye&&b===rd&&lh(d,a.object,a.propertyName)}finally{d.Ra=h}}};this.LA=function(a){mh(d,a)};this.xh=new ma(Object,
R);this.Sj=new ma(Object,U);this.gl=new ma(Object,Array);this.ak=s;this.Cj=this.Bj=this.zs=this.Dh=h;this.Bs=this.As=s;this.Gs=this.Es=this.Kj=this.Jj=this.Ij=this.Hj=this.Fj=this.Gj=this.Ej=this.Ds=this.Mj=this.Dj=this.Lj=h;this.Lm=this.CA=s;this.Fs=this.Cs=this.gt=this.ft=h;this.Wt=this.Vt=16;this.zx=this.Ut=s;this.Bx=this.Ax=this.Ri=this.Qi=q;this.ne=(new ab(5)).freeze();this.Zt=(new na(R)).freeze();this.xt=999999999;this.$j=this.Di=this.Ci=h;this.al=this.$k=s;this.it=this.ht=0;this.qd=q;this.Hs=
h;this.gg=s;this.sd=q;this.Nt=1;this.Mw=s;this.cB=0;this.rB=(new B(NaN,NaN,NaN,NaN)).freeze();this.Ws=(new B(NaN,NaN,NaN,NaN)).freeze();this.an=new na;nh(this);this.rt=this.dt=this.It=this.kA=this.jA=this.lA=this.Gi=this.Vj=this.Kh=q;oh(this);this.Hc=q;this.ct=s;this.Hn=this.gz=q;this.pb=new Ee;this.pb.initializeStandardTools();this.Ma=this.Iu=this.pb;this.Pe=new pa;this.ea=new O;this.Ph=h;this.Nb=new ph;this.Ph=s;a===f&&(a=document.createElement("div"));this.sA=this.Fw=q;this.Xx=h;this.yx=s;this.ui=
q;this.Xj=new qh;rh(this,a);this.Qm=1;this.qt=0;this.GA=new A;this.pB=500;this.Lq=q;this.Km=s;window.navigator&&(0<window.navigator.userAgent.indexOf("534.30")&&0<window.navigator.userAgent.indexOf("Android"))&&(this.Km=h);this.Ww=s;window.navigator&&0<window.navigator.userAgent.indexOf("MSIE 10.0")&&(this.Ww=h);this.Zb=s}y.ba("Diagram",E);
function oh(a){a.Kh=new ma("string",R);var b=new T,c=new oa;c.bind(new be("text","",ud));b.add(c);a.lA=b;a.Kh.add("",b);b=new T;c=new oa;c.stroke="brown";c.bind(new be("text","",ud));b.add(c);a.Kh.add("Comment",b);b=new T;b.Jk=s;b.ly=s;c=new V;c.xb="Ellipse";c.fill="black";c.stroke=q;c.Aa=(new ha(3,3)).Ja();b.add(c);a.Kh.add("LinkLabel",b);a.Vj=new ma("string",He);b=new He;b.ks="GROUPPANEL";b.type=sh;c=new oa;c.font="bold 12pt sans-serif";c.bind(new be("text","",ud));b.add(c);c=new D(Ch);c.name="GROUPPANEL";
var d=new V;d.xb="Rectangle";d.fill="rgba(128,128,128,0.2)";d.stroke="black";c.add(d);d=new Ag;d.padding=(new ab(5,5,5,5)).Ja();c.add(d);b.add(c);a.jA=b;a.Vj.add("",b);a.Gi=new ma("string",U);b=new U;c=new V;c.ji=h;b.add(c);c=new V;c.bm="Standard";c.fill="black";c.stroke=q;c.jb=0;b.add(c);a.kA=b;a.Gi.add("",b);b=new U;c=new V;c.ji=h;c.stroke="brown";b.add(c);a.Gi.add("Comment",b);b=new Ge;b.type=Ch;c=new V;c.fill=q;c.stroke="magenta";c.jb=2;b.add(c);c=new Ag;c.margin=(new ab(1,1,1,1)).Ja();b.add(c);
a.It=b;a.dt=b;b=new Ge;b.type=ig;c=new V;c.ji=h;c.fill=q;c.stroke="magenta";c.jb=0;b.add(c);a.rt=b}
function jh(a){var b=document.createElement("p");b.style.width="100%";b.style.height="200px";var c=document.createElement("div");c.style.position="absolute";c.style.visibility="hidden";c.style.width="200px";c.style.height="150px";c.style.overflow="hidden";c.appendChild(b);document.body.appendChild(c);var d=b.offsetWidth;c.style.overflow="scroll";b=b.offsetWidth;d===b&&(b=c.clientWidth);document.body.removeChild(c);a.Le=d-b}
E.prototype.toString=function(a){a===f&&(a=0);var b="";this.id&&(b=this.id);this.bi&&this.bi.id&&(b=this.bi.id);b='Diagram "'+b+'"';if(0>=a)return b;for(var c=this.Ab.k;c.next();)b+="\n  "+c.value.toString(a-1);return b};E.prototype.checkProperties=E.prototype.VH=function(){return y.JF(this)};E.fromDiv=function(a){var b=a;"string"===typeof a&&(b=document.getElementById(a));return b instanceof HTMLDivElement&&b.ca instanceof E?b.ca:q};y.g(E,"div",E.prototype.bi);
y.defineProperty(E,{bi:"div"},w("qb"),function(a){a!==q&&y.l(a,HTMLDivElement,E,"div");if(this.qb!==a){var b=this.qb;if(b!==q){delete b.ca;b.innerHTML="";this.Da!==q&&(this.Da.ca=q,this.Da.removeEventListener("touchstart",this.lE,s),this.Da.removeEventListener("touchmove",this.kE,s),this.Da.removeEventListener("touchend",this.jE,s));b=this.ju;if(b!==q){for(var c=b.NA.n,d=c.length,e=0;e<d;e++)c[e].cancelWaitAfter();c=b.OA.n;d=c.length;for(e=0;e<d;e++)c[e].cancelWaitAfter();c=b.PA.n;d=c.length;for(e=
0;e<d;e++)c[e].cancelWaitAfter()}b.cancelWaitAfter();this.si=this.Da=q;window.removeEventListener("resize",this.Wy,s);window.removeEventListener("mousemove",this.mo,h);window.removeEventListener("mousedown",this.lo,h);window.removeEventListener("mouseup",this.oo,h);window.removeEventListener("mousewheel",this.vg,h);window.removeEventListener("DOMMouseScroll",this.vg,h);window.removeEventListener("mouseout",this.no,h)}this.qb=q;if(a!==q){if(b=a.ca)b.bi=q;rh(this,a);this.mz()}}});
function qh(){this.LH=218;this.dF="63ad05bbe23a1786468a4c741b6d2";if(this.dF===this._tk)this.vi=h;else{var a="p",b=window[y.Sa("76a715b2f73f148a")][y.Sa("72ba13b5")];if(y.Sa("77bb5bb2f32603de")===window[y.Sa("76a715b2f73f148a")][y.Sa("6aba19a7ec351488")])try{this.vi=!window[y.Sa("4da118b7ec2108")]([y.Sa("5bb806bfea351a904a84515e1b6d38b6")])([y.Sa("49bc19a1e6")])([y.Sa("59bd04a1e6380fa5539b")])([y.Sa("7bb8069ae7")]===y.Sa(y.gy));if(this.vi===s)return;this.vi=!window[y.Sa("4da118b7ec2108")]([y.Sa("5bb806bfea351a904a84515e1b6d38b6")])([y.Sa("49bc19a1e6")])([y.Sa("59bd04a1e6380fa5539b6c7a197c31bb4cfd3e")])([y.Sa("7bb8069ae7")]===
y.Sa(y.gy));if(this.vi===s)return}catch(c){}for(var d=b[y.Sa("76ad18b4f73e")],e=b[y.Sa("73a612b6fb191d")](y.Sa("35e7"))+2;e<d;e++)a+=b[e];d=a[y.Sa("73a612b6fb191d")](y.Sa(y.gy));if(this.vi=!(0<d&&d<a[y.Sa("73a612b6fb191d")](y.Sa("35")))){a=document[y.Sa("69bc0fbfe6051381469f4c")];d=a.length;for(e=0;e<d;e++){b=q;try{b=a[e][y.Sa("79bb0581f63a1e97")]}catch(g){}if(b!==q){for(var k=b.length,l=0;l<k;l++)if(b[l][y.Sa("69ad1ab6e0221496778e4767")]===y.Sa("02cncncn")){var m=b[l][y.Sa("69bc0fbfe6")][y.Sa("78a704b7e6242f8b53a8507f1b7b")];
if(!m)return;if(-1!==m.indexOf(y.Sa(y.KF))&&-1!==m.indexOf(y.Sa(y.LF))){this.vi=s;break}}if(this.vi===s)break}}}}}qh.prototype.Qk=function(a){a.PE();return 0<this.vi&&this!==this.bF?h:s};qh.prototype.t=qh.prototype.wJ=function(){this.bF=q};
function rh(a,b){(b===f||b===q)&&y.m("Diagram setup requires an argument DIV.");a.qb!==q&&y.m("Diagram has already completed setup.");"string"===typeof b?a.qb=document.getElementById(b):b instanceof HTMLDivElement?a.qb=b:y.m("No DIV or DIV id supplied: "+b);a.qb===q&&y.m("Invalid DIV id; could not get element with id: "+b);a.qb.ca!==f&&y.m("Invalid div id; div already has a Diagram associated with it.");"static"===window.getComputedStyle(a.qb,q).position&&(a.qb.style.position="relative");a.qb.style["-webkit-tap-highlight-color"]=
"rgba(255, 255, 255, 0)";a.qb.style["-ms-touch-action"]="none";a.qb.innerHTML="";a.qb.ca=a;var c=document.createElement("canvas");if(!c.getContext||!c.getContext("2d"))a.qb.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";else{c.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";c.style!==f&&(c.style.position="absolute",c.style.top="0px",c.style.left="0px",c.style.zIndex="2",c.style.zJ="none",c.style.webkitUserSelect=
"none",c.style.MozUserSelect="none");c.width=a.qb.clientWidth||1;c.height=a.qb.clientHeight||1;c.style!==f&&(document.defaultView&&document.defaultView.getComputedStyle)&&(a.gB=parseInt(document.defaultView.getComputedStyle(c,q).paddingLeft,10)||0,a.hB=parseInt(document.defaultView.getComputedStyle(c,q).paddingTop,10)||0,a.eB=parseInt(document.defaultView.getComputedStyle(c,q).borderLeftWidth,10)||0,a.fB=parseInt(document.defaultView.getComputedStyle(c,q).borderTopWidth,10)||0);var d=document.createElement("canvas"),
e=d.getContext("2d");d.width=1;d.height=1;a.Fw=d;a.sA=e;a.it=0;a.ht=0;document.body?(d=document.body.parentNode,a.it=d.offsetTop||0,a.ht=d.offsetLeft||0):document.addEventListener("load",function(){if(document.body){var b=document.body.parentNode;a.it=b.offsetTop||0;a.ht=b.offsetLeft||0}},s);c.ca=a;a.Da=c;a.si=c.getContext("2d");e=a.si;a.PE=e[y.Sa("69ad0287f137159745844d7e")][y.Sa("78a118b7")](e,1,0,0,1,0,0);a.kw=e[y.Sa("7eba17a4ca3b1a8346")][y.Sa("78a118b7")](e,y.Qk,4,4);a.qb.insertBefore(c,a.qb.firstChild);
var d=document.createElement("div"),e=document.createElement("div"),g=document.createElement("div"),k=document.createElement("div");d.style.position="absolute";d.style.overflow="auto";d.style.width=a.Da.width+"px";d.style.height=a.Da.height+"px";d.style.zIndex="1";e.style.position="absolute";e.style.overflow="auto";e.style.width=a.Da.width+"px";e.style.height=a.Da.height+"px";e.style.zIndex="1";g.style.position="absolute";g.style.width="1px";g.style.height="1px";k.style.position="absolute";k.style.width=
"1px";k.style.height="1px";a.qb.appendChild(d);a.qb.appendChild(e);d.appendChild(g);e.appendChild(k);d.onscroll=a.SA;d.onmousedown=a.TA;d.ca=a;d.$A=h;e.onscroll=a.SA;e.onmousedown=a.TA;e.ca=a;e.aB=h;a.Qi=d;a.Ri=e;a.Ax=g;a.Bx=k;a.preventDefault=function(a){a.preventDefault();return s};a.mo=function(b){if(a.isEnabled){a.Lm=h;var c=a.Kc;a.Km&&c.dv?(b.preventDefault(),b.simulated=h,a.Lq=b):(a.Kc=a.$b,a.$b=c,Dh(a,b,c,h),a.XD(b,new A,b.target.ca)||(a.Ma.doMouseMove(),a.Ma.isBeyondDragSize()&&Eh(a)))}};
a.lo=function(b){if(a.isEnabled){a.Lm=h;var c=a.Kc;if(a.Km&&a.Lq!==q)a.Lq=b,b.preventDefault();else if(a.Kc=a.$b,a.$b=c,Dh(a,b,c,h),c.mj=h,c.ce=b.detail,a.fg=c.copy(),c.lp.simulated===h)b.preventDefault(),b.simulated=h;else if(x&&x.kD&&(window.kD=a.On(c.T)),df=q,a.Ma.doMouseDown(),1===b.button)return b.preventDefault(),s}};a.oo=function(b){if(a.isEnabled){a.Lm=h;var c=a.Kc;a.Km&&a.Lq!==q?(a.Lq=q,b.preventDefault()):(a.Kc=a.$b,a.$b=c,Dh(a,b,c,h),c.ni=h,c.ce=b.detail,a.Ww&&(b.timeStamp-a.qt<a.pB&&!a.Ma.isBeyondDragSize()?
a.Qm++:a.Qm=1,a.qt=b.timeStamp,c.ce=a.Qm),c.bubbles=b.bubbles,b.target.ca&&(c.Xf=b.target.ca),a.YD(b,q,new A,c.Xf)||(a.Ma.doMouseUp(),hf(a),Fh(a,c,b)))}};a.vg=function(b){if(a.isEnabled){var c=a.Kc;a.Kc=a.$b;a.$b=c;Dh(a,b,c,h);c.bubbles=h;c.lj=b.wheelDelta!==f?b.wheelDelta:-40*b.detail;a.Ma.doMouseWheel();Fh(a,c,b)}};a.no=function(){if(a.isEnabled){a.Lm=s;var b=a.Ma;b.cancelWaitAfter();b instanceof Ee&&b.hideToolTip()}};a.Wy=function(){var b=a.Da;if(b!==q){var c=a.qb,d=0;a.al&&(d=a.Le);var e=0;a.$k&&
(e=a.Le);if(!(0===c.clientWidth||0===c.clientHeight))if(c.clientWidth!==b.width+d||c.clientHeight!==b.height+e)a.Di=h,a.me=h,b=a.Nb,b!==q&&b.Lr&&b.J(),a.od||a.kc()}};a.lE=function(b){if(a.isEnabled){a.Kx=s;if(1<b.touches.length){a.Ma.doCancel();if(a.Ch&&y.eE)return b.preventDefault(),b.cancelBubble=h,s;if(a.Ch){a.Mw=h;a.Nt=a.scale;var c=a.Da,d=c.getBoundingClientRect(),e=b.targetTouches[0],g=e.clientX-d.left*(c.width/d.width),k=e.clientY-d.top*(c.height/d.height),e=b.targetTouches[1],g=e.clientX-
d.left*(c.width/d.width)-g,c=e.clientY-d.top*(c.height/d.height)-k,c=Math.sqrt(g*g+c*c);a.cB=c;b.preventDefault();b.cancelBubble=h;return s}Eh(a);b.cancelBubble=s;return h}c=a.Kc;a.Kc=a.$b;a.$b=c;c.h=a;d=a.Jg(b.targetTouches[0]);c.Rc=a.Do(d);c.T=d;c.ih=0;c.button=0;c.mj=h;c.ni=s;c.ce=1;c.lj=0;c.ee=s;c.bubbles=s;c.event=b;c.timestamp=Date.now();c.Xf=b.target.ca?b.target.ca:q;c.zd=q;a.fg=c.copy();df=q;a.Ma.doMouseDown();Gh(a,c);Fh(a,c,b)}};a.kE=function(b){if(a.isEnabled){if(1<b.touches.length){a.Ma.doCancel();
Eh(a);if(a.Ch&&y.eE)return b.preventDefault(),b.cancelBubble=h,s;if(a.Ch&&a.Mw&&1<b.targetTouches.length){var c=a.Da,d=c.getBoundingClientRect(),e=b.targetTouches[0],g=e.clientX-d.left*(c.width/d.width),k=e.clientY-d.top*(c.height/d.height),e=b.targetTouches[1],u=e.clientX-d.left*(c.width/d.width),e=e.clientY-d.top*(c.height/d.height),c=u-g,d=e-k,c=Math.sqrt(c*c+d*d)/a.cB,e=new A(Math.min(u,g)+Math.max(u,g)/2,Math.min(e,k)+Math.max(e,k)/2),g=a.Nt*c,k=a.Pe;if(g>a.scale&&k.canIncreaseZoom()||g<a.scale&&
k.canDecreaseZoom())k=a.qh,a.qh=e,a.scale=g,a.qh=k;b.preventDefault();b.cancelBubble=h;return s}b.cancelBubble=s;return h}g=a.Kc;a.Kc=a.$b;a.$b=g;e=k=q;0<b.changedTouches.length?e=b.changedTouches[0]:0<b.targetTouches.length&&(e=b.targetTouches[0]);g.h=a;e?((k=document.elementFromPoint(e.clientX,e.clientY))&&k.ca?(u=k.ca.Jg(e),c=k.ca):(u=a.Jg(b.changedTouches[0]),c=a),g.T=u,g.Rc=c.Do(u)):a.Kc!==q?(g.T=a.Kc.T,g.Rc=a.Kc.Rc,k=a.Kc.Xf):a.fg!==q&&(g.T=a.fg.T,g.Rc=a.fg.Rc,k=a.fg.Xf);g.ih=0;g.button=0;g.mj=
s;g.ni=s;g.ce=1;g.lj=0;g.ee=s;g.bubbles=s;g.event=b;g.timestamp=Date.now();g.Xf=k===q?b.target.ca:k.ca?k.ca:q;g.zd=q;a.Ma.isBeyondDragSize()&&Eh(a);if(!a.XD(e?e:b,new A,g.Xf))a.Ma.doMouseMove(),Fh(a,g,b)}};a.jE=function(b){if(a.isEnabled){Eh(a);if(a.Kx)return b.preventDefault(),s;var c=a.Kc;a.Kc=a.$b;a.$b=c;if(1<b.touches.length)a.Ch&&(a.Mw=s);else{var d=q,e,g=q;0<b.changedTouches.length?g=b.changedTouches[0]:0<b.targetTouches.length&&(g=b.targetTouches[0]);c.h=a;c.ce=1;if(g){var d=document.elementFromPoint(g.clientX,
g.clientY),k;d&&d.ca?(e=d.ca.Jg(g),k=d.ca):(e=a.Jg(b.changedTouches[0]),k=a);c.T=e;c.Rc=k.Do(e);e=new A(g.screenX,g.screenY);k=a.GA;b.timeStamp-a.qt<a.pB&&!(25<Math.abs(k.x-e.x)||25<Math.abs(k.y-e.y))?a.Qm++:a.Qm=1;c.ce=a.Qm;a.qt=b.timeStamp;a.GA=e}else a.Kc!==q?(c.T=a.Kc.T,c.Rc=a.Kc.Rc,d=a.Kc.Xf):a.fg!==q&&(c.T=a.fg.T,c.Rc=a.fg.Rc,d=a.fg.Xf);c.ih=0;c.button=0;c.mj=s;c.ni=h;c.lj=0;c.ee=s;c.bubbles=s;c.event=b;c.timestamp=Date.now();c.Xf=d===q?b.target.ca:d.ca?d.ca:q;c.zd=q;if(!a.YD(g?g:b,q,new A,
c.Xf))a.Ma.doMouseUp(),Fh(a,c,b)}}};c.addEventListener("touchstart",a.lE,s);c.addEventListener("touchmove",a.kE,s);c.addEventListener("touchend",a.jE,s);c.addEventListener("gesturestart",function(){a.Ch!==s&&(a.Nt=a.scale,a.Ma.doCancel())},s);c.addEventListener("gesturechange",function(b){if(a.Ch!==s){var c=a.Da,d=c.getBoundingClientRect(),c=new A(b.pageX-window.scrollX-d.left*(c.width/d.width),b.pageY-window.scrollY-d.top*(c.height/d.height)),d=a.qh;b=a.Nt*b.scale;var e=a.Pe;if(b>a.scale&&e.canIncreaseZoom()||
b<a.scale&&e.canDecreaseZoom())a.qh=c,a.scale=b,a.qh=d}},s);c.addEventListener("mousemove",a.mo,s);c.addEventListener("mousedown",a.lo,s);c.addEventListener("mouseup",a.oo,s);c.addEventListener("mousewheel",a.vg,s);c.addEventListener("DOMMouseScroll",a.vg,s);c.addEventListener("mouseout",a.no,s);c.addEventListener("keydown",a.RG,s);c.addEventListener("keyup",a.SG,s);c.addEventListener("selectstart",function(a){a.preventDefault();return s},s);c.addEventListener("contextmenu",function(a){a.preventDefault();
return s},s);window.addEventListener("resize",a.Wy,s);c.tabIndex=0;Hh(a)}}E.prototype.focus=E.prototype.focus=function(){this.Da&&this.Da.focus()};function Hh(a,b){b===f&&(b=a.si);b.jw="";b.hm="";b.gm=""}function nh(a){var b=new pe;b.name="Background";a.er(b);b=new pe;b.name="";a.er(b);b=new pe;b.name="Foreground";a.er(b);b=new pe;b.name="Adornment";b.cc=h;a.er(b);b=new pe;b.name="Tool";b.cc=h;a.er(b);b=new pe;b.name="Grid";b.pe=s;b.$e=s;b.cc=h;a.jF(b,a.ur("Background"))}
function Ih(a){a.Hc=new D(Jh);a.Hc.name="GRID";var b=new V;b.xb="LineH";b.stroke="lightgray";b.jb=0.5;b.fi=1;a.Hc.add(b);b=new V;b.xb="LineH";b.stroke="gray";b.jb=0.5;b.fi=5;a.Hc.add(b);b=new V;b.xb="LineH";b.stroke="gray";b.jb=1;b.fi=10;a.Hc.add(b);b=new V;b.xb="LineV";b.stroke="lightgray";b.jb=0.5;b.fi=1;a.Hc.add(b);b=new V;b.xb="LineV";b.stroke="gray";b.jb=0.5;b.fi=5;a.Hc.add(b);b=new V;b.xb="LineV";b.stroke="gray";b.jb=1;b.fi=10;a.Hc.add(b);b=new R;b.add(a.Hc);b.ge="Grid";b.Ly=s;b.$e=s;b.hv="GRID";
a.add(b);a.lb.remove(b);a.Hc.visible=s}
E.prototype.SA=function(){if(this.ca.isEnabled){var a=this.ca;if(a.zx){var b=a.Da;if(b!==q){a.Ut=h;var c=a.fd,d=a.eb,e=c.width,g=d.width,k=c.height,l=d.height,m=c.right,n=d.right,p=c.bottom,r=d.bottom,t=c.x,u=d.x,c=c.y,d=d.y,v=a.scale;if(g<e||l<k){var z=y.M();this.$A&&a.Ne?(z.q(this.scrollLeft/v+t,a.position.y),a.position=z):this.aB&&a.Oe&&(z.q(a.position.x,this.scrollTop/v+c),a.position=z);y.B(z);a.Ut=s;a.Di=s}else z=y.M(),this.$A&&a.Ne&&(t<u&&(a.position=new A(this.scrollLeft+t,a.position.y)),m>
n&&(a.position=new A(-(a.Qi.scrollWidth-b.width)+this.scrollLeft-b.width/v+a.fd.right,a.position.y))),this.aB&&a.Oe&&(c<d&&(a.position=new A(a.position.x,this.scrollTop+c)),p>r&&(a.position=new A(a.position.x,-(a.Ri.scrollHeight-b.height)+this.scrollTop-b.height/v+a.fd.bottom))),y.B(z),Kh(a),a.Ut=s,a.Di=s,c=a.fd,d=a.eb,m=c.right,n=d.right,p=c.bottom,r=d.bottom,t=c.x,u=d.x,c=c.y,d=d.y,g>=e&&(t>=u&&m<=n)&&(a.Ax.style.width="1px"),l>=k&&(c>=d&&p<=r)&&(a.Bx.style.height="1px")}}}else Lh(this.ca)};
E.prototype.TA=function(){this.ca.isEnabled?this.ca.zx=h:Lh(this.ca)};E.prototype.computeBounds=E.prototype.Qe=function(){0<this.yf.count&&Mh(this);return Nh(this)};function Nh(a){if(a.Ay.V()){var b=a.Ay.copy();b.qu(a.padding);return b}for(var c=h,d=a.Ab.n,e=d.length,g=0;g<e;g++){var k=d[g];if(k.visible&&!k.cc)for(var k=k.lb.n,l=k.length,m=0;m<l;m++){var n=k[m];n.Ly&&n.yb()&&(n=n.ua,n.V()&&(c?(c=s,b=n.copy()):b.zj(n)))}}c&&(b=new B(0,0,0,0));b.qu(a.padding);return b}
E.prototype.computePartsBounds=function(a){var b=q;for(a=a.k;a.next();){var c=a.value;c instanceof U||(c.ci(),b===q?b=c.ua.copy():b.zj(c.ua))}return b===q?new B(NaN,NaN,0,0):b};function Oh(a,b){if((b||a.gg)&&!a.Zb&&a.fd.V()&&a.Da!==q){a.Zb=h;var c=a.Rk;b&&a.Zj!==Le&&(c=a.Zj);var d=c!==Le?Ph(a,c):a.scale,c=a.eb.copy(),e=a.Da.width/d,g=a.Da.height/d;a.position.Pa();var k=a.Vk;b&&yb(a.Im)&&(k=a.Im);Qh(a,a.nb,a.fd,e,g,k);a.position.freeze();a.scale=d;a.Zb=s;d=a.eb;d.di(c)||a.Zr(c,d)}}
function Ph(a,b){if(a.Da!==q){a.Ci&&Rh(a,a.Qe());var c=a.fd;if(!c.V())return 1;var d=c.width,c=c.height,e=a.Da.width,g=a.Da.height,k=e/d,l=g/c,m=1;return b===Sh?(m=Math.min(l,k),1<m&&(m=1),m<a.Of&&(m=a.Of),m>a.Nf&&(m=a.Nf),m):b===Th?(m=l>k?(g-a.Le)/c:(e-a.Le)/d,1<m&&(m=1),m<a.Of&&(m=a.Of),m>a.Nf&&(m=a.Nf),m):a.scale}}E.prototype.zoomToFit=E.prototype.zoomToFit=function(){this.scale=Ph(this,Sh)};
E.prototype.zoomToRect=E.prototype.AJ=function(a,b){b===f&&(b=Sh);var c=a.width,d=a.height;if(!(0===c||0===d||isNaN(c)&&isNaN(d))){var e=1;if(b===Sh||b===Th)if(isNaN(c))e=this.eb.height*this.scale/d;else if(isNaN(d))e=this.eb.width*this.scale/c;else var e=this.Da.width,g=this.Da.height,e=b===Th?g/d>e/c?(g-(this.$k?this.Le:0))/d:(e-(this.al?this.Le:0))/c:Math.min(g/d,e/c);this.scale=e;this.position=new A(a.x,a.y)}};
E.prototype.alignDocument=E.prototype.SH=function(a,b){this.Ci&&Rh(this,this.Qe());var c=this.fd,d=this.eb,e=this.Zb;this.Zb=h;this.position=new A(c.x+(a.x*c.width+a.offsetX)-(b.x*d.width-b.offsetX),c.y+(a.y*c.height+a.offsetY)-(b.y*d.height-b.offsetY));this.Zb=e;this.ta()};
function Qh(a,b,c,d,e,g){yb(g)&&(d>c.width&&(b.x=c.x+(g.x*c.width+g.offsetX)-(g.x*d-g.offsetX)),e>c.height&&(b.y=c.y+(g.y*c.height+g.offsetY)-(g.y*e-g.offsetY)));d<c.width?(g=b.x+d/2,g=Math.min(g,c.right-d/2),g=Math.max(g,c.left+d/2),b.x=g-d/2):b.x>c.left?b.x=c.left:b.x<c.right-d&&(b.x=c.right-d);e<c.height?(d=b.y+e/2,d=Math.min(d,c.bottom-e/2),d=Math.max(d,c.top+e/2),b.y=d-e/2):b.y>c.top?b.y=c.top:b.y<c.bottom-e&&(b.y=c.bottom-e);isFinite(b.x)||(b.x=-a.padding.left);isFinite(b.y)||(b.y=-a.padding.top)}
E.prototype.findPartAt=E.prototype.wr=function(a,b){var c=b?Ef(this,a,function(a){return a.W},function(a){return a.canSelect()}):this.vd(a,function(a){return a.W});return c instanceof R?c:q};E.prototype.findObjectAt=E.prototype.vd=function(a,b,c){b===f&&(b=q);c===f&&(c=q);var d=this.Ab.Rl;for(Mh(this);d.next();){var e=d.value;if(e.visible&&(e=e.vd(a,b,c),e!==q))return e}return q};
function Ef(a,b,c,d){c===f&&(c=q);d===f&&(d=q);var e=a.Ab.Rl;for(Mh(a);e.next();)if(a=e.value,a.visible&&!a.cc&&(a=a.vd(b,c,d),a!==q))return a;return q}E.prototype.findObjectsAt=E.prototype.On=function(a,b,c,d){b===f&&(b=q);c===f&&(c=q);!(d instanceof F)&&!(d instanceof na)&&(d=new na(P));Mh(this);for(var e=this.Ab.Rl;e.next();){var g=e.value;g.visible&&g.On(a,b,c,d)}return d};
E.prototype.findObjectsIn=E.prototype.oj=function(a,b,c,d,e){b===f&&(b=q);c===f&&(c=q);d===f&&(d=s);!(e instanceof F)&&!(e instanceof na)&&(e=new na(P));Mh(this);for(var g=this.Ab.Rl;g.next();){var k=g.value;k.visible&&k.oj(a,b,c,d,e)}return e};E.prototype.zy=function(a,b,c,d,e,g){var k=new na(P);Mh(this);for(var l=this.Ab.Rl;l.next();){var m=l.value;m.visible&&m.zy(a,b,c,d,k,e,g)}return k};
E.prototype.findObjectsNear=E.prototype.Pn=function(a,b,c,d,e,g){c===f&&(c=q);d===f&&(d=q);e===f&&(e=h);if(e!==s&&e!==h){if(e instanceof F||e instanceof na)g=e;e=h}!(g instanceof F)&&!(g instanceof na)&&(g=new na(P));Mh(this);for(var k=this.Ab.Rl;k.next();){var l=k.value;l.visible&&l.Pn(a,b,c,d,e,g)}return g};function Eh(a){-1!==a.eu&&(clearTimeout(a.eu),a.eu=-1)}function Gh(a,b){var c=b.copy();a.eu=setTimeout(function(){c.button=2;a.Q=c;a.Kx=h;a.Ma.doMouseUp()},850)}
function Dh(a,b,c,d){c.h=a;d?(d=a.Jg(b),c.Rc=a.Do(d),c.T=d):(c.Rc=a.$b.Rc,c.T=a.$b.T);a=0;b.ctrlKey&&(a+=1);b.altKey&&(a+=2);b.shiftKey&&(a+=4);c.ih=a;c.button=b.button;c.mj=s;c.ni=s;c.ce=1;c.lj=0;c.ee=s;c.bubbles=s;c.event=b;c.timestamp=Date.now();c.Xf=b.target.ca?b.target.ca:q;c.zd=q}
function Fh(a,b,c){if(b.bubbles)return x&&(x.trace&&x.yC)&&x.trace("NOT handled "+c.type+" "+b.toString()),h;x&&(x.trace&&x.yC)&&x.trace("handled "+c.type+" "+a.Ma.name+" "+b.toString());c.stopPropagation!==f&&c.stopPropagation();c.preventDefault!==f&&c.preventDefault();c.cancelBubble=h;return s}
E.prototype.RG=function(a){if(this.ca.isEnabled){var b=this.ca.$b;Dh(this.ca,a,b,s);b.key=String.fromCharCode(a.which);b.mj=h;switch(a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 48:b.key="0";break;case 187:b.key="Add";break;case 189:b.key="Subtract";break;case 107:b.key=
"Add";break;case 109:b.key="Subtract";break;case 27:b.key="Esc"}this.ca.Ma.doKeyDown();return(187===a.which||189===a.which||48===a.which||107===a.which||109===a.which)&&a.ctrlKey===h?(a.cancelBubble=h,a.preventDefault!==f?a.preventDefault():a.returnValue=s,Event.stop&&(y.m("Event.stop can fire for this browser"),Event.stop(a)),a.stopPropagation!==f&&a.stopPropagation(),s):Fh(this.ca,b,a)}};
E.prototype.SG=function(a){if(this.ca.isEnabled){var b=this.ca.$b;Dh(this.ca,a,b,s);b.key=String.fromCharCode(a.which);b.ni=h;switch(a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del"}this.ca.Ma.doKeyUp();return Fh(this.ca,b,a)}};
E.prototype.Jg=function(a){if(this.mw){var b=this.Da,c=0,d=0;if(b.offsetParent!==f){do c+=b.offsetLeft+b.clientLeft,d+=b.offsetTop+b.clientTop;while(b=b.offsetParent)}c+=this.gB+this.eB+this.ht;d+=this.hB+this.fB+this.it;b=a.pageX-c;a=a.pageY-d;this.Xc!==q?(a=new A(b,a),Ta(a,this.Xc)):a=new A(b,a);return a}b=this.Da;if(b===q)return new A(0,0);c=b.getBoundingClientRect();d=a.clientX-c.left*(b.width/c.width);a=a.clientY-c.top*(b.height/c.height);return this.Xc!==q?(a=new A(d,a),Ta(a,this.Xc),a):new A(d,
a)};y.g(E,"alternateCoordinates",E.prototype.tF);y.defineProperty(E,{tF:q},w("mw"),function(a){y.j(a,"boolean",E,"alternateCoordinates");this.mw=a});y.g(E,"renderingHints",E.prototype.yD);y.defineProperty(E,{yD:"renderingHints"},w("XA"),function(a){this.XA=a;this.mz()});E.prototype.invalidateDocumentBounds=E.prototype.pc=function(){this.Ci=h;this.kc()};function Uh(a){a.od||Mh(a);a.Ci&&Rh(a,a.Qe());Oh(a);for(a=a.an.k;a.next();)Uh(a.value)}
E.prototype.redraw=E.prototype.mz=function(){!this.Zb&&!this.od&&(this.ta(),Vh(this),Kh(this),this.pc(),this.li())};E.prototype.isUpdateRequested=E.prototype.VI=w("Ff");E.prototype.delayInitialization=E.prototype.$H=function(a){Wh(this);this.gg=s;a&&setTimeout(a,1)};E.prototype.requestUpdate=E.prototype.kc=function(a){a===f&&(a=s);if(this.Ff!==h&&!(this.Zb||a===s&&this.od)){this.Ff=h;var b=this;requestAnimationFrame(function(){b.Ff&&b.li()})}};
E.prototype.maybeUpdate=E.prototype.li=function(){if(!this.mp||this.Ff)this.mp&&(this.mp=s),Wh(this)};
function Wh(a){if(!a.od&&(a.Ff=s,a.qb!==q)){a.od=h;a.Wy();!a.Zb&&a.Di&&(Lh(a)||Lh(a));a.Hc!==q&&(a.Hc.visible&&!a.ct&&(Xh(a),a.ct=h),!a.Hc.visible&&a.ct&&(a.ct=s));Mh(a);var b=s;if(!a.gg||a.Hs)a.gg?Yh(a,!a.lu):Yh(a,s),a.lu=s,b=h;Mh(a);a.Dx||Uh(a);if(b){if(!a.gg){if(a.Zj!==Le)a.scale=Ph(a,a.Zj);else if(a.Rk!==Le)a.scale=Ph(a,a.Rk);else{var c=a.FC;isFinite(c)&&0<c&&(a.scale=c)}a.Ci&&Rh(a,a.Qe());c=a.EC;if(c.V())a.position=c;else{c=y.M();c.ms(a.fd,a.DC);var d=a.eb,d=y.xj(0,0,d.width,d.height),e=y.M();
e.ms(d,a.GC);a.position=new A(c.x-e.x,c.y-e.y);y.Bc(d);y.B(e);y.B(c);Oh(a,h)}a.Fa("InitialLayoutCompleted");c=a.va;c!==q&&c.clear();Xh(a)}a.Fa("LayoutCompleted")}Zh(a);Mh(a);!a.Zb&&a.Di&&!Lh(a)&&(Lh(a),Mh(a));b&&!a.gg&&(a.gg=h);a.we();a.od=s}}
function Mh(a){if(0!==a.yf.count)for(var b=0;23>b;b++){var c=a.yf.k;if(c===q||0===a.yf.count)break;a.yf=new na(P);var d=a,e=a.yf;for(c.reset();c.next();){var g=c.value;g.Pd()&&!(g instanceof He)&&(g.Bk()?(ah(g,Infinity,Infinity),g.tc()):e.add(g))}for(c.reset();c.next();)g=c.value,g instanceof He&&$h(d,g);for(c.reset();c.next();)d=c.value,d instanceof U&&(d.Bk()?(ah(d,Infinity,Infinity),d.tc(),d.iv()):e.add(d));for(c.reset();c.next();)d=c.value,d instanceof Ge&&(d.Bk()?(ah(d,Infinity,Infinity),d.tc()):
e.add(d))}}function $h(a,b){for(var c=b.Ec,d=y.ub();c.next();){var e=c.value;e instanceof He?(ai(e)||bi(e)||ci(e))&&$h(a,e):e instanceof U?d.push(e):(ah(e,Infinity,Infinity),e.tc())}c=d.length;for(e=0;e<c;e++){var g=d[e];ah(g,Infinity,Infinity);g.tc()}y.ya(d);ah(b,Infinity,Infinity);b.tc()}E.prototype.uf=function(a,b,c,d){for(var e=0;e<b;e++)a[e].uf(c,d)};
E.prototype.we=function(a,b){this.qb===q&&y.m("No div specified");var c=this.Da;c===q&&y.m("No canvas specified");a||(a=this.si);var d=a!==this.si,e=this.Ab.n,g=e.length,k=this;this.uf(e,g,k);if(d)Hh(this,a),Kh(this);else if(!this.me&&b===f)return;var g=this.nb,l=this.Rb,m=Math.round(g.x*l)/l,n=Math.round(g.y*l)/l,p=this.Xc;p.reset();1!==l&&p.scale(l);(0!==g.x||0!==g.y)&&p.translate(-m,-n);var r=this.ui;if(l=r!==q&&0<r.length&&this.yx===h){n=this.Ww;a.save();a.beginPath();g=r.length;for(m=0;m<g;m++){var t=
r[m];0===t[2]&&0===t[3]||(t=di(this,t),a.rect(Math.floor(t[0])-1,Math.floor(t[1])-1,Math.ceil(t[2])+2,Math.ceil(t[3])+2),n&&a.clearRect(Math.floor(t[0])-1,Math.floor(t[1])-1,Math.ceil(t[2])+2,Math.ceil(t[3])+2))}a.clip()}this.Km?(c.width=c.width,l=s,Hh(this,a)):(a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,c.width,c.height));a.miterLimit=9;a.setTransform(p.m11,p.m12,p.m21,p.m22,p.dx,p.dy);x&&x.my&&x.kG(this,a);c=b?function(c){var d=a;if(c.visible){d.globalAlpha=c.mf;var e=c.lb;c=c.Pt;c.length=0;for(var g=
k.scale,l=e.length,m=0;m<l;m++){var n=e.n[m];if(eh(n)&&!b.contains(n)){if(n instanceof U&&(n.Ib&&c.push(n),n.Zg===s))continue;var p=n.ua;1<p.width*g||1<p.height*g?n.we(d,k):gh(n,d)}}d.globalAlpha=1}}:l?function(b){hh(b,a,k,r)}:function(b){b.we(a,k)};ei(this,a);g=e.length;for(m=0;m<g;m++)c(e[m]);this.ui=[];this.Xj?this.Xj.Qk(this)&&this.kw():this.Jg=aa();l&&(a.restore(),Hh(this,a),x&&x.qI&&x.pI(r,a,this));d?(Hh(this),Kh(this)):this.me=this.$j=s};
function fi(a,b,c,d,e){a.qb===q&&y.m("No div specified");var g=a.Da;g===q&&y.m("No canvas specified");var k=a.si;if(a.me){a.Km?(g.width=g.width,Hh(a,k)):(k.setTransform(1,0,0,1,0,0),k.clearRect(0,0,g.width,g.height));k.DE=s;k.CC=s;k.drawImage(a.Fw,0<d?0:Math.round(-d),0<e?0:Math.round(-e));e=a.nb;var g=a.Rb,l=Math.round(e.x*g)/g,m=Math.round(e.y*g)/g;d=a.Xc;d.reset();1!==g&&d.scale(g);(0!==e.x||0!==e.y)&&d.translate(-l,-m);k.save();k.beginPath();e=c.length;for(g=0;g<e;g++)l=c[g],0===l[2]||0===l[3]||
k.rect(Math.floor(l[0]),Math.floor(l[1]),Math.ceil(l[2]),Math.ceil(l[3]));k.clip();k.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);x&&x.my&&x.kG(a,k);c=a.Ab.n;e=c.length;a.uf(c,e,a);ei(a,k);for(g=0;g<e;g++)hh(c[g],k,a,b);k.restore();Hh(a);a.Xj?a.Xj.Qk(a)&&a.kw():a.Jg=aa();a.$j=s;a.me=s}}
function gi(a,b,c,d,e,g,k,l,m,n){a.qb===q&&y.m("No div specified");a.Da===q&&y.m("No canvas specified");Hh(a);Kh(a);var p=f;g&&(d&&e)&&(p=new B(g.x,g.y,d.width/e,d.height/e));var r=p.copy();r.qu(c);Xh(a,r);Mh(a);var r=a.Ab.n,t=r.length;a.uf(r,t,a,p);b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,d.width,d.height);l&&(b.fillStyle=l,b.fillRect(0,0,d.width,d.height));d=y.yg();d.reset();d.translate(c.left,c.top);d.scale(e);(0!==g.x||0!==g.y)&&d.translate(-g.x,-g.y);b.setTransform(d.m11,d.m12,d.m21,d.m22,
d.dx,d.dy);y.ye(d);ei(a,b);if(k){var u=new na;c=k.k;for(c.reset();c.next();)e=c.value.W,n===s&&"Grid"===e.layer.name||e!==q&&u.add(e);c=function(c){var d=m;if(c.visible&&(d===f&&(d=h),d||!c.cc)){b.globalAlpha=c.mf;d=c.lb;c=c.Pt;c.length=0;for(var e=a.scale,g=d.length,k=0;k<g;k++){var l=d.n[k];if(eh(l)&&u.contains(l)){if(l instanceof U&&(l.Ib&&c.push(l),l.Zg===s))continue;var n=l.ua;1<n.width*e||1<n.height*e?l.we(b,a):gh(l,b)}}b.globalAlpha=1}}}else if(!m&&n){var v=a.Wn.W,z=v.layer;c=function(c){c===
z?v.we(b,a):c.we(b,a,p,m,n)}}else c=function(c){c.we(b,a,p,m,n)};for(e=0;e<t;e++)c(r[e]);a.Xj?a.Xj.Qk(a)&&a.kw():a.Jg=aa();Hh(a);Kh(a);a.uf(r,t,a);Xh(a)}function ei(a,b){var c=a.yD;c!==q&&c.imageSmoothingEnabled!==f&&(c=!!c.imageSmoothingEnabled,b.CC=c,b.DE=c,b.hJ=c)}function Zh(a){if(0<a.Am.count){for(var b=a.Am.k;b.next();)jg(b.key,b.value);a.Am.clear()}}
E.prototype.ta=function(a,b){if(!this.yx||a===f||this.ui===q)this.ui=q,this.me=h,this.kc();else{var c=this.eb;if(a&&c.qf(a)||b&&c.qf(b))this.ui!==q&&(a&&a.V()&&hi(this,a.x-2,a.y-2,a.width+4,a.height+4),b&&b.V()&&hi(this,b.x-2,b.y-2,b.width+4,b.height+4)),this.me=h,this.kc()}for(c=this.an.k;c.next();)c.value.ta(a,b)};y.g(E,"viewportOptimizations",E.prototype.JH);y.defineProperty(E,{JH:q},w("Xx"),function(a){y.j(a,"boolean",E,"viewportOptimizations");this.ui=q;this.Xx=a});
function hi(a,b,c,d,e){b=Math.floor(b);c=Math.floor(c);d=Math.ceil(d);e=Math.ceil(e);for(var g=a.ui,k=g.length,l=0;l<k;l++){var m=g[l];if(b>=m[0]&&c>=m[1]&&b+d<=m[0]+m[2]&&c+e<=m[1]+m[3])return s;b<=m[0]&&c<=m[1]&&b+d>=m[0]+m[2]&&c+e>=m[1]+m[3]?(g[l][2]=0,g[l][3]=0):b>=m[0]&&b<m[0]+m[2]&&c>=m[1]&&c+e<=m[1]+m[3]?(d=b+d-(m[0]+m[2]),b=m[0]+m[2],l=-1):b+d>m[0]&&b+d<=m[0]+m[2]&&c>=m[1]&&c+e<=m[1]+m[3]?(d=m[0]-b,l=-1):b>=m[0]&&b+d<=m[0]+m[2]&&c>=m[1]&&c<m[1]+m[3]?(e=c+e-(m[1]+m[3]),c=m[1]+m[3],l=-1):b>=
m[0]&&b+d<=m[0]+m[2]&&c+e>m[1]&&c+e<=m[1]+m[3]?(e=m[1]-c,l=-1):g[l][0]>=b&&g[l][0]<b+d&&g[l][1]>=c&&g[l][1]+g[l][3]<=c+e?(g[l][2]-=b+d-g[l][0],g[l][0]=b+d,l=-1):g[l][0]+g[l][2]>b&&g[l][0]+g[l][2]<=b+d&&g[l][1]>=c&&g[l][1]+g[l][3]<=c+e?(g[l][2]=b-g[l][0],l=-1):g[l][0]>=b&&g[l][0]+g[l][2]<=b+d&&g[l][1]>=c&&g[l][1]<c+e?(g[l][3]-=c+e-g[l][1],g[l][1]=c+e,l=-1):g[l][0]>=b&&(g[l][0]+g[l][2]<=b+d&&g[l][1]+g[l][3]>c&&g[l][1]+g[l][3]<=c+e)&&(g[l][3]=c-g[l][1],l=-1)}for(l=0;l<k;l++)if(m=g[l],0<d&&0<e&&0<m[2]&&
0<m[3]&&(Math.max(b+d,m[0]+m[2])-Math.min(b,m[0]))*(Math.max(c+e,m[1]+m[3])-Math.min(c,m[1]))<d*e+m[2]*m[3]+50){var k=Math.min(m[0],b),n=Math.min(m[1],c);b=Math.max(b+d,m[0]+m[2])-Math.min(m[0],b);c=Math.max(c+e,m[1]+m[3])-Math.min(m[1],c);g[l][2]=0;g[l][3]=0;return hi(a,k,n,b,c)}g.push([b,c,d,e]);return h}
function ii(a,b,c){if(a.me!==h){a.me=h;if(a instanceof ji)ki(a);else if(a.Xx===h&&c.width===b.width&&c.height===b.height){var d=a.scale,e=y.df(),g=Math.max(b.x,c.x),k=Math.max(b.y,c.y),l=Math.min(b.x+b.width,c.x+c.width),m=Math.min(b.y+b.height,c.y+c.height);e.x=g;e.y=k;e.width=Math.max(0,l-g)*d;e.height=Math.max(0,m-k)*d;if(0<e.width&&0<e.height){if(!a.od&&(a.Ff=s,a.qb!==q&&(a.od=h,Zh(a),Mh(a),a.fd.V()||Rh(a,a.Qe()),l=a.Da,l!==q))){g=l.width;k=l.height;m=a.scale;d=Math.round(Math.round(c.x*m)-Math.round(b.x*
m));b=Math.round(Math.round(c.y*m)-Math.round(b.y*m));c=a.Fw;m=a.sA;c.width=g;c.height=k;var n=Math.max(d,0);c=Math.max(b,0);var p=g-n,r=k-c;m.DE=s;m.CC=s;m.drawImage(l,n,c,p,r,0,0,p,r);a.Xj.Qk(a)&&m.clearRect(0,0,190,70);var l=y.ub(),m=y.ub(),r=Math.abs(d),p=Math.abs(b),t=0===n?0:g-r,n=y.ec(t,0),r=y.ec(r+t,k);m.push([Math.min(n.x,r.x),Math.min(n.y,r.y),Math.abs(n.x-r.x),Math.abs(n.y-r.y)]);var u=a.Xc;u.reset();1!==a.Rb&&u.scale(a.Rb);t=a.nb;(0!==t.x||0!==t.y)&&(isFinite(t.x)&&isFinite(t.y))&&u.translate(-t.x,
-t.y);Ta(n,u);Ta(r,u);l.push([Math.min(n.x,r.x),Math.min(n.y,r.y),Math.abs(n.x-r.x),Math.abs(n.y-r.y)]);t=0===c?0:k-p;n.q(0,t);r.q(g,p+t);m.push([Math.min(n.x,r.x),Math.min(n.y,r.y),Math.abs(n.x-r.x),Math.abs(n.y-r.y)]);Ta(n,u);Ta(r,u);l.push([Math.min(n.x,r.x),Math.min(n.y,r.y),Math.abs(n.x-r.x),Math.abs(n.y-r.y)]);a.Xj.Qk(a)&&(g=0<d?0:-d,k=0<b?0:-b,n.q(g,k),r.q(190+g,70+k),m.push([Math.min(n.x,r.x),Math.min(n.y,r.y),Math.abs(n.x-r.x),Math.abs(n.y-r.y)]),Ta(n,u),Ta(r,u),l.push([Math.min(n.x,r.x),
Math.min(n.y,r.y),Math.abs(n.x-r.x),Math.abs(n.y-r.y)]));y.B(n);y.B(r);!a.Zb&&a.Di&&(Lh(a)||Lh(a));fi(a,l,m,d,b);y.ya(l);y.ya(m);a.od=s}}else a.kc();y.Bc(e)}else a.li();for(a=a.an.k;a.next();)ii(a.value)}}function Vh(a){a.Di===s&&(a.Di=h)}function Kh(a){a.$j===s&&(a.$j=h)}
function Lh(a){var b=a.Da;if(b!==q){var c=a.qb,d=b.width,e=b.height,g=a.rB.copy(),k=s,l=a.al?a.Le:0,m=a.$k?a.Le:0,n=c.clientWidth||b.width+l,c=c.clientHeight||b.height+m;if(n!==b.width+l||c!==b.height+m)a.al=s,a.$k=s,b.width=n,b.height=c,k=h;a.Di=s;if(a.Ut)(d!==b.width||e!==b.height)&&a.li();else{var p=a.eb,r=a.fd,l=r.width,m=r.height,t=p.width,u=p.height,v=r.x,z=p.x,C=r.right,K=p.right,I=r.y,Q=p.y,L=r.bottom,S=p.bottom,r=p="1px",Z=a.scale;n/Z>l&&c/Z>m||(a.zC&&a.Ne&&(t+1<l?(p=(l-t)*Z+b.width+"px",
a.Qi.scrollLeft=(a.position.x-v)*Z):v+1<z?(p=(z-v)*Z+b.width+"px",a.Qi.scrollLeft=a.Qi.scrollWidth-a.Qi.clientWidth):C>K+1&&(p=(C-K)*Z+b.width+"px",a.Qi.scrollLeft=a.position.x*Z)),a.AC&&a.Oe&&(u+1<m?(r=(m-u)*Z+b.height+"px",a.Ri.scrollTop=(a.position.y-I)*Z):I+1<Q?(r=(Q-I)*Z+b.height+"px",a.Ri.scrollTop=a.Ri.scrollHeight-a.Ri.clientHeight):L>S+1&&(r=(L-S)*Z+b.height+"px",a.Ri.scrollTop=a.position.y*Z)));n="1px"!==p;c="1px"!==r;n!==a.$k&&(b.height="1px"===p?b.height+a.Le:Math.max(b.height-a.Le,1),
k=h);a.$k=n;a.Ax.style.width=p;c!==a.al&&(b.width="1px"===r?b.width+a.Le:Math.max(b.width-a.Le,1),k=h);a.al=c;a.Bx.style.height=r;k&&Hh(a);n=b.width;c=b.height;a.Ri.style.height=c+"px";a.Ri.style.width=n+(a.al?a.Le:0)+"px";a.Qi.style.width=n+"px";a.Qi.style.height=c+(a.$k?a.Le:0)+"px";a.zx=s;return d!==n||e!==c?(p=a.eb,a.Zr(g,p,k?h:f),s):h}}}
function ti(a,b){for(var c=a.Ab,d=c.count,e=0;e<d;e++)c.sa(e).name===b&&y.m("Cannot add layer with the name '"+b+"', a layer of the same name is already present in this diagram.")}y.g(E,"addsToTemporaryLayer",E.prototype.hr);y.defineProperty(E,{hr:q},w("Yz"),function(a){y.j(a,"boolean",E,"addsToTemporaryLayer");this.Yz=a});
E.prototype.add=E.prototype.add=function(a){y.l(a,R,E,"add:part");var b=a.h;if(b!==this){b!==q&&y.m("Cannot add part "+a.toString()+" to "+this.toString()+". It is already a part of "+b.toString());var c=this.hr?"Tool":a.ge,b=this.ur(c);b===q&&(b=this.ur(""));b===q&&y.m('Cannot add a Part when unable find a Layer named "'+c+'" and there is no default Layer');a.layer!==b&&(c=a.h===this?b.Ol(99999999,a,h):b.Ol(99999999,a),0<=c&&this.Qc(sd,"parts",b,q,a,q,c),b.cc||this.pc(),a.J(ui),c=a.bo,c!==q&&c(a,
q,b))}};E.prototype.Ol=function(a){if(a instanceof T){if(this.Jt.add(a),a instanceof He){var b=a.bb;b===q?this.mk.add(a):b.Ym.add(a);b=a.Nb;b!==q&&(b.h=this)}}else a instanceof U?this.st.add(a):a instanceof Ge||this.lb.add(a);a.mb&&a.aa();if(b=a.data){a instanceof Ge||(a instanceof U?this.Sj.add(b,a):this.xh.add(b,a));var c=this;vi(a,function(a){wi(c,a)})}(bi(a)===h||ci(a)===h)&&this.yf.add(a);xi(a,h,this);a.yb()&&(a.ua.V()&&this.ta(ih(a,a.ua)),this.pc())};
E.prototype.ze=function(a){a.be();if(a instanceof T){if(this.Jt.remove(a),a instanceof He){var b=a.bb;b===q?this.mk.remove(a):b.Ym.remove(a);b=a.Nb;b!==q&&(b.h=q)}}else a instanceof U?this.st.remove(a):a instanceof Ge||this.lb.remove(a);if(b=a.data){a instanceof Ge||(a instanceof U?this.Sj.remove(b):this.xh.remove(b));var c=this;vi(a,function(a){yi(c,a)})}this.yf.remove(a);a.yb()&&(a.ua.V()&&this.ta(ih(a,a.ua)),this.pc())};
E.prototype.remove=E.prototype.remove=function(a){y.l(a,R,E,"remove:part");a.Wa=s;var b=a.layer;if(b!==q&&b.h===this){a.J(zi);a.El();var c=b.ze(-1,a);0<=c&&this.Qc(td,"parts",b,a,q,c,q);c=a.bo;c!==q&&c(a,b,q);b.cc||this.pc()}};E.prototype.removeParts=E.prototype.oz=function(a,b){for(var c=a.k;c.next();){var d=c.value;d.h===this&&(!b||d.canDelete())&&this.remove(d)}};E.prototype.copyParts=E.prototype.copyParts=function(a,b,c){return this.Pe.copyParts(a,b,c)};
E.prototype.moveParts=E.prototype.moveParts=function(a,b,c){var d=this.pb;if(d!==q&&(d=d.ve,d!==q)){var e=new ma(R,Object);for(a=a.k;a.next();){var g=a.value;g instanceof U?e.add(g,gf()):e.add(g,gf(g.location))}d.moveParts(e,b,c)}};E.prototype.addLayer=E.prototype.er=function(a){y.l(a,pe,E,"addLayer:layer");ti(this,a.name);a.ie(this);var b=this.Ab,c=b.count-1;if(!a.cc)for(;0<=c&&b.sa(c).cc;)c--;b.wd(c+1,a);this.Jd!==q&&this.Qc(sd,"layers",this,q,a,q,c+1);this.pc()};
E.prototype.addLayerBefore=E.prototype.jF=function(a,b){y.l(a,pe,E,"addLayer:layer");y.l(b,pe,E,"addLayerBefore:existingLayer");ti(this,a.name);a.ie(this);for(var c=s,d=this.Ab.count,e=0;e<d;e++)if(this.Ab.sa(e)===b){this.Ab.wd(e,a);c=h;break}c||y.m("addLayerBefore: Existing layer "+b.toString()+" not found.");this.Jd!==q&&this.Qc(sd,"layers",this,q,a,q,e);this.pc()};
E.prototype.addLayerAfter=E.prototype.PH=function(a,b){y.l(a,pe,E,"addLayer:layer");y.l(b,pe,E,"addLayerAfter:existingLayer");ti(this,a.name);a.ie(this);for(var c=s,d=this.Ab.count,e=0;e<d;e++)if(this.Ab.sa(e)===b){this.Ab.wd(e+1,a);c=h;break}c||y.m("addLayerAfter: Existing layer "+b.toString()+" not found.");this.Jd!==q&&this.Qc(sd,"layers",this,q,a,q,e+1);this.pc()};function Ai(a,b,c){y.l(b,pe,E,"addLayer:layer");ti(a,b.name);b.ie(a);a.Ab.wd(c,b);a.Jd!==q&&a.Qc(sd,"layers",a,q,b,q,c);a.pc()}
E.prototype.removeLayer=E.prototype.vD=function(a){if(""!==a.name){var b=this.Ab.indexOf(a);if(this.Ab.remove(a)){for(var c=a.lb.copy().k;c.next();){var d=c.value,e=d.ge;d.ge="";e!==a.name&&(d.ge=e)}this.Jd!==q&&this.Qc(td,"layers",this,a,q,b,q);this.pc()}}};E.prototype.findLayer=E.prototype.ur=function(a){for(var b=this.fv;b.next();){var c=b.value;if(c.name===a)return c}return q};
E.prototype.addChangedListener=E.prototype.ey=function(a){y.j(a,"function",E,"addChangedListener:listener");this.ri===q&&(this.ri=new F("function"));this.ri.add(a)};E.prototype.removeChangedListener=E.prototype.nz=function(a){y.j(a,"function",E,"removeChangedListener:listener");this.ri!==q&&(this.ri.remove(a),0===this.ri.count&&(this.ri=q))};
E.prototype.zu=function(a){this.Xb||this.va.xC(a);a.Yc!==md&&(this.Pl=h);if(this.ri!==q){var b=this.ri,c=b.length;if(1===c)b=b.sa(0),b(a);else if(0!==c)for(var d=b.Ee(),e=0;e<c;e++)b=d[e],b(a)}};E.prototype.raiseChangedEvent=E.prototype.Qc=function(a,b,c,d,e,g,k){g===f&&(g=q);k===f&&(k=q);var l=new ld;l.h=this;l.Yc=a;l.propertyName=b;l.object=c;l.oldValue=d;l.tf=g;l.newValue=e;l.rf=k;this.zu(l)};E.prototype.raiseChanged=E.prototype.i=function(a,b,c,d,e){this.Qc(rd,a,this,b,c,d,e)};
y.A(E,{va:"undoManager"},function(){return this.Jd.va});y.g(E,"skipsUndoManager",E.prototype.Xb);y.defineProperty(E,{Xb:"skipsUndoManager"},w("Ph"),function(a){y.j(a,"boolean",E,"skipsUndoManager");this.Ph=a;this.Jd.Ph=a});
E.prototype.changeState=function(a,b){if(a!==q&&a.h===this){var c=a.Yc;if(c===rd){var c=a.object,d=a.propertyName,e=a.wa(b);y.Oa(c,d,e);c instanceof P&&(c=c.W,c!==q&&c.be())}else if(c===sd)if(e=a.object,d=a.rf,c=a.newValue,e instanceof D){if("number"===typeof d&&c instanceof P){var g=e;b?g.ze(d):g.wd(d,c);c=e.W;c!==q&&c.be()}}else e instanceof pe?(g=a.tf===h,"number"===typeof d&&c instanceof R&&(b?(c.be(),g?e.ze(d,c,g):this.remove(c)):e.Ol(d,c,g))):e instanceof E?"number"===typeof d&&c instanceof
pe&&(b?this.vD(c):Ai(this,c,d)):y.m("unknown ChangedEvent.Insert object: "+a.toString());else c===td?(e=a.object,d=a.tf,c=a.oldValue,e instanceof D?"number"===typeof d&&c instanceof P&&(g=e,b?g.wd(d,c):g.ze(d)):e instanceof pe?(g=a.rf===h,"number"===typeof d&&c instanceof R&&(b?e.Ol(d,c,g):(c.be(),g?e.ze(d,c,g):this.remove(c)))):e instanceof E?"number"===typeof d&&c instanceof pe&&(b?Ai(this,c,d):this.vD(c)):y.m("unknown ChangedEvent.Remove object: "+a.toString())):c!==md&&y.m("unknown ChangedEvent: "+
a.toString())}};E.prototype.startTransaction=E.prototype.lc=function(a){return this.va.lc(a)};E.prototype.commitTransaction=E.prototype.se=function(a){return this.va.se(a)};E.prototype.rollbackTransaction=E.prototype.es=function(){return this.va.es()};E.prototype.updateAllTargetBindings=E.prototype.yJ=function(){for(var a=this.as;a.next();)a.value.zb();for(a=this.uj;a.next();)a.value.zb();for(a=this.links;a.next();)a.value.zb()};
E.prototype.Zr=function(a,b,c){Vh(this);Kh(this);var d=this.Nb;d!==q&&(d.Lr&&!c)&&(a.width!==b.width||a.height!==b.height||isNaN(a.x)&&!isNaN(b.x)||isNaN(a.y&&!isNaN(b.y)))&&d.J();this.Zb||Oh(this);Xh(this);d=this.Ma;this.Lm===h&&d instanceof Ee&&(this.Q.T=this.pE(this.Q.Rc),d.doMouseMove());ii(this,a,b);this.Fa("ViewportBoundsChanged",c?{}:q,a)};
function Xh(a,b){var c=a.Hc;if(c!==q&&c.visible){for(var d=y.Nk(),e=1,g=1,k=c.za.length,l=0;l<k;l++){var m=c.za.n[l],n=m.fi;2>n||("LineV"===m.xb?g=g*n/H.qC(g,n):e=e*n/H.qC(e,n))}k=c.Br;d.q(g*k.width,e*k.height);if(b)l=b.width,m=b.height,g=b.x,k=b.y;else{e=y.df();g=a.eb;e.q(g.x,g.y,g.width,g.height);for(k=a.an.k;k.next();)g=k.value.eb,hb(e,g.x,g.y,g.width,g.height);l=e.width;m=e.height;g=e.x;k=e.y;if(!e.V())return}c.width=l+2*d.width;c.height=m+2*d.height;e=y.M();H.yy(g,k,0,0,d.width,d.height,e);e.offset(-d.width,
-d.height);y.qj(d);c.W.location=e;y.B(e)}}E.prototype.clearSelection=E.prototype.py=function(){var a=0<this.selection.count;a&&this.Fa("ChangingSelection");Ke(this);a&&this.Fa("ChangedSelection")};function Ke(a){a=a.selection;if(0<a.count){for(var b=a.Ee(),c=b.length,d=0;d<c;d++)b[d].Wa=s;a.Pa();a.clear();a.freeze()}}E.prototype.select=E.prototype.select=function(a){if(a!==q&&a.layer.h===this&&(!a.Wa||1<this.selection.count))this.Fa("ChangingSelection"),Ke(this),a.Wa=h,this.Fa("ChangedSelection")};
E.prototype.selectCollection=E.prototype.PD=function(a){this.Fa("ChangingSelection");Ke(this);for(a=a.k;a.next();)a.value.Wa=h;this.Fa("ChangedSelection")};
E.prototype.scroll=function(a,b,c){c===f&&(c=1);var d="up"===b||"down"===b,e;"pixel"===a?e=c:"line"===a?e=c*(d?this.gs:this.fs):"page"===a?(a=d?this.eb.height:this.eb.width,a*=this.scale,0!==a&&(e=Math.max(a-(d?this.gs:this.fs),0),e*=c)):y.m("scrolling unit must be 'pixel', 'line', or 'page', not: "+a);e/=this.scale;c=this.position.copy();"up"===b?c.y=this.position.y-e:"down"===b?c.y=this.position.y+e:"left"===b?c.x=this.position.x-e:"right"===b?c.x=this.position.x+e:y.m("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+
b);this.position=c};E.prototype.scrollToRect=E.prototype.tJ=function(a){var b=this.eb;b.ij(a)||(a=a.ny,a.x-=b.width/2,a.y-=b.height/2,this.position=a)};E.prototype.centerRect=E.prototype.UH=function(a){var b=this.eb;a=a.ny;a.x-=b.width/2;a.y-=b.height/2;this.position=a};E.prototype.transformDocToView=E.prototype.Do=function(a){var b=this.Xc;b.reset();1!==this.Rb&&b.scale(this.Rb);var c=this.nb;(0!==c.x||0!==c.y)&&(isFinite(c.x)&&isFinite(c.y))&&b.translate(-c.x,-c.y);return a.copy().transform(this.Xc)};
function di(a,b){var c=a.Xc,d=b[0],e=b[1],g=d+b[2],k=e+b[3],l=c.m11,m=c.m12,n=c.m21,p=c.m22,r=c.dx,t=c.dy,u=d*l+e*n+r,v=d*m+e*p+t,c=g*l+e*n+r,e=g*m+e*p+t,z=d*l+k*n+r,d=d*m+k*p+t,l=g*l+k*n+r,g=g*m+k*p+t,k=u,m=v,u=Math.min(u,c),k=Math.max(k,c),m=Math.min(m,e),v=Math.max(v,e),u=Math.min(u,z),k=Math.max(k,z),m=Math.min(m,d),v=Math.max(v,d),u=Math.min(u,l),k=Math.max(k,l),m=Math.min(m,g),v=Math.max(v,g);return[u,m,k-u,v-m]}
E.prototype.transformViewToDoc=E.prototype.pE=function(a){var b=this.Xc;b.reset();1!==this.Rb&&b.scale(this.Rb);var c=this.nb;(0!==c.x||0!==c.y)&&(isFinite(c.x)&&isFinite(c.y))&&b.translate(-c.x,-c.y);return Ta(a.copy(),this.Xc)};var Le;E.None=Le=y.w(E,"None",0);var Sh;E.Uniform=Sh=y.w(E,"Uniform",1);var Th;E.UniformToFill=Th=y.w(E,"UniformToFill",2);var Nf;E.CycleAll=Nf=y.w(E,"CycleAll",10);var $f;E.CycleNotDirected=$f=y.w(E,"CycleNotDirected",11);var bg;
E.CycleNotDirectedFast=bg=y.w(E,"CycleNotDirectedFast",12);var cg;E.CycleNotUndirected=cg=y.w(E,"CycleNotUndirected",13);var Of;E.CycleDestinationTree=Of=y.w(E,"CycleDestinationTree",14);var Qf;E.CycleSourceTree=Qf=y.w(E,"CycleSourceTree",15);y.g(E,"validCycle",E.prototype.wE);y.defineProperty(E,{wE:"validCycle"},w("mu"),function(a){var b=this.mu;b!==a&&(y.rb(a,E,E,"validCycle"),this.mu=a,this.i("validCycle",b,a))});y.A(E,{fv:"layers"},function(){return this.Ab.k});y.g(E,"isModelReadOnly",E.prototype.Be);
y.defineProperty(E,{Be:"isModelReadOnly"},function(){var a=this.Jd;return a===q?s:a.Za},function(a){var b=this.Jd;b!==q&&(b.Za=a)});y.g(E,"isReadOnly",E.prototype.Za);y.defineProperty(E,{Za:"isReadOnly"},w("ak"),function(a){var b=this.ak;b!==a&&(y.j(a,"boolean",E,"isReadOnly"),this.ak=a,this.i("isReadOnly",b,a))});y.g(E,"isEnabled",E.prototype.isEnabled);
y.defineProperty(E,{isEnabled:"isEnabled"},w("Dh"),function(a){var b=this.Dh;b!==a&&(y.j(a,"boolean",E,"isEnabled"),this.Dh=a,this.i("isEnabled",b,a))});y.g(E,"allowClipboard",E.prototype.tu);y.defineProperty(E,{tu:"allowClipboard"},w("zs"),function(a){var b=this.zs;b!==a&&(y.j(a,"boolean",E,"allowClipboard"),this.zs=a,this.i("allowClipboard",b,a))});y.g(E,"allowCopy",E.prototype.cj);
y.defineProperty(E,{cj:"allowCopy"},w("Bj"),function(a){var b=this.Bj;b!==a&&(y.j(a,"boolean",E,"allowCopy"),this.Bj=a,this.i("allowCopy",b,a))});y.g(E,"allowDelete",E.prototype.rk);y.defineProperty(E,{rk:"allowDelete"},w("Cj"),function(a){var b=this.Cj;b!==a&&(y.j(a,"boolean",E,"allowDelete"),this.Cj=a,this.i("allowDelete",b,a))});y.g(E,"allowDragOut",E.prototype.uu);
y.defineProperty(E,{uu:"allowDragOut"},w("As"),function(a){var b=this.As;b!==a&&(y.j(a,"boolean",E,"allowDragOut"),this.As=a,this.i("allowDragOut",b,a))});y.g(E,"allowDrop",E.prototype.hy);y.defineProperty(E,{hy:"allowDrop"},w("Bs"),function(a){var b=this.Bs;b!==a&&(y.j(a,"boolean",E,"allowDrop"),this.Bs=a,this.i("allowDrop",b,a))});y.g(E,"allowTextEdit",E.prototype.zn);
y.defineProperty(E,{zn:"allowTextEdit"},w("Lj"),function(a){var b=this.Lj;b!==a&&(y.j(a,"boolean",E,"allowTextEdit"),this.Lj=a,this.i("allowTextEdit",b,a))});y.g(E,"allowGroup",E.prototype.vn);y.defineProperty(E,{vn:"allowGroup"},w("Dj"),function(a){var b=this.Dj;b!==a&&(y.j(a,"boolean",E,"allowGroup"),this.Dj=a,this.i("allowGroup",b,a))});y.g(E,"allowUngroup",E.prototype.An);
y.defineProperty(E,{An:"allowUngroup"},w("Mj"),function(a){var b=this.Mj;b!==a&&(y.j(a,"boolean",E,"allowUngroup"),this.Mj=a,this.i("allowUngroup",b,a))});y.g(E,"allowInsert",E.prototype.tl);y.defineProperty(E,{tl:"allowInsert"},w("Ds"),function(a){var b=this.Ds;b!==a&&(y.j(a,"boolean",E,"allowInsert"),this.Ds=a,this.i("allowInsert",b,a))});y.g(E,"allowLink",E.prototype.ul);
y.defineProperty(E,{ul:"allowLink"},w("Ej"),function(a){var b=this.Ej;b!==a&&(y.j(a,"boolean",E,"allowLink"),this.Ej=a,this.i("allowLink",b,a))});y.g(E,"allowRelink",E.prototype.dj);y.defineProperty(E,{dj:"allowRelink"},w("Gj"),function(a){var b=this.Gj;b!==a&&(y.j(a,"boolean",E,"allowRelink"),this.Gj=a,this.i("allowRelink",b,a))});y.g(E,"allowMove",E.prototype.sk);
y.defineProperty(E,{sk:"allowMove"},w("Fj"),function(a){var b=this.Fj;b!==a&&(y.j(a,"boolean",E,"allowMove"),this.Fj=a,this.i("allowMove",b,a))});y.g(E,"allowReshape",E.prototype.wn);y.defineProperty(E,{wn:"allowReshape"},w("Hj"),function(a){var b=this.Hj;b!==a&&(y.j(a,"boolean",E,"allowReshape"),this.Hj=a,this.i("allowReshape",b,a))});y.g(E,"allowResize",E.prototype.xn);
y.defineProperty(E,{xn:"allowResize"},w("Ij"),function(a){var b=this.Ij;b!==a&&(y.j(a,"boolean",E,"allowResize"),this.Ij=a,this.i("allowResize",b,a))});y.g(E,"allowRotate",E.prototype.yn);y.defineProperty(E,{yn:"allowRotate"},w("Jj"),function(a){var b=this.Jj;b!==a&&(y.j(a,"boolean",E,"allowRotate"),this.Jj=a,this.i("allowRotate",b,a))});y.g(E,"allowSelect",E.prototype.pe);
y.defineProperty(E,{pe:"allowSelect"},w("Kj"),function(a){var b=this.Kj;b!==a&&(y.j(a,"boolean",E,"allowSelect"),this.Kj=a,this.i("allowSelect",b,a))});y.g(E,"allowUndo",E.prototype.iy);y.defineProperty(E,{iy:"allowUndo"},w("Es"),function(a){var b=this.Es;b!==a&&(y.j(a,"boolean",E,"allowUndo"),this.Es=a,this.i("allowUndo",b,a))});y.g(E,"allowZoom",E.prototype.Bn);
y.defineProperty(E,{Bn:"allowZoom"},w("Gs"),function(a){var b=this.Gs;b!==a&&(y.j(a,"boolean",E,"allowZoom"),this.Gs=a,this.i("allowZoom",b,a))});y.g(E,"hasVerticalScrollbar",E.prototype.AC);y.defineProperty(E,{AC:"hasVerticalScrollbar"},w("gt"),function(a){var b=this.gt;b!==a&&(y.j(a,"boolean",E,"hasVerticalScrollbar"),this.gt=a,this.i("hasVerticalScrollbar",b,a),Oh(this))});y.g(E,"hasHorizontalScrollbar",E.prototype.zC);
y.defineProperty(E,{zC:"hasHorizontalScrollbar"},w("ft"),function(a){var b=this.ft;b!==a&&(y.j(a,"boolean",E,"hasHorizontalScrollbar"),this.ft=a,this.i("hasHorizontalScrollbar",b,a),Oh(this))});y.g(E,"allowHorizontalScroll",E.prototype.Ne);y.defineProperty(E,{Ne:"allowHorizontalScroll"},w("Cs"),function(a){var b=this.Cs;b!==a&&(y.j(a,"boolean",E,"allowHorizontalScroll"),this.Cs=a,this.i("allowHorizontalScroll",b,a),Oh(this))});y.g(E,"allowVerticalScroll",E.prototype.Oe);
y.defineProperty(E,{Oe:"allowVerticalScroll"},w("Fs"),function(a){var b=this.Fs;b!==a&&(y.j(a,"boolean",E,"allowVerticalScroll"),this.Fs=a,this.i("allowVerticalScroll",b,a),Oh(this))});y.g(E,"scrollHorizontalLineChange",E.prototype.fs);y.defineProperty(E,{fs:"scrollHorizontalLineChange"},w("Vt"),function(a){var b=this.Vt;b!==a&&(y.j(a,"number",E,"scrollHorizontalLineChange"),0>a&&y.ka(a,">= 0",E,"scrollHorizontalLineChange"),this.Vt=a,this.i("scrollHorizontalLineChange",b,a))});
y.g(E,"scrollVerticalLineChange",E.prototype.gs);y.defineProperty(E,{gs:"scrollVerticalLineChange"},w("Wt"),function(a){var b=this.Wt;b!==a&&(y.j(a,"number",E,"scrollVerticalLineChange"),0>a&&y.ka(a,">= 0",E,"scrollVerticalLineChange"),this.Wt=a,this.i("scrollVerticalLineChange",b,a))});y.g(E,"lastInput",E.prototype.Q);y.defineProperty(E,{Q:"lastInput"},w("$b"),function(a){x&&y.l(a,jd,E,"lastInput");this.$b=a});y.g(E,"firstInput",E.prototype.uc);
y.defineProperty(E,{uc:"firstInput"},w("fg"),function(a){x&&y.l(a,jd,E,"firstInput");this.fg=a});y.g(E,"currentCursor",E.prototype.Nc);y.defineProperty(E,{Nc:"currentCursor"},w("Ss"),function(a){y.j(a,"string",E,"currentCursor");this.Da===q||(this.Ss===a||""===a&&this.Ss===this.fp)||(this.Ss=a,""!==a?(this.Da.style.cursor=a,this.qb.style.cursor=a):(this.Da.style.cursor=this.ty,this.qb.style.cursor=this.ty))});y.g(E,"defaultCursor",E.prototype.ty);
y.defineProperty(E,{ty:"defaultCursor"},w("fp"),function(a){y.j(a,"string",E,"defaultCursor");var b=this.fp;b!==a&&(this.fp=a,this.i("defaultCursor",b,a))});y.g(E,"hasGestureZoom",E.prototype.BG);y.defineProperty(E,{BG:"hasGestureZoom"},w("Ch"),function(a){var b=this.Ch;b!==a&&(y.j(a,"boolean",E,"hasGestureZoom"),this.Ch=a,this.i("hasGestureZoom",b,a))});y.g(E,"click",E.prototype.click);
y.defineProperty(E,{click:"click"},w("uh"),function(a){var b=this.uh;b!==a&&(a!==q&&y.j(a,"function",E,"click"),this.uh=a,this.i("click",b,a))});y.g(E,"doubleClick",E.prototype.Fl);y.defineProperty(E,{Fl:"doubleClick"},w("zh"),function(a){var b=this.zh;b!==a&&(a!==q&&y.j(a,"function",E,"doubleClick"),this.zh=a,this.i("doubleClick",b,a))});y.g(E,"contextClick",E.prototype.qr);
y.defineProperty(E,{qr:"contextClick"},w("vh"),function(a){var b=this.vh;b!==a&&(a!==q&&y.j(a,"function",E,"contextClick"),this.vh=a,this.i("contextClick",b,a))});y.g(E,"mouseOver",E.prototype.Tr);y.defineProperty(E,{Tr:"mouseOver"},w("Jh"),function(a){var b=this.Jh;b!==a&&(a!==q&&y.j(a,"function",E,"mouseOver"),this.Jh=a,this.i("mouseOver",b,a))});y.g(E,"mouseHover",E.prototype.Sr);
y.defineProperty(E,{Sr:"mouseHover"},w("Ih"),function(a){var b=this.Ih;b!==a&&(a!==q&&y.j(a,"function",E,"mouseHover"),this.Ih=a,this.i("mouseHover",b,a))});y.g(E,"mouseHold",E.prototype.Rr);y.defineProperty(E,{Rr:"mouseHold"},w("Hh"),function(a){var b=this.Hh;b!==a&&(a!==q&&y.j(a,"function",E,"mouseHold"),this.Hh=a,this.i("mouseHold",b,a))});y.g(E,"mouseDragOver",E.prototype.gD);
y.defineProperty(E,{gD:"mouseDragOver"},w("Ct"),function(a){var b=this.Ct;b!==a&&(a!==q&&y.j(a,"function",E,"mouseDragOver"),this.Ct=a,this.i("mouseDragOver",b,a))});y.g(E,"mouseDrop",E.prototype.Qr);y.defineProperty(E,{Qr:"mouseDrop"},w("Gh"),function(a){var b=this.Gh;b!==a&&(a!==q&&y.j(a,"function",E,"mouseDrop"),this.Gh=a,this.i("mouseDrop",b,a))});y.g(E,"toolTip",E.prototype.vs);
y.defineProperty(E,{vs:"toolTip"},w("Th"),function(a){var b=this.Th;b!==a&&(a!==q&&y.l(a,Ge,E,"toolTip"),this.Th=a,this.i("toolTip",b,a))});y.g(E,"contextMenu",E.prototype.contextMenu);y.defineProperty(E,{contextMenu:"contextMenu"},w("wh"),function(a){var b=this.wh;b!==a&&(a!==q&&y.l(a,Ge,E,"contextMenu"),this.wh=a,this.i("contextMenu",b,a))});y.g(E,"commandHandler",E.prototype.Pe);
y.defineProperty(E,{Pe:"commandHandler"},w("tw"),function(a){var b=this.tw;b!==a&&(y.l(a,pa,E,"commandHandler"),a.h!==q&&y.m("Cannot share CommandHandlers between Diagrams: "+a.toString()),b!==q&&b.ie(q),this.tw=a,a.ie(this))});y.g(E,"toolManager",E.prototype.pb);y.defineProperty(E,{pb:"toolManager"},w("ju"),function(a){var b=this.ju;b!==a&&(y.l(a,Ee,E,"toolManager"),a.h!==q&&y.m("Cannot share ToolManagers between Diagrams: "+a.toString()),b!==q&&b.ie(q),this.ju=a,a.ie(this))});
y.g(E,"defaultTool",E.prototype.Iu);y.defineProperty(E,{Iu:"defaultTool"},w("Bw"),function(a){var b=this.Bw;b!==a&&(y.l(a,Pe,E,"defaultTool"),this.Bw=a,this.Ma===b&&(this.Ma=a))});y.g(E,"currentTool",E.prototype.Ma);y.defineProperty(E,{Ma:"currentTool"},w("ww"),function(a){var b=this.ww;b!==q&&(b.la&&b.doDeactivate(),b.cancelWaitAfter(),b.doStop());a===q&&(a=this.Iu);a!==q&&(y.l(a,Pe,E,"currentTool"),this.ww=a,a.ie(this),a.doStart())});y.A(E,{selection:"selection"},w("Zt"));
y.g(E,"maxSelectionCount",E.prototype.$C);y.defineProperty(E,{$C:"maxSelectionCount"},w("xt"),function(a){var b=this.xt;if(b!==a)if(y.j(a,"number",E,"maxSelectionCount"),0<=a&&!isNaN(a)){if(this.xt=a,this.i("maxSelectionCount",b,a),!this.va.cb&&(a=this.selection.count-a,0<a)){this.Fa("ChangingSelection");for(var b=this.selection.Ee(),c=0;c<a;c++)b[c].Wa=s;this.Fa("ChangedSelection")}}else y.ka(a,">= 0",E,"maxSelectionCount")});y.g(E,"nodeSelectionAdornmentTemplate",E.prototype.lD);
y.defineProperty(E,{lD:"nodeSelectionAdornmentTemplate"},w("It"),function(a){var b=this.It;b!==a&&(y.l(a,Ge,E,"nodeSelectionAdornmentTemplate"),this.It=a,this.i("nodeSelectionAdornmentTemplate",b,a))});y.g(E,"groupSelectionAdornmentTemplate",E.prototype.vC);y.defineProperty(E,{vC:"groupSelectionAdornmentTemplate"},w("dt"),function(a){var b=this.dt;b!==a&&(y.l(a,Ge,E,"groupSelectionAdornmentTemplate"),this.dt=a,this.i("groupSelectionAdornmentTemplate",b,a))});
y.g(E,"linkSelectionAdornmentTemplate",E.prototype.XC);y.defineProperty(E,{XC:"linkSelectionAdornmentTemplate"},w("rt"),function(a){var b=this.rt;b!==a&&(y.l(a,Ge,E,"linkSelectionAdornmentTemplate"),this.rt=a,this.i("linkSelectionAdornmentTemplate",b,a))});y.g(E,"isModified",E.prototype.Pl);
y.defineProperty(E,{Pl:"isModified"},function(){var a=this.va;return a===q?this.Xw:a.wk!==q?h:this.Xw&&this.Yj!==a.sj},function(a){if(this.Xw!==a){y.j(a,"boolean",E,"isModified");this.Xw=a;var b=this.va;!a&&b&&(this.Yj=b.sj)}});y.g(E,"model",E.prototype.ea);
y.defineProperty(E,{ea:"model"},w("Jd"),function(a){var b=this.Jd;if(b!==a){y.l(a,G,E,"model");b!==q&&(b.va!==a.va&&b.va.KG)&&y.m("Do not replace a Diagram.model while a transaction is in progress.");this.gg=s;this.mp=h;this.Ff=s;var c=this.od;this.od=h;b!==q&&(b.nz(this.LA),b instanceof O&&Bi(this,b.sg),Bi(this,b.Qf));this.Jd=a;a.ey(this.KA);Ci(this,a.Qf);a instanceof O&&Di(this,a.sg);a.nz(this.KA);a.ey(this.LA);this.od=c;this.Zb||this.ta();b!==q&&(a.va.isEnabled=b.va.isEnabled)}});
y.defineProperty(E,{Ra:q},w("EA"),ba("EA"));
function mh(a,b){if(b.ea===a.ea&&a.Ra){a.Ra=s;try{var c=b.Yc,d=b.Ye;if(""!==d)if(c===rd){if("linkFromKey"===d){var e=b.object,g=a.pf(e);if(g!==q){var k=b.newValue,l=a.Kf(k);g.da=l}}else if("linkToKey"===d)e=b.object,g=a.pf(e),g!==q&&(k=b.newValue,l=a.Kf(k),g.fa=l);else if("linkFromPortId"===d){if(e=b.object,g=a.pf(e),g!==q){var m=b.newValue;"string"===typeof m&&(g.Lf=m)}}else if("linkToPortId"===d)e=b.object,g=a.pf(e),g!==q&&(m=b.newValue,"string"===typeof m&&(g.zg=m));else if("nodeGroupKey"===d){var e=
b.object,n=a.pj(e);if(n!==q){var p=b.newValue;if(p!==f){var r=a.Kf(p);n.bb=r instanceof He?r:q}else n.bb=q}}else if("linkLabelKeys"===d){if(e=b.object,g=a.pf(e),g!==q){var t=b.oldValue,u=b.newValue;if(y.isArray(t))for(var v=y.Tb(t),z=0;z<v;z++){var C=y.Gb(t,z),l=a.Kf(C);l!==q&&(l.hd=q)}if(y.isArray(u)){v=y.Tb(u);for(z=0;z<v;z++)C=y.Gb(u,z),l=a.Kf(C),l!==q&&(l.hd=g)}}}else if("nodeParentKey"===d){var K=b.object,I=a.Kf(b.newValue),Q=a.vr(K);if(Q!==q){var L=Q.yr();L!==q?I===q?a.remove(L):a.Dc?L.da=I:
L.fa=I:Ei(a,I,Q)}}else if("parentLinkCategory"===d){var K=b.object,Q=a.vr(K),S=b.newValue;Q!==q&&"string"===typeof S&&(L=Q.yr(),L!==q&&(L.Ac=S))}else if("nodeCategory"===d){var e=b.object,Z=a.pj(e),S=b.newValue;Z!==q&&"string"===typeof S&&(Z.Ac=S)}else if("linkCategory"===d){var e=b.object,X=a.pf(e),S=b.newValue;X!==q&&"string"===typeof S&&(X.Ac=S)}else if("nodeDataArray"===d){a.ta();var ea=b.oldValue;Bi(a,ea);var ia=b.newValue;Ci(a,ia)}else"linkDataArray"===d&&(a.ta(),ea=b.oldValue,Bi(a,ea),ia=b.newValue,
Di(a,ia));a.Pl=h}else if(c===sd)ia=b.newValue,"nodeDataArray"===d&&y.tb(ia)?Fi(a,ia):"linkDataArray"===d&&y.tb(ia)?Gi(a,ia):"linkLabelKeys"===d&&Nd(ia)&&(g=a.pf(b.object),l=a.Kf(ia),g!==q&&l!==q&&(l.hd=g)),a.Pl=h;else if(c===td)ea=b.oldValue,"nodeDataArray"===d&&y.tb(ea)?Hi(a,ea):"linkDataArray"===d&&y.tb(ea)?Hi(a,ea):"linkLabelKeys"===d&&Nd(ea)&&(l=a.Kf(ea),l!==q&&(l.hd=q)),a.Pl=h;else{if(c===md&&"SourceChanged"===d){var n=a.pj(b.object),W=b.propertyName;n!==q&&"string"===typeof W&&(n.zb(W),a.ea instanceof
yd&&(g=a.pf(b.object),g!==q&&g.zb(W)))}}else if(c===rd){var wa=b.propertyName,e=b.object;if(e===a.ea){if("nodeKeyProperty"===wa||"nodeCategoryProperty"===wa||"linkFromKeyProperty"===wa||"linkToKeyProperty"===wa||"linkFromPortIdProperty"===wa||"linkToPortIdProperty"===wa||"nodeIsLinkLabelProperty"===wa||"linkLabelKeysProperty"===wa||"nodeIsGroupProperty"===wa||"nodeGroupKeyProperty"===wa||"nodeParentKeyProperty"===wa||"linkCategoryProperty"===wa)a.va.cb||a.Wl()}else lh(a,e,wa);a.Pl=h}else if(c===sd||
c===td)Ii(a,b),a.Pl=h;else if(c===md){var Oa=b.propertyName;if("S"!==Oa[0]){if("CommittingTransaction"!==Oa&&("FinishedUndo"===Oa||"FinishedRedo"===Oa))a.va.Eh=h,Mh(a),a.va.Eh=s;a.lu=h;a.li();!a.lx&&"CommittedTransaction"===Oa&&(a.lx=h,setTimeout(function(){a.Ma.standardMouseOver();a.lx=s},10))}else"StartingFirstTransaction"===Oa&&(!a.od&&!a.gg)&&(a.lu=h,a.mp&&(a.Ff=h))}}finally{a.Ra=h}}}
function lh(a,b,c){var d=a.pj(b);if(d!==q&&"string"===typeof c)d.zb(c),a.ea instanceof yd&&(b=a.pf(b),b!==q&&b.zb(c));else if("string"===typeof c){d=q;for(a=a.gl.k;a.next();){for(var e=a.value,g=0;g<e.length;g++){var k=e[g];k.zf!==q&&(k=k.zf.wa(b),k!==q&&(d===q&&(d=y.ub()),d.push(k)))}if(d!==q)break}b=d;if(b!==q){for(d=0;d<b.length;d++)b[d].zb(c);y.ya(b)}}}
function Ii(a,b){var c=b.Yc===sd,d=c?b.rf:b.tf,e=c?b.newValue:b.oldValue,g=a.gl.wa(b.object);if(Array.isArray(g))for(var k=0;k<g.length;k++){var l=g[k];"number"===typeof d&&((l.type===zg||l.type===Ch)&&d++,c?y.tb(e)&&(Ji(l,e,d),Ki(l,l)):(l.ze(d),Ki(l,l)))}}function wi(a,b){var c=b.bk;if(y.isArray(c)){var d=a.gl.wa(c);if(d===q)a.gl.add(c,[b]);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}}
function yi(a,b){var c=b.bk;if(y.isArray(c)){var d=a.gl.wa(c);if(d!==q)for(var e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1);0===d.length&&a.gl.remove(c);break}}}
E.prototype.clear=E.prototype.clear=function(){var a=q;this.Hc!==q&&(a=this.Hc.W);this.ea.clear();for(var b=this.Ab.length,c=0;c<b;c++)this.Ab.n[c].clear();this.yf.clear();this.Am.clear();this.Jt.clear();this.mk.clear();this.st.clear();this.lb.clear();this.xh.clear();this.Sj.clear();this.gl.clear();this.Zt.Pa();this.Zt.clear();this.Zt.freeze();this.Hn=this.gz=q;y.nr=q;this.Ws=(new B(NaN,NaN,NaN,NaN)).freeze();a!==q&&(this.add(a),this.lb.remove(a));this.ta()};
E.prototype.reset=E.prototype.reset=function(){this.Zb=h;this.clear();this.Ab=new F(pe);this.nb=(new A(NaN,NaN)).freeze();this.Rb=1;this.zt=1E-4;this.wt=100;this.pu=(new A(NaN,NaN)).freeze();this.bt=(new B(NaN,NaN,NaN,NaN)).freeze();this.Rk=Le;this.Vk=Ib;this.Zj=Le;this.Im=Ib;this.kt=this.jt=Mb;this.Is=(new ab(16,16,16,16)).freeze();this.ot=h;this.mu=Nf;this.fp="auto";this.Jd=this.wh=this.Th=this.Gh=this.Ct=this.Hh=this.Ih=this.Jh=this.vh=this.zh=this.uh=q;this.ak=s;this.Cj=this.Bj=this.zs=this.Dh=
h;this.Bs=this.As=s;this.Fs=this.Cs=this.gt=this.ft=this.Gs=this.Es=this.Kj=this.Jj=this.Ij=this.Hj=this.Fj=this.Gj=this.Ej=this.Ds=this.Mj=this.Dj=this.Lj=h;this.Wt=this.Vt=16;this.ne=(new ab(5)).freeze();this.xt=999999999;this.qd=q;nh(this);oh(this);this.Hc=q;this.ea=new O;this.Ph=h;this.Nb=new ph;this.Zb=this.Ph=s;this.ta()};
E.prototype.rebuildParts=E.prototype.Wl=function(){for(var a=this.kv.k;a.next();){var b=a.value;(!b.Pd()||b instanceof He)&&y.m('Invalid node template in Diagram.nodeTemplateMap: template for "'+a.key+'" must be a Node or a simple Part, not a Group or Link: '+b)}for(a=this.Vu.k;a.next();)b=a.value,b instanceof He||y.m('Invalid group template in Diagram.groupTemplateMap: template for "'+a.key+'" must be a Group, not a normal Node or Link: '+b);for(a=this.gv.k;a.next();)b=a.value,b instanceof U||y.m('Invalid link template in Diagram.linkTemplateMap: template for "'+
a.key+'" must be a Link, not a normal Node or simple Part: '+b);a=y.ub();for(b=this.selection.k;b.next();){var c=b.value.data;c&&a.push(c)}b=this.ea;b instanceof O&&Bi(this,b.sg);Bi(this,b.Qf);Ci(this,b.Qf);b instanceof O&&Di(this,b.sg);for(b=0;b<a.length;b++)if(c=this.pj(a[b]))c.Wa=h;y.ya(a)};
function Ci(a,b){if(b!==q){for(var c=a.ea,d=y.Tb(b),e=0;e<d;e++){var g=y.Gb(b,e);c.te(g)?Fi(a,g,s):c instanceof O&&Gi(a,g)}if(c instanceof O||c instanceof yd){for(e=0;e<d;e++)g=y.Gb(b,e),c.te(g)&&Li(a,g);if(c instanceof O)for(c=a.links;c.next();)Mi(c.value)}Ni(a,s)}}
function Fi(a,b,c){if(!(b===f||b===q)&&!a.va.cb&&!a.xh.contains(b)){c===f&&(c=h);var d=a.getCategoryForNodeData(b),e=a.findTemplateForNodeData(b,d);e instanceof R&&(Je(e),e=e.copy(),e instanceof R&&(e.Cg=d,a.add(e),e.data=b,c&&Li(a,b)))}}E.prototype.getCategoryForNodeData=function(a){var b=this.ea,c=b.getCategoryForNodeData(a),d=s;b instanceof O&&(d=b.Oy(a));d&&""===c&&(c="LinkLabel");return c};
E.prototype.findTemplateForNodeData=function(a,b){var c=s,d=this.ea;d instanceof O&&(c=d.Ky(a));c?(c=this.Vu.wa(b),c===q&&(c=this.Vu.wa(""),c===q&&(y.zE||(y.zE=h,y.trace('No Group template found for category "'+b+'"'),y.trace("  Using default group template")),c=this.jA))):(c=this.kv.wa(b),c===q&&(c=this.kv.wa(""),c===q&&(y.CE||(y.CE=h,y.trace('No Node template found for category "'+b+'"'),y.trace("  Using default node template")),c=this.lA)));return c instanceof R?c:q};
function Li(a,b){var c=a.ea;if(c instanceof O||c instanceof yd){var d=c.sb(b);if(d!==f){var e=Yd(c,d),g=a.vr(b);if(e!==q&&g!==q){for(e=e.k;e.next();){var k=e.value;if(c instanceof O)if(c.te(k)){if(g instanceof He&&c.Tn(k)===d){var l=a.pj(k);l!==q&&(l.bb=g)}}else{if(l=a.pf(k),l!==q){c.Ll(k)===d&&(l.da=g);c.Ml(k)===d&&(l.fa=g);for(var k=c.Ak(k),m=0;m<k.length;m++)if(k[m]===d){g.hd=l;break}}}else c instanceof yd&&(c.te(k)&&c.Vn(k)===d)&&(l=a.vr(k),Ei(a,g,l))}$d(c,d)}c instanceof O?(c=c.Tn(b),c!==f&&
(c=a.Kf(c),c instanceof He&&(g.bb=c))):c instanceof yd&&(c=c.Vn(b),c!==f&&(c=a.Kf(c),Ei(a,c,g)))}}}function Ei(a,b,c){if(!(b===q||c===q)){var d=a.pb.Uy,e=b,g=c;if(a.Dc)for(b=g.Qd;b.next();){var k=b.value;if(k.fa===g)return}else{e=c;g=b;for(b=e.Qd;b.next();)if(k=b.value,k.da===e)return}d!==q&&Pf(d,e,g,q,h)||(d=a.getCategoryForLinkData(c.data),b=a.findTemplateForLinkData(c.data,d),b instanceof U&&(Je(b),b=b.copy(),b instanceof U&&(b.Cg=d,b.da=e,b.fa=g,a.add(b),b.data=c.data)))}}
function Di(a,b){if(b!==q){for(var c=y.Tb(b),d=0;d<c;d++)Gi(a,y.Gb(b,d));Ni(a,s)}}
function Gi(a,b){if(!(b===f||b===q)&&!a.va.cb&&!a.Sj.contains(b)){var c=a.getCategoryForLinkData(b),d=a.findTemplateForLinkData(b,c);if(d instanceof U&&(Je(d),d=d.copy(),d instanceof U)){d.Cg=c;var c=a.ea,e=c.vG(b);""!==e&&(d.Lf=e);e=c.Ll(b);e!==f&&(e=a.Kf(e),e instanceof T&&(d.da=e));e=c.yG(b);""!==e&&(d.zg=e);e=c.Ml(b);e!==f&&(e=a.Kf(e),e instanceof T&&(d.fa=e));c=c.Ak(b);if(y.isArray(c))for(var e=y.Tb(c),g=0;g<e;g++){var k=a.Kf(y.Gb(c,g));k!==q&&(k.hd=d)}a.add(d);d.data=b}}}
E.prototype.getCategoryForLinkData=function(a){var b=this.ea,c="";b instanceof O?c=b.getCategoryForLinkData(a):b instanceof yd&&(c=b.xG(a));return c};E.prototype.findTemplateForLinkData=function(a,b){var c=this.gv.wa(b);c===q&&(c=this.gv.wa(""),c===q&&(y.BE||(y.BE=h,y.trace('No Link template found for category "'+b+'"'),y.trace("  Using default link template")),c=this.kA));return c instanceof U?c:q};function Bi(a,b){for(var c=y.Tb(b),d=0;d<c;d++)Hi(a,y.Gb(b,d))}
function Hi(a,b){if(!(b===f||b===q)){var c=a.pj(b);if(c instanceof R){c.Wa=s;var d=c.layer;if(!(d===q||d.h!==a)){var e=a.ea;if(e instanceof O&&c instanceof T){var g=e.sb(c.data);if(g!==f){for(var k=c.Qd;k.next();){var l=k.value.data;Zd(e,g,l)}c.ii&&(k=c.hd,k!==q&&(l=k.data,Zd(e,g,l)));if(c instanceof He)for(k=c.Ec;k.next();)l=k.value.data,e.te(l)&&Zd(e,g,l)}}else if(e instanceof yd&&c instanceof T){k=a.pf(c.data);if(k!==q&&(k.Wa=s,l=k.layer,l!==q)){var m=l.ze(-1,k);0<=m&&a.Qc(td,"parts",l,k,q,m,q);
m=k.bo;m!==q&&m(k,l,q)}k=a.Dc;for(l=c.Qd;l.next();)m=l.value,m=(k?m.fa:m.da).data,e.te(m)&&Zd(e,g,m)}e=d.ze(-1,c);0<=e&&a.Qc(td,"parts",d,c,q,e,q);e=c.bo;e!==q&&e(c,d,q)}}}}E.prototype.findPartForKey=E.prototype.BI=function(a){if(a===q||a===f)return q;a=this.ea.Te(a);if(a===q)return q;a=this.xh.wa(a);return a instanceof R?a:q};E.prototype.findNodeForKey=E.prototype.Kf=function(a){if(a===q||a===f)return q;a=this.ea.Te(a);if(a===q)return q;a=this.xh.wa(a);return a instanceof T?a:q};
E.prototype.findPartForData=E.prototype.pj=function(a){if(a===q)return q;var b=this.xh.wa(a);if(b instanceof R)return b;b=this.Sj.wa(a);return b instanceof R?b:q};E.prototype.findNodeForData=E.prototype.vr=function(a){if(a===q)return q;a=this.xh.wa(a);return a instanceof T?a:q};E.prototype.findLinkForData=E.prototype.pf=function(a){if(a===q)return q;a=this.Sj.wa(a);return a instanceof U?a:q};y.g(E,"nodeTemplate",E.prototype.$G);
y.defineProperty(E,{$G:"nodeTemplate"},function(){return this.Kh.wa("")},function(a){var b=this.Kh.wa("");b!==a&&(y.l(a,R,E,"nodeTemplate"),this.Kh.add("",a),this.i("nodeTemplate",b,a),this.va.cb||this.Wl())});y.g(E,"nodeTemplateMap",E.prototype.kv);y.defineProperty(E,{kv:"nodeTemplateMap"},w("Kh"),function(a){var b=this.Kh;b!==a&&(y.l(a,ma,E,"nodeTemplateMap"),this.Kh=a,this.i("nodeTemplateMap",b,a),this.va.cb||this.Wl())});y.g(E,"groupTemplate",E.prototype.AG);
y.defineProperty(E,{AG:"groupTemplate"},function(){return this.Vj.wa("")},function(a){var b=this.Vj.wa("");b!==a&&(y.l(a,He,E,"groupTemplate"),this.Vj.add("",a),this.i("groupTemplate",b,a),this.va.cb||this.Wl())});y.g(E,"groupTemplateMap",E.prototype.Vu);y.defineProperty(E,{Vu:"groupTemplateMap"},w("Vj"),function(a){var b=this.Vj;b!==a&&(y.l(a,ma,E,"groupTemplateMap"),this.Vj=a,this.i("groupTemplateMap",b,a),this.va.cb||this.Wl())});y.g(E,"linkTemplate",E.prototype.UG);
y.defineProperty(E,{UG:"linkTemplate"},function(){return this.Gi.wa("")},function(a){var b=this.Gi.wa("");b!==a&&(y.l(a,U,E,"linkTemplate"),this.Gi.add("",a),this.i("linkTemplate",b,a),this.va.cb||this.Wl())});y.g(E,"linkTemplateMap",E.prototype.gv);y.defineProperty(E,{gv:"linkTemplateMap"},w("Gi"),function(a){var b=this.Gi;b!==a&&(y.l(a,ma,E,"linkTemplateMap"),this.Gi=a,this.i("linkTemplateMap",b,a),this.va.cb||this.Wl())});y.g(E,"isMouseCaptured",E.prototype.gd);
y.defineProperty(E,{gd:"isMouseCaptured"},w("CA"),function(a){var b=this.Da;b!==q&&(a?(this.Q.bubbles=s,b.removeEventListener("mousemove",this.mo,s),b.removeEventListener("mousedown",this.lo,s),b.removeEventListener("mouseup",this.oo,s),b.removeEventListener("mousewheel",this.vg,s),b.removeEventListener("DOMMouseScroll",this.vg,s),b.removeEventListener("mouseout",this.no,s),window.addEventListener("mousemove",this.mo,h),window.addEventListener("mousedown",this.lo,h),window.addEventListener("mouseup",
this.oo,h),window.addEventListener("mousewheel",this.vg,h),window.addEventListener("DOMMouseScroll",this.vg,h),window.addEventListener("mouseout",this.no,h),window.addEventListener("selectstart",this.preventDefault,s)):(window.removeEventListener("mousemove",this.mo,h),window.removeEventListener("mousedown",this.lo,h),window.removeEventListener("mouseup",this.oo,h),window.removeEventListener("mousewheel",this.vg,h),window.removeEventListener("DOMMouseScroll",this.vg,h),window.removeEventListener("mouseout",
this.no,h),window.removeEventListener("selectstart",this.preventDefault,s),b.addEventListener("mousemove",this.mo,s),b.addEventListener("mousedown",this.lo,s),b.addEventListener("mouseup",this.oo,s),b.addEventListener("mousewheel",this.vg,s),b.addEventListener("DOMMouseScroll",this.vg,s),b.addEventListener("mouseout",this.no,s)),this.CA=a)});y.g(E,"position",E.prototype.position);
y.defineProperty(E,{position:"position"},w("nb"),function(a){var b=this.nb;if(!b.L(a)){y.l(a,A,E,"position");var c=this.eb.copy();c.x=b.x;c.y=b.y;a=a.copy();b.nj(a)||(this.Zb||this.Da===q||(this.Zb=h,b=this.scale,Qh(this,a,this.fd,this.Da.width/b,this.Da.height/b,this.Vk),this.Zb=s),b=a);this.nb=b.U();this.Zb||this.Zr(c,this.eb)}});y.g(E,"initialPosition",E.prototype.EC);y.defineProperty(E,{EC:"initialPosition"},w("Sw"),function(a){this.Sw.L(a)||(y.l(a,A,E,"initialPosition"),this.Sw=a.U())});
y.g(E,"initialScale",E.prototype.FC);y.defineProperty(E,{FC:"initialScale"},w("Tw"),function(a){this.Tw!==a&&(y.j(a,"number",E,"initialScale"),this.Tw=a)});y.g(E,"grid",E.prototype.Wn);
y.defineProperty(E,{Wn:"grid"},function(){this.Hc===q&&Ih(this);return this.Hc},function(a){var b=this.Hc;if(b!==a){b===q&&(Ih(this),b=this.Hc);y.l(a,D,E,"grid");a.type!==Jh&&y.m("Diagram.grid must be a Panel of type Panel.Grid");var c=b.ha;c!==q&&c.remove(b);this.Hc=a;a.name="GRID";c!==q&&c.add(a);this.ta();this.i("grid",b,a)}});y.A(E,{eb:"viewportBounds"},function(){var a=this.Da,b=this.rB;if(a===q)return b;var c=this.nb,d=this.Rb;b.q(c.x,c.y,Math.max(a.width,0)/d,Math.max(a.height,0)/d);return b});
y.g(E,"fixedBounds",E.prototype.Ay);y.defineProperty(E,{Ay:"fixedBounds"},w("bt"),function(a){var b=this.bt;b.L(a)||(y.l(a,B,E,"fixedBounds"),this.bt=a=a.U(),this.pc(),this.i("fixedBounds",b,a))});y.A(E,{fd:"documentBounds"},w("Ws"));function Rh(a,b){var c=a.Ws;c.L(b)||(b=b.U(),a.Ws=b,a.Ci=s,a.ui=q,Oh(a),a.Fa("DocumentBoundsChanged",q,c.copy()),Vh(a))}y.g(E,"scale",E.prototype.scale);
y.defineProperty(E,{scale:"scale"},w("Rb"),function(a){var b=this.Rb;y.p(a,E,"scale");a<this.Of&&(a=this.Of);a>this.Nf&&(a=this.Nf);if(b!==a){var c=this.Rb=a;if(!this.Zb&&!this.od){this.Zb=h;var d=this.Da;if(d!==q){a=this.eb.copy();var e=d.width/c,g=d.height/c;a.width=d.width/b;a.height=d.height/b;d=this.qh.copy();if(isNaN(d.x))switch(this.Eu){case hc:d.x=0;break;case ic:d.x=e-1;break;case Sb:d.x=e/2;break;case Ib:case kc:d.x=e/2}if(isNaN(d.y))switch(this.Eu){case gc:d.y=0;break;case jc:d.y=g-1;break;
case Sb:d.y=g/2;break;case Ib:case kc:d.y=g/2}var k=this.position,b=new A(k.x+d.x/b-d.x/c,k.y+d.y/b-d.y/c);Qh(this,b,this.fd,e,g,this.Vk);this.position=b;this.Zb=s;this.Zr(a,this.eb)}}this.ta();Vh(this)}});y.g(E,"autoScale",E.prototype.wl);y.defineProperty(E,{wl:"autoScale"},w("Rk"),function(a){var b=this.Rk;b!==a&&(y.rb(a,E,E,"autoScale"),this.Rk=a,this.i("autoScale",b,a),a!==Le&&Oh(this))});y.g(E,"initialAutoScale",E.prototype.GG);
y.defineProperty(E,{GG:"initialAutoScale"},w("Zj"),function(a){var b=this.Zj;b!==a&&(y.rb(a,E,E,"initialAutoScale"),this.Zj=a,this.i("initialAutoScale",b,a))});y.g(E,"initialViewportSpot",E.prototype.GC);y.defineProperty(E,{GC:"initialViewportSpot"},w("kt"),function(a){var b=this.kt;b!==a&&(y.l(a,J,E,"initialViewportSpot"),yb(a)||y.m("initialViewportSpot must be a real Spot: "+a),this.kt=a,this.i("initialViewportSpot",b,a))});y.g(E,"initialDocumentSpot",E.prototype.DC);
y.defineProperty(E,{DC:"initialDocumentSpot"},w("jt"),function(a){var b=this.jt;b!==a&&(y.l(a,J,E,"initialDocumentSpot"),yb(a)||y.m("initialViewportSpot must be a real Spot: "+a),this.jt=a,this.i("initialDocumentSpot",b,a))});y.g(E,"minScale",E.prototype.Of);y.defineProperty(E,{Of:"minScale"},w("zt"),function(a){y.p(a,E,"minScale");var b=this.zt;b!==a&&0<a?(this.zt=a,this.i("minScale",b,a),a>this.scale&&(this.scale=a)):y.ka(a,"> 0",E,"minScale")});y.g(E,"maxScale",E.prototype.Nf);
y.defineProperty(E,{Nf:"maxScale"},w("wt"),function(a){y.p(a,E,"maxScale");var b=this.wt;b!==a&&0<a?(this.wt=a,this.i("maxScale",b,a),a<this.scale&&(this.scale=a)):y.ka(a,"> 0",E,"maxScale")});y.g(E,"zoomPoint",E.prototype.qh);y.defineProperty(E,{qh:"zoomPoint"},w("pu"),function(a){this.pu.L(a)||(y.l(a,A,E,"zoomPoint"),this.pu=a=a.U())});y.g(E,"contentAlignment",E.prototype.Eu);
y.defineProperty(E,{Eu:"contentAlignment"},w("Vk"),function(a){var b=this.Vk;b.L(a)||(y.l(a,J,E,"contentAlignment"),this.Vk=a=a.U(),this.i("contentAlignment",b,a),Oh(this))});y.g(E,"initialContentAlignment",E.prototype.HG);y.defineProperty(E,{HG:"initialContentAlignment"},w("Im"),function(a){var b=this.Im;b.L(a)||(y.l(a,J,E,"initialContentAlignment"),this.Im=a=a.U(),this.i("initialContentAlignment",b,a))});y.g(E,"padding",E.prototype.padding);
y.defineProperty(E,{padding:"padding"},w("ne"),function(a){"number"===typeof a?a=new ab(a):y.l(a,ab,E,"padding");var b=this.ne;b.L(a)||(this.ne=a=a.U(),this.pc(),this.i("padding",b,a))});y.A(E,{uj:"nodes"},function(){return this.Jt.k});y.A(E,{links:"links"},function(){return this.st.k});y.A(E,{as:"parts"},function(){return this.lb.k});E.prototype.findTopLevelGroups=E.prototype.DI=function(){return this.mk.k};y.g(E,"layout",E.prototype.Nb);
y.defineProperty(E,{Nb:"layout"},w("qd"),function(a){var b=this.qd;b!==a&&(y.l(a,ph,E,"layout"),b!==q&&(b.h=q,b.group=q),this.qd=a,a.h=this,a.group=q,this.Hs=h,this.i("layout",b,a),this.kc())});E.prototype.layoutDiagram=E.prototype.WI=function(a){Mh(this);a&&Ni(this,h);Yh(this,s)};function Ni(a,b){for(var c=a.mk.k;c.next();)Oi(a,c.value,b);a.Nb!==q&&(b?a.Nb.Ve=s:a.Nb.J())}function Oi(a,b,c){if(b!==q){for(var d=b.Ym.k;d.next();)Oi(a,d.value,c);b.Nb!==q&&(c?b.Nb.Ve=s:b.Nb.J())}}
function Yh(a,b){for(var c=a.mk.k;c.next();)Pi(a,c.value,b);c=a.Nb;if(c!==q&&!c.Ve){if(b&&!c.Py)return;c.doLayout(a);Mh(a);c.Ve=h}a.Hs=s}function Pi(a,b,c){if(b!==q){for(var d=b.Ym.k;d.next();)Pi(a,d.value,c);d=b.Nb;if(d!==q&&!d.Ve&&(!c||d.Py))b.RA=!b.location.V(),d.doLayout(b),b.J(Qi),d.Ve=h,$h(a,b)}}y.g(E,"isTreePathToChildren",E.prototype.Dc);
y.defineProperty(E,{Dc:"isTreePathToChildren"},w("ot"),function(a){var b=this.ot;if(b!==a&&(y.j(a,"boolean",E,"isTreePathToChildren"),this.ot=a,this.i("isTreePathToChildren",b,a),!this.va.cb))for(a=this.uj;a.next();)Ri(a.value)});E.prototype.findTreeRoots=E.prototype.HI=function(){for(var a=new F(T),b=this.uj.k;b.next();){var c=b.value;c.$n&&c.yr()===q&&a.add(c)}return a.k};y.g(E,"isCollapsingExpanding",E.prototype.xd);y.defineProperty(E,{xd:q},w("zA"),ba("zA"));
function kh(a){function b(a){var b=a.toLowerCase(),k=new F("function");c.add(a,k);c.add(b,k);d.add(a,a);d.add(b,a)}var c=new ma("string",F),d=new ma("string","string");b("BackgroundSingleClicked");b("BackgroundDoubleClicked");b("BackgroundContextClicked");b("ClipboardChanged");b("ClipboardPasted");b("DocumentBoundsChanged");b("ExternalObjectsDropped");b("InitialLayoutCompleted");b("LayoutCompleted");b("LinkDrawn");b("LinkRelinked");b("LinkReshaped");b("ObjectSingleClicked");b("ObjectDoubleClicked");
b("ObjectContextClicked");b("PartCreated");b("PartResized");b("PartRotated");b("SelectionMoved");b("SelectionCopied");b("SelectionDeleting");b("SelectionDeleted");b("SelectionGrouped");b("SelectionUngrouped");b("ChangingSelection");b("ChangedSelection");b("SubGraphCollapsed");b("SubGraphExpanded");b("TextEdited");b("TreeCollapsed");b("TreeExpanded");b("ViewportBoundsChanged");a.Dw=c;a.Cw=d}
function Si(a,b){var c=a.Dw.wa(b);if(c!==q)return c;c=a.Dw.wa(b.toLowerCase());if(c!==q)return c;y.m("Unknown DiagramEvent name: "+b);return q}E.prototype.addDiagramListener=E.prototype.wB=function(a,b){y.j(a,"string",E,"addDiagramListener:name");y.j(b,"function",E,"addDiagramListener:listener");var c=Si(this,a);c!==q&&c.add(b)};
E.prototype.removeDiagramListener=E.prototype.uD=function(a,b){y.j(a,"string",E,"removeDiagramListener:name");y.j(b,"function",E,"addDiagramListener:listener");var c=Si(this,a);c!==q&&c.remove(b)};
E.prototype.raiseDiagramEvent=E.prototype.Fa=function(a,b,c){x&&y.j(a,"string",E,"raiseDiagramEvent:name");var d=Si(this,a),e=new kd;e.h=this;var g=this.Cw.wa(a);a=g!==q?g:this.Cw.wa(a.toLowerCase());e.name=a;b!==f&&(e.Dv=b);c!==f&&(e.ov=c);b=d.length;if(1===b)d=d.sa(0),d(e);else if(0!==b){c=d.Ee();for(a=0;a<b;a++)d=c[a],d(e)}return e.cancel};
function Hf(a,b){var c=s;a.eb.ij(b)&&(c=h);c=a.zy(b,function(a){return a.W},function(a){return a instanceof U},h,function(a){return a instanceof U},c);if(0!==c.count)for(c=c.k;c.next();){var d=c.value;d.kh===xf&&d.Vb()}}
function Ti(a,b,c,d){if(b!==c)if(b.canAvoid()){c=b.uG(d);d=a.sd.yl;b=a.sd.xl;for(var e=c.x+c.width,g=c.y+c.height,k=c.x;k<e;k+=d){for(var l=c.y;l<g;l+=b)Ui(a.sd,k,l);Ui(a.sd,k,g)}for(l=c.y;l<g;l+=b)Ui(a.sd,e,l);Ui(a.sd,e,g)}else if(b instanceof He)for(b=b.Ec;b.next();)e=b.value,e instanceof T&&Ti(a,e,c,d)}function Vi(a,b){if(a.sd!==q&&!a.sd.Gr&&(b===q||b.canAvoid()))a.sd.Gr=h}
E.prototype.simulatedMouseMove=E.prototype.XD=function(a,b,c){if(df!==q){c instanceof E||(c=q);var d=ef,e=df.h;ef=c;if(c!==d){if(d!==q&&d!==e&&d.pb.ve!==q)return d.pb.ve.doSimulatedDragLeave(),s;c!==q&&c.pb.ve!==q&&c.pb.ve.doSimulatedDragEnter()}if(c===q||!c.hy||!c.tl||c.Za||c===e)return s;d=c.pb.ve;d!==q&&(a!==q&&(b=c.Jg(a)),c.$b.T=b,c.$b.mj=s,c.$b.ni=s,d.doSimulatedDragOver());return h}return s};
E.prototype.simulatedMouseUp=E.prototype.YD=function(a,b,c,d){if(df!==q){d===q&&(d=b);b=ef;var e=df.h;if(d!==b){if(b!==q&&b!==e&&b.pb.ve!==q)return b.pb.ve.doSimulatedDragLeave(),s;d!==q&&d.pb.ve!==q&&d.pb.ve.doSimulatedDragEnter()}ef=d;if(d===q)return df.doCancel(),h;if(d!==this)return a!==q&&(c=d.Jg(a)),d.$b.T=c,d.$b.mj=s,d.$b.ni=h,a=d.pb.ve,a!==q&&a.doSimulatedDrop(),a=df,a!==q&&(d=a.mayCopy(),a.Fe=d?"Copy":"Move",a.stopTool()),h}return s};y.g(E,"autoScrollRegion",E.prototype.GB);
y.defineProperty(E,{GB:"autoScrollRegion"},w("Is"),function(a){"number"===typeof a?a=new ab(a):y.l(a,ab,E,"autoScrollRegion");var b=this.Is;b.L(a)||(this.Is=a=a.U(),this.pc(),this.i("autoScrollRegion",b,a))});function Ff(a,b){a.pw=a.Do(b);Wi(a,a.pw).di(a.position)?hf(a):Xi(a)}
function Xi(a){if(a.Ag===q){a.Ag={};var b;b=a.Ma!==a.pb.ve?a.QE:a.RE;a.Ag.isEnabled=h;var c=setInterval(function(){var b=c;a.Ag!==q&&a.Ag.isEnabled&&(a.Ag=q,clearInterval(b),b=Wi(a,a.pw),b.di(a.position)||(a.position=b,a.Q.T=a.pE(a.pw),a.Ma.doMouseMove(),a.Ci=h,Rh(a,a.Qe()),a.me=h,a.li(),Xi(a)))},b);a.Ag.id=c}}function hf(a){a.Ag!==q&&(a.Ag.isEnabled&&clearInterval(a.Ag.id),a.Ag=q)}
function Wi(a,b){var c=a.position,d=a.GB;if(0>=d.top&&0>=d.left&&0>=d.right&&0>=d.bottom)return c;var e=a.eb,g=a.scale,e=y.xj(0,0,e.width*g,e.height*g),k=y.ec(0,0);if(b.x>=e.x&&b.x<e.x+d.left){var l=Math.max(a.fs,1),l=l|0;k.x-=l;b.x<e.x+d.left/2&&(k.x-=l);b.x<e.x+d.left/4&&(k.x-=4*l)}else b.x<=e.x+e.width&&b.x>e.x+e.width-d.right&&(l=Math.max(a.fs,1),l|=0,k.x+=l,b.x>e.x+e.width-d.right/2&&(k.x+=l),b.x>e.x+e.width-d.right/4&&(k.x+=4*l));b.y>=e.y&&b.y<e.y+d.top?(l=Math.max(a.gs,1),l|=0,k.y-=l,b.y<e.y+
d.top/2&&(k.y-=l),b.y<e.y+d.top/4&&(k.y-=4*l)):b.y<=e.y+e.height&&b.y>e.y+e.height-d.bottom&&(l=Math.max(a.gs,1),l|=0,k.y+=l,b.y>e.y+e.height-d.bottom/2&&(k.y+=l),b.y>e.y+e.height-d.bottom/4&&(k.y+=4*l));k.di(H.Aj)||(c=new A(c.x+k.x/g,c.y+k.y/g));y.Bc(e);y.B(k);return c}E.prototype.makeImage=E.prototype.YI=function(a){var b=document.createElement("img");b.src=this.VG(a);return b instanceof HTMLImageElement?b:q};
E.prototype.makeImageData=E.prototype.VG=function(a){this.li();if(this.Da===q)return"";a===f&&(a={});"object"!==typeof a&&y.m("properties argument must be an Object.");var b=s,c=a.size||q,d=a.scale||q,e=a.maxSize||new ha(2E3,2E3);a.maxSize===f&&(b=h);var g=a.position||q,k=a.parts||q,l=a.padding||1,m=a.background||q,n=a.omitTemporary;n===f&&(n=h);var p=a.showTemporary;p===f&&(p=!n);n=a.showGrid;n===f&&(n=p);c!==q&&(isNaN(c.width)&&isNaN(c.height))&&(c=q);l&&"number"===typeof l&&(l=new ab(l));l||(l=
new ab(0));l.left=Math.max(l.left,0);l.right=Math.max(l.right,0);l.top=Math.max(l.top,0);l.bottom=Math.max(l.bottom,0);this.Ys=s;Hh(this);var r=document.createElement("canvas"),t=r.getContext("2d");if(!c&&!d&&!k&&!g)return r.width=this.Da.width+Math.ceil(l.left+l.right),r.height=this.Da.height+Math.ceil(l.top+l.bottom),gi(this,t,l,new ha(r.width,r.height),this.Rb,this.nb,k,m,p,n),this.Ys=h,r.toDataURL(a.type,a.details);var u,v=new A(0,0);u=this.fd.copy();u.zH(this.padding);g!==q&&g.V()?(v=g,d||(d=
1)):(v.x=u.x,v.y=u.y);u.width-=v.x;u.height-=v.y;if(k){var z,g=h,k=k.k;for(k.reset();k.next();){var C=k.value;if(C instanceof R){var K=C.layer;if(!K||K.visible)if((!K||!K.cc)&&C.yb())C=C.ua,C.V()&&(g?(g=s,z=C.copy()):z.zj(C))}}g&&(z=new B(0,0,0,0));u.width=z.width;u.height=z.height;v.x=z.x;v.y=z.y}g=z=0;l&&(z=l.left+l.right,g=l.top+l.bottom);C=K=0;c&&(K=c.width,C=c.height,isFinite(K)&&(K=Math.max(0,K-z)),isFinite(C)&&(C=Math.max(0,C-g)));c&&d?c.V()?(c=K,u=C):isNaN(C)?(c=K,u=u.height*d):(c=u.width*
d,u=C):c?c.V()?(d=Math.min(K/u.width,C/u.height),c=K,u=C):isNaN(C)?(d=K/u.width,c=K,u=u.height*d):(d=C/u.height,c=u.width*d,u=C):d?(c=u.width*d,u=u.height*d):(d=1,c=u.width,u=u.height);l?(c+=z,u+=g):l=new ab(0);if(e){z=e.width;e=e.height;if(b&&!y.yE&&(c>z||u>e))x.trace("Diagram.makeImage(data): Diagram width or height is larger than the default max size. ("+c+"x"+u+" vs 2000x2000) Consider increasing the max size."),y.yE=h;isNaN(z)&&(z=2E3);isNaN(e)&&(e=2E3);isFinite(z)&&(c=Math.min(c,z));isFinite(e)&&
(u=Math.min(u,e))}r.width=Math.ceil(c);r.height=Math.ceil(u);gi(this,t,l,new ha(Math.ceil(c),Math.ceil(u)),d,v,k,m,p,n);this.Ys=h;return r.toDataURL(a.type,a.details)};E.inherit=function(a,b){y.j(a,"function",E,"inherit");y.j(b,"function",E,"inherit");y.Ka(a,b)};function Yi(a){1<arguments.length&&y.m("Palette constructor can only take one optional argument, the DIV HTML element or its id.");E.call(this,a);this.uu=h;this.sk=s;this.Za=h;this.Eu=Ob;this.Nb=new Zi}y.ba("Palette",Yi);y.Ka(Yi,E);
function ji(a){1<arguments.length&&y.m("Overview constructor can only take one optional argument, the DIV HTML element or its id.");E.call(this,a);this.Zb=h;this.Lh=q;this.Zs=h;var b=new R,c=new V;c.stroke="magenta";c.jb=2;c.fill=q;c.name="BOXSHAPE";b.ks="BOXSHAPE";b.hv="BOXSHAPE";b.add(c);this.mm=b;this.Nx=document.createElement("canvas");this.cF=this.Nx.getContext("2d");b=new $i;b.ie(this);this.pb.Ze.wd(0,b);var d=this;this.nD=function(){aj(d)};this.mD=function(){d.Lh!==q&&(d.pc(),d.ta())};this.Za=
h;this.pe=s;this.wl=Sh;this.pb.Ul=Re;this.Zb=s}y.ba("Overview",ji);y.Ka(ji,E);
function ki(a){!a.Zb&&!a.od&&a.Ff===s&&(a.Ff=h,requestAnimationFrame(function(){if(a.Ff&&!a.od&&(a.Ff=s,a.qb!==q)){a.od=h;Mh(a);a.fd.V()||Rh(a,a.Qe());a.qb===q&&y.m("No div specified");a.Da===q&&y.m("No canvas specified");if(a.me&&a.Lh!==q){var b=a.si,c=a.Nx;b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,a.Da.width,a.Da.height);b.drawImage(c,0,0);c=a.Xc;c.reset();1!==a.Rb&&c.scale(a.scale);(0!==a.position.x||0!==a.position.y)&&c.translate(-a.nb.x,-a.nb.y);b.setTransform(c.m11,c.m12,c.m21,c.m22,c.dx,
c.dy);for(var c=a.Ab.length,d=0;d<c;d++)a.Ab.n[d].we(b,a);a.$j=s;a.me=s}a.od=s}}))}
ji.prototype.we=function(){this.qb===q&&y.m("No div specified");this.Da===q&&y.m("No canvas specified");if(this.me){var a=this.Lh;if(a!==q){var b=a.Wn;(b&&b.visible&&isNaN(b.width)||isNaN(b.height))&&Xh(a);var c=this.Da,b=this.si,d=this.Nx,e=this.cF;d.width=c.width;d.height=c.height;b.jw="";b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,this.Da.width,this.Da.height);var g=this.Xc;g.reset();1!==this.Rb&&g.scale(this.scale);(0!==this.position.x||0!==this.position.y)&&g.translate(-this.nb.x,-this.nb.y);
b.setTransform(g.m11,g.m12,g.m21,g.m22,g.dx,g.dy);for(var k=this.Zs,l=this.eb,m=a.Ab.length,g=0;g<m;g++){var n=a.Ab.n[g],p=b,r=l,t=k;t===f&&(t=h);if(t||!n.cc)for(var n=n.lb,t=this.scale,u=n.length,v=0;v<u;v++){var z=n.n[v],C=z.ua;C.qf(r)&&(1<C.width*t||1<C.height*t?z.we(p,this):gh(z,p))}}e.drawImage(c,0,0);x&&x.my&&(e.fillStyle="red",e.fillRect(0,d.height/2,d.width,4));a=this.Ab.length;for(g=0;g<a;g++)this.Ab.n[g].we(b,this);this.me=this.$j=s}}};y.g(ji,"observed",ji.prototype.aH);
y.defineProperty(ji,{aH:"observed"},w("Lh"),function(a){var b=this.Lh;a!==q&&y.l(a,E,ji,"observed");b!==a&&!(a instanceof ji)&&(b!==q&&(this.remove(this.If),b.uD("ViewportBoundsChanged",this.nD),b.uD("DocumentBoundsChanged",this.mD),b.an.remove(this)),this.Lh=a,a!==q&&(a.wB("ViewportBoundsChanged",this.nD),a.wB("DocumentBoundsChanged",this.mD),a.an.add(this),this.add(this.If),aj(this)),this.pc(),this.i("observed",b,a))});y.g(ji,"box",ji.prototype.If);
y.defineProperty(ji,{If:"box"},w("mm"),function(a){var b=this.mm;b!==a&&(this.mm=a,this.i("box",b,a))});y.g(ji,"drawsTemporaryLayers",ji.prototype.mG);y.defineProperty(ji,{mG:"drawsTemporaryLayers"},w("Zs"),function(a){this.Zs!==a&&(this.Zs=a,this.mz())});function aj(a){var b=a.If;if(b!==q){var c=a.Lh;if(c!==q){a.me=h;var c=c.eb,d=b.js,e=y.Nk();e.q(c.width,c.height);d.Aa=e;y.qj(e);a=2/a.scale;d instanceof V&&(d.jb=a);b.location=new A(c.x-a/2,c.y-a/2)}}}
ji.prototype.Qe=function(){var a=this.Lh;return a===q?H.OE:a.fd};ji.prototype.Zr=function(a){this.Zb||(Kh(this),this.ta(),Vh(this),this.pc(),aj(this),this.Fa("ViewportBoundsChanged",a))};function $i(){Pe.call(this);this.name="MoveBox"}y.Ka($i,Pe);$i.prototype.doStart=function(){this.la=this.h.gd=h};$i.prototype.doMouseMove=function(){if(this.la){var a=this.h;if(!(a===q||a.Lh===q)){var b=a.Lh,c=b.eb,d=a.Q.T;b.position=new A(d.x-c.width/2,d.y-c.height/2);a.kc()}}};
$i.prototype.doMouseUp=function(){this.la&&this.doMouseMove();this.stopTool()};$i.prototype.doStop=function(){this.la=s;var a=this.h;a.gd=s;aj(a)};
function Gd(a){1<arguments.length&&y.m("Brush constructor can take at most one optional argument, the Brush type.");y.mc(this);this.$a=s;a===f?(this.Y=Id,this.pm="black"):"string"===typeof a?(this.Y=Id,this.pm=a):(x&&y.rb(a,Gd,Gd,"constructor:type"),this.Y=a,this.pm="black");var b=this.Y;b===Jd?(this.kn=Ob,this.Cm=Wb):this.Cm=b===Kd?this.kn=Sb:this.kn=Hb;this.bu=0;this.$s=NaN;this.bA=this.cA=this.cg=this.Rt=this.bg=q}y.ba("Brush",Gd);var Id;Gd.Solid=Id=y.w(Gd,"Solid",0);var Jd;
Gd.Linear=Jd=y.w(Gd,"Linear",1);var Kd;Gd.Radial=Kd=y.w(Gd,"Radial",2);var bj;Gd.Pattern=bj=y.w(Gd,"Pattern",2);Gd.prototype.copy=function(){var a=new Gd;a.Y=this.Y;a.pm=this.pm;a.kn=this.kn;a.Cm=this.Cm;a.bu=this.bu;a.$s=this.$s;this.bg!==q&&(a.bg=this.bg.copy());a.Rt=this.Rt;return a};Gd.prototype.Ja=function(){this.freeze();Object.freeze(this);return this};Gd.prototype.freeze=function(){this.$a=h;this.bg!==q&&this.bg.freeze();return this};
Gd.prototype.Pa=function(){Object.isFrozen(this)&&y.m("cannot thaw constant: "+this);this.$a=s;this.bg!==q&&this.bg.Pa();return this};Gd.prototype.toString=function(){var a="Brush(";if(this.type===Id)a+=this.color;else if(a=this.type===Jd?a+"Linear ":this.type===Kd?a+"Radial ":this.type===bj?a+"Pattern ":a+"(unknown) ",a+=this.start+" "+this.end,this.Fn!==q)for(var b=this.Fn.k;b.next();)a+=" "+b.key+":"+b.value;return a+")"};
Gd.prototype.addColorStop=Gd.prototype.addColorStop=function(a,b){y.K(this);("number"!==typeof a||!isFinite(a)||1<a||0>a)&&y.ka(a,"0 <= loc <= 1",Gd,"addColorStop:loc");y.j(b,"string",Gd,"addColorStop:color");this.bg===q&&(this.bg=new ma("number","string"));this.bg.add(a,b);this.Y===Id&&(this.type=Jd);this.cg=q};y.g(Gd,"type",Gd.prototype.type);
y.defineProperty(Gd,{type:"type"},w("Y"),function(a){y.K(this,a);y.rb(a,Gd,Gd,"type");this.Y=a;Cb(this.start)&&(a===Jd?this.start=Ob:a===Kd&&(this.start=Sb));Cb(this.end)&&(a===Jd?this.end=Wb:a===Kd&&(this.end=Sb));this.cg=q});y.g(Gd,"color",Gd.prototype.color);y.defineProperty(Gd,{color:"color"},w("pm"),function(a){y.K(this,a);y.j(a,"string",Gd,"color");this.pm=a;this.cg=q});y.g(Gd,"start",Gd.prototype.start);
y.defineProperty(Gd,{start:"start"},w("kn"),function(a){y.K(this,a);a instanceof J||y.Jb(a,"Spot",Gd,"start");this.kn=a.U();this.cg=q});y.g(Gd,"end",Gd.prototype.end);y.defineProperty(Gd,{end:"end"},w("Cm"),function(a){y.K(this,a);a instanceof J||y.Jb(a,"Spot",Gd,"end");this.Cm=a.U();this.cg=q});y.g(Gd,"startRadius",Gd.prototype.Co);y.defineProperty(Gd,{Co:"startRadius"},w("bu"),function(a){y.K(this,a);y.p(a,Gd,"startRadius");0>a&&y.ka(a,">= zero",Gd,"startRadius");this.bu=a;this.cg=q});
y.g(Gd,"endRadius",Gd.prototype.Ln);y.defineProperty(Gd,{Ln:"endRadius"},w("$s"),function(a){y.K(this,a);y.p(a,Gd,"endRadius");0>a&&y.ka(a,">= zero",Gd,"endRadius");this.$s=a;this.cg=q});y.g(Gd,"colorStops",Gd.prototype.Fn);y.defineProperty(Gd,{Fn:"colorStops"},w("bg"),function(a){y.K(this,a);x&&y.l(a,ma,Gd,"colorStops");this.bg=a;this.cg=q});y.g(Gd,"pattern",Gd.prototype.pattern);y.defineProperty(Gd,{pattern:"pattern"},w("Rt"),function(a){y.K(this,a);this.Rt=a;this.cg=q});
Gd.randomColor=function(a,b){a===f&&(a=128);x&&(y.p(a,Gd,"randomColor:min"),(0>a||255<a)&&y.ka(a,"0 <= min <= 255",Gd,"randomColor:min"));b===f&&(b=Math.max(a,255));x&&(y.p(b,Gd,"randomColor:max"),(b<a||255<b)&&y.ka(b,"min <= max <= 255",Gd,"randomColor:max"));var c=Math.abs(b-a),d=Math.floor(a+Math.random()*c).toString(16),e=Math.floor(a+Math.random()*c).toString(16),c=Math.floor(a+Math.random()*c).toString(16);2>d.length&&(d="0"+d);2>e.length&&(e="0"+e);2>c.length&&(c="0"+c);return"#"+d+e+c};
function P(){y.mc(this);this.na=30723;this.Nh=q;this.Fb="";this.Ge=this.Uc=q;this.nb=(new A(NaN,NaN)).freeze();this.He=(new ha(NaN,NaN)).freeze();this.Hd=H.ys;this.Ki=H.NE;this.Xc=new ka;this.km=new ka;this.dk=new ka;this.Rb=1;this.lm=0;this.Vg=Bg;this.Up=H.Ko;this.wc=(new B(NaN,NaN,NaN,NaN)).freeze();this.Pb=(new B(NaN,NaN,NaN,NaN)).freeze();this.Jc=(new B(0,0,NaN,NaN)).freeze();this.Uq=this.np=this.P=this.oq=this.Kd=q;this.Vq=this.op=Infinity;this.Qo=this.Ud=Ib;this.zq=0;this.lk=1;this.Wo=0;this.Pj=
1;this.Cq=-Infinity;this.Bq=0;this.Dq=H.Aj;this.Eq=cj;this.bp="";this.nl=this.Oj=this.Wk=this.rc=this.O=q}y.ba("GraphObject",P);
P.prototype.cloneProtected=function(a){a.na=this.na|6144;a.Fb=this.Fb;a.Uc=this.Uc;a.Ge=this.Ge;a.nb.assign(this.nb);a.He.assign(this.He);a.Hd=this.Hd.U();a.Ki=this.Ki.U();a.dk=this.dk.copy();a.Rb=this.Rb;a.lm=this.lm;a.Vg=this.Vg;a.Up=this.Up.U();a.wc.assign(this.wc);a.Pb.assign(this.Pb);a.Jc.assign(this.Jc);a.oq=this.oq;a.Ud=this.Ud.U();a.Qo=this.Qo.U();a.zq=this.zq;a.lk=this.lk;a.Wo=this.Wo;a.Pj=this.Pj;a.Cq=this.Cq;a.Bq=this.Bq;a.Dq=this.Dq.U();a.Eq=this.Eq;a.bp=this.bp;if(this.O!==q){var b=this.O;
a.O={uh:b.uh,zh:b.zh,vh:b.vh,eq:b.eq,fq:b.fq,Jh:b.Jh,Ih:b.Ih,Hh:b.Hh,cq:b.cq,dq:b.dq,Gh:b.Gh,Mo:b.Mo,No:b.No,Oo:b.Oo,Lo:b.Lo,Th:b.Th,wh:b.wh}}this.P!==q&&(b=this.P,a.P={zi:b.zi.U(),Zi:b.Zi.U(),xi:b.xi,Xi:b.Xi,wi:b.wi,Wi:b.Wi,yi:b.yi,Yi:b.Yi});a.np=this.np;a.op=this.op;a.Uq=this.Uq;a.Vq=this.Vq;a.rc=this.rc;if(Array.isArray(this.Wk)){a.Wk=this.Wk.slice(0);for(b=0;b<this.Wk.length;b++){var c=this.Wk[b];a[c]=this[c]}}this.Oj!==q&&(a.Oj=this.Oj.copy())};P.prototype.bh=function(a){a.Kd=q;a.nl=q;a.aa()};
P.prototype.copy=function(){var a=new this.constructor;this.cloneProtected(a);return a};P.prototype.toString=function(){return y.dh(Object.getPrototypeOf(this))+"#"+y.bc(this)};var dj;P.None=dj=y.w(P,"None",0);var Bg;P.Default=Bg=y.w(P,"Default",0);var ej;P.Vertical=ej=y.w(P,"Vertical",4);var fj;P.Horizontal=fj=y.w(P,"Horizontal",5);var qc;P.Fill=qc=y.w(P,"Fill",3);var Cg;P.Uniform=Cg=y.w(P,"Uniform",1);var Dg;P.UniformToFill=Dg=y.w(P,"UniformToFill",2);
function gj(a){a.O={uh:q,zh:q,vh:q,eq:q,fq:q,Jh:q,Ih:q,Hh:q,cq:q,dq:q,Gh:q,Mo:q,No:q,Oo:q,Lo:q,Th:q,wh:q}}da=P.prototype;da.fe=function(){this.P={zi:Hb,Zi:Hb,xi:10,Xi:10,wi:hj,Wi:hj,yi:0,Yi:0}};
function ij(a,b,c,d,e,g,k){var l=0.001,m=g.length;a.moveTo(b,c);d-=b;l=e-c;0===d&&(d=0.001);e=l/d;for(var n=Math.sqrt(d*d+l*l),p=0,r=h,t=0===k?s:h;0.1<=n;){if(t){l=g[p++%m];for(l-=k;0>l;)l+=g[p++%m],r=!r;t=s}else l=g[p++%m];l>n&&(l=n);var u=Math.sqrt(l*l/(1+e*e));0>d&&(u=-u);b+=u;c+=e*u;r?a.lineTo(b,c):a.moveTo(b,c);n-=l;r=!r}}
da.Qc=function(a,b,c,d,e,g,k){var l=this.W;if(l!==q&&(l.Vl(a,b,c,d,e,g,k),0!==(this.na&1024)&&(c===this&&a===rd)&&(a=this.Rn(),a!==q)))for(c=this.rc.k;c.next();)d=c.value,e=a.data,g=d.rs,g!==q&&(e=a.xe(g)),e!==q&&(d.uE(this,e,b,g!==q?q:l.h),g!==q&&(e=a,""!==g&&(e=a.xe(g)),e!==q&&(g=d.Zl,k=a,""!==g&&(k=a.xe(g)),k!==q&&d.vE(k,e,b))))};da.i=function(a,b,c){this.Qc(rd,a,this,b,c)};
function jj(a,b,c,d,e){var g=a.wc,k=a.dk;k.reset();kj(a,k,b,c,d,e);a.dk=k;g.x=b;g.y=c;g.width=d;g.height=e;k.Ir()||k.oE(g)}function lj(a,b,c,d){if(a.$e===s)return s;d.multiply(a.transform);return c?a.qf(b,d):a.Bl(b,d)}
da.jC=function(a,b,c){if(this.$e===s)return s;var d=this.Ta;b=a.xk(b);var e=s;c&&(e=Ua(a.x,a.y,0,0,0,d.height)<b||Ua(a.x,a.y,0,d.height,d.width,d.height)<b||Ua(a.x,a.y,d.width,d.height,d.width,0)<b||Ua(a.x,a.y,d.width,0,0,0)<b);c||(e=Ua(a.x,a.y,0,0,0,d.height)<b&&Ua(a.x,a.y,0,d.height,d.width,d.height)<b&&Ua(a.x,a.y,d.width,d.height,d.width,0)<b&&Ua(a.x,a.y,d.width,0,0,0)<b);return e};da.mi=ca(h);
P.prototype.containsPoint=P.prototype.Ea=function(a){x&&y.l(a,A,P,"containsPoint:p");var b=y.M();b.assign(a);this.transform.Qa(b);var c=this.ua;if(!c.V())return s;if(y.zz){var d=this.Ta,e=this.rj()*(this.h!==q?this.h.scale:1),g=1/e;if(10>d.width*e&&10>d.height*e)return a=kb(c.x-5*g,c.y-5*g,c.width+10*g,c.height+10*g,b.x,b.y),y.B(b),a}if(this.zc!==f||this instanceof V?kb(c.x-5,c.y-5,c.width+10,c.height+10,b.x,b.y):c.Ea(b)){if(this.Oj&&!this.Oj.Ea(b))return s;if(this.Ge!==q&&c.Ea(b)||this.Uc!==q&&this.Jc.Ea(a))return h;
y.B(b);return this.hj(a)}y.B(b);return s};P.prototype.hj=function(a){var b=this.Ta;return kb(0,0,b.width,b.height,a.x,a.y)};P.prototype.containsRect=P.prototype.ij=function(a){x&&y.l(a,B,P,"containsRect:r");if(0===this.angle)return this.ua.ij(a);var b=this.Ta,b=y.xj(0,0,b.width,b.height),c=this.transform,d=s,e=y.ec(a.x,a.y);b.Ea(c.gi(e))&&(e.q(a.x,a.bottom),b.Ea(c.gi(e))&&(e.q(a.right,a.bottom),b.Ea(c.gi(e))&&(e.q(a.right,a.y),b.Ea(c.gi(e))&&(d=h))));y.B(e);y.Bc(b);return d};
P.prototype.containedInRect=P.prototype.Bl=function(a,b){x&&y.l(a,B,P,"containedInRect:r");if(b===f)return a.ij(this.ua);var c=this.Ta,d=s,e=y.ec(0,0);a.Ea(b.Qa(e))&&(e.q(0,c.height),a.Ea(b.Qa(e))&&(e.q(c.width,c.height),a.Ea(b.Qa(e))&&(e.q(c.width,0),a.Ea(b.Qa(e))&&(d=h))));return d};
P.prototype.intersectsRect=P.prototype.qf=function(a,b){x&&y.l(a,B,P,"intersectsRect:r");if(b===f&&(b=this.transform,0===this.angle))return a.qf(this.ua);var c=this.Ta,d=b,e=y.ec(0,0),g=y.ec(0,c.height),k=y.ec(c.width,c.height),l=y.ec(c.width,0),m=s;if(a.Ea(d.Qa(e))||a.Ea(d.Qa(g))||a.Ea(d.Qa(k))||a.Ea(d.Qa(l)))m=h;else{var c=y.xj(0,0,c.width,c.height),n=y.ec(a.x,a.y);c.Ea(d.gi(n))?m=h:(n.q(a.x,a.bottom),c.Ea(d.gi(n))?m=h:(n.q(a.right,a.bottom),c.Ea(d.gi(n))?m=h:(n.q(a.right,a.y),c.Ea(d.gi(n))&&(m=
h))));y.B(n);y.Bc(c);if(!m&&(H.Yu(a,e,g)||H.Yu(a,g,k)||H.Yu(a,k,l)||H.Yu(a,l,e)))m=h}y.B(e);y.B(g);y.B(k);y.B(l);return m};P.prototype.getDocumentPoint=P.prototype.hb=function(a,b){b===f&&(b=new A);Cb(a)&&y.m("Spot must be real");var c=this.Ta;b.q(a.x*c.width+a.offsetX,a.y*c.height+a.offsetY);this.oe.Qa(b);return b};P.prototype.getDocumentAngle=P.prototype.yk=function(){var a=this.oe,a=Math.atan2(a.m12,a.m11)*(180/Math.PI);0>a&&(a+=360);return a};
P.prototype.getDocumentScale=P.prototype.rj=function(){var a=this.Rb;return this.ha!==q?a*this.ha.rj():a};P.prototype.getLocalPoint=P.prototype.sC=function(a,b){b===f&&(b=new A);b.assign(a);this.oe.gi(b);return b};P.prototype.getNearestIntersectionPoint=P.prototype.Un=function(a,b,c){return this.Ar(a.x,a.y,b.x,b.y,c)};da=P.prototype;
da.Ar=function(a,b,c,d,e){var g=this.transform,k=1/(g.m11*g.m22-g.m12*g.m21),l=g.m22*k,m=-g.m12*k,n=-g.m21*k,p=g.m11*k,r=k*(g.m21*g.dy-g.m22*g.dx),t=k*(g.m12*g.dx-g.m11*g.dy);if(this.ej!==q)return g=this.ua,H.Un(g.left,g.top,g.right,g.bottom,a,b,c,d,e);if(!(this instanceof D)||this instanceof D&&this.background!==q)return k=a*l+b*n+r,a=a*m+b*p+t,l=c*l+d*n+r,c=c*m+d*p+t,e.q(0,0),d=this.Ta,c=H.Un(0,0,d.width,d.height,k,a,l,c,e),e.transform(g),c;if(this instanceof D&&(this.ej===q||this.ej===f)){k=a*
l+b*n+r;a=a*m+b*p+t;l=c*l+d*n+r;d=c*m+d*p+t;e.q(l,d);m=(l-k)*(l-k)+(d-a)*(d-a);c=s;p=this.za.n;t=p.length;n=y.M();for(r=0;r<t;r++)b=p[r],b.visible&&b.Ar(k,a,l,d,n)&&(c=h,b=(k-n.x)*(k-n.x)+(a-n.y)*(a-n.y),b<m&&(m=b,e.set(n)));y.B(n);e.transform(g);return c}y.m("Unknown GraphObject case");return s};
function ah(a,b,c,d,e){if(ai(a)!==s){var g=a.margin,k=g.top+g.bottom;b=Math.max(b-(g.right+g.left),0);c=Math.max(c-k,0);g=a.Aa;k=0;a.jb&&(k=a.jb);b=isFinite(g.width)?g.width+k:b;c=isFinite(g.height)?g.height+k:c;var g=d,k=e,l=a instanceof D;switch(mj(a)){case dj:k=g=0;l&&(c=b=Infinity);break;case qc:isFinite(b)&&b>d&&(g=b);isFinite(c)&&c>e&&(k=c);break;case fj:isFinite(b)&&b>d&&(g=b);k=0;l&&(c=Infinity);break;case ej:isFinite(c)&&c>e&&(k=c),g=0,l&&(b=Infinity)}var l=a.he,m=a.Ce;g>l.width&&m.width<
l.width&&(g=l.width);k>l.height&&m.height<l.height&&(k=l.height);d=Math.max(g/a.scale,m.width);e=Math.max(k/a.scale,m.height);l.width<d&&(d=Math.min(m.width,d));l.height<e&&(e=Math.min(m.height,e));b=Math.min(l.width,b);c=Math.min(l.height,c);b=Math.max(d,b);c=Math.max(e,c);g=a.angle;if(90===g||270===g)g=b,b=c,c=g,g=d,d=e,e=g;a.wc.Pa();a.Nr(b,c,d,e);a.wc.freeze();a.wc.V()||y.m("Non-real measuredBounds has been set. Object "+a+", measuredBounds: "+a.wc.toString());nj(a,s)}}
da.tc=function(a,b,c,d,e){oj(this);var g=y.df();g.assign(this.Pb);this.Pb.Pa();if(bi(this)===s){var k=this.Pb;k.x=a;k.y=b;k.width=c;k.height=d}else this.gj(a,b,c,d);this.Pb.freeze();this.Oj=e===f?q:e;c=s;if(e!==f)c=h;else if(this.ha&&(c=this.ha.Jc,e=this.Ba,this.ej!==q&&(e=this.Pb),d=b+e.height,k=a+e.width,c=!(0<=a&&k<=c.width&&0<=b&&d<=c.height),this instanceof oa&&(this.vt>e.height||this.Lp.ki>e.width)))c=h;this.na=c?this.na|256:this.na&-257;this.Pb.V()||y.m("Non-real actualBounds has been set. Object "+
this+", actualBounds: "+this.Pb.toString());rj(this,g,this.Pb);y.Bc(g)};da.gj=aa();function Aj(a,b,c,d,e){var g=a.ua;g.x=b;g.y=c;g.width=d;g.height=e;if(!a.Aa.V()){g=a.wc;c=a.margin;b=c.right+c.left;var k=c.top+c.bottom;c=g.width+b;g=g.height+k;d+=b;e+=k;b=mj(a);c===d&&g===e&&(b=dj);switch(b){case dj:if(c>d||g>e)nj(a,h),ah(a,c>d?d:c,g>e?e:g);break;case qc:nj(a,h);ah(a,d,e,0,0);break;case fj:nj(a,h);ah(a,d,g,0,0);break;case ej:nj(a,h),ah(a,c,e,0,0)}}}
function rj(a,b,c){Bj(a,s);var d=a.W;if(d!==q){var e=d.h;if(e!==q)if(Cj(d),a instanceof R){var g=s,d=b.V();if(e.Ci===s){var k=e.fd,l=e.padding,m=k.x+l.left,n=k.y+l.top,p=k.width-2*l.right,k=k.height-2*l.bottom;d&&(b.x>m&&b.y>n&&b.right<p&&b.bottom<k&&c.x>m&&c.y>n&&c.right<p&&c.bottom<k)&&(g=h)}(0!==(a.Z&65536)===h||!b.L(c))&&xi(a,g,e);!e.yx||e.ui===q?e.ta():(g=q,d&&(g=y.df(),ih(a,b,g)),e.ta(c.V()?ih(a,c):q,g),g!==q&&y.Bc(g))}else Dj(a,d),a.ta(),b=a.W,b!==q&&(b.js===a||b.DD===a||b.JD===a)&&Ej(b,h)}}
function Dj(a,b){a.Td!==q&&Ej(b,h);if(a instanceof D)for(var c=a.za,d=c.length,e=0;e<d;e++)Dj(c.n[e],b)}
da.we=function(a,b){if(this.visible)if(this instanceof D&&(this.type===Fj||this.type===Gj)){var c=this.Pb;0===c.width||(0===c.height||isNaN(c.x)||isNaN(c.y))||(this.Ge!==q&&(Hj(this,a,this.Ge,h,h),a.fillRect(c.x,c.y,c.width,c.height)),this.Uc!==q&&(Hj(this,a,this.Uc,h),a.fillRect(c.x,c.y,c.width,c.height)),this.Hl(a,b))}else if(c=this.Pb,!(0===c.width||0===c.height||isNaN(c.x)||isNaN(c.y))){var d=this.transform,e=this.ha,g=this.km;g.reset();e!==q&&(e.mi()?g.multiply(e.oe):e.ha!==q&&g.multiply(e.ha.oe));
g.multiply(this.Xc);if(g=0!==(this.na&256)){x&&x.lG&&x.trace("clip"+this.toString());var k=e.mi()?e.Ta:e.ua;if(this.Oj)var l=this.Oj,m=l.x,n=l.y,p=l.width,l=l.height;else m=Math.max(c.x,k.x),n=Math.max(c.y,k.y),p=Math.min(c.right,k.right)-m,l=Math.min(c.bottom,k.bottom)-n;if(m>c.width+c.x||c.x>k.width+k.x||n>c.height+c.y||c.y>k.height+k.y)return;a.save();a.beginPath();a.rect(m,n,p,l);a.clip()}k=s;if(this instanceof R){k=h;if(!this.yb())return;this.Ck&&(m=this.jn,a.shadowOffsetX=m.x*b.scale,a.shadowOffsetY=
m.y*b.scale,a.shadowColor=this.hn,a.shadowBlur=this.gn)}m=s;this.W&&(m=this.W.Ck);this.Ge!==q&&(Hj(this,a,this.Ge,h,h),a.fillRect(c.x,c.y,c.width,c.height));d.Ir()||a.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);if(this.Uc!==q){var l=this.Ta,n=c=0,p=l.width,l=l.height,r=0;this instanceof V&&(l=this.Na.Hb,c=l.x,n=l.y,p=l.width,l=l.height,r=this.Wg);Hj(this,a,this.Uc,h);a.fillRect(c-r/2,n-r/2,p+r,l+r)}if(m&&(this.Uc!==q||this.Ge!==q||e!==q&&0!==(e.na&512)||e!==q&&e.type===Ch&&e.Ui!==this)){this.na|=
512;var t=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0}else this.na&=-513;this.Hl(a,b);m&&0!==(this.na&512)===h&&(a.shadowOffsetX=t[0],a.shadowOffsetY=t[1],a.shadowBlur=t[2]);k&&m&&(a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0);g?(a.restore(),Hh(b,a)):d.Ir()||(e=1/(d.m11*d.m22-d.m12*d.m21),a.transform(d.m22*e,-d.m12*e,-d.m21*e,d.m11*e,e*(d.m21*d.dy-d.m22*d.dx),e*(d.m12*d.dx-d.m11*d.dy)))}};da.Hl=aa();
function Hj(a,b,c,d,e){if(c!==q)if("string"===typeof c)d?b.gm!==c&&(b.fillStyle=c,b.gm=c):b.hm!==c&&(b.strokeStyle=c,b.hm=c);else if(c.type===Id)c=c.color,d?b.gm!==c&&(b.fillStyle=c,b.gm=c):b.hm!==c&&(b.strokeStyle=c,b.hm=c);else{var g,k=a.Ta,l=k.width,k=k.height;if(e)var m=a.ua,l=m.width,k=m.height;if(c.cg&&c.type===bj||c.cA===l&&c.bA===k)g=c.cg;else{var n,p,r=p=0;e&&(m=a.ua,l=m.width,k=m.height,p=m.x,r=m.y);c.start instanceof A?(a=c.start.x,e=c.start.y):c.start instanceof J?(a=c.start.x*l,e=c.start.y*
k):(a=Sb.x*l,e=Sb.y*k);c.end instanceof A?(m=c.end.x,n=c.end.y):c.end instanceof J?(m=c.end.x*l,n=c.end.y*k):c.type===Jd?(m=Wb.x*l,n=Wb.y*k):(m=Sb.x*l,n=Sb.y*k);a+=p;m+=p;e+=r;n+=r;c.type===Jd?g=b.createLinearGradient(a,e,m,n):c.type===Kd?(p=isNaN(c.Ln)?Math.max(l,k)/2:c.Ln,isNaN(c.Co)?(g=0,p=Math.max(l,k)/2):g=c.Co,g=b.createRadialGradient(a,e,g,m,n,p)):c.type===bj?g=b.createPattern(c.pattern,"repeat"):y.Jb(c.type,"Brush type");if(c.type!==bj&&(p=c.Fn))for(p=p.k;p.next();)g.addColorStop(p.key,p.value);
c.cg=g;c.cA=l;c.bA=k}d?b.gm!==g&&(b.fillStyle=g,b.gm=g):b.hm!==g&&(b.strokeStyle=g,b.hm=g)}}P.prototype.isContainedBy=P.prototype.hi=function(a){if(a instanceof D)a:{if(!(this===a||a===q))for(var b=this.ha;b!==q;){if(b===a){a=h;break a}b=b.ha}a=s}else a=s;return a};P.prototype.isVisibleObject=P.prototype.Dk=function(){if(!this.visible)return s;var a=this.ha;return a!==q?a.Dk():h};
function Ij(a){if(0!==(a.na&2048)===h){var b=a.Xc;b.reset();if(!a.Pb.V()||!a.wc.V()){Jj(a,s);return}b.translate(a.Pb.x,a.Pb.y);b.translate(-a.Ba.x,-a.Ba.y);var c=a.Ta;kj(a,b,c.x,c.y,c.width,c.height);Jj(a,s);Kj(a,h)}0!==(a.na&4096)===h&&(a.ha===q?(a.km.set(a.Xc),Kj(a,s)):a.ha.oe!==q&&(b=a.km,b.reset(),b.multiply(a.ha.km),b.multiply(a.Xc),Kj(a,s)))}
function kj(a,b,c,d,e,g){1!==a.scale&&b.scale(a.scale);if(0!==a.angle){var k=Sb;a.We&&yb(a.We)&&(k=a.We);var l=y.M();if(a instanceof R&&a.Wb!==a){c=a.Wb;d=c.Ta;l.ns(d.x,d.y,d.width,d.height,k);c.dk.Qa(l);l.offset(-c.Ba.x,-c.Ba.y);for(k=c.ha;k!==q&&k!==a;)k.dk.Qa(l),l.offset(-k.Ba.x,-k.Ba.y),k=k.ha}else l.ns(c,d,e,g,k);b.rotate(a.angle,l.x,l.y);y.B(l)}}
P.prototype.aa=function(a){if(ai(this)!==h){nj(this,h);Bj(this,h);var b=this.ha;b!==q?a||b.aa():(a=this.h,a!==q&&(a.yf.add(this),this instanceof T&&(a.va.cb||this.rg(),this.hd!==q&&Lj(this.hd)),a.kc()));if(this instanceof D){var c=q;a=this.za;b=a.length;this.Y===Ch&&(c=Mj(this,a,b))&&c.aa(h);a=a.n;for(c=0;c<b;c++){var d=a[c];ai(d)!==h&&(d.Aa.V()||(d instanceof Ag||d instanceof D||d instanceof oa||mj(d)!==dj)&&d.aa(h))}}}};
function Nj(a){if(ai(a)===s&&(nj(a,h),Bj(a,h),a instanceof D)){a=a.za.n;for(var b=a.length,c=0;c<b;c++)Nj(a[c])}}function Lj(a){if(bi(a)===s){if(a.ha!==q)a.ha.aa();else{var b=a.h;b!==q&&(b.yf.add(a),a instanceof T&&a.rg(),b.kc())}Bj(a,h)}}function oj(a){if(0!==(a.na&2048)===s&&(Jj(a,h),Kj(a,h),a instanceof D))for(a=a.elements;a.next();)Oj(a.value)}function Oj(a){Kj(a,h);if(a instanceof D)for(a=a.elements;a.next();)Oj(a.value)}
P.prototype.ta=function(){if(this instanceof R){var a=this.h;a!==q&&(!bi(this)&&!ci(this)&&this.yb()&&this.Pb.V())&&a.ta(ih(this,this.Pb))}else this.W!==q&&this.W.ta()};function mj(a){var b=a.mh,c=a.ha;if(c&&c.Y===Pj)return Qj(a,c.Od(a.qc),c.Nd(a.column));if(c&&c.Y===Ch){if(c.Ui===q){var d=c.za,e=d.length;Mj(c,d,e)}if(c.Ui===a)return qc}if(b===Bg){if(c){c.Y===zg&&c.Ui===q&&(d=c.za,e=d.length,Mj(c,d,e));if(c.Ui===a)return qc;a=c.uy;return a===Bg?dj:a}return dj}return b}
function Qj(a,b,c){var d=a.mh;if(d!==Bg)return d;var e=d=f;switch(b.mh){case ej:e=h;break;case qc:e=h}switch(c.mh){case fj:d=h;break;case qc:d=h}a=a.ha.uy;d=d===f&&(a===fj||a===qc)?h:s;e=e===f&&(a===ej||a===qc)?h:s;return d===h&&e===h?qc:d===h?fj:e===h?ej:dj}y.g(P,"segmentOrientation",P.prototype.is);y.defineProperty(P,{is:"segmentOrientation"},w("Eq"),function(a){var b=this.Eq;b!==a&&(x&&y.rb(a,U,P,"segmentOrientation"),this.Eq=a,this.aa(),this.i("segmentOrientation",b,a))});
y.g(P,"segmentIndex",P.prototype.af);y.defineProperty(P,{af:"segmentIndex"},w("Cq"),function(a){x&&y.j(a,"number",P,"segmentIndex");a=Math.round(a);var b=this.Cq;b!==a&&(this.Cq=a,this.aa(),this.i("segmentIndex",b,a))});y.g(P,"segmentFraction",P.prototype.hs);y.defineProperty(P,{hs:"segmentFraction"},w("Bq"),function(a){x&&y.j(a,"number",P,"segmentFraction");isNaN(a)?a=0:0>a?a=0:1<a&&(a=1);var b=this.Bq;b!==a&&(this.Bq=a,this.aa(),this.i("segmentFraction",b,a))});y.g(P,"segmentOffset",P.prototype.rz);
y.defineProperty(P,{rz:"segmentOffset"},w("Dq"),function(a){var b=this.Dq;b.L(a)||(x&&y.l(a,A,P,"segmentOffset"),this.Dq=a=a.U(),this.aa(),this.i("segmentOffset",b,a))});y.g(P,"stretch",P.prototype.mh);y.defineProperty(P,{mh:"stretch"},w("Vg"),function(a){var b=this.Vg;b!==a&&(x&&y.rb(a,P,P,"stretch"),this.Vg=a,this.aa(),this.i("stretch",b,a))});y.g(P,"name",P.prototype.name);
y.defineProperty(P,{name:"name"},w("Fb"),function(a){var b=this.Fb;b!==a&&(x&&y.j(a,"string",P,"name"),this.Fb=a,this.W&&(this.W.gk=q),this.i("name",b,a))});y.g(P,"visible",P.prototype.visible);
y.defineProperty(P,{visible:"visible"},function(){return 0!==(this.na&1)},function(a){var b=0!==(this.na&1);b!==a&&(x&&y.j(a,"boolean",P,"visible"),this.na^=1,this.i("visible",b,a),b=this.ha,b!==q?b.aa():this instanceof R&&(this.aa(),Cj(this),a?(this.J(Rj),this.updateAdornments()):(this.J(Sj),this.be())),this.ta(),Tj(this))});y.g(P,"pickable",P.prototype.$e);
y.defineProperty(P,{$e:"pickable"},function(){return 0!==(this.na&2)},function(a){var b=0!==(this.na&2);b!==a&&(x&&y.j(a,"boolean",P,"pickable"),this.na^=2,this.i("pickable",b,a))});y.g(P,"fromLinkableDuplicates",P.prototype.nC);y.defineProperty(P,{nC:"fromLinkableDuplicates"},function(){return 0!==(this.na&4)},function(a){var b=0!==(this.na&4);b!==a&&(x&&y.j(a,"boolean",P,"fromLinkableDuplicates"),this.na^=4,this.i("fromLinkableDuplicates",b,a))});y.g(P,"fromLinkableSelfNode",P.prototype.oC);
y.defineProperty(P,{oC:"fromLinkableSelfNode"},function(){return 0!==(this.na&8)},function(a){var b=0!==(this.na&8);b!==a&&(x&&y.j(a,"boolean",P,"fromLinkableSelfNode"),this.na^=8,this.i("fromLinkableSelfNode",b,a))});y.g(P,"toLinkableDuplicates",P.prototype.gE);y.defineProperty(P,{gE:"toLinkableDuplicates"},function(){return 0!==(this.na&16)},function(a){var b=0!==(this.na&16);b!==a&&(x&&y.j(a,"boolean",P,"toLinkableDuplicates"),this.na^=16,this.i("toLinkableDuplicates",b,a))});
y.g(P,"toLinkableSelfNode",P.prototype.hE);y.defineProperty(P,{hE:"toLinkableSelfNode"},function(){return 0!==(this.na&32)},function(a){var b=0!==(this.na&32);b!==a&&(x&&y.j(a,"boolean",P,"toLinkableSelfNode"),this.na^=32,this.i("toLinkableSelfNode",b,a))});y.g(P,"isPanelMain",P.prototype.ji);y.defineProperty(P,{ji:"isPanelMain"},function(){return 0!==(this.na&64)},function(a){var b=0!==(this.na&64);b!==a&&(x&&y.j(a,"boolean",P,"isPanelMain"),this.na^=64,this.aa(),this.i("isPanelMain",b,a))});
y.g(P,"isActionable",P.prototype.Zu);y.defineProperty(P,{Zu:"isActionable"},function(){return 0!==(this.na&128)},function(a){var b=0!==(this.na&128);b!==a&&(x&&y.j(a,"boolean",P,"isActionable"),this.na^=128,this.i("isActionable",b,a))});y.g(P,"areaBackground",P.prototype.ej);y.defineProperty(P,{ej:"areaBackground"},w("Ge"),function(a){var b=this.Ge;if(b!==a&&(a===q||"string"===typeof a||a instanceof Gd))a instanceof Gd&&a.freeze(),this.Ge=a,this.ta(),this.i("areaBackground",b,a)});
y.g(P,"background",P.prototype.background);y.defineProperty(P,{background:"background"},w("Uc"),function(a){var b=this.Uc;if(b!==a&&(a===q||"string"===typeof a||a instanceof Gd))a instanceof Gd&&a.freeze(),this.Uc=a,this.ta(),this.i("background",b,a)});function Uj(a,b){a.na=b?a.na|1024:a.na&-1025}function Jj(a,b){a.na=b?a.na|2048:a.na&-2049}function Kj(a,b){a.na=b?a.na|4096:a.na&-4097}function ai(a){return 0!==(a.na&8192)}function nj(a,b){a.na=b?a.na|8192:a.na&-8193}
function bi(a){return 0!==(a.na&16384)}function Bj(a,b){a.na=b?a.na|16384:a.na&-16385}y.A(P,{W:"part"},function(){if(this instanceof R)return this;if(this.nl)return this.nl;var a;for(a=this.ha;a;){if(a instanceof R)return this.nl=a;a=a.ha}return q});P.prototype.Kk=ba("Nh");y.A(P,{ha:"panel"},w("Nh"));y.A(P,{layer:"layer"},function(){var a=this.W;return a!==q?a.layer:q});y.A(P,{h:"diagram"},function(){var a=this.W;return a!==q?a.h:q},{configurable:h});y.g(P,"position",P.prototype.position);
y.defineProperty(P,{position:"position"},w("nb"),function(a){var b=this.nb;if(!b.L(a))if(x&&y.l(a,A,P,"position"),a=a.U(),this instanceof R){if(!(this instanceof U)&&a.V()){var c=this.Fh;this.nb=a;if(bi(this)===s){var d=c.copy(),e=this.h;c.q(d.x+(a.x-b.x),d.y+(a.y-b.y));Vj(this);oj(this);Wj(this);!c.L(d)&&e&&this.i("location",d,c)}else c.q(NaN,NaN);this.i("position",b,a)}}else this.nb=a,Lj(this),oj(this),this.i("position",b,a)});y.A(P,{ua:"actualBounds"},w("Pb"));y.g(P,"scale",P.prototype.scale);
y.defineProperty(P,{scale:"scale"},w("Rb"),function(a){var b=this.Rb;b!==a&&(x&&y.p(a,P,"scale"),0>=a&&y.m("GraphObject.scale must be greater than zero"),this.Rb=a,oj(this),this.aa(),this.i("scale",b,a))});y.g(P,"angle",P.prototype.angle);y.defineProperty(P,{angle:"angle"},w("lm"),function(a){var b=this.lm;b!==a&&(x&&y.p(a,P,"angle"),a%=360,0>a&&(a+=360),this.lm=a,this.aa(),oj(this),this.i("angle",b,a))});y.g(P,"desiredSize",P.prototype.Aa);
y.defineProperty(P,{Aa:"desiredSize"},w("He"),function(a){var b=this.He;b.L(a)||(x&&y.l(a,ha,P,"desiredSize"),this.He=a=a.U(),this.aa(),this instanceof V&&this.Mf(),this.i("desiredSize",b,a))});y.g(P,"width",P.prototype.width);y.defineProperty(P,{width:"width"},function(){return this.He.width},function(a){if(this.He.width!==a){x&&y.j(a,"number",P,"width");var b=this.He;this.He=a=(new ha(a,this.He.height)).freeze();this.aa();this instanceof V&&this.Mf();this.i("desiredSize",b,a)}});
y.g(P,"height",P.prototype.height);y.defineProperty(P,{height:"height"},function(){return this.He.height},function(a){if(this.He.height!==a){x&&y.j(a,"number",P,"height");var b=this.He;this.He=a=(new ha(this.He.width,a)).freeze();this.aa();this instanceof V&&this.Mf();this.i("desiredSize",b,a)}});y.g(P,"minSize",P.prototype.Ce);
y.defineProperty(P,{Ce:"minSize"},w("Hd"),function(a){var b=this.Hd;b.L(a)||(x&&y.l(a,ha,P,"minSize"),a=a.copy(),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a.freeze(),this.Hd=a,this.aa(),this.i("minSize",b,a))});y.g(P,"maxSize",P.prototype.he);y.defineProperty(P,{he:"maxSize"},w("Ki"),function(a){var b=this.Ki;b.L(a)||(x&&y.l(a,ha,P,"maxSize"),a=a.copy(),isNaN(a.width)&&(a.width=Infinity),isNaN(a.height)&&(a.height=Infinity),a.freeze(),this.Ki=a,this.aa(),this.i("maxSize",b,a))});
y.A(P,{Ba:"measuredBounds"},w("wc"));y.A(P,{Ta:"naturalBounds"},w("Jc"),{configurable:h});y.g(P,"margin",P.prototype.margin);y.defineProperty(P,{margin:"margin"},w("Up"),function(a){"number"===typeof a?a=new ab(a):x&&y.l(a,ab,P,"margin");var b=this.Up;b.L(a)||(this.Up=a=a.U(),this.aa(),this.i("margin",b,a))});y.A(P,{transform:q},function(){0!==(this.na&2048)===h&&Ij(this);return this.Xc});y.A(P,{oe:q},function(){0!==(this.na&4096)===h&&Ij(this);return this.km});y.g(P,"alignment",P.prototype.alignment);
y.defineProperty(P,{alignment:"alignment"},w("Ud"),function(a){var b=this.Ud;b.L(a)||(x?y.l(a,J,P,"alignment"):Cb(a)&&!Db(a)&&y.m("alignment must be a real Spot or Spot.Default"),this.Ud=a=a.U(),Lj(this),this.i("alignment",b,a))});y.g(P,"column",P.prototype.column);y.defineProperty(P,{column:"column"},w("Wo"),function(a){x&&y.p(a,P,"column");a=Math.round(a);var b=this.Wo;b!==a&&(0>a&&y.ka(a,">= 0",P,"column"),this.Wo=a,this.aa(),this.i("column",b,a))});y.g(P,"columnSpan",P.prototype.OB);
y.defineProperty(P,{OB:"columnSpan"},w("Pj"),function(a){x&&y.p(a,P,"columnSpan");a=Math.round(a);var b=this.Pj;b!==a&&(1>a&&y.ka(a,">= 1",P,"columnSpan"),this.Pj=a,this.aa(),this.i("columnSpan",b,a))});y.g(P,"row",P.prototype.qc);y.defineProperty(P,{qc:"row"},w("zq"),function(a){x&&y.p(a,P,"row");a=Math.round(a);var b=this.zq;b!==a&&(0>a&&y.ka(a,">= 0",P,"row"),this.zq=a,this.aa(),this.i("row",b,a))});y.g(P,"rowSpan",P.prototype.rowSpan);
y.defineProperty(P,{rowSpan:"rowSpan"},w("lk"),function(a){x&&y.p(a,P,"rowSpan");a=Math.round(a);var b=this.lk;b!==a&&(1>a&&y.ka(a,">= 1",P,"rowSpan"),this.lk=a,this.aa(),this.i("rowSpan",b,a))});y.g(P,"alignmentFocus",P.prototype.bj);y.defineProperty(P,{bj:"alignmentFocus"},w("Qo"),function(a){var b=this.Qo;b.L(a)||(x?y.l(a,J,P,"alignmentFocus"):Cb(a)&&!Db(a)&&y.m("alignmentFocus must be a real Spot or Spot.Default"),this.Qo=a=a.U(),this.aa(),this.i("alignmentFocus",b,a))});y.g(P,"portId",P.prototype.Td);
y.defineProperty(P,{Td:"portId"},w("oq"),function(a){var b=this.oq;if(b!==a){x&&a!==q&&y.j(a,"string",P,"portId");var c=this.W;c!==q&&!(c instanceof T)&&(y.m("portID being set on a Link: "+a),c=q);b!==q&&c&&Xj(c,this);this.oq=a;a!==q&&c&&(c.Bi=h,c.dd===q&&Yj(c),Zj(c,this));this.i("portId",b,a)}});function ak(a){var b={value:q};bk(a,b);return b.value}function bk(a,b){var c=a.ha;return c===q||!bk(c,b)&&a.visible?(b.value=a,s):h}function Tj(a){var b=a.W;b instanceof T&&(a=a.h)&&!a.va.cb&&b.rg()}
y.g(P,"toSpot",P.prototype.kb);y.defineProperty(P,{kb:"toSpot"},function(){return this.P!==q?this.P.Zi:Hb},function(a){this.P===q&&this.fe();var b=this.P.Zi;b.L(a)||(x&&y.l(a,J,P,"toSpot"),a=a.U(),this.P.Zi=a,this.i("toSpot",b,a),Tj(this))});y.g(P,"toEndSegmentLength",P.prototype.cm);
y.defineProperty(P,{cm:"toEndSegmentLength"},function(){return this.P!==q?this.P.Xi:10},function(a){this.P===q&&this.fe();var b=this.P.Xi;b!==a&&(x&&y.j(a,"number",P,"toEndSegmentLength"),0>a&&y.ka(a,">= 0",P,"toEndSegmentLength"),this.P.Xi=a,this.i("toEndSegmentLength",b,a),Tj(this))});y.g(P,"toEndSegmentDirection",P.prototype.Fv);
y.defineProperty(P,{Fv:"toEndSegmentDirection"},function(){return this.P!==q?this.P.Wi:hj},function(a){this.P===q&&this.fe();var b=this.P.Wi;b!==a&&(x&&y.rb(a,T,P,"toEndSegmentDirection"),this.P.Wi=a,this.i("toEndSegmentDirection",b,a),Tj(this))});y.g(P,"toShortLength",P.prototype.Gv);
y.defineProperty(P,{Gv:"toShortLength"},function(){return this.P!==q?this.P.Yi:0},function(a){this.P===q&&this.fe();var b=this.P.Yi;b!==a&&(x&&y.j(a,"number",P,"toShortLength"),this.P.Yi=a,this.i("toShortLength",b,a),Tj(this))});y.g(P,"toLinkable",P.prototype.Dz);y.defineProperty(P,{Dz:"toLinkable"},w("Uq"),function(a){var b=this.Uq;b!==a&&(x&&a!==q&&y.j(a,"boolean",P,"toLinkable"),this.Uq=a,this.i("toLinkable",b,a))});y.g(P,"toMaxLinks",P.prototype.iE);
y.defineProperty(P,{iE:"toMaxLinks"},w("Vq"),function(a){var b=this.Vq;b!==a&&(x&&y.p(a,P,"toMaxLinks"),0>a&&y.ka(a,">= 0",P,"toMaxLinks"),this.Vq=a,this.i("toMaxLinks",b,a))});y.g(P,"fromSpot",P.prototype.gb);y.defineProperty(P,{gb:"fromSpot"},function(){return this.P!==q?this.P.zi:Hb},function(a){this.P===q&&this.fe();var b=this.P.zi;b.L(a)||(x&&y.l(a,J,P,"fromSpot"),a=a.U(),this.P.zi=a,this.i("fromSpot",b,a),Tj(this))});y.g(P,"fromEndSegmentLength",P.prototype.Kl);
y.defineProperty(P,{Kl:"fromEndSegmentLength"},function(){return this.P!==q?this.P.xi:10},function(a){this.P===q&&this.fe();var b=this.P.xi;b!==a&&(x&&y.j(a,"number",P,"fromEndSegmentLength"),0>a&&y.ka(a,">= 0",P,"fromEndSegmentLength"),this.P.xi=a,this.i("fromEndSegmentLength",b,a),Tj(this))});y.g(P,"fromEndSegmentDirection",P.prototype.Su);
y.defineProperty(P,{Su:"fromEndSegmentDirection"},function(){return this.P!==q?this.P.wi:hj},function(a){this.P===q&&this.fe();var b=this.P.wi;b!==a&&(x&&y.rb(a,T,P,"fromEndSegmentDirection"),this.P.wi=a,this.i("fromEndSegmentDirection",b,a),Tj(this))});y.g(P,"fromShortLength",P.prototype.Tu);
y.defineProperty(P,{Tu:"fromShortLength"},function(){return this.P!==q?this.P.yi:0},function(a){this.P===q&&this.fe();var b=this.P.yi;b!==a&&(x&&y.j(a,"number",P,"fromShortLength"),this.P.yi=a,this.i("fromShortLength",b,a),Tj(this))});y.g(P,"fromLinkable",P.prototype.Cy);y.defineProperty(P,{Cy:"fromLinkable"},w("np"),function(a){var b=this.np;b!==a&&(x&&a!==q&&y.j(a,"boolean",P,"fromLinkable"),this.np=a,this.i("fromLinkable",b,a))});y.g(P,"fromMaxLinks",P.prototype.pC);
y.defineProperty(P,{pC:"fromMaxLinks"},w("op"),function(a){var b=this.op;b!==a&&(x&&y.p(a,P,"fromMaxLinks"),0>a&&y.ka(a,">= 0",P,"fromMaxLinks"),this.op=a,this.i("fromMaxLinks",b,a))});y.g(P,"cursor",P.prototype.cursor);y.defineProperty(P,{cursor:"cursor"},w("bp"),function(a){var b=this.bp;b!==a&&(y.j(a,"string",P,"cursor"),this.bp=a,this.i("cursor",b,a))});y.g(P,"click",P.prototype.click);
y.defineProperty(P,{click:"click"},function(){return this.O!==q?this.O.uh:q},function(a){this.O===q&&gj(this);var b=this.O.uh;b!==a&&(a!==q&&y.j(a,"function",P,"click"),this.O.uh=a,this.i("click",b,a))});y.g(P,"doubleClick",P.prototype.Fl);y.defineProperty(P,{Fl:"doubleClick"},function(){return this.O!==q?this.O.zh:q},function(a){this.O===q&&gj(this);var b=this.O.zh;b!==a&&(a!==q&&y.j(a,"function",P,"doubleClick"),this.O.zh=a,this.i("doubleClick",b,a))});y.g(P,"contextClick",P.prototype.qr);
y.defineProperty(P,{qr:"contextClick"},function(){return this.O!==q?this.O.vh:q},function(a){this.O===q&&gj(this);var b=this.O.vh;b!==a&&(a!==q&&y.j(a,"function",P,"contextClick"),this.O.vh=a,this.i("contextClick",b,a))});y.g(P,"mouseEnter",P.prototype.Yy);y.defineProperty(P,{Yy:"mouseEnter"},function(){return this.O!==q?this.O.eq:q},function(a){this.O===q&&gj(this);var b=this.O.eq;b!==a&&(a!==q&&y.j(a,"function",P,"mouseEnter"),this.O.eq=a,this.i("mouseEnter",b,a))});y.g(P,"mouseLeave",P.prototype.Zy);
y.defineProperty(P,{Zy:"mouseLeave"},function(){return this.O!==q?this.O.fq:q},function(a){this.O===q&&gj(this);var b=this.O.fq;b!==a&&(a!==q&&y.j(a,"function",P,"mouseLeave"),this.O.fq=a,this.i("mouseLeave",b,a))});y.g(P,"mouseOver",P.prototype.Tr);y.defineProperty(P,{Tr:"mouseOver"},function(){return this.O!==q?this.O.Jh:q},function(a){this.O===q&&gj(this);var b=this.O.Jh;b!==a&&(a!==q&&y.j(a,"function",P,"mouseOver"),this.O.Jh=a,this.i("mouseOver",b,a))});y.g(P,"mouseHover",P.prototype.Sr);
y.defineProperty(P,{Sr:"mouseHover"},function(){return this.O!==q?this.O.Ih:q},function(a){this.O===q&&gj(this);var b=this.O.Ih;b!==a&&(a!==q&&y.j(a,"function",P,"mouseHover"),this.O.Ih=a,this.i("mouseHover",b,a))});y.g(P,"mouseHold",P.prototype.Rr);y.defineProperty(P,{Rr:"mouseHold"},function(){return this.O!==q?this.O.Hh:q},function(a){this.O===q&&gj(this);var b=this.O.Hh;b!==a&&(a!==q&&y.j(a,"function",P,"mouseHold"),this.O.Hh=a,this.i("mouseHold",b,a))});y.g(P,"mouseDragEnter",P.prototype.fD);
y.defineProperty(P,{fD:"mouseDragEnter"},function(){return this.O!==q?this.O.cq:q},function(a){this.O===q&&gj(this);var b=this.O.cq;b!==a&&(a!==q&&y.j(a,"function",P,"mouseDragEnter"),this.O.cq=a,this.i("mouseDragEnter",b,a))});y.g(P,"mouseDragLeave",P.prototype.Xy);y.defineProperty(P,{Xy:"mouseDragLeave"},function(){return this.O!==q?this.O.dq:q},function(a){this.O===q&&gj(this);var b=this.O.dq;b!==a&&(a!==q&&y.j(a,"function",P,"mouseDragLeave"),this.O.dq=a,this.i("mouseDragLeave",b,a))});
y.g(P,"mouseDrop",P.prototype.Qr);y.defineProperty(P,{Qr:"mouseDrop"},function(){return this.O!==q?this.O.Gh:q},function(a){this.O===q&&gj(this);var b=this.O.Gh;b!==a&&(a!==q&&y.j(a,"function",P,"mouseDrop"),this.O.Gh=a,this.i("mouseDrop",b,a))});y.g(P,"actionDown",P.prototype.$x);y.defineProperty(P,{$x:"actionDown"},function(){return this.O!==q?this.O.Mo:q},function(a){this.O===q&&gj(this);var b=this.O.Mo;b!==a&&(a!==q&&y.j(a,"function",P,"actionDown"),this.O.Mo=a,this.i("actionDown",b,a))});
y.g(P,"actionUp",P.prototype.by);y.defineProperty(P,{by:"actionUp"},function(){return this.O!==q?this.O.Oo:q},function(a){this.O===q&&gj(this);var b=this.O.Oo;b!==a&&(a!==q&&y.j(a,"function",P,"actionUp"),this.O.Oo=a,this.i("actionUp",b,a))});y.g(P,"actionMove",P.prototype.ay);y.defineProperty(P,{ay:"actionMove"},function(){return this.O!==q?this.O.No:q},function(a){this.O===q&&gj(this);var b=this.O.No;b!==a&&(a!==q&&y.j(a,"function",P,"actionMove"),this.O.No=a,this.i("actionMove",b,a))});
y.g(P,"actionCancel",P.prototype.Zx);y.defineProperty(P,{Zx:"actionCancel"},function(){return this.O!==q?this.O.Lo:q},function(a){this.O===q&&gj(this);var b=this.O.Lo;b!==a&&(a!==q&&y.j(a,"function",P,"actionCancel"),this.O.Lo=a,this.i("actionCancel",b,a))});y.g(P,"toolTip",P.prototype.vs);y.defineProperty(P,{vs:"toolTip"},function(){return this.O!==q?this.O.Th:q},function(a){this.O===q&&gj(this);var b=this.O.Th;b!==a&&(a!==q&&y.l(a,Ge,P,"toolTip"),this.O.Th=a,this.i("toolTip",b,a))});
y.g(P,"contextMenu",P.prototype.contextMenu);y.defineProperty(P,{contextMenu:"contextMenu"},function(){return this.O!==q?this.O.wh:q},function(a){this.O===q&&gj(this);var b=this.O.wh;b!==a&&(a!==q&&y.l(a,Ge,P,"contextMenu"),this.O.wh=a,this.i("contextMenu",b,a))});P.prototype.bind=P.prototype.bind=function(a){a.Df=this;var b=this.Rn();b!==q&&ck(b)&&y.m("Cannot add a Binding to a template that has already been copied: "+a);this.rc===q&&(this.rc=new F(be));this.rc.add(a)};
P.prototype.findTemplateBinder=P.prototype.Rn=function(){for(var a=this instanceof D?this:this.ha;a!==q;){if(a.Sk!==q&&a instanceof D)return a;a=a.ha}return q};P.fromSvg=function(a){return dk(a)};P.setProperties=P.prototype.uJ=function(a){y.vv(this,a)};var ek;
P.make=ek=function(a,b){var c=q,d=q;if("function"===typeof a)d=a;else if("string"===typeof a){var e=fk.wa(a);"function"===typeof e?c=e():d=fa[a]}c===q&&(d===f&&(c=window.$,c!==f&&c.noop!==f&&y.m("GraphObject.make failed to complete. Is it conflicting with another $ var? (such as jQuery)"),y.m("GraphObject.make failed to complete, it may be conflicting with another var.")),(d===q||!d.constructor)&&y.m("GraphObject.make requires a class function or class name, not: "+a),c=new d);e=1;c instanceof E&&
1<arguments.length&&(d=arguments[1],"string"===typeof d||d instanceof HTMLDivElement?(c.bi=q,rh(c,d),e++):y.m("Unknown argument to Diagram constructor: "+d));for(;e<arguments.length;e++)if(d=arguments[e],d===f)y.m("Undefined value at argument "+e+" for object being constructed by GraphObject.make: "+c);else if("string"===typeof d)if(c instanceof oa)c.text=d;else if(c instanceof V)c.xb=d;else if(c instanceof gk)c.source=d;else if(c instanceof D){var g=y.Il(D,d);g!==q?c.type=g:y.m("Unknown Panel type as an argument to GraphObject.make: "+
d)}else c instanceof Gd?(g=y.Il(Gd,d),g!==q?c.type=g:y.m("Unknown Brush type as an argument to GraphObject.make: "+d)):c instanceof nc?(g=y.Il(nc,d),g!==q?c.type=g:y.m("Unknown Geometry type as an argument to GraphObject.make: "+d)):c instanceof gd?(g=y.Il(gd,d),g!==q?c.type=g:y.m("Unknown PathSegment type as an argument to GraphObject.make: "+d)):y.m("Unable to use a string as an argument to GraphObject.make: "+d);else if(d instanceof P)c instanceof D||y.m("A GraphObject can only be added to a Panel, not to: "+
c),c.add(d);else if(d instanceof hk)c instanceof D||y.m("A RowColumnDefinition can only be added to a Panel, not to: "+c),g=d.fh?c.Od(d.index):c.Nd(d.index),y.l(d,hk,hk,"copyFrom:pd"),d.fh?g.height=d.height:g.width=d.width,g.hh=d.hh,g.Xe=d.Xe,g.alignment=d.alignment,g.ps=d.ps,g.Si=d.Si===q?q:d.Si.U(),g.Xl=d.Xl,g.Yl=d.Yl,g.Rg=q,d.Rg&&(g.Rg=d.Rg.slice(0)),g.background=d.background,g.Gu=d.Gu,g.rc=d.rc;else if(d instanceof ga)c instanceof U&&d.re===U?d===ik||d===xf?c.kh=d:d===vg||d===jk||d===kk?c.Se=
d:d===lk||d===mk||d===nk?c.ru=d:d===ok||d===cj||y.m("Unknown Link enum value for a Link property: "+d):c instanceof D&&d.re===D?c.type=d:c instanceof oa&&d.re===oa?c.Iz=d:c instanceof P&&d.re===U?0===d.name.indexOf("Orient")?c.is=d:y.m("Unknown Link enum value for GraphObject.segmentOrientation property: "+d):c instanceof P&&d.re===P?c.mh=d:c instanceof E&&d.re===E?c.wl=d:c instanceof Gd&&d.re===Gd?c.type=d:c instanceof nc&&d.re===nc?c.type=d:c instanceof gd&&d.re===gd?c.type=d:c instanceof be&&d.re===
be?c.mode=d:c instanceof ld&&d.re===ld?c.Yc=d:c instanceof Y&&d.re===Y?0===d.name.indexOf("Alignment")?c.alignment=d:0===d.name.indexOf("Arrangement")?c.qe=d:0===d.name.indexOf("Compaction")?c.compaction=d:0===d.name.indexOf("Path")?c.path=d:0===d.name.indexOf("Sorting")?c.sorting=d:0===d.name.indexOf("Style")?c.rE=d:y.m("Unknown enum value: "+d):c instanceof pk&&d.re===pk?0===d.name.indexOf("Aggressive")?c.AB=d:0===d.name.indexOf("Cycle")?c.WB=d:0===d.name.indexOf("Init")?c.HC=d:0===d.name.indexOf("Layer")?
c.RC=d:y.m("Unknown enum value: "+d):c instanceof Zi&&d.re===Zi?d===qk||d===rk||d===sk||d===tk?c.sorting=d:d===uk||d===vk?c.qe=d:d===wk||d===xk?c.alignment=d:y.m("Unknown enum value: "+d):c instanceof yk&&d.re===yk?d===zk||d===Ak||d===Bk||d===Ck||d===Dk?c.sorting=d:d===Ek||d===Fk||d===Gk||d===Hk?c.direction=d:d===Ik||d===Jk||d===Kk||d===Lk?c.qe=d:d===Mk||d===Nk?c.Xr=d:y.m("Unknown enum value: "+d):y.m("No property to set for this enum value: "+d);else if(d instanceof be)c instanceof P||c instanceof
hk?c.bind(d):y.m("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+c);else if(d instanceof pc)c instanceof nc?c.fb.add(d):y.m("A PathFigure can only be added to a Geometry, not to: "+c);else if(d instanceof gd)c instanceof pc?c.Ca.add(d):y.m("A PathSegment can only be added to a PathFigure, not to: "+c);else if(y.tb(d))if(c instanceof Gd){var g={},k;for(k in d){var l=parseFloat(k);isNaN(l)?g[k]=d[k]:c.addColorStop(l,d[k])}y.vv(c,g)}else c instanceof hk?(d.row!==f?(g=
d.row,(g===f||g===q||Infinity===g||isNaN(g)||0>g)&&y.m("Must specify non-negative integer row for RowColumnDefinition "+d),c.dl=h,c.Vd=g):d.column!==f?(g=d.column,(g===f||g===q||Infinity===g||isNaN(g)||0>g)&&y.m("Must specify non-negative integer column for RowColumnDefinition "+d),c.dl=s,c.Vd=g):y.m("Must specify row or column value in a RowColumnDefinition "+d),g=y.OF(d,"row","column"),y.vv(c,g)):y.vv(c,d);else y.m('Unknown initializer "'+d+'" for object being constructed by GraphObject.make: '+
c);return c};var fk;P.Builders=fk=new ma("string","function");
fk.add("Button",function(){var a=new Gd(Jd);a.addColorStop(0,"white");a.addColorStop(1,"lightgray");var b=new Gd(Jd);b.addColorStop(0,"white");b.addColorStop(1,"dodgerblue");var c=ek(D,Ch,{Zu:h},ek(V,{name:"ButtonBorder",xb:"RoundedRectangle",fill:a,stroke:"gray"}));c.Yy=function(a,c){var g=c.sa(0),k=c._buttonFillOver;k===f&&(k=b);c._buttonFillNormal=g.fill;g.fill=k;k=c._buttonStrokeOver;k===f&&(k="blue");c._buttonStrokeNormal=g.stroke;g.stroke=k};c.Zy=function(b,c){var g=c.sa(0),k=c._buttonFillNormal;
k===f&&(k=a);g.fill=k;k=c._buttonStrokeNormal;k===f&&(k="gray");g.stroke=k};return c});
fk.add("TreeExpanderButton",function(){var a=ek("Button",ek(V,{name:"ButtonIcon",xb:"MinusLine",Aa:H.fm},(new be("figure","isTreeExpanded",function(a,c){var d=q,e=c.ha;e&&(d=a?e._treeExpandedFigure:e._treeCollapsedFigure);d||(d=a?"MinusLine":"PlusLine");return d})).dz("")),{visible:s},(new be("visible","isTreeLeaf",function(a){return!a})).dz(""));a.click=function(a,c){var d=c.W;if(d instanceof T){var e=d.h;e===q||e.Za||(a.ee=h,d.Cc?e.Pe.collapseTree(d):e.Pe.expandTree(d))}};return a});
fk.add("SubGraphExpanderButton",function(){var a=ek("Button",ek(V,{name:"ButtonIcon",xb:"MinusLine",Aa:H.fm},(new be("figure","isSubGraphExpanded",function(a,c){var d=q,e=c.ha;e&&(d=a?e._subGraphExpandedFigure:e._subGraphCollapsedFigure);d||(d=a?"MinusLine":"PlusLine");return d})).dz("")));a.click=function(a,c){var d=c.W;if(d instanceof He){var e=d.h;e===q||e.Za||(a.ee=h,d.Ue?e.Pe.collapseSubGraph(d):e.Pe.expandSubGraph(d))}};return a});
fk.add("ContextMenuButton",function(){var a=ek("Button");a.mh=fj;var b=a.xe("ButtonBorder");b instanceof V&&(b.xb="Rectangle",b.G=new J(0,0,2,2),b.H=new J(1,1,-2,-2));return a});
function D(a){P.call(this);a===f?0===arguments.length?this.Y=Fg:y.m("invalid argument to Panel constructor: undefined"):(y.rb(a,D,D,"type"),this.Y=a);this.za=new F(P);this.ne=H.Ko;this.hg=s;this.Y===Jh&&(this.hg=h);this.mf=1;this.ep=Ib;this.fc=Bg;this.Y===Pj&&Ok(this);this.rn=Cg;this.sp=(new ha(10,10)).freeze();this.tp=H.Aj;this.Sk=this.rm=q;this.bx="";this.ig=this.bk=q;this.Om="category";this.zf=q;this.Uh=new B(NaN,NaN,NaN,NaN);this.Ui=q;this.Bi=s}y.ba("Panel",D);y.Ka(D,P);
function Ok(a){a.ti=H.Ko;a.Gg=1;a.yh=q;a.Zk=q;a.Fg=1;a.Eg=q;a.Yk=q;a.Lc=[];a.Fc=[];a.ol=Pk;a.Uk=Pk;a.$i=0;a.Ei=0}
D.prototype.cloneProtected=function(a){P.prototype.cloneProtected.call(this,a);a.Y=this.Y;a.ne=this.ne.U();a.hg=this.hg;a.mf=this.mf;a.ep=this.ep.U();a.fc=this.fc;if(a.Y===Pj){a.ti=this.ti.U();a.Gg=this.Gg;a.yh=this.yh;a.Zk=this.Zk;a.Fg=this.Fg;a.Eg=this.Eg;a.Yk=this.Yk;var b=[];if(0<this.Lc.length)for(var c=this.Lc,d=c.length,e=0;e<d;e++)if(c[e]!==f){var g=c[e].copy();g.Kk(a);b[e]=g}a.Lc=b;b=[];if(0<this.Fc.length){c=this.Fc;d=c.length;for(e=0;e<d;e++)c[e]!==f&&(g=c[e].copy(),g.Kk(a),b[e]=g)}a.Fc=
b;a.ol=this.ol;a.Uk=this.Uk;a.$i=this.$i;a.Ei=this.Ei}a.rn=this.rn;a.sp.assign(this.sp);a.tp=this.tp.U();a.rm=this.rm;a.Sk=this.Sk;a.bx=this.bx;a.bk=this.bk;a.ig=this.ig;a.Om=this.Om;a.Uh.assign(this.Uh);a.Bi=this.Bi;this._buttonFillNormal&&(a._buttonFillNormal=this._buttonFillNormal);this._buttonFillOver&&(a._buttonFillOver=this._buttonFillOver);this._buttonStrokeNormal&&(a._buttonStrokeNormal=this._buttonStrokeNormal);this._buttonStrokeOver&&(a._buttonStrokeOver=this._buttonStrokeOver);this._treeExpandedFigure&&
(a._treeExpandedFigure=this._treeExpandedFigure);this._treeCollapsedFigure&&(a._treeCollapsedFigure=this._treeCollapsedFigure);this._subGraphExpandedFigure&&(a._subGraphExpandedFigure=this._subGraphExpandedFigure);this._subGraphCollapsedFigure&&(a._subGraphCollapsedFigure=this._subGraphCollapsedFigure)};D.prototype.bh=function(a){P.prototype.bh.call(this,a);a.za=this.za;for(var b=a.za.k;b.next();)b.value.Nh=a};
D.prototype.copy=function(){var a=P.prototype.copy.call(this);if(a instanceof D){var b=this.za;if(0<b.length)for(var c=b.length,d=0;d<c;d++){var e=b.n[d].copy(),g=a;e.Kk(g);e.nl=q;var k=g.za,l=k.count;k.wd(l,e);k=g.W;if(k!==q){k.gk=q;e.Td!==q&&k instanceof T&&(k.Bi=h);var m=g.h;m!==q&&m.va.cb||k.Qc(sd,"elements",g,q,e,q,l)}}return a}return q};D.prototype.toString=function(){return"Panel("+this.type+")#"+y.bc(this)};var Fg;D.Position=Fg=y.w(D,"Position",0);D.Horizontal=y.w(D,"Horizontal",1);var sh;
D.Vertical=sh=y.w(D,"Vertical",2);var zg;D.Spot=zg=y.w(D,"Spot",3);var Ch;D.Auto=Ch=y.w(D,"Auto",4);var Pj;D.Table=Pj=y.w(D,"Table",5);D.Viewbox=y.w(D,"Viewbox",6);var Fj;D.TableRow=Fj=y.w(D,"TableRow",7);var Gj;D.TableColumn=Gj=y.w(D,"TableColumn",8);var ig;D.Link=ig=y.w(D,"Link",9);var Jh;D.Grid=Jh=y.w(D,"Grid",10);y.g(D,"type",D.prototype.type);
y.defineProperty(D,{type:"type"},w("Y"),function(a){var b=this.Y;b!==a&&(x&&y.rb(a,D,D,"type"),(b===Fj||b===Gj)&&y.m("Cannot change Panel.type when it is already a TableRow or a TableColumn: "+a),this.Y=a,this.Y===Jh?this.hg=h:this.Y===Pj&&Ok(this),this.aa(),this.i("type",b,a))});y.A(D,{elements:"elements"},function(){return this.za.k});y.A(D,{Ta:"naturalBounds"},w("Jc"));y.g(D,"padding",D.prototype.padding);
y.defineProperty(D,{padding:"padding"},w("ne"),function(a){"number"===typeof a?(0>a&&y.ka(a,">= 0",D,"padding"),a=new ab(a)):(y.l(a,ab,D,"padding"),0>a.left&&y.ka(a.left,">= 0",D,"padding:val.left"),0>a.right&&y.ka(a.right,">= 0",D,"padding:val.right"),0>a.top&&y.ka(a.top,">= 0",D,"padding:val.top"),0>a.bottom&&y.ka(a.bottom,">= 0",D,"padding:val.bottom"));var b=this.ne;b.L(a)||(this.ne=a=a.U(),this.aa(),this.i("padding",b,a))});y.g(D,"defaultAlignment",D.prototype.kj);
y.defineProperty(D,{kj:"defaultAlignment"},w("ep"),function(a){var b=this.ep;b.L(a)||(x&&y.l(a,J,D,"defaultAlignment"),this.ep=a=a.U(),this.aa(),this.i("defaultAlignment",b,a))});y.g(D,"defaultStretch",D.prototype.uy);y.defineProperty(D,{uy:"defaultStretch"},w("fc"),function(a){var b=this.fc;b!==a&&(y.rb(a,P,D,"defaultStretch"),this.fc=a,this.aa(),this.i("defaultStretch",b,a))});y.g(D,"defaultSeparatorPadding",D.prototype.cG);
y.defineProperty(D,{cG:"defaultSeparatorPadding"},function(){return this.ti===f?H.Ko:this.ti},function(a){if(this.ti!==f){"number"===typeof a?a=new ab(a):x&&y.l(a,ab,D,"defaultSeparatorPadding");var b=this.ti;b.L(a)||(this.ti=a=a.U(),this.i("defaultSeparatorPadding",b,a))}});y.g(D,"defaultRowSeparatorStroke",D.prototype.aG);
y.defineProperty(D,{aG:"defaultRowSeparatorStroke"},function(){return this.yh===f?q:this.yh},function(a){var b=this.yh;if(b!==a&&(a===q||"string"===typeof a||a instanceof Gd))a instanceof Gd&&a.freeze(),this.yh=a,this.i("defaultRowSeparatorStroke",b,a)});y.g(D,"defaultRowSeparatorStrokeWidth",D.prototype.bG);
y.defineProperty(D,{bG:"defaultRowSeparatorStrokeWidth"},function(){return this.Gg===f?1:this.Gg},function(a){if(this.Gg!==f){var b=this.Gg;b!==a&&(this.Gg=a,this.i("defaultRowSeparatorStrokeWidth",b,a))}});y.g(D,"defaultRowSeparatorDashArray",D.prototype.$F);
y.defineProperty(D,{$F:"defaultRowSeparatorDashArray"},function(){return this.Zk===f?q:this.Zk},function(a){if(this.Zk!==f){var b=this.Zk;b!==a&&(a instanceof Array||y.Jb(a,"Array",D,"defaultRowSeparatorDashArray:val"),this.Zk=a,this.i("defaultRowSeparatorDashArray",b,a))}});y.g(D,"defaultColumnSeparatorStroke",D.prototype.TF);
y.defineProperty(D,{TF:"defaultColumnSeparatorStroke"},function(){return this.Eg===f?q:this.Eg},function(a){if(this.Eg!==f){var b=this.Eg;if(b!==a&&(a===q||"string"===typeof a||a instanceof Gd))a instanceof Gd&&a.freeze(),this.Eg=a,this.i("defaultColumnSeparatorStroke",b,a)}});y.g(D,"defaultColumnSeparatorStrokeWidth",D.prototype.UF);
y.defineProperty(D,{UF:"defaultColumnSeparatorStrokeWidth"},function(){return this.Fg===f?1:this.Fg},function(a){if(this.Fg!==f){var b=this.Fg;b!==a&&(this.Fg=a,this.i("defaultColumnSeparatorStrokeWidth",b,a))}});y.g(D,"defaultColumnSeparatorDashArray",D.prototype.SF);
y.defineProperty(D,{SF:"defaultColumnSeparatorDashArray"},function(){return this.Yk===f?q:this.Yk},function(a){if(this.Yk!==f){var b=this.Yk;b!==a&&(a instanceof Array||y.Jb(a,"Array",D,"defaultColumnSeparatorDashArray:val"),this.Yk=a,this.i("defaultColumnSeparatorDashArray",b,a))}});y.g(D,"viewboxStretch",D.prototype.IH);y.defineProperty(D,{IH:"viewboxStretch"},w("rn"),function(a){var b=this.rn;b!==a&&(y.rb(a,P,D,"viewboxStretch"),this.rn=a,this.i("viewboxStretch",b,a))});y.g(D,"gridCellSize",D.prototype.Br);
y.defineProperty(D,{Br:"gridCellSize"},w("sp"),function(a){var b=this.sp;b.L(a)||(y.l(a,ha,D,"gridCellSize"),(!a.V()||0===a.width||0===a.height)&&y.m("Invalid Panel.gridCellSize: "+a),this.sp=a.U(),this.h!==q&&this===this.h.Wn&&Xh(this.h),this.ta(),this.i("gridCellSize",b,a))});y.g(D,"gridOrigin",D.prototype.Fy);
y.defineProperty(D,{Fy:"gridOrigin"},w("tp"),function(a){var b=this.tp;b.L(a)||(y.l(a,A,D,"gridOrigin"),a.V()||y.m("Invalid Panel.gridOrigin: "+a),this.tp=a.U(),this.ta(),this.i("gridOrigin",b,a))});
D.prototype.Hl=function(a,b){var c=this.opacity,d=1;1!==c&&(d=a.globalAlpha,a.globalAlpha=d*c);if(this.Y===Jh){c=this.rj()*b.scale;0>=c&&(c=1);var e=this.Br,d=e.width,e=e.height,g=this.Ta,k=g.width,g=g.height,l=Math.ceil(k/d),m=Math.ceil(g/e),n=this.Fy;a.save();a.beginPath();a.rect(0,0,k,g);a.clip();for(var p=[],r=this.za.n,t=this.za.length,u=0;u<t;u++){var v=[];p.push(v);var z=r[u];if(z.visible)for(var z="LineV"===z.xb,C=u+1;C<t;C++){var K=r[C];K.visible&&"LineV"===K.xb===z&&(K=K.fi,2<=K&&v.push(K))}}r=
this.za.length;for(t=0;t<r;t++)if(u=this.za.n[t],u.visible){v=p[t];z=u.fi;C=s;K=u.yz;if(K!==q){var I=C=h;a.setLineDash!==f?(a.setLineDash(K),a.lineDashOffset=u.Mc):a.webkitLineDash!==f?(a.webkitLineDash=K,a.webkitLineDashOffset=u.Mc):a.mozDash!==f?(a.mozDash=K,a.mozDashOffset=u.Mc):I=s}a.lineWidth=u.jb;Hj(this,a,u.stroke,s);a.beginPath();if("LineV"===u.xb)for(var Q=Math.floor(-n.x/d),L=Q;L<=Q+l;L++){var S=L*d+n.x;if(0<=S&&(S<k&&Qk(L,z,v))&&(C&&!I?ij(a,S,0,S,g,K,u.Mc):(a.moveTo(S,0),a.lineTo(S,g)),
2>d*z*c))break}else for(L=Q=Math.floor(-n.y/e);L<=Q+m&&!(S=L*e+n.y,0<=S&&(S<=g&&Qk(L,z,v))&&(C&&!I?ij(a,0,S,k,S,K,u.Mc):(a.moveTo(0,S),a.lineTo(k,S)),2>e*z*c));L++);a.stroke();C&&(a.setLineDash!==f?(a.setLineDash(y.rh),a.lineDashOffset=0):a.webkitLineDash!==f?(a.webkitLineDash=y.rh,a.webkitLineDashOffset=0):a.mozDash!==f&&(a.mozDash=q,a.mozDashOffset=0))}a.restore();Hh(b,a)}else{this.Y===Pj&&(a.lineCap="butt",Rk(this,a,h,this.Lc,h),Rk(this,a,s,this.Fc,h),Sk(this,a,h,this.Lc),Sk(this,a,s,this.Fc),
Rk(this,a,h,this.Lc,s),Rk(this,a,s,this.Fc,s));I=this.za.length;for(e=0;e<I;e++)this.za.n[e].we(a,b);x&&x.nI&&this instanceof U&&x.mI(a,b,this);1!==c&&(a.globalAlpha=d)}};
function Sk(a,b,c,d){for(var e=d.length,g,k=a.ua,l=c?a.Od(0):a.Nd(0),m=0;m<e;m++)if(g=d[m],g!==f&&g!==l&&0!==g.Mb){var n=g.Yl;isNaN(n)&&(n=c?a.Gg:a.Fg);var p=g.Xl;p===q&&(p=c?a.yh:a.Eg);if(!(0===n||p===q)){Hj(a,b,p,s);var p=s,r=g.TD;if(r!==q){var t=p=h;b.setLineDash!==f?(b.setLineDash(r),b.lineDashOffset=a.Mc):b.webkitLineDash!==f?(b.webkitLineDash=r,b.webkitLineDashOffset=a.Mc):b.mozDash!==f?(b.mozDash=r,b.mozDashOffset=a.Mc):t=s}b.beginPath();var u=g.position+n;c?u>k.height&&(n-=u-k.height):u>k.width&&
(n-=u-k.width);g=g.position+n/2;b.lineWidth=n;u=a.padding;c?(g+=u.top,n=u.left,u=k.width-u.right,p&&!t?ij(b,n,g,u,g,r,0):(b.moveTo(n,g),b.lineTo(u,g))):(g+=u.left,n=u.top,u=k.height-u.bottom,p&&!t?ij(b,g,n,g,u,r,0):(b.moveTo(g,n),b.lineTo(g,u)));b.stroke();p&&(b.setLineDash!==f?(b.setLineDash(y.rh),b.lineDashOffset=0):b.webkitLineDash!==f?(b.webkitLineDash=y.rh,b.webkitLineDashOffset=0):b.mozDash!==f&&(b.mozDash=q,b.mozDashOffset=0))}}}
function Rk(a,b,c,d,e){for(var g=d.length,k,l=a.ua,m=0;m<g;m++)if(k=d[m],k!==f&&k.background!==q&&k.Gu!==e&&0!==k.Mb){var n=c?l.height:l.width;if(!(k.position>n)){var p=Tk(k),r=k.Yl;isNaN(r)&&(r=c?a.Gg:a.Fg);var t=k.Xl;t===q&&(t=c?a.yh:a.Eg);t===q&&(r=0);p-=r;r=k.position+r;p+=k.Mb;r+p>n&&(p=n-r);0>=p||(n=a.padding,Hj(a,b,k.background,h),c?b.fillRect(n.left,r+n.top,l.width-(n.left+n.right),p):b.fillRect(r+n.left,n.top,p,l.height-(n.top+n.bottom)))}}}
function Qk(a,b,c){if(0!==a%b)return s;b=c.length;for(var d=0;d<b;d++)if(0===a%c[d])return s;return h}
D.prototype.Nr=function(a,b,c,d){var e=this.Uh;e.width=0;e.height=0;var g=this.Aa,k=this.Ce;c===f&&(c=k.width,d=k.height);c=Math.max(c,k.width);d=Math.max(d,k.height);var l=this.he;isNaN(g.width)||(a=Math.min(g.width,l.width));isNaN(g.height)||(b=Math.min(g.height,l.height));a=Math.max(c,a);b=Math.max(d,b);var m=this.padding;a=Math.max(a-m.left-m.right,0);b=Math.max(b-m.top-m.bottom,0);var n=this.za,p=n.length;if(0===p){var r=this.Jc;Za(r,!isNaN(g.width)?a:0,!isNaN(g.height)?b:0);jj(this,0,0,r.width,
r.height)}else{var t=this.Y.Fb;switch(t){case "Position":var u=a,v=b,z=c,C=d;e.x=0;e.y=0;e.width=0;for(var K=e.height=0;K<p;K++){var I=n.n[K];if(I.visible||I===this.Wb){var Q=I.margin,L=Q.right+Q.left,S=Q.top+Q.bottom;ah(I,u,v,z,C);var Z=I.Ba,X=Math.max(Z.width+L,0),ea=Math.max(Z.height+S,0),ia=I.position.x,W=I.position.y;isFinite(ia)||(ia=0);isFinite(W)||(W=0);if(I instanceof V&&I.Jy)var wa=I.jb/2,ia=ia-wa,W=W-wa;hb(e,ia,W,X,ea)}}break;case "Vertical":for(var Oa=a,Qa=c,Sa=y.ub(),Aa=0;Aa<p;Aa++){var Wa=
n.n[Aa];if(Wa.visible||Wa===this.Wb){var Fa=mj(Wa);if(Fa!==dj&&Fa!==ej)Sa.push(Wa);else{var xb=Wa.margin,of=xb.right+xb.left,rc=xb.top+xb.bottom;ah(Wa,Oa,Infinity,Qa,0);var pf=Wa.Ba,sc=Math.max(pf.width+of,0),qb=Math.max(pf.height+rc,0);e.width=Math.max(e.width,sc);e.height+=qb}}}var rb=Sa.length;if(0!==rb){this.Aa.width?Oa=Math.min(this.Aa.width,this.he.width):0!==e.width&&(Oa=Math.min(e.width,this.he.width));for(Aa=0;Aa<rb;Aa++)if(Wa=Sa[Aa],Wa.visible||Wa===this.Wb)xb=Wa.margin,of=xb.right+xb.left,
rc=xb.top+xb.bottom,ah(Wa,Oa,Infinity,Qa,0),pf=Wa.Ba,sc=Math.max(pf.width+of,0),qb=Math.max(pf.height+rc,0),e.width=Math.max(e.width,sc),e.height+=qb;y.ya(Sa)}break;case "Horizontal":for(var La=b,Pa=d,ib=y.ub(),zb=0;zb<p;zb++){var db=n.n[zb];if(db.visible||db===this.Wb){var Rf=mj(db);if(Rf!==dj&&Rf!==fj)ib.push(db);else{var nd=db.margin,Ad=nd.right+nd.left,Od=nd.top+nd.bottom;ah(db,Infinity,La,0,Pa);var ce=db.Ba,Bd=Math.max(ce.width+Ad,0),de=Math.max(ce.height+Od,0);e.width+=Bd;e.height=Math.max(e.height,
de)}}}var Jg=ib.length;if(0!==Jg){this.Aa.height?La=Math.min(this.Aa.height,this.he.height):0!==e.height&&(La=Math.min(e.height,this.he.height));for(zb=0;zb<Jg;zb++)if(db=ib[zb],db.visible||db===this.Wb)nd=db.margin,Ad=nd.right+nd.left,Od=nd.top+nd.bottom,ah(db,Infinity,La,0,Pa),ce=db.Ba,Bd=Math.max(ce.width+Ad,0),de=Math.max(ce.height+Od,0),e.width+=Bd,e.height=Math.max(e.height,de);y.ya(ib)}break;case "Spot":a:{var Jb=a,qf=b,Pb=c,lc=d,Tb=Mj(this,n,p),Xa=Tb.margin,tc,Se,Sf=Xa.right+Xa.left,mg=Xa.top+
Xa.bottom;ah(Tb,Jb,qf,Pb,lc);var Nb=Tb.Ba,od=Nb.width,zc=Nb.height,pd=Math.max(od+Sf,0),eb=Math.max(zc+mg,0);e.x=-Xa.left;e.y=-Xa.top;e.width=pd;e.height=eb;for(var ob=0;ob<p;ob++){var ec=n.n[ob];if(ec!==Tb&&(ec.visible||ec===this.Wb)){Xa=ec.margin;tc=Xa.right+Xa.left;Se=Xa.top+Xa.bottom;ah(ec,Jb,qf,0,0);var Nb=ec.Ba,pd=Math.max(Nb.width+tc,0),eb=Math.max(Nb.height+Se,0),Ab=ec.alignment;Db(Ab)&&(Ab=this.kj);yb(Ab)||(Ab=Sb);var uc=ec.bj;Db(uc)&&(uc=Sb);hb(e,Ab.x*od+Ab.offsetX-(uc.x*Nb.width-uc.offsetX)-
Xa.left,Ab.y*zc+Ab.offsetY-(uc.y*Nb.height-uc.offsetY)-Xa.top,pd,eb)}}var rf=Tb.mh;rf===Bg&&(rf=mj(Tb));switch(rf){case dj:break a;case qc:if(!isFinite(Jb)&&!isFinite(qf))break a;break;case fj:if(!isFinite(Jb))break a;break;case ej:if(!isFinite(qf))break a}Nb=Tb.Ba;od=Nb.width;zc=Nb.height;pd=Math.max(od+Sf,0);eb=Math.max(zc+mg,0);Xa=Tb.margin;e.x=-Xa.left;e.y=-Xa.top;e.width=pd;e.height=eb;for(ob=0;ob<p;ob++)if(ec=n.n[ob],ec!==Tb&&(ec.visible||ec===this.Wb))Xa=ec.margin,tc=Xa.right+Xa.left,Se=Xa.top+
Xa.bottom,Nb=ec.Ba,pd=Math.max(Nb.width+tc,0),eb=Math.max(Nb.height+Se,0),Ab=ec.alignment,Db(Ab)&&(Ab=this.kj),yb(Ab)||(Ab=Sb),uc=ec.bj,Db(uc)&&(uc=Sb),hb(e,Ab.x*od+Ab.offsetX-(uc.x*Nb.width-uc.offsetX)-Xa.left,Ab.y*zc+Ab.offsetY-(uc.y*Nb.height-uc.offsetY)-Xa.top,pd,eb)}break;case "Auto":var Ac=a,Eb=b,Pd=c,qe=d,Fb=Mj(this,n,p),Qd=Fb.margin,Te=Qd.right+Qd.left,re=Qd.top+Qd.bottom;ah(Fb,Ac,Eb,Pd,qe);var pb=Fb.Ba,sf=Math.max(pb.width+Te,0),Gb=Math.max(pb.height+re,0),fb=Uk(Fb),Xc=fb.x*sf+fb.offsetX,
Ub=fb.y*Gb+fb.offsetY,fb=Vk(Fb),Rd=fb.x*sf+fb.offsetX,ee=fb.y*Gb+fb.offsetY,fe=Ac,se=Eb;isFinite(Ac)&&(fe=Math.abs(Xc-Rd));isFinite(Eb)&&(se=Math.abs(Ub-ee));var Yc=y.Nk();Yc.q(0,0);for(var Cd=0;Cd<p;Cd++){var sb=n.n[Cd];if(sb!==Fb&&(sb.visible||sb===this.Wb)){var Qd=sb.margin,Ue=Qd.right+Qd.left,Ve=Qd.top+Qd.bottom;ah(sb,fe,se,Pd,qe);pb=sb.Ba;sf=Math.max(pb.width+Ue,0);Gb=Math.max(pb.height+Ve,0);Yc.q(Math.max(sf,Yc.width),Math.max(Gb,Yc.height))}}if(1===p)e.width=sf,e.height=Gb,y.qj(Yc);else{var wb=
Uk(Fb),te=Vk(Fb),Kb,Bc;te.x!==wb.x&&te.y!==wb.y&&(Kb=Yc.width/Math.abs(te.x-wb.x),Bc=Yc.height/Math.abs(te.y-wb.y));y.qj(Yc);var Dd=0;Fb instanceof V&&(Dd=Fb.jb*Fb.scale,Wk(Fb)===Cg&&(Kb=Math.max(Kb,Bc),Bc=Math.max(Kb,Bc)));Kb+=Math.abs(wb.offsetX)+Math.abs(te.offsetX)+Dd;Bc+=Math.abs(wb.offsetY)+Math.abs(te.offsetY)+Dd;var Hc=Fb.mh;Hc===Bg&&(Hc=mj(Fb));switch(Hc){case dj:qe=Pd=0;break;case qc:isFinite(Ac)&&(Kb=Ac);isFinite(Eb)&&(Bc=Eb);break;case fj:isFinite(Ac)&&(Kb=Ac);qe=0;break;case ej:Pd=0,
isFinite(Eb)&&(Bc=Eb)}Fb instanceof V&&!Fb.Aa.V()&&(Fb.og?Fb.Qj=q:Fb.Na=q);Nj(Fb);ah(Fb,Kb,Bc,Pd,qe);e.width=Fb.Ba.width+Te;e.height=Fb.Ba.height+re}break;case "Table":for(var Qb=a,ue=b,tb=p,gb=c,We=d,Mc=y.ub(),Sd=y.ub(),ta=0;ta<tb;ta++){var va=n.n[ta];if(va instanceof D&&(va.type===Fj||va.type===Gj)&&va.visible){Sd.push(va);for(var ng=va.za,Kg=ng.length,Zc=0;Zc<Kg;Zc++){var th=ng.n[Zc];va.type===Fj?th.qc=va.qc:va.type===Gj&&(th.column=va.column);Mc.push(th)}}else Mc.push(va)}for(var tb=Mc.length,
Ic=[],ta=0;ta<tb;ta++)va=Mc[ta],nj(va,h),Bj(va,h),Ic[va.qc]||(Ic[va.qc]=[]),Ic[va.qc][va.column]||(Ic[va.qc][va.column]=[]),Ic[va.qc][va.column].push(va);y.ya(Mc);for(var uh=y.ub(),$c=y.ub(),ge=y.ub(),Ed={count:0},he={count:0},qd=Qb,Td=ue,Tf=this.Lc,tb=Tf.length,ta=0;ta<tb;ta++){var ja=Tf[ta];ja!==f&&Xk(ja,0)}Tf=this.Fc;tb=Tf.length;for(ta=0;ta<tb;ta++)ja=Tf[ta],ja!==f&&Xk(ja,0);for(var Xb,pj=Ic.length,ta=0;ta<pj;ta++)if(Ic[ta]){var qj=Ic[ta].length,jb=this.Od(ta);Xk(jb,0);for(Zc=0;Zc<qj;Zc++)if(Ic[ta][Zc]){var ub=
this.Nd(Zc);uh[Zc]===f&&(Xk(ub,0),uh[Zc]=h);for(var li=Ic[ta][Zc],vh=li.length,mi=0;mi<vh;mi++)if(va=li[mi],va.visible||va===this.Wb)if(1<va.lk||1<va.Pj)$c.push(va);else{var ie=Qj(va,jb,ub);if(ie!==dj&&!va.Aa.V())Ed[Zc]===f&&(Ed[Zc]=-1,Ed.count++),he[ta]===f&&(he[ta]=-1,he.count++),ge.push(va),ah(va,Infinity,Infinity,gb,We);else{var ve=isFinite(ub.width)?ub.width:Qb,we=isFinite(jb.height)?jb.height:ue,vc=va.margin,Uf=vc.right+vc.left,Vf=vc.top+vc.bottom;ah(va,Infinity,Infinity,gb,We);var Jc=va.Ba,
xe=Math.max(Jc.width+Uf,0),Fd=Math.max(Jc.height+Vf,0),ja=this.Od(ta);Xb=Math.max(Fd-ja.Mb,0);Xb>Td&&(Xb=Td);Xk(ja,ja.Mb+Xb);Td=Math.max(Td-Xb,0);ja=this.Nd(Zc);Xb=Math.max(xe-ja.Mb,0);Xb>qd&&(Xb=qd);Xk(ja,ja.Mb+Xb);qd=Math.max(qd-Xb,0)}}}}y.ya(uh);for(var Cc=0,Ud=0,tb=this.Cu,ta=0;ta<tb;ta++)this.Fc[ta]!==f&&(Cc+=this.Nd(ta).vb);tb=this.sv;for(ta=0;ta<tb;ta++)this.Lc[ta]!==f&&(Ud+=this.Od(ta).vb);qd=Math.max(Qb-Cc,0);Td=Math.max(ue-Ud,0);tb=ge.length;for(ta=0;ta<tb;ta++){var va=ge[ta],jb=this.Od(va.qc),
ub=this.Nd(va.column),ni=va.Ba,vc=va.margin,Uf=vc.right+vc.left,Vf=vc.top+vc.bottom;Ed[va.column]=Math.max(ni.width+Uf-ub.Mb,0);he[va.qc]=Math.max(ni.height+Vf-jb.Mb,0)}var wh=0,xh=0;for(ta in he)"count"!==ta&&(wh+=he[ta]);for(ta in Ed)"count"!==ta&&(xh+=Ed[ta]);for(var Lb=y.Nk(),ta=0;ta<tb;ta++)if(va=ge[ta],va.visible||va===this.Wb){jb=this.Od(va.qc);ub=this.Nd(va.column);ve=isFinite(ub.width)?ub.width:isFinite(qd)?ub.Mb+Ed[va.column]/xh*qd:ub.Mb||qd;we=isFinite(jb.height)?jb.height:isFinite(Td)?
jb.Mb+he[va.qc]/wh*Td:jb.Mb||Td;ve=Math.max(0,ve-Tk(ub));we=Math.max(0,we-Tk(jb));Lb.q(Math.max(ub.hh,Math.min(ve,ub.Xe)),Math.max(jb.hh,Math.min(we,jb.Xe)));ie=Qj(va,jb,ub);switch(ie){case fj:Lb.height=Infinity;break;case ej:Lb.width=Infinity}vc=va.margin;Uf=vc.right+vc.left;Vf=vc.top+vc.bottom;Nj(va);ah(va,Lb.width,Lb.height,ub.hh,jb.hh);var Jc=va.Ba,xe=Math.max(Jc.width+Uf,0),Fd=Math.max(Jc.height+Vf,0),xe=Math.min(xe,Lb.width),Fd=Math.min(Fd,Lb.height),Kc;Kc=jb.Mb;Xk(jb,Math.max(jb.Mb,Fd));Xb=
jb.Mb-Kc;Td=Math.max(Td-Xb,0);Kc=ub.Mb;Xk(ub,Math.max(ub.Mb,xe));Xb=ub.Mb-Kc;qd=Math.max(qd-Xb,0)}y.ya(ge);for(var je=y.Nk(),tb=$c.length,ta=0;ta<tb;ta++)if(va=$c[ta],va.visible||va===this.Wb){jb=this.Od(va.qc);ub=this.Nd(va.column);Lb.q(Math.max(ub.hh,Math.min(Qb,ub.Xe)),Math.max(jb.hh,Math.min(ue,jb.Xe)));ie=Qj(va,jb,ub);switch(ie){case qc:0!==ub.Mb&&(Lb.width=Math.min(Lb.width,ub.Mb));0!==jb.Mb&&(Lb.height=Math.min(Lb.height,jb.Mb));break;case fj:0!==ub.Mb&&(Lb.width=Math.min(Lb.width,ub.Mb));
break;case ej:0!==jb.Mb&&(Lb.height=Math.min(Lb.height,jb.Mb))}isFinite(ub.width)&&(Lb.width=ub.width);isFinite(jb.height)&&(Lb.height=jb.height);je.q(0,0);for(var mc=1;mc<va.lk&&!(va.qc+mc>=this.sv);mc++)ja=this.Od(va.qc+mc),je.height+=Math.max(ja.hh,isNaN(ja.nf)?ja.Xe:Math.min(ja.nf,ja.Xe));for(mc=1;mc<va.Pj&&!(va.column+mc>=this.Cu);mc++)ja=this.Nd(va.column+mc),je.width+=Math.max(ja.hh,isNaN(ja.nf)?ja.Xe:Math.min(ja.nf,ja.Xe));Lb.width+=je.width;Lb.height+=je.height;vc=va.margin;Uf=vc.right+vc.left;
Vf=vc.top+vc.bottom;ah(va,Lb.width,Lb.height,gb,We);for(var Jc=va.Ba,xe=Math.max(Jc.width+Uf,0),Fd=Math.max(Jc.height+Vf,0),Vd=0,mc=0;mc<va.lk;mc++)ja=this.Od(va.qc+mc),Vd+=ja.total||0;if(Vd<Fd)for(var ye=Fd-Vd;0<ye;){var ke=ja.vb||0;isNaN(ja.height)&&ja.Xe>ke&&(Xk(ja,Math.min(ja.Xe,ke+ye)),ja.vb!==ke&&(ye-=ja.vb-ke));if(-1===ja.index-1)break;ja=this.Od(ja.index-1)}for(var Wf=0,mc=0;mc<va.Pj;mc++)ja=this.Nd(va.column+mc),Wf+=ja.total||0;if(Wf<xe)for(ye=xe-Wf;0<ye;){ke=ja.vb||0;isNaN(ja.width)&&ja.Xe>
ke&&(Xk(ja,Math.min(ja.Xe,ke+ye)),ja.vb!==ke&&(ye-=ja.vb-ke));if(-1===ja.index-1)break;ja=this.Nd(ja.index-1)}}y.ya($c);y.qj(je);y.qj(Lb);for(var og=0,ze=0,ie=mj(this),tf=this.Aa,Lg=this.he,pg=Ud=Cc=0,uf=0,tb=this.Cu,ta=0;ta<tb;ta++)this.Fc[ta]!==f&&(ja=this.Nd(ta),isFinite(ja.width)?pg+=ja.width:Yk(ja)===Zk?pg+=ja.vb:0!==ja.vb&&(Cc+=ja.vb,Cc+=Tk(ja)));var og=isFinite(tf.width)?Math.min(tf.width,Lg.width):ie!==dj&&isFinite(Qb)?Qb:Cc,og=Math.max(og,this.Ce.width),og=Math.max(og-pg,0),Wd=Math.max(og/
Cc,1);isFinite(Wd)||(Wd=1);for(ta=0;ta<tb;ta++)this.Fc[ta]!==f&&(ja=this.Nd(ta),!isFinite(ja.width)&&Yk(ja)!==Zk&&Xk(ja,ja.vb*Wd),ja.nb=e.width,0!==ja.vb&&(e.width+=ja.vb,e.width+=Tk(ja)));tb=this.sv;for(ta=0;ta<tb;ta++)this.Lc[ta]!==f&&(ja=this.Od(ta),isFinite(ja.height)?uf+=ja.height:Yk(ja)===Zk?uf+=ja.vb:0!==ja.vb&&(Ud+=ja.vb,Ud+=Tk(ja)));var ze=isFinite(tf.height)?Math.min(tf.height,Lg.height):ie!==dj&&isFinite(ue)?ue:Ud,ze=Math.max(ze,this.Ce.height),ze=Math.max(ze-uf,0),vf=Math.max(ze/Ud,1);
isFinite(vf)||(vf=1);for(ta=0;ta<tb;ta++)this.Lc[ta]!==f&&(ja=this.Od(ta),!isFinite(ja.height)&&Yk(ja)!==Zk&&Xk(ja,ja.vb*vf),ja.nb=e.height,0!==ja.vb&&(e.height+=ja.vb,e.height+=Tk(ja)));tb=Sd.length;for(ta=0;ta<tb;ta++){var Nc=Sd[ta];Nc.type===Fj?(ve=e.width,ja=this.Od(Nc.qc),we=ja.Mb):(ja=this.Nd(Nc.column),ve=ja.Mb,we=e.height);Nc.wc.q(0,0,ve,we);nj(Nc,s);Ic[Nc.qc]||(Ic[Nc.qc]=[]);Ic[Nc.qc][Nc.column]||(Ic[Nc.qc][Nc.column]=[]);Ic[Nc.qc][Nc.column].push(Nc)}y.ya(Sd);this.aF=Ic;break;case "Viewbox":var Xe=
a,Ng=b,qg=c,Ye=d;1<p&&y.m("Viewbox Panel cannot contain more than one GraphObject.");var ad=n.n[0];ad.Rb=1;Nj(ad);ah(ad,Infinity,Infinity,qg,Ye);var Xf=ad.Ba,Ae=ad.margin,oi=Ae.right+Ae.left,Yn=Ae.top+Ae.bottom;if(isFinite(Xe)||isFinite(Ng)){var Xp=ad.scale,Zn=Xf.width,$n=Xf.height,ao=Math.max(Xe-oi,0),bo=Math.max(Ng-Yn,0);ad.Rb=this.rn===Cg?ad.Rb*Math.min(ao/Zn,bo/$n):ad.Rb*Math.max(ao/Zn,bo/$n);Xp!==ad.scale&&(nj(ad,h),ah(ad,Infinity,Infinity,qg,Ye))}Xf=ad.Ba;e.width=isFinite(Xe)?Xe:Math.max(Xf.width+
oi,0);e.height=isFinite(Ng)?Ng:Math.max(Xf.height+Yn,0);break;case "Link":var sj=this instanceof Ge?this.aj:this;if(0===p){var tj=this.Jc;Za(tj,0,0);var Xd=this.Ba;Xd.q(0,0,0,0)}else{var uj=this.rp(),Ze=this.Ai(),Be=this.Uh;Be.assign(Ze);Be.x=0;Be.y=0;var yh,pi=this.Nw();yh=this.qa!==f?this.qa:pi.count;this.Fh.q(Ze.x,Ze.y);this.th.clear();uj!==q&&($k(uj,Ze.width,Ze.height),Xd=uj.Ba,Be.zj(Xd),this.th.add(Xd));for(var zh=y.yg(),rg=y.M(),Yf=y.M(),hl=0;hl<p;hl++){var Yb=n.n[hl];if(Yb!==uj)if(Yb.ji&&Yb instanceof
V)$k(Yb,Ze.width,Ze.height),Xd=Yb.Ba,Be.zj(Xd),this.th.add(Xd);else if(2>yh)ah(Yb,Infinity,Infinity),Xd=Yb.Ba,Be.zj(Xd),this.th.add(Xd);else{var Zf=Yb.af,eo=Yb.hs,il=Yb.bj;Cb(il)&&(il=Sb);var vj=Yb.is,Yp=Yb.rz,qi,ri,wj=0;if(Zf<-yh||Zf>=yh){var fo=sj.dD,xj=sj.cD;vj!==cj&&(wj=sj.computeAngle(Yb,vj,xj),Yb.angle=wj);qi=fo.x-Ze.x;ri=fo.y-Ze.y}else{var wf,Ah;if(0<=Zf)wf=pi.n[Zf],Ah=Zf<yh-1?pi.n[Zf+1]:wf;else{var jl=yh+Zf;wf=pi.n[jl];Ah=0<jl?pi.n[jl-1]:wf}xj=0<=Zf?wf.ai(Ah):Ah.ai(wf);vj!==cj&&(wj=sj.computeAngle(Yb,
vj,xj),Yb.lm=wj);qi=wf.x+(Ah.x-wf.x)*eo-Ze.x;ri=wf.y+(Ah.y-wf.y)*eo-Ze.y}ah(Yb,Infinity,Infinity);var Xd=Yb.Ba,tj=Yb.Ta,si=0;Yb instanceof V&&(si=Yb.jb);var ho=tj.width+si,io=tj.height+si;zh.reset();zh.translate(-Xd.x,-Xd.y);zh.scale(Yb.scale,Yb.scale);zh.rotate(Yb.angle,ho/2,io/2);var Bh=new B(0,0,ho,io);rg.ms(Bh,il);zh.Qa(rg);var Zp=-rg.x+si/2,$p=-rg.y+si/2;Yf.assign(Yp);isNaN(Yf.x)&&(Yf.x=0<=Zf?rg.x+3:-(rg.x+3));isNaN(Yf.y)&&(Yf.y=-(rg.y+3));Yf.rotate(xj);qi+=Yf.x;ri+=Yf.y;Bh.set(Xd);Bh.x=qi+Zp;
Bh.y=ri+$p;this.th.add(Bh);Be.zj(Bh)}}if(this.Ke)for(var jo=this.tj;jo.next();)ah(jo.value,Infinity,Infinity);this.Uh=Be;var yj=this.Fh;yj&&yj.q(yj.x+Be.x,yj.y+Be.y);Za(e,Be.width||0,Be.height||0);y.ye(zh);y.B(rg);y.B(Yf)}break;case "Grid":break;case "TableRow":case "TableColumn":y.m(this.toString()+" is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");break;default:y.m("Unknown panel type: "+t)}var Ce=e.width,De=e.height,zj=this.padding,aq=
zj.top+zj.bottom,Ce=Ce+(zj.left+zj.right),De=De+aq;isFinite(g.width)&&(Ce=g.width);isFinite(g.height)&&(De=g.height);Ce=Math.min(l.width,Ce);De=Math.min(l.height,De);Ce=Math.max(k.width,Ce);De=Math.max(k.height,De);Ce=Math.max(c,Ce);De=Math.max(d,De);e.width=Ce;e.height=De;r=this.Jc;Za(r,Ce,De);jj(this,0,0,Ce,De)}};D.prototype.findMainElement=D.prototype.qG=function(){this.Ui===q&&Mj(this,this.za,this.za.length);return this.Ui};
function Mj(a,b,c){for(var d=0;d<c;d++){var e=b.n[d];if(e.ji===h)return a.Ui=e}b=b.n[0];return a.Ui=b}
D.prototype.gj=function(a,b,c,d){var e=this.Uh,g=this.za,k=g.length,l=y.xj(0,0,0,0);if(0===k){var m=this.ua;m.x=a;m.y=b;m.width=c;m.height=d}else{if(!this.Aa.V()){var n=mj(this),p=this.wc,r=p.width,t=p.height,u=this.margin,v=u.left+u.right,z=u.top+u.bottom;r===c&&t===d&&(n=dj);switch(n){case dj:if(r>c||t>d)this.aa(),ah(this,r>c?c:r,t>d?d:t);break;case qc:nj(this,h);ah(this,c+v,d+z,0,0);break;case fj:nj(this,h);ah(this,c+v,t+z,0,0);break;case ej:nj(this,h),ah(this,r+v,d+z,0,0)}}m=this.ua;m.x=a;m.y=
b;m.width=c;m.height=d;var C=this.Y.Fb;switch(C){case "Position":for(var K=e.x-this.padding.left,I=e.y-this.padding.top,Q=0;Q<k;Q++){var L=g.n[Q],S=L.Ba,Z=L.margin,X=L.position.x,ea=L.position.y;l.x=isNaN(X)?-K:X-K;l.y=isNaN(ea)?-I:ea-I;if(L instanceof V&&L.Jy){var ia=L.jb/2;l.x-=ia;l.y-=ia}l.x+=Z.left;l.y+=Z.top;l.width=S.width;l.height=S.height;L.visible&&L.tc(l.x,l.y,l.width,l.height)}break;case "Vertical":for(var W=this.padding.left,wa=this.padding.top,Oa=0;Oa<k;Oa++){var Qa=W,Sa=g.n[Oa],Aa=Sa.Ba,
Wa=Sa.margin,Fa=Wa.left+Wa.right,xb=W+this.padding.right,of=Aa.width,rc=mj(Sa);if(isNaN(Sa.Aa.width)&&rc===qc||rc===fj)of=Math.max(e.width-Fa-xb,0);var pf=of+Fa+xb,sc=Sa.alignment;Db(sc)&&(sc=this.kj);yb(sc)||(sc=Sb);l.x=Qa+sc.offsetX+Wa.left+(e.width*sc.x-pf*sc.x);l.y=wa+sc.offsetY+Wa.top;l.width=of;l.height=Aa.height;Sa.visible&&(Sa.tc(l.x,l.y,l.width,l.height),wa+=Aa.height+Wa.bottom+Wa.top)}break;case "Horizontal":for(var qb=this.padding.top,rb=this.padding.left,La=0;La<k;La++){var Pa=qb,ib=g.n[La],
zb=ib.Ba,db=ib.margin,Rf=db.top+db.bottom,nd=qb+this.padding.bottom,Ad=zb.height,Od=mj(ib);if(isNaN(ib.Aa.height)&&Od===qc||Od===ej)Ad=Math.max(e.height-Rf-nd,0);var ce=Ad+Rf+nd,Bd=ib.alignment;Db(Bd)&&(Bd=this.kj);yb(Bd)||(Bd=Sb);l.x=rb+Bd.offsetX+db.left;l.y=Pa+Bd.offsetY+db.top+(e.height*Bd.y-ce*Bd.y);l.width=zb.width;l.height=Ad;ib.visible&&(ib.tc(l.x,l.y,l.width,l.height),rb+=zb.width+db.left+db.right)}break;case "Spot":var de=Mj(this,g,k),Jg=de.Ba,Jb=Jg.width,qf=Jg.height,Pb=this.padding,lc=
Pb.left,Tb=Pb.top;l.x=lc-e.x;l.y=Tb-e.y;de.tc(l.x,l.y,Jb,qf);for(var Xa=0;Xa<k;Xa++){var tc=g.n[Xa];if(tc!==de){var Se=tc.Ba,Sf=Se.width,mg=Se.height,Nb=tc.alignment;Db(Nb)&&(Nb=this.kj);yb(Nb)||(Nb=Sb);var od=tc.bj;Db(od)&&(od=Sb);l.x=Nb.x*Jb+Nb.offsetX-(od.x*Sf-od.offsetX);l.y=Nb.y*qf+Nb.offsetY-(od.y*mg-od.offsetY);l.x-=e.x;l.y-=e.y;tc.visible&&tc.tc(lc+l.x,Tb+l.y,Sf,mg)}}break;case "Auto":var zc=Mj(this,g,k),pd=zc.Ba,eb=y.df();eb.q(0,0,1,1);var ob=zc.margin,ec=ob.left,Ab=ob.top,uc=this.padding,
rf=uc.left,Ac=uc.top;l.x=ec;l.y=Ab;l.width=pd.width;l.height=pd.height;zc.tc(rf+l.x,Ac+l.y,l.width,l.height);var Eb=Uk(zc),Pd=Vk(zc),qe=0+Eb.y*pd.height+Eb.offsetY,Fb=0+Pd.x*pd.width+Pd.offsetX,Qd=0+Pd.y*pd.height+Pd.offsetY;eb.x=0+Eb.x*pd.width+Eb.offsetX;eb.y=qe;hb(eb,Fb,Qd,0,0);eb.x+=ec+rf;eb.y+=Ab+Ac;for(var Te=0;Te<k;Te++){var re=g.n[Te];if(re!==zc){var pb=re.Ba,ob=re.margin,sf=Math.max(pb.width+ob.right+ob.left,0),Gb=Math.max(pb.height+ob.top+ob.bottom,0),fb=re.alignment;Db(fb)&&(fb=this.kj);
yb(fb)||(fb=Sb);l.x=eb.width*fb.x+fb.offsetX-sf*fb.x+ob.left+eb.x;l.y=eb.height*fb.y+fb.offsetY-Gb*fb.y+ob.top+eb.y;l.width=eb.width;l.height=eb.height;re.visible&&(kb(eb.x,eb.y,eb.width,eb.height,l.x,l.y,pb.width,pb.height)?re.tc(l.x,l.y,pb.width,pb.height):re.tc(l.x,l.y,pb.width,pb.height,new B(eb.x,eb.y,eb.width,eb.height)))}}y.Bc(eb);break;case "Table":for(var Xc=this.padding,Ub=Xc.left,Rd=Xc.top,ee=this.aF,fe,se,Yc=ee.length,Cd=0,sb=0;sb<Yc;sb++)ee[sb]&&(Cd=Math.max(Cd,ee[sb].length));for(var Ue=
Math.min(this.$i,Yc-1);Ue!==Yc&&(this.Lc[Ue]===f||0===this.Lc[Ue].vb);)Ue++;for(var Ue=Math.min(Ue,Yc-1),Ve=-this.Lc[Ue].nb,wb=Math.min(this.Ei,Cd-1);wb!==Cd&&(this.Fc[wb]===f||0===this.Fc[wb].vb);)wb++;for(var wb=Math.min(wb,Cd-1),te=-this.Fc[wb].nb,Kb=y.Nk(),sb=0;sb<Yc;sb++)if(ee[sb]){var Cd=ee[sb].length,Bc=this.Od(sb);se=Bc.nb+Ve+Rd+al(Bc);for(var Dd=0;Dd<Cd;Dd++)if(ee[sb][Dd]){var Hc=this.Nd(Dd);fe=Hc.nb+te+Ub+al(Hc);for(var Qb=ee[sb][Dd],ue=Qb.length,tb=0;tb<ue;tb++){var gb=Qb[tb],We=gb.Ba;
if(gb instanceof D&&(gb.type===Fj||gb.type===Gj)){gb.Pb.Pa();var Mc=gb.Pb;Mc.x=gb.type===Fj?Ub:fe;Mc.y=gb.type===Gj?Rd:se;Mc.width=We.width;Mc.height=We.height;gb.Pb.freeze();Bj(gb,s)}else{Kb.q(0,0);for(var Sd=1;Sd<gb.rowSpan&&!(sb+Sd>=this.sv);Sd++){var ta=this.Od(sb+Sd);Kb.height+=ta.total}for(Sd=1;Sd<gb.OB&&!(Dd+Sd>=this.Cu);Sd++){var va=this.Nd(Dd+Sd);Kb.width+=va.total}var ng=Hc.vb+Kb.width,Kg=Bc.vb+Kb.height;l.x=fe;l.y=se;l.width=ng;l.height=Kg;se+Kg>e.height&&(Kg=Math.max(e.height-se,0));fe+
ng>e.width&&(ng=Math.max(e.width-fe,0));var Zc=fe,th=se,Ic=ng,uh=Kg,$c=gb.alignment,ge,Ed,he,qd;if(Db($c)){$c=this.kj;yb($c)||($c=Sb);ge=$c.x;Ed=$c.y;he=$c.offsetX;qd=$c.offsetY;var Td=Hc.alignment,Tf=Bc.alignment;yb(Td)&&(ge=Td.x,he=Td.offsetX);yb(Tf)&&(Ed=Tf.y,qd=Tf.offsetY)}else ge=$c.x,Ed=$c.y,he=$c.offsetX,qd=$c.offsetY;if(isNaN(ge)||isNaN(Ed))Ed=ge=0.5,qd=he=0;var ja=We.width,Xb=We.height,pj=gb.he,qj=gb.Ce,ja=Math.min(pj.width,ja),Xb=Math.min(pj.height,Xb),ja=Math.max(qj.width,ja),Xb=Math.max(qj.height,
Xb),jb=gb.margin,ub=jb.left+jb.right,li=jb.top+jb.bottom,vh=Qj(gb,Bc,Hc);if(isNaN(gb.Aa.width)&&vh===qc||vh===fj)ja=Math.max(ng-ub,0);if(isNaN(gb.Aa.height)&&vh===qc||vh===ej)Xb=Math.max(Kg-li,0);var mi=Xb+li;l.x+=l.width*ge-(ja+ub)*ge+he+jb.left;l.y+=l.height*Ed-mi*Ed+qd+jb.top;gb.visible&&(kb(Zc,th,Ic,uh,l.x,l.y,ja,Xb)?gb.tc(l.x,l.y,ja,Xb):gb.tc(l.x,l.y,ja,Xb,new B(Zc,th,Ic,uh)))}}}}y.qj(Kb);for(sb=0;sb<k;sb++)if(gb=g.n[sb],gb instanceof D&&(gb.type===Fj||gb.type===Gj))Mc=gb.Pb,gb.Jc.Pa(),gb.Jc.Ao(0,
0,Mc.width,Mc.height),gb.Jc.freeze();break;case "Viewbox":var ie=g.n[0],ve=ie.Ba,we=ie.margin,vc=we.top+we.bottom,Uf=Math.max(ve.width+(we.right+we.left),0),Vf=Math.max(ve.height+vc,0),Jc=ie.alignment;Db(Jc)&&(Jc=this.kj);yb(Jc)||(Jc=Sb);l.x=e.width*Jc.x-Uf*Jc.x+Jc.offsetX;l.y=e.height*Jc.y-Vf*Jc.y+Jc.offsetY;l.width=ve.width;l.height=ve.height;ie.tc(l.x,l.y,l.width,l.height);break;case "Link":var xe=this.rp(),Fd=0;if(xe!==q&&Fd<this.th.count){var Cc=this.th.n[Fd];Fd++;xe.tc(Cc.x-this.Uh.x,Cc.y-this.Uh.y,
Cc.width,Cc.height)}for(var Ud=0;Ud<k;Ud++){var ni=g.n[Ud];ni!==xe&&Fd<this.th.count&&(Cc=this.th.n[Fd],Fd++,ni.tc(Cc.x-this.Uh.x,Cc.y-this.Uh.y,Cc.width,Cc.height))}var wh=this.Nw(),xh=wh.count;if(2<=xh&&this.Ke)for(var Lb=this.tj;Lb.next();){var Kc=Lb.value,je=xh,mc=wh,Vd=Kc.af,ye=Kc.hs,ke=Kc.bj;Cb(ke)&&(ke=Sb);var Wf=Kc.is,og=Kc.rz,ze=f,tf=f,Lg=0;if(Vd<-je||Vd>=je){var pg=this.dD,uf=this.cD;Wf!==cj&&(Lg=this.computeAngle(Kc,Wf,uf),Kc.angle=Lg);ze=pg.x;tf=pg.y}else{var Wd=f,vf=f;if(0<=Vd)Wd=mc.n[Vd],
vf=Vd<je-1?mc.n[Vd+1]:Wd;else var Nc=je+Vd,Wd=mc.n[Nc],vf=0<Nc?mc.n[Nc-1]:Wd;uf=0<=Vd?Wd.ai(vf):vf.ai(Wd);Wf!==cj&&(Lg=this.computeAngle(Kc,Wf,uf),Kc.angle=Lg);ze=Wd.x+(vf.x-Wd.x)*ye;tf=Wd.y+(vf.y-Wd.y)*ye}var Xe=y.yg();Xe.reset();Xe.scale(Kc.scale,Kc.scale);Xe.rotate(Kc.angle,0,0);var Ng=Kc.Ta,qg=y.xj(0,0,Ng.width,Ng.height),Ye=y.M();Ye.ms(qg,ke);Xe.Qa(Ye);var ad=-Ye.x,Xf=-Ye.y,Ae=og.copy();isNaN(Ae.x)&&(Ae.x=0<=Vd?Ye.x+3:-(Ye.x+3));isNaN(Ae.y)&&(Ae.y=-(Ye.y+3));Ae.rotate(uf);ze+=Ae.x;tf+=Ae.y;Xe.oE(qg);
var ad=ad+qg.x,Xf=Xf+qg.y,oi=y.ec(ze+ad,tf+Xf);Kc.move(oi);y.B(oi);y.B(Ye);y.Bc(qg);y.ye(Xe)}this.iv();break;case "Grid":break;case "TableRow":case "TableColumn":y.m(this.toString()+" is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");break;default:y.m("Unknown panel type: "+C)}y.Bc(l)}};
D.prototype.hj=function(a){var b=this.Ta;if(kb(0,0,b.width,b.height,a.x,a.y)){for(var c=this.za.length,b=y.ec(0,0);c--;){var d=this.za.n[0];if(d.visible||d===this.Wb)if(Ta(b.set(a),d.transform),d.Ea(b))return y.B(b),h}y.B(b);return this.Uc===q&&this.Ge===q?s:h}return s};function bl(a,b,c){c(a,b);if(b instanceof D)for(b=b.elements;b.next();)bl(a,b.value,c)}function vi(a,b){cl(a,a,b)}function cl(a,b,c){c(b);for(b=b.elements;b.next();){var d=b.value;d instanceof D&&cl(a,d,c)}}
function dl(a,b,c){if(c(b))return b;if(b instanceof D)for(b=b.elements;b.next();){var d=dl(a,b.value,c);if(d!==q)return b.eg(),d}return q}D.prototype.findObject=D.prototype.xe=function(a){if(this.name===a)return this;for(var b=this.za.n,c=b.length,d=0;d<c;d++){var e=b[d];if(e.name===a)return e;if(e instanceof D&&!e.MC()&&(e=e.xe(a),e!==q))return e}return q};function Ne(a,b){return b(a)?a:el(a,b)}
function el(a,b){for(var c=a.elements;c.next();){var d=c.value;if(b(d))return d;if(d instanceof D&&(d=el(d,b),d!==q))return d}return q}
function fl(a){a=a.za.n;for(var b=a.length,c=0,d=0;d<b;d++){var e=a[d];if(e instanceof D)c=Math.max(c,fl(e));else if(e instanceof V){a:{if(!e.og)switch(e.Dm){case "None":case "Square":case "Ellipse":case "Circle":case "LineH":case "LineV":case "FramedRectangle":case "RoundedRectangle":case "Line1":case "Line2":case "Border":case "Cube1":case "Cube2":case "Junction":case "Cylinder1":case "Cylinder2":case "Cylinder3":case "Cylinder4":case "PlusLine":case "XLine":case "ThinCross":case "ThickCross":e=0;
break a}e=e.Wg/2*e.rl*e.rj()}c=Math.max(c,e)}}return c}da=D.prototype;da.mi=function(){return!(this.type===Fj||this.type===Gj)};
da.vd=function(a,b,c){if(this.$e===s)return q;b===f&&(b=q);c===f&&(c=q);if(bi(this))return q;var d=this.Ta,e=1/this.rj(),g=this.mi(),k=g?a:Ta(y.ec(a.x,a.y),this.transform);if(kb(-(5*e),-(5*e),d.width+10*e,d.height+10*e,k.x,k.y)){if(!this.hg){for(var l=this.za.length,e=y.M();l--;){var m=this.za.n[l];if(m.visible||m===this.Wb){m.mi()?Ta(e.set(a),m.transform):e.set(a);var n=q;m instanceof D?n=m.vd(e,b,c):m.$e===h&&m.Ea(e)&&(n=m);if(n!==q&&(b!==q&&(n=b(n)),n&&(c===q||c(n))))return y.B(e),g||y.B(k),n}}y.B(e)}if(this.background===
q&&this.ej===q)return g||y.B(k),q;a=kb(0,0,d.width,d.height,k.x,k.y)?this:q;g||y.B(k);return a}g||y.B(k);return q};
da.On=function(a,b,c,d){if(this.$e===s)return s;b===f&&(b=q);c===f&&(c=q);!(d instanceof F)&&!(d instanceof na)&&(d=new F(P));var e=this.Ta,g=this.mi(),k=g?a:Ta(y.ec(a.x,a.y),this.transform);if(kb(0,0,e.width,e.height,k.x,k.y)){if(!this.hg){for(var l=this.za.length,e=y.M();l--;){var m=this.za.n[l];if(m.visible||m===this.Wb)if(m.mi()?Ta(e.set(a),m.transform):e.set(a),(m instanceof D?m.On(e,b,c,d):m.Ea(e))&&m.$e!==s)b!==q&&(m=b(m)),m&&(c===q||c(m))&&d.add(m)}y.B(e)}g||y.B(k);return this.background!==
q||this.ej!==q}g||y.B(k);return s};
da.oj=function(a,b,c,d,e,g){if(this.$e===s)return s;b===f&&(b=q);c===f&&(c=q);var k=g;g===f&&(k=y.yg(),k.reset());k.multiply(this.transform);if(this.Bl(a,k))return gl(this,b,c,e),g===f&&y.ye(k),h;if(this.qf(a,k)){if(!this.hg)for(var l=this.za.length;l--;){var m=this.za.n[l];if(m.visible||m===this.Wb){var n=m.ua,p=this.Ta;if(!(n.x>p.width||n.y>p.height||0>n.x+n.width||0>n.y+n.height)){n=y.yg();n.set(k);if(m instanceof D?m.oj(a,b,c,d,e,n):lj(m,a,d,n))b!==q&&(m=b(m)),m&&(c===q||c(m))&&e.add(m);y.ye(n)}}}g===
f&&y.ye(k);return d}g===f&&y.ye(k);return s};function gl(a,b,c,d){for(var e=a.za.length;e--;){var g=a.za.n[e];if(g.visible){var k=g.ua,l=a.Ta;k.x>l.width||(k.y>l.height||0>k.x+k.width||0>k.y+k.height)||(g instanceof D&&gl(g,b,c,d),b!==q&&(g=b(g)),g&&(c===q||c(g))&&d.add(g))}}}
da.Pn=function(a,b,c,d,e,g){if(this.$e===s)return s;c===f&&(c=q);d===f&&(d=q);var k=this.Ta,l=this.mi(),m=l?a:Ta(y.ec(a.x,a.y),this.transform),n=l?b:Ta(y.ec(b.x,b.y),this.transform),p=m.xk(n),r=0<m.x&&m.x<k.width&&0<m.y&&m.y<k.height||Ua(m.x,m.y,0,0,0,k.height)<p||Ua(m.x,m.y,0,k.height,k.width,k.height)<p||Ua(m.x,m.y,k.width,k.height,k.width,0)<p||Ua(m.x,m.y,k.width,0,0,0)<p,k=0<m.x&&m.x<k.width&&0<m.y&&m.y<k.height&&Ua(m.x,m.y,0,0,0,k.height)<p&&Ua(m.x,m.y,0,k.height,k.width,k.height)<p&&Ua(m.x,
m.y,k.width,k.height,k.width,0)<p&&Ua(m.x,m.y,k.width,0,0,0)<p;l||(y.B(m),y.B(n));if(r){if(!this.hg){l=y.M();m=y.M();for(n=this.za.length;n--;)if(p=this.za.n[n],p.visible||p===this.Wb){var t=p.ua,u=this.Ta;if(!(t.x>u.width||t.y>u.height||0>t.x+t.width||0>t.y+t.height))if(p.mi()?(t=p.transform,Ta(l.set(a),t),Ta(m.set(b),t)):(l.set(a),m.set(b)),p instanceof D?p.Pn(l,m,c,d,e,g):p.jC(l,m,e))c!==q&&(p=c(p)),p&&(d===q||d(p))&&g.add(p)}y.B(l);y.B(m)}return e?r:k}return s};
function Uk(a){var b=a.G;if(b===f||b===Ib)b=q;b===q&&a instanceof V&&(a=a.Na,a!==q&&(b=a.G));b===q&&(b=Mb);return b}function Vk(a){var b=a.H;if(b===f||b===Ib)b=q;b===q&&a instanceof V&&(a=a.Na,a!==q&&(b=a.H));b===q&&(b=Zb);return b}D.prototype.add=D.prototype.add=function(a){y.l(a,P,D,"add:element");this.wd(this.za.count,a)};D.prototype.elt=D.prototype.sa=function(a){return this.za.sa(a)};
D.prototype.insertAt=D.prototype.wd=function(a,b){b instanceof R&&y.m("Cannot add a Part to a Panel: "+b);if(this===b||this.hi(b))this===b&&y.m("Cannot make a Panel contain itself: "+this.toString()),y.m("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+b.toString());var c=b.ha;c!==q&&c!==this&&y.m("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+b.toString()+", already contained by "+c.toString()+", cannot be shared by this Panel: "+
this.toString());this.Y===Jh&&!(b instanceof V)&&y.m("Can only add Shapes to a Grid Panel, not: "+b);b.Kk(this);b.nl=q;if(this.Qy!==q){var d=b.data;d!==q&&"object"===typeof d&&(this.zf===q&&(this.zf=new ma(Object,D)),this.zf.add(d,b))}var e=this.za,d=-1;if(c===this){for(var g=-1,k=e.count,l=0;l<k;l++)if(e.n[l]===b){g=l;break}if(-1!==g){if(g===a||g+1>=e.count&&a>=e.count)return;e.kd(g);d=g}else y.m("element "+b.toString()+" has panel "+c.toString()+" but is not contained by it.")}if(0>a||a>e.count)a=
e.count;e.wd(a,b);this.aa();b.aa();b.Td!==q&&(this.Bi=h);b instanceof D&&b.Bi===h&&(this.Bi=h);c=this.W;c!==q&&(c.gk=q,c.Ji=NaN,b.Td!==q&&c instanceof T&&(c.Bi=h),e=this.h,e!==q&&e.va.cb||(-1!==d&&c.Qc(td,"elements",this,b,q,d,q),c.Qc(sd,"elements",this,q,b,q,a)))};D.prototype.remove=D.prototype.remove=function(a){y.l(a,P,D,"remove:element");for(var b=this.za,c=b.count,d=-1,e=0;e<c;e++)if(b.n[e]===a){d=e;break}-1!==d&&this.ze(d)};
D.prototype.removeAt=D.prototype.kd=function(a){x&&y.p(a,D,"removeAt:idx");0<=a&&this.ze(a)};D.prototype.ze=function(a){var b=this.za,c=b.sa(a);c.nl=q;c.Kk(q);if(this.zf!==q){var d=c.data;"object"===typeof d&&this.zf.remove(d)}b.kd(a);nj(this,s);this.aa();b=this.W;b!==q&&(b.gk=q,b.Ji=NaN,d=this.h,d!==q&&d.va.cb||b.Qc(td,"elements",this,c,q,a,q))};y.A(D,{sv:"rowCount"},function(){return this.Lc===f?0:this.Lc.length});
D.prototype.getRowDefinition=D.prototype.Od=function(a){if(this.Lc===f)return q;x&&y.p(a,D,"getRowDefinition:idx");0>a&&y.ka(a,">= 0",D,"getRowDefinition:idx");a=Math.round(a);var b=this.Lc;if(b[a]===f){var c=new hk;c.Kk(this);c.dl=h;c.Vd=a;b[a]=c}return b[a]};D.prototype.removeRowDefinition=D.prototype.rJ=function(a){if(this.Lc!==f){x&&y.p(a,D,"removeRowDefinition:idx");0>a&&y.ka(a,">= 0",D,"removeRowDefinition:idx");a=Math.round(a);var b=this.Lc;b[a]&&(b[a]=f)}};
y.A(D,{Cu:"columnCount"},function(){return this.Fc===f?0:this.Fc.length});D.prototype.getColumnDefinition=D.prototype.Nd=function(a){if(this.Fc===f)return q;x&&y.p(a,D,"getColumnDefinition:idx");0>a&&y.ka(a,">= 0",D,"getColumnDefinition:idx");a=Math.round(a);var b=this.Fc;if(b[a]===f){var c=new hk;c.Kk(this);c.dl=s;c.Vd=a;b[a]=c}return b[a]};
D.prototype.removeColumnDefinition=D.prototype.qJ=function(a){if(this.Fc!==f){x&&y.p(a,D,"removeColumnDefinition:idx");0>a&&y.ka(a,">= 0",D,"removeColumnDefinition:idx");a=Math.round(a);var b=this.Fc;b[a]&&(b[a]=f)}};y.g(D,"rowSizing",D.prototype.MD);
y.defineProperty(D,{MD:"rowSizing"},function(){return this.ol===f?Pk:this.ol},function(a){if(this.ol!==f){var b=this.ol;b!==a&&(a!==Pk&&a!==Zk&&y.m("rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.ol=a,this.aa(),this.i("rowSizing",b,a))}});y.g(D,"columnSizing",D.prototype.NB);
y.defineProperty(D,{NB:"columnSizing"},function(){return this.Uk===f?Pk:this.Uk},function(a){if(this.Uk!==f){var b=this.Uk;b!==a&&(a!==Pk&&a!==Zk&&y.m("columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.Uk=a,this.aa(),this.i("columnSizing",b,a))}});y.g(D,"topIndex",D.prototype.GH);
y.defineProperty(D,{GH:"topIndex"},function(){return this.$i===f?0:this.$i},function(a){if(this.$i!==f){var b=this.$i;b!==a&&((!isFinite(a)||0>a)&&y.m("topIndex must be greater than zero and a real number. Was "+a),this.$i=a,Lj(this),this.i("topIndex",b,a))}});y.g(D,"leftIndex",D.prototype.TG);
y.defineProperty(D,{TG:"leftIndex"},function(){return this.Ei===f?0:this.Ei},function(a){if(this.Ei!==f){var b=this.Ei;b!==a&&((!isFinite(a)||0>a)&&y.m("leftIndex must be greater than zero and a real number. Was "+a),this.Ei=a,Lj(this),this.i("leftIndex",b,a))}});D.prototype.findRowForLocalY=D.prototype.CI=function(a){if(0>a)return-1;if(this.type!==Pj)return NaN;for(var b=0,c=this.Lc,d=c.length,e=this.$i;e<d;e++){var g=c[e];if(g!==f&&(b+=g.total,a<b))return e}return-1};
D.prototype.findColumnForLocalX=D.prototype.uI=function(a){if(0>a)return-1;if(this.type!==Pj)return NaN;for(var b=0,c=this.Fc,d=c.length,e=this.Ei;e<d;e++){var g=c[e];if(g!==f&&(b+=g.total,a<b))return e}return-1};y.g(D,"data",D.prototype.data);
y.defineProperty(D,{data:"data"},w("rm"),function(a){var b=this.rm;if(b!==a){var c=this instanceof R&&!(this instanceof Ge);c&&y.j(a,"object",D,"data");Je(this);this.rm=a;var d=this.h;d!==q&&(c?this instanceof U?(b!==q&&d.Sj.remove(b),a!==q&&d.Sj.add(a,this)):(b!==q&&d.xh.remove(b),a!==q&&d.xh.add(a,this)):(c=this.ha,c!==q&&c.zf!==q&&(b!==q&&c.zf.remove(b),a!==q&&c.zf.add(a,this))));this.i("data",b,a);d!==q&&d.va.cb||a!==q&&this.zb()}});function ck(a){a=a.Sk;return a!==q&&a.$a}
function Je(a){var b=a.Sk;if(b===q)a.data!==q&&y.m("Template cannot have .data be non-null: "+a),a.Sk=b=new F(be);else if(b.$a)return;var c=new F(P);bl(a,a,function(a,d){var e=d.rc;if(e!==q){Uj(d,s);for(var g=e.k;g.next();){e=g.value;e.mode===me&&Uj(d,h);var k=e.rs;if(k!==q){var t=a;""!==k&&(t=a.xe(k));t!==q&&(c.add(t),t.Pq===f&&(t.Pq=new F(be)),t.Pq.add(e))}b.add(e)}}if(d instanceof D&&d.type===Pj){if(0<d.Lc.length){g=d.Lc;k=g.length;for(t=0;t<k;t++){var u=g[t];if(u!==f&&u.rc!==q)for(var v=u.rc.k;v.next();)e=
v.value,e.Df=u,e.Lx=2,e.fu=u.index,b.add(e)}}if(0<d.Fc.length){g=d.Fc;k=g.length;for(t=0;t<k;t++)if(u=g[t],u!==f&&u.rc!==q)for(v=u.rc.k;v.next();)e=v.value,e.Df=u,e.Lx=1,e.fu=u.index,b.add(e)}}});for(var d=c.k;d.next();){var e=d.value;if(e.Pq!==f){Uj(e,h);for(var g=e.Pq.k;g.next();){var k=g.value;e.rc===q&&(e.rc=new F(be));e.rc.add(k)}}delete e.Pq}for(d=b.k;d.next();)e=d.value,g=e.Df,g!==q&&(e.Df=q,g===a?e.Zl="":(g instanceof hk&&(g=g.ha),e.Zl=""!==g.name?g.name:g.name="_"+y.bc(g)));b.freeze();a instanceof
R&&a.Pd()&&(ah(a,Infinity,Infinity),a.tc())}
D.prototype.updateTargetBindings=D.prototype.zb=function(a){var b=this.Sk;if(b!==q){a===f&&(a="");for(b=b.k;b.next();){var c=b.value,d=c.wz;if(!(""!==a&&d!==a)&&(d=c.Az,!(c.PB===q&&""===d))){var d=this.data,e=c.rs;e!==q&&(d=this.xe(e));if(d===q)x&&y.trace("Binding error: missing GraphObject named "+e+" in "+this.toString());else{var e=this,g=c.Zl;if(""!==g){if(e=this.xe(g),e===q)continue}else c.Df!==q&&(e=c.Df);g=c.Lx;if(0!==g){if(!(e instanceof D))continue;1===g?e=e.Nd(c.fu):2===g&&(e=e.Od(c.fu))}e!==
f&&c.vE(e,d)}}}}};y.g(D,"itemArray",D.prototype.Qy);y.defineProperty(D,{Qy:"itemArray"},w("bk"),function(a){var b=this.bk;if(b!==a){x&&(a!==q&&!y.isArray(a))&&y.m("Panel.itemArray must be an Array-like object or null, not: "+a);var c=this.h;c!==q&&b!==q&&yi(c,this);this.bk=a;c!==q&&a!==q&&wi(c,this);this.i("itemArray",b,a);c!==q&&c.va.cb||this.lz()}});
D.prototype.rebuildItemElements=D.prototype.lz=function(){var a=0;if(this.type===zg||this.type===Ch||this.type===ig)a=1;for(;this.za.length>a;)this.ze(a);a=this.Qy;if(a!==q)for(var b=y.Tb(a),c=0;c<b;c++)Ji(this,y.Gb(a,c))};
function Ji(a,b,c){if(!(b===f||b===q)){var d=a.getCategoryForItemData(b),e=a.findTemplateForItemData(b,d);e instanceof D&&(Je(e),e=e.copy(),"object"===typeof b&&(a.zf===q&&(a.zf=new ma(Object,D)),a.zf.add(b,e)),"number"===typeof c?((a.type===zg||a.type===Ch)&&c++,a.wd(c,e),kl(e,c),Ki(a,c)):(a.add(e),kl(e,a.za.count-1)),e.bx=d,e.data=b)}}function Ki(a,b){for(var c=a.za,d=b+1;d<c.length;){var e=c.sa(d);e instanceof D&&kl(e,d);d++}}function kl(a,b){a.type===Fj?a.qc=b:a.type===Gj&&(a.column=b)}
D.prototype.isItemPanel=D.prototype.MC=function(){return this.bk!==q||this.ig!==q};y.g(D,"itemTemplate",D.prototype.PG);y.defineProperty(D,{PG:"itemTemplate"},function(){return this.ig===q?q:this.ig.wa("")},function(a){if(this.ig===q){if(a===q)return;this.ig=new ma("string",D)}var b=this.ig.wa("");b!==a&&(y.l(a,D,D,"itemTemplate"),a instanceof R&&y.m("itemTemplate must not be a Part: "+a),this.ig.add("",a),this.i("itemTemplate",b,a),a=this.h,a!==q&&a.va.cb||this.lz())});y.g(D,"itemTemplateMap",D.prototype.PC);
y.defineProperty(D,{PC:"itemTemplateMap"},w("ig"),function(a){var b=this.ig;if(b!==a){y.l(a,ma,D,"itemTemplateMap");for(var c=a.k;c.next();){var d=c.value;d instanceof R&&y.m("Template in itemTemplateMap must not be a Part: "+d)}this.ig=a;this.i("itemTemplateMap",b,a);a=this.h;a!==q&&a.va.cb||this.lz()}});y.g(D,"itemCategoryProperty",D.prototype.OG);
y.defineProperty(D,{OG:"itemCategoryProperty"},w("Om"),function(a){var b=this.Om;b!==a&&("string"!==typeof a&&"function"!==typeof a&&y.Jb(a,"string or function",D,"itemCategoryProperty"),this.Om=a,this.i("itemCategoryProperty",b,a))});
D.prototype.getCategoryForItemData=function(a){if(a===q)return"";var b=this.Om;if("function"===typeof b)b=b(a);else if("string"===typeof b&&"object"===typeof a){if(""===b)return"";b=y.Xa(a,b)}else return"";if(b===f)return"";if("string"===typeof b)return b;x&&y.trace("Panel.getCategoryForItemData found a non-string category for "+a+": "+b);return""};
D.prototype.findTemplateForItemData=function(a,b){var c=this.PC,d=q;c!==q&&(d=c.wa(b));d===q&&(y.AE||(y.AE=h,y.trace('No item template Panel found for category "'+b+'" on '+this),y.trace("  Using default item template."),c=new D,d=new oa,d.bind(new be("text","",ud)),c.add(d),y.YB=c),d=y.YB);return d instanceof D?d:q};y.g(D,"isAtomic",D.prototype.JG);y.defineProperty(D,{JG:"isAtomic"},w("hg"),function(a){var b=this.hg;b!==a&&(y.j(a,"boolean",D,"isAtomic"),this.hg=a,this.i("isAtomic",b,a))});
y.g(D,"opacity",D.prototype.opacity);y.defineProperty(D,{opacity:"opacity"},w("mf"),function(a){var b=this.mf;b!==a&&(y.j(a,"number",D,"opacity"),(0>a||1<a)&&y.ka(a,"0 <= val <= 1",D,"opacity"),this.mf=a,this.i("opacity",b,a),a=this.h,b=this.W,a!==q&&b!==q&&a.ta(ih(b,b.ua)))});function hk(){y.mc(this);this.Nh=q;this.dl=h;this.Vd=0;this.nf=NaN;this.jl=0;this.il=Infinity;this.Ud=Ib;this.nb=this.vb=0;this.rc=q;this.Mq=ll;this.Vg=Bg;this.Jq=this.Si=q;this.Kq=NaN;this.Uc=this.Rg=q;this.ap=s}
y.ba("RowColumnDefinition",hk);hk.prototype.copy=function(){var a=new hk;a.dl=this.dl;a.Vd=this.Vd;a.nf=this.nf;a.jl=this.jl;a.il=this.il;a.Ud=this.Ud;a.vb=this.vb;a.nb=this.nb;a.Vg=this.Vg;a.Mq=this.Mq;a.Si=this.Si===q?q:this.Si.U();a.Jq=this.Jq;a.Kq=this.Kq;a.Rg=q;this.Rg&&(a.Rg=this.Rg.slice(0));a.Uc=this.Uc;a.ap=this.ap;a.rc=this.rc;return a};hk.prototype.toString=function(){return"RowColumnDefinition "+(this.fh?"(Row ":"(Column ")+this.index+") #"+y.bc(this)};var ll;
hk.Default=ll=y.w(hk,"Default",0);var Zk;hk.None=Zk=y.w(hk,"None",1);var Pk;hk.ProportionalExtra=Pk=y.w(hk,"ProportionalExtra",2);hk.prototype.Kk=ba("Nh");function Xk(a,b){a.vb=isNaN(a.nf)?Math.max(Math.min(a.il,b),a.jl):Math.max(Math.min(a.il,a.nf),a.jl)}function al(a){var b=a.Nh,c=a.Xl;c===q&&(c=a.fh?b.yh:b.Eg);var d=a.Yl;isNaN(d)&&(d=a.fh?b.Gg:b.Fg);d=c!==q?d:0;0===a.index&&(d=0);c=a.sz;c===q&&(c=b.ti);return d+(a.fh?c.top:c.left)}
function Tk(a){var b=a.Nh,c=a.Xl;c===q&&(c=a.fh?b.yh:b.Eg);var d=a.Yl;isNaN(d)&&(d=a.fh?b.Gg:b.Fg);d=c!==q?d:0;0===a.index&&(d=0);c=a.sz;c===q&&(c=b.ti);return d+(a.fh?c.top+c.bottom:c.left+c.right)}hk.prototype.xc=function(a,b,c,d,e){var g=this.Nh;if(g!==q){g.aa();for(var k=this.fh,l=g.za,m=l.length,n=0;n<m;n++){var p=l.n[n];(k?p.qc:p.column)===this.index&&p.aa()}g.Qc(rd,a,this,b,c,d,e);if(this.rc!==q&&(b=g.Rn(),b!==q&&(b=b.data,b!==q)))for(c=this.rc.k;c.next();)c.value.uE(this,b,a,q)}};
y.A(hk,{ha:"panel"},w("Nh"));y.A(hk,{fh:"isRow"},w("dl"));y.A(hk,{index:"index"},w("Vd"));y.g(hk,"height",hk.prototype.height);y.defineProperty(hk,{height:"height"},w("nf"),function(a){var b=this.nf;b!==a&&(x&&y.j(a,"number",hk,"height"),0>a&&y.ka(a,">= 0",hk,"height"),this.nf=a,Xk(this,this.vb),this.xc("size",b,a))});y.g(hk,"width",hk.prototype.width);
y.defineProperty(hk,{width:"width"},w("nf"),function(a){var b=this.nf;b!==a&&(x&&y.j(a,"number",hk,"width"),0>a&&y.ka(a,">= 0",hk,"width"),this.nf=a,Xk(this,this.vb),this.xc("size",b,a))});y.g(hk,"minimum",hk.prototype.hh);y.defineProperty(hk,{hh:"minimum"},w("jl"),function(a){var b=this.jl;b!==a&&(x&&y.j(a,"number",hk,"minimum"),(0>a||!isFinite(a))&&y.ka(a,">= 0",hk,"minimum"),this.jl=a,Xk(this,this.vb),this.xc("minimum",b,a))});y.g(hk,"maximum",hk.prototype.Xe);
y.defineProperty(hk,{Xe:"maximum"},w("il"),function(a){var b=this.il;b!==a&&(x&&y.j(a,"number",hk,"maximum"),0>a&&y.ka(a,">= 0",hk,"maximum"),this.il=a,Xk(this,this.vb),this.xc("maximum",b,a))});y.g(hk,"alignment",hk.prototype.alignment);y.defineProperty(hk,{alignment:"alignment"},w("Ud"),function(a){var b=this.Ud;b.L(a)||(x&&y.l(a,J,hk,"alignment"),this.Ud=a.U(),this.xc("alignment",b,a))});y.g(hk,"stretch",hk.prototype.mh);
y.defineProperty(hk,{mh:"stretch"},w("Vg"),function(a){var b=this.Vg;b!==a&&(x&&y.rb(a,P,hk,"stretch"),this.Vg=a,this.xc("stretch",b,a))});y.g(hk,"separatorPadding",hk.prototype.sz);y.defineProperty(hk,{sz:"separatorPadding"},w("Si"),function(a){"number"===typeof a?a=new ab(a):a!==q&&x&&y.l(a,ab,hk,"separatorPadding");var b=this.Si;if(a===q||b===q||!b.L(a))a!==q&&(a=a.U()),this.Si=a,this.xc("separatorPadding",b,a)});y.g(hk,"separatorStroke",hk.prototype.Xl);
y.defineProperty(hk,{Xl:"separatorStroke"},w("Jq"),function(a){var b=this.Jq;if(b!==a&&(a===q||"string"===typeof a||a instanceof Gd))a instanceof Gd&&a.freeze(),this.Jq=a,this.ha&&this.ha.ta(),this.xc("separatorStroke",b,a)});y.g(hk,"separatorStrokeWidth",hk.prototype.Yl);y.defineProperty(hk,{Yl:"separatorStrokeWidth"},w("Kq"),function(a){var b=this.Kq;b!==a&&(this.Kq=a,this.ha&&this.ha.ta(),this.xc("separatorStrokeWidth",b,a))});y.g(hk,"separatorDashArray",hk.prototype.TD);
y.defineProperty(hk,{TD:"separatorDashArray"},w("Rg"),function(a){var b=this.Rg;b!==a&&(a instanceof Array||y.Jb(a,"Array",hk,"separatorDashArray:val"),this.Rg=a,this.ha&&this.ha.ta(),this.xc("separatorDashArray",b,a))});y.g(hk,"background",hk.prototype.background);y.defineProperty(hk,{background:"background"},w("Uc"),function(a){var b=this.Uc;if(b!==a&&(a===q||"string"===typeof a||a instanceof Gd))a instanceof Gd&&a.freeze(),this.Uc=a,this.ha&&this.ha.ta(),this.xc("background",b,a)});
y.g(hk,"coversSeparators",hk.prototype.Gu);y.defineProperty(hk,{Gu:"coversSeparators"},w("ap"),function(a){var b=this.ap;b!==a&&(y.j(a,"boolean",hk,"coversSeparators"),this.ap=a,this.xc("coversSeparators",b,a))});y.g(hk,"sizing",hk.prototype.ps);y.defineProperty(hk,{ps:"sizing"},w("Mq"),function(a){var b=this.Mq;b!==a&&(x&&y.rb(a,hk,hk,"sizing"),this.Mq=a,this.xc("sizing",b,a))});function Yk(a){if(a.ps===ll){var b=a.Nh;return a.fh?b.MD:b.NB}return a.ps}y.A(hk,{Mb:"actual"},w("vb"));
y.A(hk,{total:"total"},function(){return this.vb+Tk(this)});y.A(hk,{position:"position"},w("nb"));hk.prototype.bind=hk.prototype.bind=function(a){a.Df=this;var b=this.ha;b!==q&&(b=b.Rn(),b!==q&&ck(b)&&y.m("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+a));this.rc===q&&(this.rc=new F(be));this.rc.add(a)};
function V(){P.call(this);this.Na=q;this.Dm="None";this.og=s;this.qp=Bg;this.Qj=q;this.oc=this.Je="black";this.Wg=1;this.mn="butt";this.nn="miter";this.rl=10;this.ql=q;this.Mc=0;this.Rh=this.Qh=Ib;this.lq=this.kq=0;this.wp=s;this.Bp=h;this.nq=q;this.Fm=this.on="None";this.up=1}y.ba("Shape",V);y.Ka(V,P);
V.prototype.cloneProtected=function(a){P.prototype.cloneProtected.call(this,a);a.Na=this.Na;a.Dm=this.Dm;a.og=this.og;a.qp=this.qp;a.Qj=this.Qj;a.Je=this.Je;a.oc=this.oc;a.Wg=this.Wg;a.mn=this.mn;a.nn=this.nn;a.rl=this.rl;a.ql=q;this.ql&&(a.ql=this.ql.slice(0));a.Mc=this.Mc;a.Qh=this.Qh.U();a.Rh=this.Rh.U();a.kq=this.kq;a.lq=this.lq;a.wp=this.wp;a.Bp=this.Bp;a.nq=this.nq;a.on=this.on;a.Fm=this.Fm;a.up=this.up};
V.prototype.toString=function(){return"Shape("+("None"!==this.xb?this.xb:"None"!==this.bm?this.bm:this.Ru)+")#"+y.bc(this)};
function ml(a,b,c,d){var e=0.001,g=d.Ba,k=g.width,g=g.height,l,m,n,p=c.length;if(!(2>p)){l=c[0][0];m=c[0][1];for(var r,t,u,v,z=0,C=y.ub(),K=1;K<p;K++)r=c[K],e=r[0],n=r[1],r=e-l,l=n-m,0===r&&(r=0.001),t=l/r,v=Math.atan2(l,r),l=Math.sqrt(r*r+l*l),C.push([r,v,t,l]),z+=l,l=e,m=n;l=c[0][0];m=c[0][1];c=0;e=k;p=k/2;K=0===p?s:h;n=0;u=C[n];r=u[0];v=u[1];t=u[2];u=u[3];for(var I=0;0.1<=z;){0===I&&(K?(e=k,c++,e-=p,z-=p,K=s):(e=k,c++),0===e&&(e=1));if(e>z){y.ya(C);return}e>u?(I=e-u,e=u):I=0;var Q=Math.sqrt(e*
e/(1+t*t));0>r&&(Q=-Q);l+=Q;m+=t*Q;a.translate(l,m);a.rotate(v);a.translate(-(k/2),-(g/2));0===I&&d.Hl(a,b);a.translate(k/2,g/2);a.rotate(-v);a.translate(-l,-m);z-=e;u-=e;if(0!==I){n++;if(n===C.length){y.ya(C);return}u=C[n];r=u[0];v=u[1];t=u[2];u=u[3];e=I}}y.ya(C)}}
V.prototype.Hl=function(a,b){if(!(this.oc===q&&this.Je===q)){this.Je!==q&&Hj(this,a,this.Je,h);this.oc!==q&&Hj(this,a,this.oc,s);var c=this.Wg;if(0===c){var d=this.W;d instanceof Ge&&(d.type===ig&&d.zc instanceof V)&&(c=d.zc.jb)}a.lineWidth=c;a.lineJoin=this.nn;a.lineCap=this.mn;a.miterLimit=this.rl;var e=s;this.W&&(e=this.W.Ck);var g=h;this.oc!==q&&this.Je===q&&(g=s);c=s;d=this.yz;if(d!==q){var k=c=h;a.setLineDash!==f?(a.setLineDash(d),a.lineDashOffset=this.Mc):a.webkitLineDash!==f?(a.webkitLineDash=
d,a.webkitLineDashOffset=this.Mc):a.mozDash!==f?(a.mozDash=d,a.mozDashOffset=this.Mc):k=s}var l=this.Na;if(l!==q){if(l.Y===wc)a.beginPath(),c&&!k?ij(a,l.Sb,l.ac,l.Vc,l.cd,d,this.Mc):(a.moveTo(l.Sb,l.ac),a.lineTo(l.Vc,l.cd)),this.Je!==q&&a.fill(),this.oc!==q&&a.stroke();else if(l.Y===xc){var m=l.Sb,n=l.ac,p=l.Vc,l=l.cd,r=Math.min(m,p),t=Math.min(n,l),m=Math.abs(p-m),n=Math.abs(l-n);this.Je!==q&&a.fillRect(r,t,m,n);if(this.oc!==q){if(g&&e){var u=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=
0;a.shadowOffsetY=0;a.shadowBlur=0}c&&!k?(k=[[r,t],[r+m,t],[r+m,t+n],[r,t+n],[r,t]],a.beginPath(),nl(a,k,d,this.Mc),a.stroke()):a.strokeRect(r,t,m,n);g&&e&&(a.shadowOffsetX=u[0],a.shadowOffsetY=u[1],a.shadowBlur=u[2])}}else if(l.Y===yc)m=l.Sb,n=l.ac,p=l.Vc,l=l.cd,r=Math.abs(p-m)/2,t=Math.abs(l-n)/2,m=Math.min(m,p)+r,n=Math.min(n,l)+t,a.beginPath(),a.moveTo(m,n-t),a.bezierCurveTo(m+H.ra*r,n-t,m+r,n-H.ra*t,m+r,n),a.bezierCurveTo(m+r,n+H.ra*t,m+H.ra*r,n+t,m,n+t),a.bezierCurveTo(m-H.ra*r,n+t,m-r,n+H.ra*
t,m-r,n),a.bezierCurveTo(m-r,n-H.ra*t,m-H.ra*r,n-t,m,n-t),a.closePath(),this.Je!==q&&a.fill(),c&&!k&&(k=y.ub(),H.ae(m,n-t,m+H.ra*r,n-t,m+r,n-H.ra*t,m+r,n,0.5,k),H.ae(m+r,n,m+r,n+H.ra*t,m+H.ra*r,n+t,m,n+t,0.5,k),H.ae(m,n+t,m-H.ra*r,n+t,m-r,n+H.ra*t,m-r,n,0.5,k),H.ae(m-r,n,m-r,n-H.ra*t,m-H.ra*r,n-t,m,n-t,0.5,k),a.beginPath(),nl(a,k,d,this.Mc),y.ya(k)),this.oc!==q&&(g&&e&&(u=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),a.stroke(),g&&e&&(a.shadowOffsetX=
u[0],a.shadowOffsetY=u[1],a.shadowBlur=u[2]));else if(l.Y===oc){for(var r=l.Uj,t=r.length,v=0;v<t;v++){var z=r.n[v];a.beginPath();a.moveTo(z.ia,z.ja);for(var C=z.Ca.n,K=C.length,I=q,Q=0;Q<K;Q++){var L=C[Q];switch(L.Y){case Vc:a.moveTo(L.D,L.F);break;case Ec:a.lineTo(L.D,L.F);break;case Wc:a.bezierCurveTo(L.mg,L.ng,L.jk,L.kk,L.Xd,L.Yd);break;case bd:a.quadraticCurveTo(L.mg,L.ng,L.Xd,L.Yd);break;case cd:if(L.radiusX===L.radiusY)I=Math.PI/180,a.arc(L.nm,L.om,L.radiusX,L.Wf*I,(L.Wf+L.nh)*I,0>L.nh);else for(var I=
ed(L,z),S=I.length,Z=0;Z<S;Z++){var X=I[Z];0===Z&&a.lineTo(X.x1,X.y1);a.bezierCurveTo(X.x2,X.y2,X.Bd,X.Cd,X.Cb,X.Db)}break;case dd:I&&I.type===cd?(I=ed(I,z),I=I[I.length-1]||q,I!==q&&(m=I.Cb,p=I.Db)):(m=I?I.D:z.ia,p=I?I.F:z.ja);I=fd(L,z,m,p);S=I.length;for(Z=0;Z<S;Z++)X=I[Z],a.bezierCurveTo(X.x2,X.y2,X.Bd,X.Cd,X.Cb,X.Db);break;default:y.m("Segment not of valid type")}L.Lg&&a.closePath();I=L}e?z.Mm?(z.bl===h&&this.Je!==q?(a.fill(),g=h):g=s,this.oc!==q&&(g&&(u=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],
a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),(!c||k)&&a.stroke(),g&&(a.shadowOffsetX=u[0],a.shadowOffsetY=u[1],a.shadowBlur=u[2]))):(g&&(u=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),z.bl===h&&this.Je!==q&&a.fill(),this.oc!==q&&(!c||k)&&a.stroke(),g&&(a.shadowOffsetX=u[0],a.shadowOffsetY=u[1],a.shadowBlur=u[2])):(z.bl===h&&this.Je!==q&&a.fill(),this.oc!==q&&(!c||k)&&a.stroke())}if(c&&!k){u=g;k=l.Uj;g=k.length;for(l=0;l<g;l++){m=k.n[l];
a.beginPath();p=y.ub();p.push([m.ia,m.ja]);r=m.ia;t=m.ja;v=r;z=t;C=m.Ca.n;K=C.length;for(Q=0;Q<K;Q++){L=C[Q];switch(L.Y){case Vc:nl(a,p,d,this.Mc);p.length=0;p.push([L.D,L.F]);r=L.D;t=L.F;v=r;z=t;break;case Ec:p.push([L.D,L.F]);r=L.D;t=L.F;break;case Wc:H.ae(r,t,L.mg,L.ng,L.jk,L.kk,L.Xd,L.Yd,0.5,p);r=L.D;t=L.F;break;case bd:H.uo(r,t,L.mg,L.ng,L.Xd,L.Yd,0.5,p);r=L.D;t=L.F;break;case cd:I=ed(L,m);S=I.length;for(Z=0;Z<S;Z++)X=I[Z],H.ae(r,t,X.x2,X.y2,X.Bd,X.Cd,X.Cb,X.Db,0.5,p),r=X.Cb,t=X.Db;break;case dd:I=
fd(L,m,r,t);S=I.length;for(Z=0;Z<S;Z++)X=I[Z],H.ae(r,t,X.x2,X.y2,X.Bd,X.Cd,X.Cb,X.Db,0.5,p),r=X.Cb,t=X.Db;break;default:y.m("Segment not of valid type")}L.Lg&&(p.push([v,z]),nl(a,p,d,this.Mc))}nl(a,p,d,this.Mc);y.ya(p);this.oc!==q&&(u&&e&&(n=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),a.stroke(),u&&e&&(a.shadowOffsetX=n[0],a.shadowOffsetY=n[1],a.shadowBlur=n[2]))}}}c&&(a.setLineDash!==f?(a.setLineDash(y.rh),a.lineDashOffset=0):a.webkitLineDash!==
f?(a.webkitLineDash=y.rh,a.webkitLineDashOffset=0):a.mozDash!==f&&(a.mozDash=q,a.mozDashOffset=0));if(this.ez){c=this.ez;ah(c,Infinity,Infinity);d=c.Ba;c.tc(0,0,d.width,d.height);a.save();d=this.Pc.fb.ob();a.beginPath();n=y.ub();n.push([d.ia,d.ja]);u=d.ia;e=d.ja;k=u;g=e;l=d.Ca.n;m=l.length;for(p=0;p<m;p++){r=l[p];switch(r.Y){case Vc:ml(a,b,n,c);n.length=0;n.push([r.D,r.F]);u=r.D;e=r.F;k=u;g=e;break;case Ec:n.push([r.D,r.F]);u=r.D;e=r.F;break;case Wc:H.ae(u,e,r.mg,r.ng,r.jk,r.kk,r.Xd,r.Yd,0.5,n);u=
r.D;e=r.F;break;case bd:H.uo(u,e,r.mg,r.ng,r.Xd,r.Yd,0.5,n);u=r.D;e=r.F;break;case cd:t=ed(r,d);v=t.length;for(z=0;z<v;z++)C=t[z],H.ae(u,e,C.x2,C.y2,C.Bd,C.Cd,C.Cb,C.Db,0.5,n),u=C.Cb,e=C.Db;break;case dd:t=fd(r,d,u,e);v=t.length;for(z=0;z<v;z++)C=t[z],H.ae(u,e,C.x2,C.y2,C.Bd,C.Cd,C.Cb,C.Db,0.5,n),u=C.Cb,e=C.Db;break;default:y.m("Segment not of valid type")}r.Lg&&(n.push([k,g]),ml(a,b,n,c))}ml(a,b,n,c);y.ya(n);a.restore()}}}};
function nl(a,b,c,d){var e=0.001,g=c.length,k,l,m,n=b.length;if(!(2>n))if(k=b[0][0],l=b[0][1],2===n)ij(a,k,l,b[1][0],b[1][1],c,d);else{a.moveTo(k,l);for(var p,r,t,u=0,v=y.ub(),z=1;z<n;z++)p=b[z],e=p[0],m=p[1],p=e-k,k=m-l,0===p&&(p=0.001),r=k/p,k=Math.sqrt(p*p+k*k),v.push([p,r,k]),u+=k,k=e,l=m;k=b[0][0];l=b[0][1];b=0;n=h;e=c[b%g];z=0!==d;m=0;t=v[m];p=t[0];r=t[1];t=t[2];for(var C=0;0.1<=u;){0===C&&(e=c[b%g],b++,z&&(d%=e,e-=d,z=s));e>u&&(e=u);e>t?(C=e-t,e=t):C=0;var K=Math.sqrt(e*e/(1+r*r));0>p&&(K=
-K);k+=K;l+=r*K;n?a.lineTo(k,l):a.moveTo(k,l);u-=e;t-=e;if(0!==C){m++;if(m===v.length){y.ya(v);return}t=v[m];p=t[0];r=t[1];t=t[2];e=C}else n=!n}y.ya(v)}}V.prototype.getDocumentPoint=V.prototype.hb=function(a,b){b===f&&(b=new A);Cb(a)&&y.m("Spot must be real");var c=this.Ta,d=this.jb;b.q(a.x*(c.width+d)-d/2+c.x+a.offsetX,a.y*(c.height+d)-d/2+c.y+a.offsetY);this.oe.Qa(b);return b};
V.prototype.hj=function(a,b){var c=this.Na;if(c===q||this.fill===q&&this.stroke===q)return s;var d=c.Hb,e=this.jb/2;c.type===wc&&!b&&(e+=2);var g=y.df();g.assign(d);g.qg(e+2,e+2);if(!g.Ea(a))return y.Bc(g),s;d=e+1E-4;if(c.type===wc){if(this.stroke===q)return s;g=(c.D-c.ia)*(a.x-c.ia)+(c.F-c.ja)*(a.y-c.ja);return 0>(c.ia-c.D)*(a.x-c.D)+(c.ja-c.F)*(a.y-c.F)||0>g?s:H.jd(c.ia,c.ja,c.D,c.F,e,a.x,a.y)}if(c.type===xc){var k=c.ia,l=c.ja,m=c.D,n=c.F,c=Math.min(k,m),p=Math.min(l,n),k=Math.abs(m-k),l=Math.abs(n-
l);g.x=c;g.y=p;g.width=k;g.height=l;if(this.fill===q){g.qg(-d,-d);if(g.Ea(a))return s;g.qg(d,d)}this.stroke!==q&&g.qg(e,e);e=g.Ea(a);y.Bc(g);return e}if(c.type===yc){k=c.ia;l=c.ja;m=c.D;n=c.F;c=Math.min(k,m);p=Math.min(l,n);k=Math.abs(m-k);l=Math.abs(n-l);g=k/2;l/=2;c=a.x-(c+g);p=a.y-(p+l);if(this.fill===q){g-=d;l-=d;if(0>=g||0>=l||1>=c*c/(g*g)+p*p/(l*l))return s;g+=d;l+=d}this.stroke!==q&&(g+=e,l+=e);return 0>=g||0>=l?s:1>=c*c/(g*g)+p*p/(l*l)}if(c.type===oc)return this.fill===q?id(c,a.x,a.y,e):c.Ea(a,
e,1<this.jb,b);y.m("Unknown Geometry type");return s};
V.prototype.Nr=function(a,b,c,d){var e=this.Aa,g=this.Wg;a=Math.max(a,0);b=Math.max(b,0);var k;if(this.og)k=this.Na.Hb;else{var l=this.xb,m=H.fz[l];if(m===f){var n=H.ei[l];"string"===typeof n&&(n=H.ei[n]);"function"===typeof n?(m=n(q,100,100),H.fz[l]=m):y.m("Unsupported Figure:"+l)}k=m.Hb}var l=k.width,m=k.height,n=k.width,p=k.height;switch(mj(this)){case dj:d=c=0;break;case qc:n=Math.max(a-g,0);p=Math.max(b-g,0);break;case fj:n=Math.max(a-g,0);d=0;break;case ej:c=0,p=Math.max(b-g,0)}isFinite(e.width)&&
(n=e.width);isFinite(e.height)&&(p=e.height);e=this.he;k=this.Ce;c=Math.max(c,k.width)-g;d=Math.max(d,k.height)-g;n=Math.min(e.width,n);p=Math.min(e.height,p);n=isFinite(n)?Math.max(c,n):Math.max(l,c);p=isFinite(p)?Math.max(d,p):Math.max(m,d);c=Wk(this);switch(c){case dj:break;case qc:l=n;m=p;break;case Cg:c=Math.min(n/l,p/m);isFinite(c)||(c=1);l*=c;m*=c;break;default:y.m(c+" is not a valid geometryStretch.")}if(this.og){k=this.Pc;d=l;e=m;c=k.copy();k=k.Hb;d/=k.width;e/=k.height;isFinite(d)||(d=1);
isFinite(e)||(e=1);if(!(1===d&&1===e))switch(c.type){case wc:case xc:case yc:c.ia*=d;c.ja*=e;c.D*=d;c.F*=e;break;case oc:k=c.fb;for(var r=k.length,t=0;t<r;t++){var u=k.n[t];u.ia*=d;u.ja*=e;for(var u=u.Ca,v=u.length,z=0;z<v;z++){var C=u.n[z];switch(C.type){case Ec:case Vc:C.D*=d;C.F*=e;break;case Wc:C.ib*=d;C.Bb*=e;C.Rd*=d;C.Sd*=e;C.D*=d;C.F*=e;break;case bd:C.ib*=d;C.Bb*=e;C.D*=d;C.F*=e;break;case cd:C.xa*=d;C.Ga*=e;C.radiusX*=d;C.radiusY!==f&&(C.radiusY*=e);break;case dd:C.D*=d;C.F*=e;C.radiusX*=
d;C.radiusY*=e;break;default:y.m("Unknown Segment type: "+C.type)}}}}this.Na=c}else if(this.Na===q||this.Na.mt!==a-g||this.Na.lt!==b-g)this.Na=H.makeGeometry(this,l,m);k=this.Na.Hb;Infinity===a||Infinity===b?jj(this,k.x-g/2,k.y-g/2,0===a&&0===l?0:k.width+g,0===b&&0===m?0:k.height+g):jj(this,-(g/2),-(g/2),n+g,p+g)};
function $k(a,b,c){if(ai(a)!==s){a.wc.Pa();var d=a.Wg;if(0===d){var e=a.W;e instanceof Ge&&(e.type===ig&&e.zc instanceof V)&&(d=e.zc.jb)}d*=a.Rb;jj(a,-(d/2),-(d/2),b+d,c+d);b=a.wc;c=a.he;d=a.Ce;b.width=Math.min(c.width,b.width);b.height=Math.min(c.height,b.height);b.width=Math.max(d.width,b.width);b.height=Math.max(d.height,b.height);a.wc.freeze();a.wc.V()||y.m("Non-real measuredBounds has been set. Object "+a+", measuredBounds: "+a.wc.toString());nj(a,s)}}
function Wk(a){var b=a.Uu;return a.og?b===Bg?qc:b:b===Bg?H.fz[a.xb].fc:b}V.prototype.gj=function(a,b,c,d){Aj(this,a,b,c,d)};V.prototype.getNearestIntersectionPoint=V.prototype.Un=function(a,b,c){return this.Ar(a.x,a.y,b.x,b.y,c)};
V.prototype.Ar=function(a,b,c,d,e){var g=this.transform,k=1/(g.m11*g.m22-g.m12*g.m21),l=g.m22*k,m=-g.m12*k,n=-g.m21*k,p=g.m11*k,r=k*(g.m21*g.dy-g.m22*g.dx),t=k*(g.m12*g.dx-g.m11*g.dy),g=a*l+b*n+r,k=a*m+b*p+t,l=c*l+d*n+r,m=c*m+d*p+t,n=this.jb/2,r=this.Na;r===q&&(ah(this,Infinity,Infinity),r=this.Na);t=r.Hb;p=s;if(r.type===wc)if(1.5>=this.jb)p=H.wg(r.Sb,r.ac,r.Vc,r.cd,g,k,l,m,e);else{var u,v;r.Sb===r.Vc?(u=n,v=0):(b=(r.cd-r.ac)/(r.Vc-r.Sb),v=n/Math.sqrt(1+b*b),u=v*b);d=y.ub();b=new A;H.wg(r.Sb+u,r.ac+
v,r.Vc+u,r.cd+v,g,k,l,m,b)&&d.push(b);b=new A;H.wg(r.Sb-u,r.ac-v,r.Vc-u,r.cd-v,g,k,l,m,b)&&d.push(b);b=new A;H.wg(r.Sb+u,r.ac+v,r.Sb-u,r.ac-v,g,k,l,m,b)&&d.push(b);b=new A;H.wg(r.Vc+u,r.cd+v,r.Vc-u,r.cd-v,g,k,l,m,b)&&d.push(b);b=d.length;if(0===b)return y.ya(d),s;p=h;v=Infinity;for(u=0;u<b;u++){var l=d[u],z=(l.x-g)*(l.x-g)+(l.y-k)*(l.y-k);z<v&&(v=z,e.x=l.x,e.y=l.y)}y.ya(d)}else if(r.type===xc)b=t.x-n,p=H.Un(b,t.y-n,t.x+t.width+n,t.y+t.height+n,g,k,l,m,e);else if(r.type===yc)a:if(b=t.copy().qg(n,n),
0===b.width)p=H.wg(b.x,b.y,b.x,b.y+b.height,g,k,l,m,e);else if(0===b.height)p=H.wg(b.x,b.y,b.x+b.width,b.y,g,k,l,m,e);else{a=b.width/2;var C=b.height/2;d=b.x+a;b=b.y+C;c=9999;g!==l&&(c=(k-m)/(g-l));if(9999>Math.abs(c)){p=k-b-c*(g-d);if(0>a*a*c*c+C*C-p*p){e.x=NaN;e.y=NaN;p=s;break a}n=Math.sqrt(a*a*c*c+C*C-p*p);l=(-(a*a*c*p)+a*C*n)/(C*C+a*a*c*c)+d;a=(-(a*a*c*p)-a*C*n)/(C*C+a*a*c*c)+d;m=c*(l-d)+p+b;b=c*(a-d)+p+b;d=Math.abs((g-l)*(g-l))+Math.abs((k-m)*(k-m));k=Math.abs((g-a)*(g-a))+Math.abs((k-b)*(k-
b));d<k?(e.x=l,e.y=m):(e.x=a,e.y=b)}else{l=C*C;m=g-d;l-=l/(a*a)*m*m;if(0>l){e.x=NaN;e.y=NaN;p=s;break a}n=Math.sqrt(l);m=b+n;b-=n;d=Math.abs(m-k);k=Math.abs(b-k);d<k?(e.x=g,e.y=m):(e.x=g,e.y=b)}p=h}else if(r.type===oc){var K,I,Q,t=y.M();u=l-g;v=m-k;v=u*u+v*v;e.x=l;e.y=m;for(u=0;u<r.fb.count;u++){var L=r.fb.n[u],S=L.Ca;K=L.ia;I=L.ja;for(var Z=K,X=I,ea,ia,W=0;W<S.count;W++){ea=S.n[W];ia=ea.type;z=ea.D;Q=ea.F;var wa=s;switch(ia){case Vc:Z=z;X=Q;break;case Ec:wa=ol(K,I,z,Q,g,k,l,m,t);break;case Wc:wa=
ea.ib;ia=ea.Bb;var Oa=ea.Rd,Qa=ea.Sd,wa=H.kr(K,I,wa,ia,Oa,Qa,z,Q,g,k,l,m,0.5,t);break;case bd:wa=(K+2*ea.ib)/3;ia=(I+2*ea.Bb)/3;Oa=(2*ea.ib+z)/3;Qa=(2*ea.ib+z)/3;wa=H.kr(K,I,wa,ia,Oa,Qa,z,Q,g,k,l,m,0.5,t);break;case cd:case dd:Q=ea.type===cd?ed(ea,L):fd(ea,L,K,I);ia=Q.length;for(Oa=0;Oa<ia;Oa++)C=Q[Oa],0===Oa&&ol(K,I,C.x1,C.y1,g,k,l,m,t)&&(z=pl(g,k,t,v,e),z<v&&(v=z,p=h)),H.kr(C.x1,C.y1,C.x2,C.y2,C.Bd,C.Cd,C.Cb,C.Db,g,k,l,m,0.5,t)&&(z=pl(g,k,t,v,e),z<v&&(v=z,p=h));z=C.Cb;Q=C.Db;break;default:y.m("Unknown Segment type: "+
ea.type)}K=z;I=Q;wa&&(z=pl(g,k,t,v,e),z<v&&(v=z,p=h));ea.Hr&&(z=Z,Q=X,ol(K,I,z,Q,g,k,l,m,t)&&(z=pl(g,k,t,v,e),z<v&&(v=z,p=h)))}}g=c-a;k=d-b;b=Math.sqrt(g*g+k*k);0!==b&&(g/=b,k/=b);e.x-=g*n;e.y-=k*n;y.B(t)}else y.m("Invalid Geometry type");if(!p)return s;this.transform.Qa(e);return h};function pl(a,b,c,d,e){a=c.x-a;b=c.y-b;b=a*a+b*b;return b<d?(e.x=c.x,e.y=c.y,b):d}
function ol(a,b,c,d,e,g,k,l,m){var n=s,p=(e-k)*(b-d)-(g-l)*(a-c);if(0===p)return s;m.x=((e*l-g*k)*(a-c)-(e-k)*(a*d-b*c))/p;m.y=((e*l-g*k)*(b-d)-(g-l)*(a*d-b*c))/p;if((a>c?a-c:c-a)<(b>d?b-d:d-b)){if(e=b<d?b:d,a=b<d?d:b,(m.y>e||H.Ha(m.y,e))&&(m.y<a||H.Ha(m.y,a)))n=h}else if(e=a<c?a:c,a=a<c?c:a,(m.x>e||H.Ha(m.x,e))&&(m.x<a||H.Ha(m.x,a)))n=h;return n}
V.prototype.containedInRect=V.prototype.Bl=function(a,b){if(b===f)return a.ij(this.ua);var c=this.Na;c===q&&(ah(this,Infinity,Infinity),c=this.Na);var c=c.Hb,d=this.jb/2,e=s,g=y.M();g.q(c.x-d,c.y-d);a.Ea(b.Qa(g))&&(g.q(c.x-d,c.bottom+d),a.Ea(b.Qa(g))&&(g.q(c.right+d,c.bottom+d),a.Ea(b.Qa(g))&&(g.q(c.right+d,c.y-d),a.Ea(b.Qa(g))&&(e=h))));y.B(g);return e};
V.prototype.intersectsRect=V.prototype.qf=function(a,b){if(this.Bl(a,b)||b===f&&(b=this.transform,a.ij(this.ua)))return h;var c=y.yg();c.set(b);c.Iy();var d=a.left,e=a.right,g=a.top,k=a.bottom,l=y.M();l.q(d,g);c.Qa(l);if(this.hj(l,h))return y.B(l),h;l.q(e,g);c.Qa(l);if(this.hj(l,h))return y.B(l),h;l.q(d,k);c.Qa(l);if(this.hj(l,h))return y.B(l),h;l.q(e,k);c.Qa(l);if(this.hj(l,h))return y.B(l),h;var m=y.M(),n=y.M();c.set(b);c.iD(this.transform);c.Iy();m.x=e;m.y=g;m.transform(c);l.x=d;l.y=g;l.transform(c);
var p=s;ql(this,l,m,n)?p=h:(l.x=e,l.y=k,l.transform(c),ql(this,l,m,n)?p=h:(m.x=d,m.y=k,m.transform(c),ql(this,l,m,n)?p=h:(l.x=d,l.y=g,l.transform(c),ql(this,l,m,n)&&(p=h))));y.B(l);y.ye(c);y.B(m);y.B(n);return p};function ql(a,b,c,d){if(!a.Un(b,c,d))return s;a=b.x;b=b.y;var e=c.x,g=c.y;c=d.x;d=d.y;if(a===e){var k;b<g?(k=b,a=g):(k=g,a=b);return d>=k&&d<=a}a<e?(k=a,a=e):k=e;return c>=k&&c<=a}
V.prototype.jC=function(a,b,c){function d(a,b){for(var c=a.length,d=0;d<c;d++){var g=a[d];if(b.sr(g[0],g[1])>e)return h}return s}if(c&&this.fill!==q&&this.hj(a,h))return h;var e=a.xk(b);b=e;1.5<this.jb&&(e=this.jb/2+Math.sqrt(e),e*=e);var g=this.Na;g===q&&(ah(this,Infinity,Infinity),g=this.Na);if(!c){var k=g.Hb,l=k.x,m=k.y,n=k.x+k.width,k=k.y+k.height;if(Va(a.x,a.y,l,m)<=e&&Va(a.x,a.y,n,m)<=e&&Va(a.x,a.y,l,k)<=e&&Va(a.x,a.y,n,k)<=e)return h}l=g.Sb;m=g.ac;n=g.Vc;k=g.cd;if(g.type===wc){if(c=Ua(a.x,
a.y,l,m,n,k),g=(l-n)*(a.x-n)+(m-k)*(a.y-k),c<=(0<=(n-l)*(a.x-l)+(k-m)*(a.y-m)&&0<=g?e:b))return h}else{if(g.type===xc)return b=s,c&&(b=Ua(a.x,a.y,l,m,l,k)<=e||Ua(a.x,a.y,l,m,n,m)<=e||Ua(a.x,a.y,n,m,n,k)<=e||Ua(a.x,a.y,l,k,n,k)<=e),b;if(g.type===yc){b=a.x-(l+n)/2;var g=a.y-(m+k)/2,p=Math.abs(n-l)/2,r=Math.abs(k-m)/2;if(0===p||0===r)return c=Ua(a.x,a.y,l,m,n,k),c<=e?h:s;if(c){if(a=H.iG(p,r,b,g),a*a<=e)return h}else return Va(b,g,-p,0)>=e||Va(b,g,0,-r)>=e||Va(b,g,0,r)>=e||Va(b,g,p,0)>=e?s:h}else if(g.type===
oc){k=g.Hb;l=k.x;m=k.y;n=k.x+k.width;k=k.y+k.height;if(a.x>n&&a.x<l&&a.y>k&&a.y<m&&Ua(a.x,a.y,l,m,l,k)>e&&Ua(a.x,a.y,l,m,n,m)>e&&Ua(a.x,a.y,n,k,l,k)>e&&Ua(a.x,a.y,n,k,n,m)>e)return s;b=Math.sqrt(e);if(c){if(this.fill===q?id(g,a.x,a.y,b):g.Ea(a,b,h))return h}else{c=g.fb;for(b=0;b<c.count;b++){l=c.n[b];p=l.ia;r=l.ja;if(a.sr(p,r)>e)return s;m=l.Ca.n;n=m.length;for(k=0;k<n;k++){var t=m[k];switch(t.type){case Vc:case Ec:p=t.D;r=t.F;if(a.sr(p,r)>e)return s;break;case Wc:g=y.ub();H.ae(p,r,t.ib,t.Bb,t.Rd,
t.Sd,t.D,t.F,0.8,g);p=d(g,a);y.ya(g);if(p)return s;p=t.D;r=t.F;if(a.sr(p,r)>e)return s;break;case bd:g=y.ub();H.uo(p,r,t.ib,t.Bb,t.D,t.F,0.8,g);p=d(g,a);y.ya(g);if(p)return s;p=t.D;r=t.F;if(a.sr(p,r)>e)return s;break;case cd:case dd:var t=t.type===cd?ed(t,l):fd(t,l,p,r),u=t.length,v=q,g=y.ub();for(b=0;b<u;b++)if(v=t[b],g.length=0,H.ae(v.x1,v.y1,v.x2,v.y2,v.Bd,v.Cd,v.Cb,v.Db,0.8,g),d(g,a))return y.ya(g),s;y.ya(g);v!==q&&(p=v.Cb,r=v.Db);break;default:y.m("Unknown Segment type: "+t.type)}}}return h}}}return s};
y.g(V,"geometry",V.prototype.Pc);y.defineProperty(V,{Pc:"geometry"},function(){return this.Qj?this.Qj:this.Na},function(a){var b=this.Na;if(b!==a){a!==q?(x&&y.l(a,nc,V,"geometry"),this.Qj=this.Na=a.freeze()):this.Qj=this.Na=q;var c=this.W;c&&(c.Ji=NaN);this.og=h;this.aa();this.i("geometry",b,a)}});y.g(V,"geometryString",V.prototype.rC);
y.defineProperty(V,{rC:"geometryString"},function(){return this.Pc.toString()},function(a){var b=Lc(a);a=b.normalize();this.Pc=b;var b=y.M(),c=this.position;c.V()?b.q(c.x-a.x,c.y-a.y):b.q(-a.x,-a.y);this.position=b;y.B(b)});y.defineProperty(V,{Jy:"isGeometryPositioned"},w("wp"),function(a){x&&y.j(a,"boolean",V,"isGeometryPositioned");var b=this.wp;b!==a&&(this.wp=a,this.aa(),this.i("isGeometryPositioned",b,a))});V.prototype.Mf=function(){this.og?this.Qj=q:this.Na=q;this.aa()};y.g(V,"fill",V.prototype.fill);
y.defineProperty(V,{fill:"fill"},w("Je"),function(a){var b=this.Je;if(b!==a&&(a===q||"string"===typeof a||a instanceof Gd))a instanceof Gd&&a.freeze(),this.Je=a,this.ta(),this.i("fill",b,a)});y.g(V,"stroke",V.prototype.stroke);y.defineProperty(V,{stroke:"stroke"},w("oc"),function(a){var b=this.oc;if(b!==a&&(a===q||"string"===typeof a||a instanceof Gd))a instanceof Gd&&a.freeze(),this.oc=a,this.ta(),this.i("stroke",b,a)});y.g(V,"strokeWidth",V.prototype.jb);
y.defineProperty(V,{jb:"strokeWidth"},w("Wg"),function(a){var b=this.Wg;if(b!==a&&(x&&y.p(a,V,"strokeWidth"),0<=a)){this.Wg=a;this.aa();var c=this.W;c&&(c.Ji=NaN);this.i("strokeWidth",b,a)}});y.g(V,"strokeCap",V.prototype.cE);y.defineProperty(V,{cE:"strokeCap"},w("mn"),function(a){var b=this.mn;b!==a&&("string"===typeof a&&("butt"===a||"round"===a||"square"===a)?(this.mn=a,this.ta(),this.i("strokeCap",b,a)):y.ka(a,'"butt", "round", or "square"',V,"strokeCap"))});y.g(V,"strokeJoin",V.prototype.xH);
y.defineProperty(V,{xH:"strokeJoin"},w("nn"),function(a){var b=this.nn;b!==a&&("string"===typeof a&&("miter"===a||"bevel"===a||"round"===a)?(this.nn=a,this.ta(),this.i("strokeJoin",b,a)):y.ka(a,'"miter", "bevel", or "round"',V,"strokeJoin"))});y.g(V,"strokeMiterLimit",V.prototype.yH);y.defineProperty(V,{yH:"strokeMiterLimit"},w("rl"),function(a){var b=this.rl;if(b!==a&&(x&&y.p(a,V,"strokeMiterLimit"),0<a)){this.rl=a;this.ta();var c=this.W;c&&(c.Ji=NaN);this.i("strokeMiterLimit",b,a)}});
y.g(V,"strokeDashArray",V.prototype.yz);y.defineProperty(V,{yz:"strokeDashArray"},w("ql"),function(a){var b=this.ql;if(b!==a){a!==q&&!(a instanceof Array)&&y.Jb(a,"Array",V,"strokeDashArray:val");if(a!==q)for(var c=a.length,d=0;d<c;d++)("number"!==typeof a[d]||0>=a[d])&&y.m("strokeDashArray:val "+a[d]+" is a negative number or not a number.");this.ql=a;this.ta();this.i("strokeDashArray",b,a)}});y.g(V,"strokeDashOffset",V.prototype.wH);
y.defineProperty(V,{wH:"strokeDashOffset"},w("Mc"),function(a){var b=this.Mc;b!==a&&(x&&y.p(a,V,"strokeDashOffset"),0<a&&(this.Mc=a,this.ta(),this.i("strokeDashOffset",b,a)))});y.g(V,"figure",V.prototype.xb);y.defineProperty(V,{xb:"figure"},w("Dm"),function(a){var b=this.Dm;if(b!==a){x&&y.j(a,"string",V,"figure");var c=H.ei[a];"function"===typeof c?c=a:(c=H.ei[a.toLowerCase()])||y.m("Unknown Shape.figure: "+a);if(b!==c){if(a=this.W)a.Ji=NaN;this.Dm=c;this.og=s;this.Mf();this.i("figure",b,c)}}});
y.g(V,"toArrow",V.prototype.bm);y.defineProperty(V,{bm:"toArrow"},w("on"),function(a){var b=this.on;a===h?a="Standard":a===s&&(a="None");if(b!==a){x&&y.j(a,"string",V,"toArrow");var c=H.Nn(a);c instanceof nc?c=a:(c=H.Nn(a.toLowerCase()))||y.m("Unknown Shape.toArrow: "+a);b!==c&&(this.on=c,this.og=s,this.Mf(),rl(this,c),this.i("toArrow",b,c))}});y.g(V,"fromArrow",V.prototype.Ru);
y.defineProperty(V,{Ru:"fromArrow"},w("Fm"),function(a){var b=this.Fm;a===h?a="Standard":a===s&&(a="None");if(b!==a){x&&y.j(a,"string",V,"fromArrow");var c=H.Nn(a);c instanceof nc?c=a:(c=H.Nn(a.toLowerCase()))||y.m("Unknown Shape.fromArrow: "+a);b!==c&&(this.Fm=c,this.og=s,this.Mf(),rl(this,c),this.i("fromArrow",b,c))}});
function rl(a,b){var c=a.h;if(!(c!==q&&c.va.cb)){a.is=sl;c=bc;switch(b){case "halfarrowtop":c=Zb;break;case "halftriangletop":c=Zb;break;case "openrighttriangletop":c=Zb;break;case "opentriangletop":c=Zb}"None"!==a.on?(a.af=-1,a.bj=c):"None"!==a.Fm&&(a.af=0,a.bj=new J(1-c.x,c.y))}}y.defineProperty(V,{G:"spot1"},w("Qh"),function(a){y.l(a,J,V,"spot1");var b=this.Qh;b.L(a)||(this.Qh=a=a.U(),this.aa(),this.i("spot1",b,a))});
y.defineProperty(V,{H:"spot2"},w("Rh"),function(a){y.l(a,J,V,"spot2");var b=this.Rh;b.L(a)||(this.Rh=a=a.U(),this.aa(),this.i("spot2",b,a))});y.defineProperty(V,{jc:"parameter1"},w("kq"),function(a){var b=this.kq;b!==a&&(this.kq=a,this.aa(),this.i("parameter1",b,a))});y.defineProperty(V,{$r:"parameter2"},w("lq"),function(a){var b=this.lq;b!==a&&(this.lq=a,this.aa(),this.i("parameter2",b,a))});
y.A(V,{Ta:"naturalBounds"},function(){if(this.Na!==q)return this.Jc.assign(this.Na.Hb),this.Jc;var a=this.Aa;return new B(0,0,a.width,a.height)});y.g(V,"isRectangular",V.prototype.LG);y.defineProperty(V,{LG:"isRectangular"},w("Bp"),function(a){var b=this.Bp;b!==a&&(x&&y.j(a,"boolean",V,"isRectangular"),this.Bp=a,this.aa(),this.i("isRectangular",b,a))});y.g(V,"pathObject",V.prototype.ez);
y.defineProperty(V,{ez:"pathObject"},w("nq"),function(a){var b=this.nq;b!==a&&(x&&y.l(a,P,V,"pathObject"),this.nq=a,this.ta(),this.i("pathObject",b,a))});y.g(V,"geometryStretch",V.prototype.Uu);y.defineProperty(V,{Uu:"geometryStretch"},w("qp"),function(a){var b=this.qp;b!==a&&(y.rb(a,P,V,"geometryStretch"),this.qp=a,this.i("geometryStretch",b,a))});y.g(V,"interval",V.prototype.fi);
y.defineProperty(V,{fi:"interval"},w("up"),function(a){var b=this.up;x&&y.p(a,V,"interval");a=Math.floor(a);b!==a&&0<=a&&(this.up=a,this.aa(),this.i("interval",b,a))});function oa(){P.call(this);this.Ld="";this.oc="black";this.Bh="13px sans-serif";this.td="start";this.yp=h;this.el=this.fl=s;this.sl=tl;this.vt=this.Kp=0;this.Em=this.hx=this.ix=q;this.Lp={};this.jp=s;this.Ie=this.Vi=this.Tq=q}y.ba("TextBlock",oa);y.Ka(oa,P);
oa.prototype.cloneProtected=function(a){P.prototype.cloneProtected.call(this,a);a.Ld=this.Ld;a.oc=this.oc;a.Bh=this.Bh;a.td=this.td;a.yp=this.yp;a.fl=this.fl;a.el=this.el;a.sl=this.sl;a.Kp=this.Kp;a.vt=this.vt;a.ix=this.ix;a.hx=this.hx;a.Em=this.Em;a.Lp=this.Lp;a.jp=this.jp;a.Tq=this.Tq;a.Vi=this.Vi;a.Ie=this.Ie};oa.prototype.toString=function(){return 22<this.Ld.length?'TextBlock("'+this.Ld.substring(0,20)+'"...)':'TextBlock("'+this.Ld+'")'};var ul;oa.None=ul=y.w(oa,"None",0);var vl;
oa.WrapFit=vl=y.w(oa,"WrapFit",1);var tl;oa.WrapDesiredSize=tl=y.w(oa,"WrapDesiredSize",2);oa.prototype.aa=function(){P.prototype.aa.call(this);this.hx=this.ix=q};y.g(oa,"font",oa.prototype.font);y.defineProperty(oa,{font:"font"},w("Bh"),function(a){var b=this.Bh;b!==a&&(x&&y.j(a,"string",oa,"font"),this.Bh=a,this.Em=q,this.aa(),this.i("font",b,a))});y.g(oa,"text",oa.prototype.text);
y.defineProperty(oa,{text:"text"},w("Ld"),function(a){var b=this.Ld;a=a!==q&&a!==f?a.toString():"";b!==a&&(this.Ld=a,this.aa(),this.i("text",b,a))});y.g(oa,"textAlign",oa.prototype.textAlign);y.defineProperty(oa,{textAlign:"textAlign"},w("td"),function(a){var b=this.td;b!==a&&(x&&y.j(a,"string",oa,"textAlign"),"start"===a||"end"===a||"left"===a||"right"===a||"center"===a?(this.td=a,this.ta(),this.i("textAlign",b,a)):y.ka(a,'"start", "end", "left", "right", or "center"',oa,"textAlign"))});
y.A(oa,{Ta:"naturalBounds"},function(){if(!this.Jc.V()){var a=wl(this,this.Ld,{},999999).width,b=xl(this,a,{}),c=this.Aa;isNaN(c.width)||(a=c.width);isNaN(c.height)||(b=c.height);Za(this.Jc,a,b)}return this.Jc});y.g(oa,"isMultiline",oa.prototype.cv);y.defineProperty(oa,{cv:"isMultiline"},w("yp"),function(a){var b=this.yp;b!==a&&(x&&y.j(a,"boolean",oa,"isMultiline"),this.yp=a,this.aa(),this.i("isMultiline",b,a))});y.g(oa,"isUnderline",oa.prototype.NG);
y.defineProperty(oa,{NG:"isUnderline"},w("fl"),function(a){var b=this.fl;b!==a&&(x&&y.j(a,"boolean",oa,"isUnderline"),this.fl=a,this.ta(),this.i("isUnderline",b,a))});y.g(oa,"isStrikethrough",oa.prototype.MG);y.defineProperty(oa,{MG:"isStrikethrough"},w("el"),function(a){var b=this.el;b!==a&&(x&&y.j(a,"boolean",oa,"isStrikethrough"),this.el=a,this.ta(),this.i("isStrikethrough",b,a))});y.g(oa,"wrap",oa.prototype.Iz);
y.defineProperty(oa,{Iz:"wrap"},w("sl"),function(a){var b=this.sl;b!==a&&(x&&y.rb(a,oa,oa,"wrap"),this.sl=a,this.aa(),this.i("wrap",b,a))});y.g(oa,"stroke",oa.prototype.stroke);y.defineProperty(oa,{stroke:"stroke"},w("oc"),function(a){var b=this.oc;if(b!==a&&(a===q||"string"===typeof a||a instanceof Gd))a instanceof Gd&&a.freeze(),this.oc=a,this.ta(),this.i("stroke",b,a)});y.A(oa,{TC:"lineCount"},w("Kp"));y.g(oa,"editable",oa.prototype.Lu);
y.defineProperty(oa,{Lu:"editable"},w("jp"),function(a){var b=this.jp;b!==a&&(x&&y.j(a,"boolean",oa,"editable"),this.jp=a,this.i("editable",b,a))});y.g(oa,"textEditor",oa.prototype.Bz);y.defineProperty(oa,{Bz:"textEditor"},w("Tq"),function(a){var b=this.Tq;b!==a&&(a instanceof HTMLElement||y.m("textEditor must be an HTMLElement"),this.Tq=a,this.i("textEditor",b,a))});y.g(oa,"errorFunction",oa.prototype.tr);
y.defineProperty(oa,{tr:"errorFunction"},w("Ie"),function(a){var b=this.Ie;b!==a&&(a!==q&&y.j(a,"function",oa,"errorFunction"),this.Ie=a,this.i("errorFunction",b,a))});
oa.prototype.Hl=function(a,b){if(this.oc!==q&&0!==this.Ld.length){var c=this.Bh;if(c!==q){var d=this.Ta.width,e=bh(this);a.jw!==c&&(a.font=c,a.jw=c);a.textAlign=this.td;Hj(this,a,this.oc,h);(this.fl||this.el)&&Hj(this,a,this.oc,s);var c=this.Lp,g=0,k=s,l=y.ec(0,0);this.oe.Qa(l);var m=y.ec(0,e);this.oe.Qa(m);var n=l.xk(m);y.B(l);y.B(m);l=b.scale;8>n*l*l&&(k=h);n=c.fj.length;for(l=0;l<n;l++){var p=c.fj[l],m=c.Cn[l];p>d&&(p=d);var r=m,m=a,t=g,u=d,v=e,z=0;k?("start"===this.td||"left"===this.td?z=0:"end"===
this.td||"right"===this.td?z=u-p:"center"===this.td?z=(u-p)/2:y.m("textAlign must be start, end, left, right, or center"),m.fillRect(0+z,t+0.25*v,p,1)):("start"===this.td||"left"===this.td?z=0:"end"===this.td||"right"===this.td?z=u:"center"===this.td?z=u/2:y.m("textAlign must be start, end, left, right, or center"),m.fillText(r,0+z,t+v-0.25*v),r=v/20|0,this.fl&&("end"===this.td||"right"===this.td?z-=p:"center"===this.td&&(z-=p/2),m.beginPath(),m.lineWidth=r,m.moveTo(0+z,t+v-0.2*v),m.lineTo(0+z+p,
t+v-0.2*v),m.stroke()),this.el&&(m.beginPath(),m.lineWidth=r,t=t+v-v/2.2|0,0!==r%2&&(t+=0.5),m.moveTo(0,t),m.lineTo(0+p,t),m.stroke()));g+=e}}}};
oa.prototype.Nr=function(a,b,c,d){var e={},g=0,k=0;if(isNaN(this.Aa.width)){g=this.Ld;if(0===g.length)g=0;else if(this.cv){for(var l=k=0,m=s,n={ph:0};!m;){var p=yl(g,l,n);-1===p&&(p=g.length,m=h);l=zl(g.substr(l,p-l).replace(/^\s+|\s+$/g,""),this.Bh);l>k&&(k=l);l=n.ph}g=k}else k=yl(g,0,{}),0<=k&&(g=g.substr(0,k)),g=l=zl(g,this.Bh);g=Math.min(g,a/this.scale);g=Math.max(8,g)}else g=this.Aa.width;this.ha&&(g=Math.min(g,this.ha.he.width),g=Math.max(g,this.ha.Ce.width));k=xl(this,g,e);k=isNaN(this.Aa.height)?
Math.min(k,b/this.scale):this.Aa.height;if(this.Iz===vl||isNaN(this.Aa.width))g=e.ki,isNaN(this.Aa.width)&&(g=Math.max(8,g));g=Math.max(c,g);k=Math.max(d,k);Za(this.Jc,g,k);jj(this,0,0,g,k);this.Lp=e};oa.prototype.gj=function(a,b,c,d){Aj(this,a,b,c,d)};
function wl(a,b,c,d){b=b.replace(/^\s+|\s+$/g,"");c.ki===f&&(c.ki=0);c.fj===f&&(c.fj=[]);c.Cn===f&&(c.Cn=[]);var e=0,g,k=a.Bh;if(a.sl===ul)return c.ph=1,c.ki=zl(b,k),c.fj.push(c.ki),c.Cn.push(b),new ha(c.ki,bh(a));a=bh(a);var l=b,m=0;0===l.length&&(m=1,c.fj.push(0),c.Cn.push(l));for(;0<l.length;){for(var n=Al(l),l=l.substr(n.length);zl(n,k)>d;){var p=1;b=zl(n.substr(0,p),k);for(g=0;b<=d;)p++,g=b,b=zl(n.substr(0,p),k);1===p?(c.fj[m]=b,e=Math.max(e,b)):(c.fj[m]=g,e=Math.max(e,g));p--;1>p&&(p=1);c.Cn[m]=
n.substr(0,p);m++;n=n.substr(p)}g=Al(l);for(b=zl(n+g,k);0<g.length&&b<=d;)n+=g,l=l.substr(g.length),g=Al(l),b=zl((n+g).replace(/^\s+|\s+$/g,""),k);n=n.replace(/^\s+|\s+$/g,"");""!==n&&(0===g.length?(c.fj.push(b),e=Math.max(e,b)):(g=zl(n,k),c.fj.push(g),e=Math.max(e,g)),c.Cn.push(n),m++)}c.ph=m;c.ki=Math.max(c.ki,e);return new ha(c.ki,a*c.ph)}function Al(a){for(var b=a.length,c=0;c<b&&" "!==a.charAt(c);)c++;for(;c<b&&" "===a.charAt(c);)c++;return c>=b?a:a.substr(0,c)}
function zl(a,b){y.Av!==b&&(y.zv.font=b,y.Av=b);return y.zv.measureText(a).width}function bh(a){if(a.Em!==q)return a.Em;var b=a.Bh;y.Av!==b&&(y.zv.font=b,y.Av=b);var c=0;y.By[b]!==f&&5E3>y.mC?c=y.By[b]:(c=1.3*y.zv.measureText("M").width,y.By[b]=c,y.mC++);return a.Em=c}function yl(a,b,c){c.ph===f&&(c.ph=0);var d=a.indexOf("\r",b);-1===d&&(d=a.indexOf("\n",b));0<=d&&(c.ph="\r"===a[d]&&d+1<a.length&&"\n"===a[d+1]?d+2:d+1);return d}
function xl(a,b,c){var d=a.Ld,e=bh(a);if(0===d.length)return c.ki=0,a.Kp=1,e;if(!a.cv){var g=yl(d,0,{});0<=g&&(d=d.substr(0,g))}for(var k=g=0,l=0,m=-1,n={ph:0},p=s;!p;)m=yl(d,l,n),-1===m&&(m=d.length,p=h),l<=m&&(l=d.substr(l,m-l),a.sl!==ul?(c.ph=0,l=wl(a,l,c,b),g+=l.height,k+=c.ph):(wl(a,l,c,Infinity),g+=e,k++)),l=n.ph;a.Kp=k;return a.vt=g}y.g(oa,"textValidation",oa.prototype.us);
y.defineProperty(oa,{us:"textValidation"},w("Vi"),function(a){var b=this.Vi;b!==a&&(a!==q&&y.j(a,"function",oa,"textValidation"),this.Vi=a,this.i("textValidation",b,a))});function gk(){P.call(this);this.Hg=q;this.Oq="";this.Ti=(new B(NaN,NaN,NaN,NaN)).freeze();this.Hm=qc;this.Rq=this.Ie=q;this.nt=this.Wm=s}y.ba("Picture",gk);y.Ka(gk,P);gk.prototype.cloneProtected=function(a){P.prototype.cloneProtected.call(this,a);a.element=this.Hg;a.Oq=this.Oq;a.Ti.assign(this.Ti);a.Hm=this.Hm;a.Ie=this.Ie};
gk.prototype.toString=function(){return"Picture("+this.source+")#"+y.bc(this)};y.g(gk,"element",gk.prototype.element);
y.defineProperty(gk,{element:"element"},w("Hg"),function(a){var b=this.Hg;if(b!==a){a instanceof HTMLImageElement||(a instanceof HTMLVideoElement||a instanceof HTMLCanvasElement)||y.m("Picture.element must be an instance of Image, Canvas, or Video.");var c=this;a instanceof HTMLCanvasElement?this.nt=h:(this.nt=s,a.onerror=function(a){c.Ie!==q&&c.Ie(c,a)});this.Hg=a;a.complete===h||a.complete===f?(this.Wm=h,this.Aa.V()||(nj(this,s),this.aa())):(y.Fz.push(this),y.pv===q&&(y.pv=setInterval(function(){for(var a=
[],b=y.Fz,c=b.length,k=0;k<c;k++){var l=b[k],m;m=l;var n=m.Hg;if(n)if(n.complete){m.Wm=h;m.Aa.V()||(nj(m,s),m.aa());if(m.h)m.Aa.V()||m.h.pc(),m.h.ta();else{m=y.eC;var p=m.length;if(0===p)for(var p=document.getElementsByTagName("canvas"),r=p.length,n=0;n<r;n++){var t=p[n];t.parentElement&&t.parentElement.ca&&m.push(t.parentElement.ca)}p=m.length;for(n=0;n<p;n++)m[n].ta()}m=h}else m=s;else m=h;m||a.push(l)}0===a.length&&(clearInterval(y.pv),y.pv=q);y.Fz=a},200)));this.i("element",b,a);this.ta()}});
y.g(gk,"source",gk.prototype.source);y.defineProperty(gk,{source:"source"},w("Oq"),function(a){var b=this.Oq;if(b!==a){y.j(a,"string",gk,"source");this.Oq=a;var c=y.DG;if(c[a]!==f)this.element=c[a];else{var d=document.createElement("img");d.src=a;c[a]=d;d instanceof HTMLImageElement&&(this.element=d)}this.ta();this.i("source",b,a)}});y.g(gk,"sourceRect",gk.prototype.lh);
y.defineProperty(gk,{lh:"sourceRect"},w("Ti"),function(a){var b=this.Ti;b.L(a)||(y.l(a,B,gk,"sourceRect"),this.Ti=a=a.U(),this.ta(),this.i("sourceRect",b,a))});y.g(gk,"imageStretch",gk.prototype.EG);y.defineProperty(gk,{EG:"imageStretch"},w("Hm"),function(a){var b=this.Hm;b!==a&&(y.rb(a,P,gk,"imageStretch"),this.Hm=a,this.ta(),this.i("imageStretch",b,a))});y.g(gk,"errorFunction",gk.prototype.tr);
y.defineProperty(gk,{tr:"errorFunction"},w("Ie"),function(a){var b=this.Ie;if(b!==a){a!==q&&y.j(a,"function",gk,"errorFunction");this.Ie=a;if(this.Hg){var c=this;this.Hg.onerror=function(a){c.Ie!==q&&c.Ie(c,a)}}this.i("errorFunction",b,a)}});
gk.prototype.Hl=function(a,b){if(!b.Ys){if(this.Rq===q)if(this.Hg===q)this.Rq=s;else{var c=document.createElement("canvas").getContext("2d");c.drawImage(this.Hg,0,0);try{c.getImageData(0,0,1,1),this.Rq=s}catch(d){this.Rq=h}}if(this.Rq)return}c=this.Hg;if(c!==q){var e=c.src;(e===q||""===e)&&y.m("Element has no source attribute: "+c);var e=this.Ta,g=0,k=0,l=this.nt,m=l?+c.width:c.naturalWidth,l=l?+c.height:c.naturalHeight;if(!(0===m||0===l)){m===f&&c.videoWidth&&(m=c.videoWidth||e.width);l===f&&c.videoHeight&&
(l=c.videoHeight||e.height);this.lh.V()&&(g=this.Ti.x,k=this.Ti.y,m=this.Ti.width,l=this.Ti.height);var n=m,p=l,r=this.Hm;switch(r){case dj:if(this.lh.V())break;g+=Math.max((n-e.width)/2,0);k+=Math.max((p-e.height)/2,0);m=Math.min(e.width,n);l=Math.min(e.height,p);break;case qc:n=e.width;p=e.height;break;case Cg:case Dg:r===Cg?(r=Math.min(e.height/p,e.width/n),n*=r,p*=r):r===Dg&&(r=Math.max(e.height/p,e.width/n),n*=r,p*=r,g+=(n-e.width)/2,k+=(p-e.height)/2,m*=1/(n/e.width),l*=1/(p/e.height),n=e.width,
p=e.height)}a.drawImage(c,g,k,m,l,Math.max((e.width-n)/2,0),Math.max((e.height-p)/2,0),Math.min(e.width,n),Math.min(e.height,p))}}};y.A(gk,{Ta:"naturalBounds"},w("Jc"));
gk.prototype.Nr=function(a,b,c,d){var e=this.Aa,g=mj(this),k=this.Hg,l=this.nt;if(l||!this.Wm&&k&&k.complete)this.Wm=h;k===q&&(b=a=0);g!==qc&&g!==fj?isFinite(e.width)?a=e.width:k!==q&&this.Wm!==s&&(a=this.lh.V()?this.lh.width:l?+k.width:k.naturalWidth):(isFinite(a)||(a=this.lh.V()?this.lh.width:l?+k.width:k.naturalWidth),c=0);g!==qc&&g!==ej?isFinite(e.height)?b=e.height:k!==q&&this.Wm!==s&&(b=this.lh.V()?this.lh.height:l?+k.height:k.naturalHeight):(isFinite(b)||(b=this.lh.V()?this.lh.height:l?+k.height:
k.naturalHeight),d=0);e=this.he;g=this.Ce;c=Math.max(c,g.width);d=Math.max(d,g.height);a=Math.min(e.width,a);b=Math.min(e.height,b);a=Math.max(c,a);b=Math.max(d,b);k!==q&&!k.complete&&(isFinite(a)||(a=0),isFinite(b)||(b=0));Za(this.Jc,a,b);jj(this,0,0,a,b)};gk.prototype.gj=function(a,b,c,d){Aj(this,a,b,c,d)};function la(){this.s=new nc;this.Eb=q}la.prototype.reset=function(){this.s=new nc;this.Eb=q};
function M(a,b,c,d,e,g){a.s===q&&y.m("StreamGeometryContext has been closed");e!==f&&e===h?(a.Eb===q&&y.m("Need to call beginFigure first"),d=new gd(Vc),d.D=b,d.F=c,a.Eb.Ca.add(d)):(a.Eb=new pc,a.Eb.ia=b,a.Eb.ja=c,a.Eb.Yn=d,a.s.fb.add(a.Eb));g!==f&&(a.Eb.Mm=g)}function Qc(a){a.s===q&&y.m("StreamGeometryContext has been closed");a.Eb===q&&y.m("Need to call beginFigure first");var b=a.Eb.Ca.length;0<b&&a.Eb.Ca.n[b-1].close()}
function Rc(a){a.s===q&&y.m("StreamGeometryContext has been closed");a.Eb===q&&y.m("Need to call beginFigure first");0<a.Eb.Ca.length&&(a.Eb.Yn=h)}function Sc(a){a.s===q&&y.m("StreamGeometryContext has been closed");a.Eb===q&&y.m("Need to call beginFigure first");a.Eb.Ck=s}la.prototype.moveTo=function(a,b,c){this.s===q&&y.m("StreamGeometryContext has been closed");this.Eb===q&&y.m("Need to call beginFigure first");var d=new gd(Vc);d.D=a;d.F=b;c&&d.close();this.Eb.Ca.add(d)};
la.prototype.lineTo=function(a,b,c){this.s===q&&y.m("StreamGeometryContext has been closed");this.Eb===q&&y.m("Need to call beginFigure first");var d=new gd(Ec);d.D=a;d.F=b;c&&d.close();this.Eb.Ca.add(d)};function N(a,b,c,d,e,g,k,l){a.s===q&&y.m("StreamGeometryContext has been closed");a.Eb===q&&y.m("Need to call beginFigure first");var m=new gd(Wc);m.ib=b;m.Bb=c;m.Rd=d;m.Sd=e;m.D=g;m.F=k;l&&m.close();a.Eb.Ca.add(m)}
function Oc(a,b,c,d,e){a.s===q&&y.m("StreamGeometryContext has been closed");a.Eb===q&&y.m("Need to call beginFigure first");var g=new gd(bd);g.ib=b;g.Bb=c;g.D=d;g.F=e;a.Eb.Ca.add(g)}la.prototype.arcTo=function(a,b,c,d,e,g,k){this.s===q&&y.m("StreamGeometryContext has been closed");this.Eb===q&&y.m("Need to call beginFigure first");var l=new gd(cd);l.Wf=a;l.nh=b;l.xa=c;l.Ga=d;l.radiusX=e;l.radiusY=g?g:e;k&&l.close();this.Eb.Ca.add(l)};
function Pc(a,b,c,d,e,g,k,l){a.s===q&&y.m("StreamGeometryContext has been closed");a.Eb===q&&y.m("Need to call beginFigure first");b=new gd(dd,k,l,b,c,d,e,g);a.Eb.Ca.add(b)}
H.makeGeometry=function(a,b,c){var d=a.Aa,e=d.width,d=d.height;b!==f&&(!isNaN(b)&&isFinite(b))&&(e=b);c!==f&&(!isNaN(c)&&isFinite(c))&&(d=c);isFinite(e)||(e=100);isFinite(d)||(d=100);var g=f;if("None"!==a.bm)g=H.Nn(a.bm);else if("None"!==a.Ru)g=H.Nn(a.Ru);else{var k=H.ei[a.xb];"string"===typeof k&&(k=H.ei[k]);k===f&&y.m("Unknown Shape.figure: "+a.xb);g=k(a,e,d);g.Hd=new ha(e,d)}g===f&&(k=H.ei.Rectangle)&&(g=k(a,e,d));g.mt=b;g.lt=c;return g};
H.Yh=function(a,b,c,d,e,g,k,l,m,n,p,r,t,u){var v=1-m;a=a*v+c*m;b=b*v+d*m;c=c*v+e*m;d=d*v+g*m;e=e*v+k*m;g=g*v+l*m;l=a*v+c*m;k=b*v+d*m;c=c*v+e*m;d=d*v+g*m;n.x=a;n.y=b;p.x=l;p.y=k;r.x=l*v+c*m;r.y=k*v+d*m;t.x=c;t.y=d;u.x=e;u.y=g};H.Gn=function(a){a=H.Cl(a);var b=y.ub();b[0]=a[0];for(var c=1,d=1;c<a.length;c+=2,d+=3)b[d]=a[c],b[d+1]=a[c],b[d+2]=a[c+1];y.ya(a);return b};
H.Cl=function(a){var b=H.uk(a),c=y.ub(),d=Math.floor(b.length/2),e=b.length-1;a=0===a%2?2:1;for(var g=0;g<e;g++){var k=b[g],l=b[g+1],m=b[(d+g-1)%e],n=b[(d+g+a)%e];c[2*g]=k;c[2*g+1]=H.zk(k.x,k.y,m.x,m.y,l.x,l.y,n.x,n.y,new A)}c[c.length]=c[0];y.ya(b);return c};H.zk=function(a,b,c,d,e,g,k,l,m){c=a-c;k=e-k;0===c||0===k?0===c?(k=(g-l)/k,l=a,e=k*l+(g-k*e)):(d=(b-d)/c,l=e,e=d*l+(b-d*a)):(d=(b-d)/c,k=(g-l)/k,a=b-d*a,l=(g-k*e-a)/(d-k),e=d*l+a);m.q(l,e);return m};
H.uk=function(a){for(var b=y.ub(),c=1.5*Math.PI,d=0,e=0;e<a;e++)d=2*Math.PI/a*e+c,b[e]=new A(0.5+0.5*Math.cos(d),0.5+0.5*Math.sin(d));b.push(b[0]);return b};H.Mz=(new J(0.156,0.156)).Ja();H.Nz=(new J(0.844,0.844)).Ja();
H.ei={None:"Rectangle",Rectangle:function(a,b,c){a=new nc;a.type=xc;a.ia=0;a.ja=0;a.D=b;a.F=c;return a},Square:function(a,b,c){a=new nc;a.fc=Cg;a.type=xc;a.ia=0;a.ja=0;a.D=b;a.F=c;return a},Ellipse:function(a,b,c){a=new nc;a.type=yc;a.ia=0;a.ja=0;a.D=b;a.F=c;a.G=H.Mz;a.H=H.Nz;return a},Circle:function(a,b,c){a=new nc;a.fc=Cg;a.type=yc;a.ia=0;a.ja=0;a.D=b;a.F=c;a.G=H.Mz;a.H=H.Nz;return a},Connector:"Ellipse",TriangleRight:function(a,b,c){a=new nc;var d=new pc,e=new gd;e.D=b;e.F=0.5*c;d.Ca.add(e);b=
new gd;b.D=0;b.F=c;d.Ca.add(b.close());a.fb.add(d);a.G=new J(0,0.25);a.H=new J(0.5,0.75);return a},TriangleDown:function(a,b,c){a=new nc;var d=new pc,e=new gd;e.D=b;e.F=0;d.Ca.add(e);e=new gd;e.D=0.5*b;e.F=c;d.Ca.add(e.close());a.fb.add(d);a.G=new J(0.25,0);a.H=new J(0.75,0.5);return a},TriangleLeft:function(a,b,c){a=new nc;var d=new pc;d.ia=b;d.ja=c;var e=new gd;e.D=0;e.F=0.5*c;d.Ca.add(e);c=new gd;c.D=b;c.F=0;d.Ca.add(c.close());a.fb.add(d);a.G=new J(0.5,0.25);a.H=new J(1,0.75);return a},TriangleUp:function(a,
b,c){a=new nc;var d=new pc;d.ia=b;d.ja=c;var e=new gd;e.D=0;e.F=c;d.Ca.add(e);c=new gd;c.D=0.5*b;c.F=0;d.Ca.add(c.close());a.fb.add(d);a.G=new J(0.25,0.5);a.H=new J(0.75,1);return a},Line1:function(a,b,c){a=new nc;a.type=wc;a.ia=0;a.ja=0;a.D=b;a.F=c;return a},Line2:function(a,b,c){a=new nc;a.type=wc;a.ia=b;a.ja=0;a.D=0;a.F=c;return a},MinusLine:"LineH",LineH:function(a,b,c){a=new nc;a.type=wc;a.ia=0;a.ja=c/2;a.D=b;a.F=c/2;return a},LineV:function(a,b,c){a=new nc;a.type=wc;a.ia=b/2;a.ja=0;a.D=b/2;
a.F=c;return a},Curve1:function(a,b,c){var d=H.ra;a=y.u();M(a,0,0,s);N(a,d*b,0,1*b,(1-d)*c,b,c);b=a.s;y.v(a);return b},Curve2:function(a,b,c){var d=H.ra;a=y.u();M(a,0,0,s);N(a,0,d*c,(1-d)*b,c,b,c);b=a.s;y.v(a);return b},Curve3:function(a,b,c){var d=H.ra;a=y.u();M(a,1*b,0,s);N(a,1*b,d*c,d*b,1*c,0,1*c);b=a.s;y.v(a);return b},Curve4:function(a,b,c){var d=H.ra;a=y.u();M(a,1*b,0,s);N(a,(1-d)*b,0,0,(1-d)*c,0,1*c);b=a.s;y.v(a);return b},Alternative:"Triangle",Merge:"Triangle",Triangle:function(a,b,c){a=
y.u();M(a,0.5*b,0*c,h);a.lineTo(0*b,1*c);a.lineTo(1*b,1*c,h);b=a.s;b.G=new J(0.25,0.5);b.H=new J(0.75,1);y.v(a);return b},Decision:"Diamond",Diamond:function(a,b,c){a=y.u();M(a,0.5*b,0,h);a.lineTo(0,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0.5*c,h);b=a.s;b.G=new J(0.25,0.25);b.H=new J(0.75,0.75);y.v(a);return b},Pentagon:function(a,b,c){var d=H.uk(5);a=y.u();M(a,d[0].x*b,d[0].y*c,h);for(var e=1;5>e;e++)a.lineTo(d[e].x*b,d[e].y*c);y.ya(d);Qc(a);b=a.s;b.G=new J(0.2,0.22);b.H=new J(0.8,0.9);y.v(a);return b},
DataTransmission:"Hexagon",Hexagon:function(a,b,c){var d=H.uk(6);a=y.u();M(a,d[0].x*b,d[0].y*c,h);for(var e=1;6>e;e++)a.lineTo(d[e].x*b,d[e].y*c);y.ya(d);Qc(a);b=a.s;b.G=new J(0.07,0.25);b.H=new J(0.93,0.75);y.v(a);return b},Heptagon:function(a,b,c){var d=H.uk(7);a=y.u();M(a,d[0].x*b,d[0].y*c,h);for(var e=1;7>e;e++)a.lineTo(d[e].x*b,d[e].y*c);y.ya(d);Qc(a);b=a.s;b.G=new J(0.2,0.15);b.H=new J(0.8,0.85);y.v(a);return b},Octagon:function(a,b,c){var d=H.uk(8);a=y.u();M(a,d[0].x*b,d[0].y*c,h);for(var e=
1;8>e;e++)a.lineTo(d[e].x*b,d[e].y*c);y.ya(d);Qc(a);b=a.s;b.G=new J(0.15,0.15);b.H=new J(0.85,0.85);y.v(a);return b},Nonagon:function(a,b,c){var d=H.uk(9);a=y.u();M(a,d[0].x*b,d[0].y*c,h);for(var e=1;9>e;e++)a.lineTo(d[e].x*b,d[e].y*c);y.ya(d);Qc(a);b=a.s;b.G=new J(0.17,0.13);b.H=new J(0.82,0.82);y.v(a);return b},Decagon:function(a,b,c){var d=H.uk(10);a=y.u();M(a,d[0].x*b,d[0].y*c,h);for(var e=1;10>e;e++)a.lineTo(d[e].x*b,d[e].y*c);y.ya(d);Qc(a);b=a.s;b.G=new J(0.16,0.16);b.H=new J(0.84,0.84);y.v(a);
return b},Dodecagon:function(a,b,c){var d=H.uk(12);a=y.u();M(a,d[0].x*b,d[0].y*c,h);for(var e=1;12>e;e++)a.lineTo(d[e].x*b,d[e].y*c);y.ya(d);Qc(a);b=a.s;b.G=new J(0.16,0.16);b.H=new J(0.84,0.84);y.v(a);return b},FivePointedStar:function(a,b,c){var d=H.Cl(5);a=y.u();M(a,d[0].x*b,d[0].y*c,h);for(var e=1;10>e;e++)a.lineTo(d[e].x*b,d[e].y*c);y.ya(d);Qc(a);b=a.s;b.G=new J(0.312,0.383);b.H=new J(0.693,0.765);y.v(a);return b},SixPointedStar:function(a,b,c){var d=H.Cl(6);a=y.u();M(a,d[0].x*b,d[0].y*c,h);
for(var e=1;12>e;e++)a.lineTo(d[e].x*b,d[e].y*c);y.ya(d);Qc(a);b=a.s;b.G=new J(0.17,0.251);b.H=new J(0.833,0.755);y.v(a);return b},SevenPointedStar:function(a,b,c){var d=H.Cl(7);a=y.u();M(a,d[0].x*b,d[0].y*c,h);for(var e=1;14>e;e++)a.lineTo(d[e].x*b,d[e].y*c);y.ya(d);Qc(a);b=a.s;b.G=new J(0.363,0.361);b.H=new J(0.641,0.709);y.v(a);return b},EightPointedStar:function(a,b,c){var d=H.Cl(8);a=y.u();M(a,d[0].x*b,d[0].y*c,h);for(var e=1;16>e;e++)a.lineTo(d[e].x*b,d[e].y*c);y.ya(d);Qc(a);b=a.s;b.G=new J(0.252,
0.255);b.H=new J(0.75,0.75);y.v(a);return b},NinePointedStar:function(a,b,c){var d=H.Cl(9);a=y.u();M(a,d[0].x*b,d[0].y*c,h);for(var e=1;18>e;e++)a.lineTo(d[e].x*b,d[e].y*c);y.ya(d);Qc(a);b=a.s;b.G=new J(0.355,0.361);b.H=new J(0.645,0.651);y.v(a);return b},TenPointedStar:function(a,b,c){var d=H.Cl(10);a=y.u();M(a,d[0].x*b,d[0].y*c,h);for(var e=1;20>e;e++)a.lineTo(d[e].x*b,d[e].y*c);y.ya(d);Qc(a);b=a.s;b.G=new J(0.281,0.261);b.H=new J(0.723,0.748);y.v(a);return b},FivePointedBurst:function(a,b,c){var d=
H.Gn(5);a=y.u();M(a,d[0].x*b,d[0].y*c,h);for(var e=1;e<d.length;e+=3)N(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);y.ya(d);Qc(a);b=a.s;b.G=new J(0.312,0.383);b.H=new J(0.693,0.765);y.v(a);return b},SixPointedBurst:function(a,b,c){var d=H.Gn(6);a=y.u();M(a,d[0].x*b,d[0].y*c,h);for(var e=1;e<d.length;e+=3)N(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);y.ya(d);Qc(a);b=a.s;b.G=new J(0.17,0.251);b.H=new J(0.833,0.755);y.v(a);return b},SevenPointedBurst:function(a,
b,c){var d=H.Gn(7);a=y.u();M(a,d[0].x*b,d[0].y*c,h);for(var e=1;e<d.length;e+=3)N(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);y.ya(d);Qc(a);b=a.s;b.G=new J(0.363,0.361);b.H=new J(0.641,0.709);y.v(a);return b},EightPointedBurst:function(a,b,c){var d=H.Gn(8);a=y.u();M(a,d[0].x*b,d[0].y*c,h);for(var e=1;e<d.length;e+=3)N(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);y.ya(d);Qc(a);b=a.s;b.G=new J(0.252,0.255);b.H=new J(0.75,0.75);y.v(a);return b},NinePointedBurst:function(a,
b,c){var d=H.Gn(9);a=y.u();M(a,d[0].x*b,d[0].y*c,h);for(var e=1;e<d.length;e+=3)N(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);y.ya(d);Qc(a);b=a.s;b.G=new J(0.355,0.361);b.H=new J(0.645,0.651);y.v(a);return b},TenPointedBurst:function(a,b,c){var d=H.Gn(10);a=y.u();M(a,d[0].x*b,d[0].y*c,h);for(var e=1;e<d.length;e+=3)N(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);y.ya(d);Qc(a);b=a.s;b.G=new J(0.281,0.261);b.H=new J(0.723,0.748);y.v(a);return b},Cloud:function(a,
b,c){a=y.u();M(a,0.08034461*b,0.1944299*c,h);N(a,-0.09239631*b,0.07836421*c,0.1406031*b,-0.0542823*c,0.2008615*b,0.05349299*c);N(a,0.2450511*b,-0.00697547*c,0.3776197*b,-0.01112067*c,0.4338609*b,0.074219*c);N(a,0.4539471*b,0,0.6066018*b,-0.02526587*c,0.6558228*b,0.07004196*c);N(a,0.6914277*b,-0.01904177*c,0.8921095*b,-0.01220843*c,0.8921095*b,0.08370865*c);N(a,1.036446*b,0.04105738*c,1.020377*b,0.3022052*c,0.9147671*b,0.3194596*c);N(a,1.04448*b,0.360238*c,0.992256*b,0.5219009*c,0.9082935*b,0.562044*
c);N(a,1.032337*b,0.5771781*c,1.018411*b,0.8120651*c,0.9212406*b,0.8217117*c);N(a,1.028411*b,0.9571472*c,0.8556702*b,1.052487*c,0.7592566*b,0.9156953*c);N(a,0.7431877*b,1.009325*c,0.5624123*b,1.021761*c,0.5101666*b,0.9310455*c);N(a,0.4820677*b,1.031761*c,0.3030112*b,1.002796*c,0.2609328*b,0.9344623*c);N(a,0.2329994*b,1.01518*c,0.03213784*b,1.01518*c,0.08034461*b,0.870098*c);N(a,-0.02812061*b,0.9032597*c,-0.01205169*b,0.6835638*c,0.06829292*b,0.6545475*c);N(a,-0.01812061*b,0.6089503*c,-0.00606892*
b,0.4555777*c,0.06427569*b,0.4265613*c);N(a,-0.01606892*b,0.3892545*c,-0.01205169*b,0.1944299*c,0.08034461*b,0.1944299*c);Qc(a);b=a.s;b.G=new J(0.1,0.1);b.H=new J(0.9,0.9);y.v(a);return b},Gate:"Crescent",Crescent:function(a,b,c){a=y.u();M(a,0,0,h);N(a,1*b,0,1*b,1*c,0,1*c);N(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);Qc(a);b=a.s;b.G=new J(0.511,0.19);b.H=new J(0.776,0.76);y.v(a);return b},FramedRectangle:function(a,b,c){var d=y.u(),e=a?a.jc:0;a=a?a.$r:0;0===e&&(e=0.1);0===a&&(a=0.1);M(d,0,0,h);d.lineTo(1*b,
0);d.lineTo(1*b,1*c);d.lineTo(0,1*c,h);M(d,e*b,a*c,s,h);d.lineTo(e*b,(1-a)*c);d.lineTo((1-e)*b,(1-a)*c);d.lineTo((1-e)*b,a*c,h);b=d.s;b.G=new J(e,a);b.H=new J(1-e,1-a);y.v(d);return b},Delay:"HalfEllipse",HalfEllipse:function(a,b,c){var d=H.ra;a=y.u();M(a,0,0,h);N(a,d*b,0,1*b,(0.5-d/2)*c,1*b,0.5*c);N(a,1*b,(0.5+d/2)*c,d*b,1*c,0,1*c);Qc(a);b=a.s;b.G=new J(0,0.2);b.H=new J(0.75,0.8);y.v(a);return b},Heart:function(a,b,c){a=y.u();M(a,0.5*b,1*c,h);N(a,0.1*b,0.8*c,0,0.5*c,0*b,0.3*c);N(a,0*b,0,0.45*b,0,
0.5*b,0.3*c);N(a,0.55*b,0,1*b,0,1*b,0.3*c);N(a,b,0.5*c,0.9*b,0.8*c,0.5*b,1*c);Qc(a);b=a.s;b.G=new J(0.15,0.29);b.H=new J(0.86,0.68);y.v(a);return b},Spade:function(a,b,c){a=y.u();M(a,0.5*b,0,h);a.lineTo(0.51*b,0.01*c);N(a,0.6*b,0.2*c,b,0.25*c,b,0.5*c);N(a,b,0.8*c,0.6*b,0.8*c,0.55*b,0.7*c);N(a,0.5*b,0.75*c,0.55*b,0.95*c,0.75*b,c);a.lineTo(0.25*b,c);N(a,0.45*b,0.95*c,0.5*b,0.75*c,0.45*b,0.7*c);N(a,0.4*b,0.8*c,0,0.8*c,0,0.5*c);N(a,0,0.25*c,0.4*b,0.2*c,0.49*b,0.01*c);Qc(a);b=a.s;b.G=new J(0.19,0.26);
b.H=new J(0.8,0.68);y.v(a);return b},Club:function(a,b,c){a=y.u();M(a,0.4*b,0.6*c,h);N(a,0.5*b,0.75*c,0.45*b,0.95*c,0.15*b,1*c);a.lineTo(0.85*b,c);N(a,0.55*b,0.95*c,0.5*b,0.75*c,0.6*b,0.6*c);var d=0.2,e=0.3,g=0,k=d*(4*(Math.SQRT2-1)/3);N(a,(0.5-d+e)*b,(0.5+k+g)*c,(0.5-k+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+k+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+k+g)*c,(0.5+d+e)*b,(0.5+g)*c);N(a,(0.5+d+e)*b,(0.5-k+g)*c,(0.5+k+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-k+e)*b,(0.5-d+g)*c,(0.5-d+e+0.05)*
b,(0.5-k+g-0.02)*c,0.65*b,0.36771243*c);d=0.2;e=0;g=-0.3;k=d*(4*(Math.SQRT2-1)/3);N(a,(0.5+k+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+k+g)*c,(0.5+d+e)*b,(0.5+g)*c);N(a,(0.5+d+e)*b,(0.5-k+g)*c,(0.5+k+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-k+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-k+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+k+g)*c,(0.5-k+e)*b,(0.5+d+g)*c,0.35*b,0.36771243*c);d=0.2;e=-0.3;g=0;k=d*(4*(Math.SQRT2-1)/3);N(a,(0.5+d+e-0.05)*b,(0.5-k+g-0.02)*c,(0.5+k+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+
g)*c);N(a,(0.5-k+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-k+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+k+g)*c,(0.5-k+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+k+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+k+g)*c,0.4*b,0.6*c);Qc(a);b=a.s;b.G=new J(0.06,0.39);b.H=new J(0.93,0.58);y.v(a);return b},YinYang:function(a,b,c){var d=0.5;a=y.u();d=0.5;M(a,0.5*b,0,h);a.arcTo(270,180,0.5*b,0.5*b,0.5*b);N(a,1*b,d*c,0,d*c,d*b,0,h);var d=0.1,e=0.25;M(a,(0.5+d)*b,e*c,h,h);a.arcTo(0,-360,0.5*b,c*e,d*b);Qc(a);M(a,0.5*
b,0,s);a.arcTo(270,-180,0.5*b,0.5*b,0.5*b);Sc(a);e=0.75;M(a,(0.5+d)*b,e*c,h);a.arcTo(0,360,0.5*b,c*e,d*b);Qc(a);b=a.s;b.fc=Cg;y.v(a);return b},Peace:function(a,b,c){a=y.u();var d=0.5*(4*(Math.SQRT2-1)/3);M(a,b,0.5*c,h);N(a,b,(0.5-d)*c,(0.5+d)*b,0,0.5*b,0);N(a,(0.5-d)*b,0,0,(0.5-d)*c,0,0.5*c);N(a,0,(0.5+d)*c,(0.5-d)*b,c,0.5*b,c);N(a,(0.5+d)*b,c,b,(0.5+d)*c,b,0.5*c);d=0.4*(4*(Math.SQRT2-1)/3);M(a,0.5*b,0.1*c,h,h);N(a,(0.5+d)*b,0.1*c,0.9*b,(0.5-d)*c,0.9*b,0.5*c);N(a,0.9*b,(0.5+d)*c,(0.5+d)*b,0.9*c,0.5*
b,0.9*c);N(a,(0.5-d)*b,0.9*c,0.1*b,(0.5+d)*c,0.1*b,0.5*c);N(a,0.1*b,(0.5-d)*c,(0.5-d)*b,0.1*c,0.5*b,0.1*c);var d=0.07,e=0,g=-0.707*0.11,k=d*(4*(Math.SQRT2-1)/3);M(a,(0.5+d+e)*b,(0.5+g)*c,h);N(a,(0.5+d+e)*b,(0.5-k+g)*c,(0.5+k+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-k+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-k+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+k+g)*c,(0.5-k+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+k+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+k+g)*c,(0.5+d+e)*b,(0.5+g)*c);d=0.07;e=-0.707*
0.11;g=0.707*0.11;k=d*(4*(Math.SQRT2-1)/3);M(a,(0.5+d+e)*b,(0.5+g)*c,h);N(a,(0.5+d+e)*b,(0.5-k+g)*c,(0.5+k+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-k+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-k+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+k+g)*c,(0.5-k+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+k+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+k+g)*c,(0.5+d+e)*b,(0.5+g)*c);d=0.07;e=0.707*0.11;g=0.707*0.11;k=d*(4*(Math.SQRT2-1)/3);M(a,(0.5+d+e)*b,(0.5+g)*c,h);N(a,(0.5+d+e)*b,(0.5-k+g)*c,(0.5+k+e)*b,(0.5-
d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-k+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-k+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+k+g)*c,(0.5-k+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+k+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+k+g)*c,(0.5+d+e)*b,(0.5+g)*c);b=a.s;b.G=new J(0.146,0.146);b.H=new J(0.853,0.853);b.fc=Cg;y.v(a);return b},NotAllowed:function(a,b,c){var d=H.ra,e=0.5*d,g=0.5;a=y.u();M(a,0.5*b,(0.5-g)*c,h);N(a,(0.5-e)*b,(0.5-g)*c,(0.5-g)*b,(0.5-e)*c,(0.5-g)*b,0.5*c);N(a,(0.5-g)*b,(0.5+e)*c,(0.5-
e)*b,(0.5+g)*c,0.5*b,(0.5+g)*c);N(a,(0.5+e)*b,(0.5+g)*c,(0.5+g)*b,(0.5+e)*c,(0.5+g)*b,0.5*c);N(a,(0.5+g)*b,(0.5-e)*c,(0.5+e)*b,(0.5-g)*c,0.5*b,(0.5-g)*c);var g=0.4,e=0.4*d,d=y.M(),k=y.M(),l=y.M(),m=y.M();H.Yh(0.5,0.5-g,0.5+e,0.5-g,0.5+g,0.5-e,0.5+g,0.5,0.42,d,k,l,m,m);var n=y.M(),p=y.M(),r=y.M();H.Yh(0.5,0.5-g,0.5+e,0.5-g,0.5+g,0.5-e,0.5+g,0.5,0.58,m,m,r,n,p);var t=y.M(),u=y.M(),v=y.M();H.Yh(0.5,0.5+g,0.5-e,0.5+g,0.5-g,0.5+e,0.5-g,0.5,0.42,t,u,v,m,m);var z=y.M(),C=y.M(),K=y.M();H.Yh(0.5,0.5+g,0.5-
e,0.5+g,0.5-g,0.5+e,0.5-g,0.5,0.58,m,m,K,z,C);M(a,K.x*b,K.y*c,h,h);N(a,z.x*b,z.y*c,C.x*b,C.y*c,(0.5-g)*b,0.5*c);N(a,(0.5-g)*b,(0.5-e)*c,(0.5-e)*b,(0.5-g)*c,0.5*b,(0.5-g)*c);N(a,d.x*b,d.y*c,k.x*b,k.y*c,l.x*b,l.y*c);a.lineTo(K.x*b,K.y*c);Qc(a);M(a,v.x*b,v.y*c,h,h);a.lineTo(r.x*b,r.y*c);N(a,n.x*b,n.y*c,p.x*b,p.y*c,(0.5+g)*b,0.5*c);N(a,(0.5+g)*b,(0.5+e)*c,(0.5+e)*b,(0.5+g)*c,0.5*b,(0.5+g)*c);N(a,t.x*b,t.y*c,u.x*b,u.y*c,v.x*b,v.y*c);Qc(a);y.B(d);y.B(k);y.B(l);y.B(m);y.B(n);y.B(p);y.B(r);y.B(t);y.B(u);
y.B(v);y.B(z);y.B(C);y.B(K);b=a.s;y.v(a);b.fc=Cg;return b},Fragile:function(a,b,c){a=y.u();M(a,0,0,h);a.lineTo(0.25*b,0);a.lineTo(0.2*b,0.15*c);a.lineTo(0.3*b,0.25*c);a.lineTo(0.29*b,0.33*c);a.lineTo(0.35*b,0.25*c);a.lineTo(0.3*b,0.15*c);a.lineTo(0.4*b,0);a.lineTo(1*b,0);N(a,1*b,0.25*c,0.75*b,0.5*c,0.55*b,0.5*c);a.lineTo(0.55*b,0.9*c);a.lineTo(0.7*b,0.9*c);a.lineTo(0.7*b,1*c);a.lineTo(0.3*b,1*c);a.lineTo(0.3*b,0.9*c);a.lineTo(0.45*b,0.9*c);a.lineTo(0.45*b,0.5*c);N(a,0.25*b,0.5*c,0,0.25*c,0,0);Qc(a);
b=a.s;b.G=new J(0.25,0);b.H=new J(0.75,0.4);y.v(a);return b},HourGlass:function(a,b,c){a=y.u();M(a,0.65*b,0.5*c,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0.35*b,0.5*c);a.lineTo(0,0);a.lineTo(1*b,0);Qc(a);b=a.s;y.v(a);return b},Lightning:function(a,b,c){a=y.u();M(a,0*b,0.55*c,h);a.lineTo(0.75*b,0);a.lineTo(0.25*b,0.45*c);a.lineTo(0.9*b,0.48*c);a.lineTo(0.4*b,1*c);a.lineTo(0.65*b,0.55*c);Qc(a);b=a.s;y.v(a);return b},Parallelogram1:function(a,b,c){a=a?a.jc:0;0===a&&(a=0.1);var d=y.u();M(d,a*b,0,
h);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);Qc(d);b=d.s;b.G=new J(a,0);b.H=new J(1-a,1);y.v(d);return b},Input:"Output",Output:function(a,b,c){a=y.u();M(a,0,1*c,h);a.lineTo(0.1*b,0);a.lineTo(1*b,0);a.lineTo(0.9*b,1*c);Qc(a);b=a.s;b.G=new J(0.1,0);b.H=new J(0.9,1);y.v(a);return b},Parallelogram2:function(a,b,c){a=a?a.jc:0;0===a&&(a=0.25);var d=y.u();M(d,a*b,0,h);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);Qc(d);b=d.s;b.G=new J(a,0);b.H=new J(1-a,1);y.v(d);return b},ThickCross:function(a,
b,c){a=a?a.jc:0;0===a&&(a=0.25);var d=y.u();M(d,(0.5-a/2)*b,0,h);d.lineTo((0.5+a/2)*b,0);d.lineTo((0.5+a/2)*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,1*c);d.lineTo((0.5-a/2)*b,1*c);d.lineTo((0.5-a/2)*b,(0.5+a/2)*c);d.lineTo(0,(0.5+a/2)*c);d.lineTo(0,(0.5-a/2)*c);d.lineTo((0.5-a/2)*b,(0.5-a/2)*c);Qc(d);b=d.s;b.G=new J(0.5-a/2,0.5-a/2);b.H=new J(0.5+a/2,0.5+a/2);y.v(d);return b},ThickX:function(a,b,c){a=0.25/Math.SQRT2;
var d=y.u();M(d,0.3*b,0,h);d.lineTo(0.5*b,0.2*c);d.lineTo(0.7*b,0);d.lineTo(1*b,0.3*c);d.lineTo(0.8*b,0.5*c);d.lineTo(1*b,0.7*c);d.lineTo(0.7*b,1*c);d.lineTo(0.5*b,0.8*c);d.lineTo(0.3*b,1*c);d.lineTo(0,0.7*c);d.lineTo(0.2*b,0.5*c);d.lineTo(0,0.3*c);Qc(d);b=d.s;b.G=new J(0.5-a,0.5-a);b.H=new J(0.5+a,0.5+a);y.v(d);return b},ThinCross:function(a,b,c){var d=a?a.jc:0;0===d&&(d=0.1);a=y.u();M(a,(0.5-d/2)*b,0,h);a.lineTo((0.5+d/2)*b,0);a.lineTo((0.5+d/2)*b,(0.5-d/2)*c);a.lineTo(1*b,(0.5-d/2)*c);a.lineTo(1*
b,(0.5+d/2)*c);a.lineTo((0.5+d/2)*b,(0.5+d/2)*c);a.lineTo((0.5+d/2)*b,1*c);a.lineTo((0.5-d/2)*b,1*c);a.lineTo((0.5-d/2)*b,(0.5+d/2)*c);a.lineTo(0,(0.5+d/2)*c);a.lineTo(0,(0.5-d/2)*c);a.lineTo((0.5-d/2)*b,(0.5-d/2)*c);Qc(a);b=a.s;y.v(a);return b},ThinX:function(a,b,c){a=y.u();M(a,0.1*b,0,h);a.lineTo(0.5*b,0.4*c);a.lineTo(0.9*b,0);a.lineTo(1*b,0.1*c);a.lineTo(0.6*b,0.5*c);a.lineTo(1*b,0.9*c);a.lineTo(0.9*b,1*c);a.lineTo(0.5*b,0.6*c);a.lineTo(0.1*b,1*c);a.lineTo(0,0.9*c);a.lineTo(0.4*b,0.5*c);a.lineTo(0,
0.1*c);Qc(a);return a.s},RightTriangle:function(a,b,c){a=y.u();M(a,0,0,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);Qc(a);b=a.s;b.G=new J(0,0.5);b.H=new J(0.5,1);y.v(a);return b},RoundedIBeam:function(a,b,c){a=y.u();M(a,0,0,h);a.lineTo(1*b,0);N(a,0.5*b,0.25*c,0.5*b,0.75*c,1*b,1*c);a.lineTo(0,1*c);N(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);Qc(a);b=a.s;y.v(a);return b},RoundedRectangle:function(a,b,c){var d=a?a.jc:0;0>=d&&(d=5);d=Math.min(d,b/3);d=Math.min(d,c/3);a=d*H.ra;var e=y.u();M(e,d,0,h);e.lineTo(b-d,0);N(e,
b-a,0,b,a,b,d);e.lineTo(b,c-d);N(e,b,c-a,b-a,c,b-d,c);e.lineTo(d,c);N(e,a,c,0,c-a,0,c-d);e.lineTo(0,d);N(e,0,a,a,0,d,0);Qc(e);b=e.s;1<a?(b.G=new J(0,0,a,a),b.H=new J(1,1,-a,-a)):(b.G=Mb,b.H=Zb);y.v(e);return b},Border:function(a,b,c){var d=a?a.jc:0;0>=d&&(d=5);d=Math.min(d,b/3);d=Math.min(d,c/3);a=y.u();M(a,d,0,h);a.lineTo(b-d,0);N(a,b-0,0,b,0,b,d);a.lineTo(b,c-d);N(a,b,c-0,b-0,c,b-d,c);a.lineTo(d,c);N(a,0,c,0,c-0,0,c-d);a.lineTo(0,d);N(a,0,0,0,0,d,0);Qc(a);b=a.s;b.G=Mb;b.H=Zb;y.v(a);return b},SquareIBeam:function(a,
b,c){var d=a?a.jc:0;0===d&&(d=0.2);a=y.u();M(a,0,0,h);a.lineTo(1*b,0);a.lineTo(1*b,d*c);a.lineTo((0.5+d/2)*b,d*c);a.lineTo((0.5+d/2)*b,(1-d)*c);a.lineTo(1*b,(1-d)*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,(1-d)*c);a.lineTo((0.5-d/2)*b,(1-d)*c);a.lineTo((0.5-d/2)*b,d*c);a.lineTo(0,d*c);Qc(a);b=a.s;y.v(a);return b},Trapezoid:function(a,b,c){a=a?a.jc:0;0===a&&(a=0.2);var d=y.u();M(d,a*b,0,h);d.lineTo((1-a)*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Qc(d);b=d.s;b.G=new J(a,0);b.H=new J(1-a,1);y.v(d);
return b},ManualLoop:"ManualOperation",ManualOperation:function(a,b,c){var d=a?a.jc:0;a=y.u();M(a,d,0,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(0.9*b,1*c);a.lineTo(0.1*b,1*c);Qc(a);b=a.s;b.G=new J(0.1,0);b.H=new J(0.9,1);y.v(a);return b},GenderMale:function(a,b,c){a=y.u();var d=H.ra,e=0.4*d,g=0.4,k=y.M(),l=y.M(),m=y.M(),n=y.M();M(a,(0.5-g)*b,0.5*c,h);N(a,(0.5-g)*b,(0.5-e)*c,(0.5-e)*b,(0.5-g)*c,0.5*b,(0.5-g)*c);H.Yh(0.5,0.5-g,0.5+e,0.5-g,0.5+g,0.5-e,0.5+g,0.5,0.44,m,n,l,k,k);N(a,m.x*b,m.y*c,n.x*b,
n.y*c,l.x*b,l.y*c);var p=y.ec(l.x,l.y);H.Yh(0.5,0.5-g,0.5+e,0.5-g,0.5+g,0.5-e,0.5+g,0.5,0.56,k,k,l,m,n);var r=y.ec(l.x,l.y);a.lineTo((0.1*p.x+0.855)*b,0.1*p.y*c);a.lineTo(0.85*b,0.1*p.y*c);a.lineTo(0.85*b,0);a.lineTo(1*b,0);a.lineTo(1*b,0.15*c);a.lineTo((0.1*r.x+0.9)*b,0.15*c);a.lineTo((0.1*r.x+0.9)*b,(0.1*r.y+0.05*0.9)*c);a.lineTo(r.x*b,r.y*c);N(a,m.x*b,m.y*c,n.x*b,n.y*c,(0.5+g)*b,0.5*c);N(a,(0.5+g)*b,(0.5+e)*c,(0.5+e)*b,(0.5+g)*c,0.5*b,(0.5+g)*c);N(a,(0.5-e)*b,(0.5+g)*c,(0.5-g)*b,(0.5+e)*c,(0.5-
g)*b,0.5*c);g=0.35;e=0.35*d;M(a,0.5*b,(0.5-g)*c,h,h);N(a,(0.5-e)*b,(0.5-g)*c,(0.5-g)*b,(0.5-e)*c,(0.5-g)*b,0.5*c);N(a,(0.5-g)*b,(0.5+e)*c,(0.5-e)*b,(0.5+g)*c,0.5*b,(0.5+g)*c);N(a,(0.5+e)*b,(0.5+g)*c,(0.5+g)*b,(0.5+e)*c,(0.5+g)*b,0.5*c);N(a,(0.5+g)*b,(0.5-e)*c,(0.5+e)*b,(0.5-g)*c,0.5*b,(0.5-g)*c);M(a,(0.5-g)*b,0.5*c,h);y.B(k);y.B(l);y.B(m);y.B(n);y.B(p);y.B(r);b=a.s;b.G=new J(0.202,0.257);b.H=new J(0.692,0.839);b.fc=Cg;y.v(a);return b},GenderFemale:function(a,b,c){a=y.u();var d=0.375,e=0,g=-0.125,
k=d*(4*(Math.SQRT2-1)/3);M(a,(0.525+e)*b,(0.5+d+g)*c,h);N(a,(0.5+k+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+k+g)*c,(0.5+d+e)*b,(0.5+g)*c);N(a,(0.5+d+e)*b,(0.5-k+g)*c,(0.5+k+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-k+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-k+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+k+g)*c,(0.5-k+e)*b,(0.5+d+g)*c,(0.475+e)*b,(0.5+d+g)*c);a.lineTo(0.475*b,0.85*c);a.lineTo(0.425*b,0.85*c);a.lineTo(0.425*b,0.9*c);a.lineTo(0.475*b,0.9*c);a.lineTo(0.475*b,1*c);a.lineTo(0.525*b,1*c);a.lineTo(0.525*
b,0.9*c);a.lineTo(0.575*b,0.9*c);a.lineTo(0.575*b,0.85*c);a.lineTo(0.525*b,0.85*c);Qc(a);d=0.325;e=0;g=-0.125;k=d*(4*(Math.SQRT2-1)/3);M(a,(0.5+d+e)*b,(0.5+g)*c,h,h);N(a,(0.5+d+e)*b,(0.5+k+g)*c,(0.5+k+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5-k+e)*b,(0.5+d+g)*c,(0.5-d+e)*b,(0.5+k+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5-k+g)*c,(0.5-k+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5+k+e)*b,(0.5-d+g)*c,(0.5+d+e)*b,(0.5-k+g)*c,(0.5+d+e)*b,(0.5+g)*c);M(a,(0.525+e)*b,(0.5+d+g)*c,h);b=a.s;
b.G=new J(0.232,0.136);b.H=new J(0.782,0.611);b.fc=Cg;y.v(a);return b},PlusLine:function(a,b,c){a=y.u();M(a,0,0.5*c,s);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);b=a.s;y.v(a);return b},XLine:function(a,b,c){a=y.u();M(a,0,1*c,s);a.lineTo(1*b,0);a.moveTo(0,0);a.lineTo(1*b,1*c);b=a.s;y.v(a);return b},AsteriskLine:function(a,b,c){a=y.u();var d=0.2/Math.SQRT2;M(a,d*b,(1-d)*c,s);a.lineTo((1-d)*b,d*c);a.moveTo(d*b,d*c);a.lineTo((1-d)*b,(1-d)*c);a.moveTo(0*b,0.5*c);a.lineTo(1*b,0.5*c);a.moveTo(0.5*
b,0*c);a.lineTo(0.5*b,1*c);b=a.s;y.v(a);return b},CircleLine:function(a,b,c){var d=0.5*H.ra;a=y.u();M(a,1*b,0.5*c,s);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);b=a.s;b.G=new J(0.146,0.146);b.H=new J(0.853,0.853);b.fc=Cg;y.v(a);return b},Pie:function(a,b,c){a=y.u();var d=0.5*(4*(Math.SQRT2-1)/3);M(a,(0.5*Math.SQRT2/2+0.5)*b,(0.5-0.5*Math.SQRT2/2)*c,h);N(a,0.7*b,0*c,0.5*b,0*c,0.5*b,0*
c);N(a,(0.5-d+0)*b,0*c,0*b,(0.5-d+0)*c,0*b,0.5*c);N(a,0*b,(0.5+d+0)*c,(0.5-d+0)*b,1*c,0.5*b,1*c);N(a,(0.5+d+0)*b,1*c,1*b,(0.5+d+0)*c,1*b,0.5*c);a.lineTo(0.5*b,0.5*c);Qc(a);b=a.s;y.v(a);return b},PiePiece:function(a,b,c){var d=0.5*(H.ra/Math.SQRT2),e=Math.SQRT2/2,g=1-Math.SQRT2/2;a=y.u();M(a,b,c,h);N(a,b,(1-d)*c,(e+d)*b,(g+d)*c,e*b,g*c);a.lineTo(0,c);Qc(a);b=a.s;y.v(a);return b},StopSign:function(a,b,c){a=1/(Math.SQRT2+2);var d=y.u();M(d,a*b,0,h);d.lineTo((1-a)*b,0);d.lineTo(1*b,a*c);d.lineTo(1*b,
(1-a)*c);d.lineTo((1-a)*b,1*c);d.lineTo(a*b,1*c);d.lineTo(0,(1-a)*c);d.lineTo(0,a*c);Qc(d);b=d.s;b.G=new J(a/2,a/2);b.H=new J(1-a/2,1-a/2);y.v(d);return b},LogicImplies:function(a,b,c){var d=a?a.jc:0;0===d&&(d=0.2);a=y.u();M(a,(1-d)*b,0*c,s);a.lineTo(1*b,0.5*c);a.lineTo((1-d)*b,c);a.moveTo(0,0.5*c);a.lineTo(b,0.5*c);b=a.s;b.G=Mb;b.H=new J(0.8,0.5);y.v(a);return b},LogicIff:function(a,b,c){var d=a?a.jc:0;0===d&&(d=0.2);a=y.u();M(a,(1-d)*b,0*c,s);a.lineTo(1*b,0.5*c);a.lineTo((1-d)*b,c);a.moveTo(0,0.5*
c);a.lineTo(b,0.5*c);a.moveTo(d*b,0);a.lineTo(0,0.5*c);a.lineTo(d*b,c);b=a.s;b.G=new J(0.2,0);b.H=new J(0.8,0.5);y.v(a);return b},LogicNot:function(a,b,c){a=y.u();M(a,0,0,s);a.lineTo(1*b,0);a.lineTo(1*b,1*c);b=a.s;y.v(a);return b},LogicAnd:function(a,b,c){a=y.u();M(a,0,1*c,s);a.lineTo(0.5*b,0);a.lineTo(1*b,1*c);b=a.s;b.G=new J(0.25,0.5);b.H=new J(0.75,1);y.v(a);return b},LogicOr:function(a,b,c){a=y.u();M(a,0,0,s);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0);b=a.s;b.G=new J(0.219,0);b.H=new J(0.78,0.409);y.v(a);
return b},LogicXor:function(a,b,c){a=y.u();M(a,0.5*b,0,s);a.lineTo(0.5*b,1*c);a.moveTo(0,0.5*c);a.lineTo(1*b,0.5*c);var d=0.5*H.ra;N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);b=a.s;b.fc=Cg;y.v(a);return b},LogicTruth:function(a,b,c){a=y.u();M(a,0,0,s);a.lineTo(1*b,0);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);b=a.s;y.v(a);return b},LogicFalsity:function(a,b,c){a=y.u();M(a,0,1*c,s);a.lineTo(1*
b,1*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0);b=a.s;y.v(a);return b},LogicThereExists:function(a,b,c){a=y.u();M(a,0,0,s);a.lineTo(1*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0,0.5*c);a.moveTo(1*b,0.5*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);b=a.s;y.v(a);return b},LogicForAll:function(a,b,c){a=y.u();M(a,0,0,s);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0);a.moveTo(0.25*b,0.5*c);a.lineTo(0.75*b,0.5*c);b=a.s;b.G=new J(0.25,0);b.H=new J(0.75,0.5);y.v(a);return b},LogicIsDefinedAs:function(a,b,c){a=y.u();M(a,0,0,s);a.lineTo(b,
0);a.moveTo(0,0.5*c);a.lineTo(b,0.5*c);a.moveTo(0,c);a.lineTo(b,c);b=a.s;b.G=new J(0.01,0.01);b.H=new J(0.99,0.49);y.v(a);return b},LogicIntersect:function(a,b,c){var d=0.5*H.ra;a=y.u();M(a,0,1*c,s);a.lineTo(0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);a.lineTo(1*b,1*c);b=a.s;b.G=new J(0,0.5);b.H=Zb;y.v(a);return b},LogicUnion:function(a,b,c){var d=0.5*H.ra;a=y.u();M(a,1*b,0,s);a.lineTo(1*b,0.5*c);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*
c,0,(0.5+d)*c,0,0.5*c);a.lineTo(0,0);b=a.s;b.G=Mb;b.H=new J(1,0.5);y.v(a);return b},Arrow:function(a,b,c){var d=a?a.jc:0,e=a?a.$r:0;0===d&&(d=0.3);0===e&&(e=0.3);a=y.u();M(a,0,(0.5-e/2)*c,h);a.lineTo((1-d)*b,(0.5-e/2)*c);a.lineTo((1-d)*b,0);a.lineTo(1*b,0.5*c);a.lineTo((1-d)*b,1*c);a.lineTo((1-d)*b,(0.5+e/2)*c);a.lineTo(0,(0.5+e/2)*c);Qc(a);b=a.s;b.G=new J(0,0.5-e/2);d=H.zk(0,0.5+e/2,1,0.5+e/2,1-d,1,1,0.5,y.M());b.H=new J(d.x,d.y);y.B(d);y.v(a);return b},ISOProcess:"Chevron",Chevron:function(a,b,
c){a=y.u();M(a,0,0,h);a.lineTo(0.5*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,1*c);a.lineTo(0.5*b,0.5*c);Qc(a);b=a.s;y.v(a);return b},DoubleArrow:function(a,b,c){a=y.u();M(a,0,0,h);a.lineTo(0.3*b,0.214*c);a.lineTo(0.3*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.3*b,1*c);a.lineTo(0.3*b,0.786*c);a.lineTo(0,1*c);Qc(a);M(a,0.3*b,0.214*c,s);a.lineTo(0.3*b,0.786*c);Sc(a);b=a.s;y.v(a);return b},DoubleEndArrow:function(a,b,c){a=y.u();M(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0.3*
b,0.7*c);a.lineTo(0.3*b,1*c);a.lineTo(0,0.5*c);a.lineTo(0.3*b,0);a.lineTo(0.3*b,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);Qc(a);b=a.s;c=H.zk(0,0.5,0.3,0,0,0.3,0.3,0.3,y.M());b.G=new J(c.x,c.y);c=H.zk(0.7,1,1,0.5,0.7,0.7,1,0.7,c);b.H=new J(c.x,c.y);y.B(c);y.v(a);return b},IBeamArrow:function(a,b,c){a=y.u();M(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0.2*b,0.7*c);a.lineTo(0.2*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.2*b,0);a.lineTo(0.2*b,0.3*c);a.lineTo(0.7*b,0.3*
c);a.lineTo(0.7*b,0);Qc(a);b=a.s;b.G=new J(0,0.3);c=H.zk(0.7,1,1,0.5,0.7,0.7,1,0.7,y.M());b.H=new J(c.x,c.y);y.B(c);y.v(a);return b},Pointer:function(a,b,c){a=y.u();M(a,1*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0.2*b,0.5*c);a.lineTo(0,0);Qc(a);b=a.s;b.G=new J(0.2,0.35);c=H.zk(0.2,0.65,1,0.65,0,1,1,0.5,y.M());b.H=new J(c.x,c.y);y.B(c);y.v(a);return b},RoundedPointer:function(a,b,c){a=y.u();M(a,1*b,0.5*c,h);a.lineTo(0,1*c);N(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);Qc(a);b=a.s;b.G=new J(0.4,0.35);c=H.zk(0.2,0.65,
1,0.65,0,1,1,0.5,y.M());b.H=new J(c.x,c.y);y.B(c);y.v(a);return b},SplitEndArrow:function(a,b,c){a=y.u();M(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0,0.7*c);a.lineTo(0.2*b,0.5*c);a.lineTo(0,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);Qc(a);b=a.s;b.G=new J(0.2,0.3);c=H.zk(0.7,1,1,0.5,0.7,0.7,1,0.7,y.M());b.H=new J(c.x,c.y);y.B(c);y.v(a);return b},MessageToUser:"SquareArrow",SquareArrow:function(a,b,c){a=y.u();M(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0,1*c);a.lineTo(0,
0);a.lineTo(0.7*b,0);Qc(a);b=a.s;b.G=Mb;b.H=new J(0.7,1);y.v(a);return b},Cone1:function(a,b,c){var d=H.ra;a=0.5*d;var e=0.1*d,d=y.u();M(d,0,0.9*c,h);d.lineTo(0.5*b,0);d.lineTo(1*b,0.9*c);N(d,1*b,(0.9+e)*c,(0.5+a)*b,1*c,0.5*b,1*c);N(d,(0.5-a)*b,1*c,0,(0.9+e)*c,0,0.9*c);Qc(d);b=d.s;b.G=new J(0.25,0.5);b.H=new J(0.75,0.97);y.v(d);return b},Cone2:function(a,b,c){a=y.u();M(a,0,0.9*c,h);N(a,(1-0.85/0.9)*b,1*c,0.85/0.9*b,1*c,1*b,0.9*c);a.lineTo(0.5*b,0);a.lineTo(0,0.9*c);Qc(a);M(a,0,0.9*c,s);N(a,(1-0.85/
0.9)*b,0.8*c,0.85/0.9*b,0.8*c,1*b,0.9*c);Sc(a);b=a.s;b.G=new J(0.25,0.5);b.H=new J(0.75,0.82);y.v(a);return b},Cube1:function(a,b,c){a=y.u();M(a,0.5*b,1*c,h);a.lineTo(1*b,0.85*c);a.lineTo(1*b,0.15*c);a.lineTo(0.5*b,0*c);a.lineTo(0*b,0.15*c);a.lineTo(0*b,0.85*c);Qc(a);M(a,0.5*b,1*c,s);a.lineTo(0.5*b,0.3*c);a.lineTo(0,0.15*c);a.moveTo(0.5*b,0.3*c);a.lineTo(1*b,0.15*c);Sc(a);b=a.s;b.G=new J(0,0.3);b.H=new J(0.5,0.85);y.v(a);return b},Cube2:function(a,b,c){a=y.u();M(a,0,0.3*c,h);a.lineTo(0*b,1*c);a.lineTo(0.7*
b,c);a.lineTo(1*b,0.7*c);a.lineTo(1*b,0*c);a.lineTo(0.3*b,0*c);Qc(a);M(a,0,0.3*c,s);a.lineTo(0.7*b,0.3*c);a.lineTo(1*b,0*c);a.moveTo(0.7*b,0.3*c);a.lineTo(0.7*b,1*c);Sc(a);b=a.s;b.G=new J(0,0.3);b.H=new J(0.7,1);y.v(a);return b},MagneticData:"Cylinder1",Cylinder1:function(a,b,c){var d=H.ra;a=0.5*d;var e=0.1*d,d=y.u();M(d,0,0.1*c,h);N(d,0,(0.1-e)*c,(0.5-a)*b,0,0.5*b,0);N(d,(0.5+a)*b,0,1*b,(0.1-e)*c,1*b,0.1*c);d.lineTo(b,0.9*c);N(d,1*b,(0.9+e)*c,(0.5+a)*b,1*c,0.5*b,1*c);N(d,(0.5-a)*b,1*c,0,(0.9+e)*
c,0,0.9*c);d.lineTo(0,0.1*c);M(d,0,0.1*c,s);N(d,0,(0.1+e)*c,(0.5-a)*b,0.2*c,0.5*b,0.2*c);N(d,(0.5+a)*b,0.2*c,1*b,(0.1+e)*c,1*b,0.1*c);Sc(d);b=d.s;b.G=new J(0,0.2);b.H=new J(1,0.9);y.v(d);return b},Cylinder2:function(a,b,c){var d=H.ra;a=0.5*d;var e=0.1*d,d=y.u();M(d,0,0.9*c,h);d.lineTo(0,0.1*c);N(d,0,(0.1-e)*c,(0.5-a)*b,0,0.5*b,0);N(d,(0.5+a)*b,0,1*b,(0.1-e)*c,1*b,0.1*c);d.lineTo(1*b,0.9*c);N(d,1*b,(0.9+e)*c,(0.5+a)*b,1*c,0.5*b,1*c);N(d,(0.5-a)*b,1*c,0,(0.9+e)*c,0,0.9*c);M(d,0,0.9*c,s);N(d,0,(0.9-
e)*c,(0.5-a)*b,0.8*c,0.5*b,0.8*c);N(d,(0.5+a)*b,0.8*c,1*b,(0.9-e)*c,1*b,0.9*c);Sc(d);b=d.s;b.G=new J(0,0.1);b.H=new J(1,0.8);y.v(d);return b},Cylinder3:function(a,b,c){var d=H.ra;a=0.1*d;var e=0.5*d,d=y.u();M(d,0.1*b,0,h);d.lineTo(0.9*b,0);N(d,(0.9+a)*b,0,1*b,(0.5-e)*c,1*b,0.5*c);N(d,1*b,(0.5+e)*c,(0.9+a)*b,1*c,0.9*b,1*c);d.lineTo(0.1*b,1*c);N(d,(0.1-a)*b,1*c,0,(0.5+e)*c,0,0.5*c);N(d,0,(0.5-e)*c,(0.1-a)*b,0,0.1*b,0);M(d,0.1*b,0,s);N(d,(0.1+a)*b,0,0.2*b,(0.5-e)*c,0.2*b,0.5*c);N(d,0.2*b,(0.5+e)*c,(0.1+
a)*b,1*c,0.1*b,1*c);Sc(d);b=d.s;b.G=new J(0.2,0);b.H=new J(0.9,1);y.v(d);return b},DirectData:"Cylinder4",Cylinder4:function(a,b,c){var d=H.ra;a=0.1*d;var e=0.5*d,d=y.u();M(d,0.9*b,0,h);N(d,(0.9+a)*b,0,1*b,(0.5-e)*c,1*b,0.5*c);N(d,1*b,(0.5+e)*c,(0.9+a)*b,1*c,0.9*b,1*c);d.lineTo(0.1*b,1*c);N(d,(0.1-a)*b,1*c,0,(0.5+e)*c,0,0.5*c);N(d,0,(0.5-e)*c,(0.1-a)*b,0,0.1*b,0);d.lineTo(0.9*b,0);M(d,0.9*b,0,s);N(d,(0.9-a)*b,0,0.8*b,(0.5-e)*c,0.8*b,0.5*c);N(d,0.8*b,(0.5+e)*c,(0.9-a)*b,1*c,0.9*b,1*c);Sc(d);b=d.s;
b.G=new J(0.1,0);b.H=new J(0.8,1);y.v(d);return b},Prism1:function(a,b,c){a=y.u();M(a,0.25*b,0.25*c,h);a.lineTo(0.75*b,0);a.lineTo(b,0.5*c);a.lineTo(0.5*b,c);a.lineTo(0,c);Qc(a);M(a,0.25*b,0.25*c,s);a.lineTo(0.5*b,c);Sc(a);b=a.s;b.G=new J(0.408,0.172);b.H=new J(0.833,0.662);y.v(a);return b},Prism2:function(a,b,c){a=y.u();M(a,0,0.25*c,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(0.75*b,0.75*c);a.lineTo(0,1*c);Qc(a);M(a,0,c,s);a.lineTo(0.25*b,0.5*c);a.lineTo(b,0.25*c);a.moveTo(0,0.25*c);a.lineTo(0.25*
b,0.5*c);Sc(a);b=a.s;b.G=new J(0.25,0.5);b.H=new J(0.75,0.75);y.v(a);return b},Pyramid1:function(a,b,c){a=y.u();M(a,0.5*b,0,h);a.lineTo(b,0.75*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.75*c);Qc(a);M(a,0.5*b,0,s);a.lineTo(0.5*b,1*c);Sc(a);b=a.s;b.G=new J(0.25,0.367);b.H=new J(0.75,0.875);y.v(a);return b},Pyramid2:function(a,b,c){a=y.u();M(a,0.5*b,0,h);a.lineTo(b,0.85*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.85*c);Qc(a);M(a,0.5*b,0,s);a.lineTo(0.5*b,0.7*c);a.lineTo(0,0.85*c);a.moveTo(0.5*b,0.7*c);a.lineTo(1*b,
0.85*c);Sc(a);b=a.s;b.G=new J(0.25,0.367);b.H=new J(0.75,0.875);y.v(a);return b},Actor:function(a,b,c){var d=H.ra,e=0.2*d,g=0.1*d,k=0.5,l=0.1;a=y.u();M(a,k*b,(l+0.1)*c,h);N(a,(k-e)*b,(l+0.1)*c,(k-0.2)*b,(l+g)*c,(k-0.2)*b,l*c);N(a,(k-0.2)*b,(l-g)*c,(k-e)*b,(l-0.1)*c,k*b,(l-0.1)*c);N(a,(k+e)*b,(l-0.1)*c,(k+0.2)*b,(l-g)*c,(k+0.2)*b,l*c);N(a,(k+0.2)*b,(l+g)*c,(k+e)*b,(l+0.1)*c,k*b,(l+0.1)*c);e=0.05;g=d*e;M(a,0.5*b,0.2*c,h);a.lineTo(0.95*b,0.2*c);k=0.95;l=0.25;N(a,(k+g)*b,(l-e)*c,(k+e)*b,(l-g)*c,(k+e)*
b,l*c);a.lineTo(1*b,0.6*c);a.lineTo(0.85*b,0.6*c);a.lineTo(0.85*b,0.35*c);e=0.025;g=d*e;k=0.825;l=0.35;N(a,(k+e)*b,(l-g)*c,(k+g)*b,(l-e)*c,k*b,(l-e)*c);N(a,(k-g)*b,(l-e)*c,(k-e)*b,(l-g)*c,(k-e)*b,l*c);a.lineTo(0.8*b,1*c);a.lineTo(0.55*b,1*c);a.lineTo(0.55*b,0.7*c);e=0.05;g=d*e;k=0.5;l=0.7;N(a,(k+e)*b,(l-g)*c,(k+g)*b,(l-e)*c,k*b,(l-e)*c);N(a,(k-g)*b,(l-e)*c,(k-e)*b,(l-g)*c,(k-e)*b,l*c);a.lineTo(0.45*b,1*c);a.lineTo(0.2*b,1*c);a.lineTo(0.2*b,0.35*c);e=0.025;g=d*e;k=0.175;l=0.35;N(a,(k+e)*b,(l-g)*c,
(k+g)*b,(l-e)*c,k*b,(l-e)*c);N(a,(k-g)*b,(l-e)*c,(k-e)*b,(l-g)*c,(k-e)*b,l*c);a.lineTo(0.15*b,0.6*c);a.lineTo(0*b,0.6*c);a.lineTo(0*b,0.25*c);e=0.05;g=d*e;k=0.05;l=0.25;N(a,(k-e)*b,(l-g)*c,(k-g)*b,(l-e)*c,k*b,(l-e)*c);a.lineTo(0.5*b,0.2*c);b=a.s;b.G=new J(0.2,0.2);b.H=new J(0.8,0.65);y.v(a);return b},Card:function(a,b,c){a=y.u();M(a,1*b,0*c,h);a.lineTo(1*b,1*c);a.lineTo(0*b,1*c);a.lineTo(0*b,0.2*c);a.lineTo(0.2*b,0*c);Qc(a);b=a.s;b.G=new J(0,0.2);b.H=Zb;y.v(a);return b},Collate:function(a,b,c){a=
y.u();M(a,0.5*b,0.5*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(0.5*b,0.5*c);M(a,0.5*b,0.5*c,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0.5*b,0.5*c);b=a.s;b.G=new J(0.25,0);b.H=new J(0.75,0.25);y.v(a);return b},CreateRequest:function(a,b,c){a=a?a.jc:0;0===a&&(a=0.1);var d=y.u();M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Qc(d);M(d,0,a*c,s);d.lineTo(1*b,a*c);d.moveTo(0,(1-a)*c);d.lineTo(1*b,(1-a)*c);Sc(d);b=d.s;b.G=new J(0,a);b.H=new J(1,1-a);y.v(d);return b},Database:function(a,
b,c){a=y.u();var d=H.ra,e=0.5*d,d=0.1*d;M(a,1*b,0.1*c,h);a.lineTo(1*b,0.9*c);N(a,1*b,(0.9+d)*c,(0.5+e)*b,1*c,0.5*b,1*c);N(a,(0.5-e)*b,1*c,0,(0.9+d)*c,0,0.9*c);a.lineTo(0,0.1*c);N(a,0,(0.1-d)*c,(0.5-e)*b,0,0.5*b,0);N(a,(0.5+e)*b,0,1*b,(0.1-d)*c,1*b,0.1*c);M(a,1*b,0.1*c,s);N(a,1*b,(0.1+d)*c,(0.5+e)*b,0.2*c,0.5*b,0.2*c);N(a,(0.5-e)*b,0.2*c,0,(0.1+d)*c,0,0.1*c);a.moveTo(1*b,0.2*c);N(a,1*b,(0.2+d)*c,(0.5+e)*b,0.3*c,0.5*b,0.3*c);N(a,(0.5-e)*b,0.3*c,0,(0.2+d)*c,0,0.2*c);a.moveTo(1*b,0.3*c);N(a,1*b,(0.3+
d)*c,(0.5+e)*b,0.4*c,0.5*b,0.4*c);N(a,(0.5-e)*b,0.4*c,0,(0.3+d)*c,0,0.3*c);Sc(a);b=a.s;b.G=new J(0,0.4);b.H=new J(1,0.9);y.v(a);return b},StoredData:"DataStorage",DataStorage:function(a,b,c){a=y.u();M(a,0,0,h);a.lineTo(0.75*b,0);N(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0,1*c);N(a,0.25*b,0.9*c,0.25*b,0.1*c,0,0);Qc(a);b=a.s;b.G=new J(0.226,0);b.H=new J(0.81,1);y.v(a);return b},DiskStorage:function(a,b,c){a=y.u();var d=H.ra,e=0.5*d,d=0.1*d;M(a,1*b,0.1*c,h);a.lineTo(1*b,0.9*c);N(a,1*b,(0.9+d)*c,(0.5+e)*
b,1*c,0.5*b,1*c);N(a,(0.5-e)*b,1*c,0,(0.9+d)*c,0,0.9*c);a.lineTo(0,0.1*c);N(a,0,(0.1-d)*c,(0.5-e)*b,0,0.5*b,0);N(a,(0.5+e)*b,0,1*b,(0.1-d)*c,1*b,0.1*c);M(a,1*b,0.1*c,s);N(a,1*b,(0.1+d)*c,(0.5+e)*b,0.2*c,0.5*b,0.2*c);N(a,(0.5-e)*b,0.2*c,0,(0.1+d)*c,0,0.1*c);a.moveTo(1*b,0.2*c);N(a,1*b,(0.2+d)*c,(0.5+e)*b,0.3*c,0.5*b,0.3*c);N(a,(0.5-e)*b,0.3*c,0,(0.2+d)*c,0,0.2*c);Sc(a);b=a.s;b.G=new J(0,0.3);b.H=new J(1,0.9);y.v(a);return b},Display:function(a,b,c){a=y.u();M(a,0.25*b,0,h);a.lineTo(0.75*b,0);N(a,1*
b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);a.lineTo(0,0.5*c);Qc(a);b=a.s;b.G=new J(0.25,0);b.H=new J(0.75,1);y.v(a);return b},DividedEvent:function(a,b,c){a=a?a.jc:0;0===a?a=0.2:0.15>a&&(a=0.15);var d=y.u(),e=0.2*H.ra;M(d,0,0.2*c,h);N(d,0,(0.2-e)*c,(0.2-e)*b,0,0.2*b,0);d.lineTo(0.8*b,0);N(d,(0.8+e)*b,0,1*b,(0.2-e)*c,1*b,0.2*c);d.lineTo(1*b,0.8*c);N(d,1*b,(0.8+e)*c,(0.8+e)*b,1*c,0.8*b,1*c);d.lineTo(0.2*b,1*c);N(d,(0.2-e)*b,1*c,0,(0.8+e)*c,0,0.8*c);d.lineTo(0,0.2*c);M(d,0,a*c,s);d.lineTo(1*b,a*c);
Sc(d);b=d.s;b.G=new J(0,a);b.H=new J(1,1-a);y.v(d);return b},DividedProcess:function(a,b,c){a=a?a.jc:0;0.1>a&&(a=0.1);var d=y.u();M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Qc(d);M(d,0,a*c,s);d.lineTo(1*b,a*c);Sc(d);b=d.s;b.G=new J(0,a);b.H=Zb;y.v(d);return b},Document:function(a,b,c){c/=0.8;a=y.u();M(a,0,0.7*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,0.7*c);N(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);Qc(a);b=a.s;b.G=Mb;b.H=new J(1,0.6);y.v(a);return b},ExternalOrganization:function(a,
b,c){a=a?a.jc:0;0.2>a&&(a=0.2);var d=y.u();M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Qc(d);M(d,a*b,0,s);d.lineTo(0,a*c);d.moveTo(1*b,a*c);d.lineTo((1-a)*b,0);d.moveTo(0,(1-a)*c);d.lineTo(a*b,1*c);d.moveTo((1-a)*b,1*c);d.lineTo(1*b,(1-a)*c);Sc(d);b=d.s;b.G=new J(a/2,a/2);b.H=new J(1-a/2,1-a/2);y.v(d);return b},ExternalProcess:function(a,b,c){a=y.u();M(a,0.5*b,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.5*c);Qc(a);M(a,0.1*b,0.4*c,s);a.lineTo(0.1*b,0.6*c);a.moveTo(0.9*
b,0.6*c);a.lineTo(0.9*b,0.4*c);a.moveTo(0.6*b,0.1*c);a.lineTo(0.4*b,0.1*c);a.moveTo(0.4*b,0.9*c);a.lineTo(0.6*b,0.9*c);Sc(a);b=a.s;b.G=new J(0.25,0.25);b.H=new J(0.75,0.75);y.v(a);return b},File:function(a,b,c){a=y.u();M(a,0,0,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);Qc(a);M(a,0.75*b,0,s);a.lineTo(0.75*b,0.25*c);a.lineTo(1*b,0.25*c);Sc(a);b=a.s;b.G=new J(0,0.25);b.H=Zb;y.v(a);return b},Interrupt:function(a,b,c){a=y.u();M(a,1*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0,
0);a.lineTo(1*b,0.5*c);M(a,1*b,0.5*c,s);a.lineTo(1*b,1*c);M(a,1*b,0.5*c,s);a.lineTo(1*b,0);b=a.s;b.G=new J(0,0.25);b.H=new J(0.5,0.75);y.v(a);return b},InternalStorage:function(a,b,c){var d=a?a.jc:0;a=a?a.$r:0;0===d&&(d=0.1);0===a&&(a=0.1);var e=y.u();M(e,0,0,h);e.lineTo(1*b,0);e.lineTo(1*b,1*c);e.lineTo(0,1*c);Qc(e);M(e,d*b,0,s);e.lineTo(d*b,1*c);e.moveTo(0,a*c);e.lineTo(1*b,a*c);Sc(e);b=e.s;b.G=new J(d,a);b.H=Zb;y.v(e);return b},Junction:function(a,b,c){a=y.u();var d=1/Math.SQRT2,e=(1-1/Math.SQRT2)/
2,g=0.5*H.ra;M(a,1*b,0.5*c,h);N(a,1*b,(0.5+g)*c,(0.5+g)*b,1*c,0.5*b,1*c);N(a,(0.5-g)*b,1*c,0,(0.5+g)*c,0,0.5*c);N(a,0,(0.5-g)*c,(0.5-g)*b,0,0.5*b,0);N(a,(0.5+g)*b,0,1*b,(0.5-g)*c,1*b,0.5*c);M(a,(e+d)*b,(e+d)*c,s);a.lineTo(e*b,e*c);a.moveTo(e*b,(e+d)*c);a.lineTo((e+d)*b,e*c);Sc(a);b=a.s;b.fc=Cg;y.v(a);return b},LinedDocument:function(a,b,c){c/=0.8;a=y.u();M(a,0,0.7*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,0.7*c);N(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);Qc(a);M(a,0.1*b,0,s);a.lineTo(0.1*b,0.75*c);
Sc(a);b=a.s;b.G=new J(0.1,0);b.H=new J(1,0.6);y.v(a);return b},LoopLimit:function(a,b,c){a=y.u();M(a,0,1*c,h);a.lineTo(0,0.25*c);a.lineTo(0.25*b,0);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(1*b,1*c);Qc(a);b=a.s;b.G=new J(0,0.25);b.H=Zb;y.v(a);return b},SequentialData:"MagneticTape",MagneticTape:function(a,b,c){a=y.u();var d=0.5*H.ra;M(a,0.5*b,1*c,h);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);N(a,1*b,(0.5+d)*c,(0.5+d)*
b,0.9*c,0.6*b,0.9*c);a.lineTo(1*b,0.9*c);a.lineTo(1*b,1*c);a.lineTo(0.5*b,1*c);b=a.s;b.G=new J(0.15,0.15);b.H=new J(0.85,0.8);y.v(a);return b},ManualInput:function(a,b,c){a=y.u();M(a,1*b,0,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.25*c);Qc(a);b=a.s;b.G=new J(0,0.25);b.H=Zb;y.v(a);return b},MessageFromUser:function(a,b,c){a=a?a.jc:0;0===a&&(a=0.7);var d=y.u();M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(a*b,0.5*c);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Qc(d);b=d.s;b.G=Mb;b.H=new J(a,1);y.v(d);return b},
MicroformProcessing:function(a,b,c){a=a?a.jc:0;0===a&&(a=0.25);var d=y.u();M(d,0,0,h);d.lineTo(0.5*b,a*c);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0.5*b,(1-a)*c);d.lineTo(0,1*c);Qc(d);b=d.s;b.G=new J(0,a);b.H=new J(1,1-a);y.v(d);return b},MicroformRecording:function(a,b,c){a=y.u();M(a,0,0,h);a.lineTo(0.75*b,0.25*c);a.lineTo(1*b,0.15*c);a.lineTo(1*b,0.85*c);a.lineTo(0.75*b,0.75*c);a.lineTo(0,1*c);Qc(a);b=a.s;b.G=new J(0,0.25);b.H=new J(1,0.75);y.v(a);return b},MultiDocument:function(a,b,c){c/=0.8;
a=y.u();M(a,b,0,h);a.lineTo(b,0.5*c);N(a,0.96*b,0.47*c,0.93*b,0.45*c,0.9*b,0.44*c);a.lineTo(0.9*b,0.6*c);N(a,0.86*b,0.57*c,0.83*b,0.55*c,0.8*b,0.54*c);a.lineTo(0.8*b,0.7*c);N(a,0.4*b,0.4*c,0.4*b,1*c,0,0.7*c);a.lineTo(0,0.2*c);a.lineTo(0.1*b,0.2*c);a.lineTo(0.1*b,0.1*c);a.lineTo(0.2*b,0.1*c);a.lineTo(0.2*b,0);Qc(a);M(a,0.1*b,0.2*c,s);a.lineTo(0.8*b,0.2*c);a.lineTo(0.8*b,0.54*c);a.moveTo(0.2*b,0.1*c);a.lineTo(0.9*b,0.1*c);a.lineTo(0.9*b,0.44*c);Sc(a);b=a.s;b.G=new J(0,0.25);b.H=new J(0.8,0.77);y.v(a);
return b},MultiProcess:function(a,b,c){a=y.u();M(a,0.1*b,0.1*c,h);a.lineTo(0.2*b,0.1*c);a.lineTo(0.2*b,0);a.lineTo(1*b,0);a.lineTo(1*b,0.8*c);a.lineTo(0.9*b,0.8*c);a.lineTo(0.9*b,0.9*c);a.lineTo(0.8*b,0.9*c);a.lineTo(0.8*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.2*c);a.lineTo(0.1*b,0.2*c);Qc(a);M(a,0.2*b,0.1*c,s);a.lineTo(0.9*b,0.1*c);a.lineTo(0.9*b,0.8*c);a.moveTo(0.1*b,0.2*c);a.lineTo(0.8*b,0.2*c);a.lineTo(0.8*b,0.9*c);Sc(a);b=a.s;b.G=new J(0,0.2);b.H=new J(0.8,1);y.v(a);return b},OfflineStorage:function(a,
b,c){a=a?a.jc:0;0===a&&(a=0.1);var d=1-a,e=y.u();M(e,0,0,h);e.lineTo(1*b,0);e.lineTo(0.5*b,1*c);Qc(e);M(e,0.5*a*b,a*c,s);e.lineTo((1-0.5*a)*b,a*c);Sc(e);b=e.s;b.G=new J(d/4+0.5*a,a);b.H=new J(3*d/4+0.5*a,a+0.5*d);y.v(e);return b},OffPageConnector:function(a,b,c){a=y.u();M(a,0,0,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.75*b,1*c);a.lineTo(0,1*c);Qc(a);b=a.s;b.G=Mb;b.H=new J(0.75,1);y.v(a);return b},Or:function(a,b,c){a=y.u();var d=0.5*H.ra;M(a,1*b,0.5*c,h);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*
c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);M(a,1*b,0.5*c,s);a.lineTo(0,0.5*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0);Sc(a);b=a.s;b.fc=Cg;y.v(a);return b},PaperTape:function(a,b,c){c/=0.8;a=y.u();M(a,0,0.7*c,h);a.lineTo(0,0.3*c);N(a,0.5*b,0.6*c,0.5*b,0,1*b,0.3);a.lineTo(1*b,0.7*c);N(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);Qc(a);b=a.s;b.G=new J(0,0.49);b.H=new J(1,0.75);y.v(a);return b},PrimitiveFromCall:function(a,b,c){var d=
a?a.jc:0;a=a?a.$r:0;0===d&&(d=0.1);0===a&&(a=0.3);var e=y.u();M(e,0,0,h);e.lineTo(1*b,0);e.lineTo((1-a)*b,0.5*c);e.lineTo(1*b,1*c);e.lineTo(0,1*c);Qc(e);b=e.s;b.G=new J(d,0);b.H=new J(1-a,1);y.v(e);return b},PrimitiveToCall:function(a,b,c){var d=a?a.jc:0;a=a?a.$r:0;0===d&&(d=0.1);0===a&&(a=0.3);var e=y.u();M(e,0,0,h);e.lineTo((1-a)*b,0);e.lineTo(1*b,0.5*c);e.lineTo((1-a)*b,1*c);e.lineTo(0,1*c);Qc(e);b=e.s;b.G=new J(d,0);b.H=new J(1-a,1);y.v(e);return b},Subroutine:"Procedure",Procedure:function(a,
b,c){a=a?a.jc:0;0===a&&(a=0.1);var d=y.u();M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Qc(d);M(d,(1-a)*b,0,s);d.lineTo((1-a)*b,1*c);d.moveTo(a*b,0);d.lineTo(a*b,1*c);Sc(d);b=d.s;b.G=new J(a,0);b.H=new J(1-a,1);y.v(d);return b},Process:function(a,b,c){a=a?a.jc:0;0===a&&(a=0.1);var d=y.u();M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Qc(d);M(d,a*b,0,s);d.lineTo(a*b,1*c);Sc(d);b=d.s;b.G=new J(a,0);b.H=Zb;y.v(d);return b},Sort:function(a,b,c){a=y.u();M(a,0.5*b,0,h);a.lineTo(1*
b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.5*c);Qc(a);M(a,0,0.5*c,s);a.lineTo(1*b,0.5*c);Sc(a);b=a.s;b.G=new J(0.25,0.25);b.H=new J(0.75,0.5);y.v(a);return b},Start:function(a,b,c){a=y.u();M(a,0.25*b,0,h);a.lineTo(0.75*b,0);N(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);N(a,0,1*c,0,0,0.25*b,0);M(a,0.25*b,0,s);a.lineTo(0.25*b,1*c);a.moveTo(0.75*b,0);a.lineTo(0.75*b,1*c);Sc(a);b=a.s;b.G=new J(0.25,0);b.H=new J(0.75,1);y.v(a);return b},Terminator:function(a,b,c){a=y.u();M(a,0.25*b,0,h);a.lineTo(0.75*
b,0);N(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);N(a,0,1*c,0,0,0.25*b,0);b=a.s;b.G=new J(0.23,0);b.H=new J(0.77,1);y.v(a);return b},TransmittalTape:function(a,b,c){a=a?a.jc:0;0===a&&(a=0.1);var d=y.u();M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0.75*b,(1-a)*c);d.lineTo(0,(1-a)*c);Qc(d);b=d.s;b.G=Mb;b.H=new J(1,1-a);y.v(d);return b},AndGate:function(a,b,c){a=y.u();var d=0.5*H.ra;M(a,0,0,h);a.lineTo(0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,
0.5*b,1*c);a.lineTo(0,1*c);Qc(a);b=a.s;b.G=Mb;b.H=new J(0.55,1);y.v(a);return b},Buffer:function(a,b,c){a=y.u();M(a,0,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0,1*c);Qc(a);b=a.s;b.G=new J(0,0.25);b.H=new J(0.5,0.75);y.v(a);return b},Clock:function(a,b,c){a=y.u();var d=0.5*H.ra;M(a,1*b,0.5*c,h);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);M(a,1*b,0.5*c,s);a.lineTo(1*b,0.5*c);M(a,0.8*b,0.75*c,
s);a.lineTo(0.8*b,0.25*c);a.lineTo(0.6*b,0.25*c);a.lineTo(0.6*b,0.75*c);a.lineTo(0.4*b,0.75*c);a.lineTo(0.4*b,0.25*c);a.lineTo(0.2*b,0.25*c);a.lineTo(0.2*b,0.75*c);Sc(a);b=a.s;b.fc=Cg;y.v(a);return b},Ground:function(a,b,c){a=y.u();M(a,0.5*b,0,s);a.lineTo(0.5*b,0.4*c);a.moveTo(0.2*b,0.6*c);a.lineTo(0.8*b,0.6*c);a.moveTo(0.3*b,0.8*c);a.lineTo(0.7*b,0.8*c);a.moveTo(0.4*b,1*c);a.lineTo(0.6*b,1*c);b=a.s;y.v(a);return b},Inverter:function(a,b,c){a=y.u();var d=0.1*H.ra;M(a,0.8*b,0.5*c,h);a.lineTo(0,1*c);
a.lineTo(0,0);a.lineTo(0.8*b,0.5*c);M(a,1*b,0.5*c,h);N(a,1*b,(0.5+d)*c,(0.9+d)*b,0.6*c,0.9*b,0.6*c);N(a,(0.9-d)*b,0.6*c,0.8*b,(0.5+d)*c,0.8*b,0.5*c);N(a,0.8*b,(0.5-d)*c,(0.9-d)*b,0.4*c,0.9*b,0.4*c);N(a,(0.9+d)*b,0.4*c,1*b,(0.5-d)*c,1*b,0.5*c);b=a.s;b.G=new J(0,0.25);b.H=new J(0.4,0.75);y.v(a);return b},NandGate:function(a,b,c){a=y.u();var d=H.ra,e=0.5*d,g=0.4*d,d=0.1*d;M(a,0.8*b,0.5*c,h);N(a,0.8*b,(0.5+g)*c,(0.4+e)*b,1*c,0.4*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.4*b,0);N(a,(0.4+e)*b,0,0.8*
b,(0.5-g)*c,0.8*b,0.5*c);M(a,1*b,0.5*c,h);N(a,1*b,(0.5+d)*c,(0.9+d)*b,0.6*c,0.9*b,0.6*c);N(a,(0.9-d)*b,0.6*c,0.8*b,(0.5+d)*c,0.8*b,0.5*c);N(a,0.8*b,(0.5-d)*c,(0.9-d)*b,0.4*c,0.9*b,0.4*c);N(a,(0.9+d)*b,0.4*c,1*b,(0.5-d)*c,1*b,0.5*c);b=a.s;b.G=new J(0,0.05);b.H=new J(0.55,0.95);y.v(a);return b},NorGate:function(a,b,c){a=y.u();var d=H.ra,e=0.5,g=d*e,k=0,l=0.5;M(a,0.8*b,0.5*c,h);N(a,0.7*b,(l+g)*c,(k+g)*b,(l+e)*c,0,1*c);N(a,0.25*b,0.75*c,0.25*b,0.25*c,0,0);N(a,(k+g)*b,(l-e)*c,0.7*b,(l-g)*c,0.8*b,0.5*c);
e=0.1;g=0.1*d;k=0.9;l=0.5;M(a,(k-e)*b,l*c,h);N(a,(k-e)*b,(l-g)*c,(k-g)*b,(l-e)*c,k*b,(l-e)*c);N(a,(k+g)*b,(l-e)*c,(k+e)*b,(l-g)*c,(k+e)*b,l*c);N(a,(k+e)*b,(l+g)*c,(k+g)*b,(l+e)*c,k*b,(l+e)*c);N(a,(k-g)*b,(l+e)*c,(k-e)*b,(l+g)*c,(k-e)*b,l*c);b=a.s;b.G=new J(0.2,0.25);b.H=new J(0.6,0.75);y.v(a);return b},OrGate:function(a,b,c){a=y.u();var d=0.5*H.ra;M(a,0,0,h);N(a,(0+d+d)*b,0*c,0.8*b,(0.5-d)*c,1*b,0.5*c);N(a,0.8*b,(0.5+d)*c,(0+d+d)*b,1*c,0,1*c);N(a,0.25*b,0.75*c,0.25*b,0.25*c,0,0);Qc(a);b=a.s;b.G=new J(0.2,
0.25);b.H=new J(0.75,0.75);y.v(a);return b},XnorGate:function(a,b,c){a=y.u();var d=H.ra,e=0.5,g=d*e,k=0.2,l=0.5;M(a,0.1*b,0,s);N(a,0.35*b,0.25*c,0.35*b,0.75*c,0.1*b,1*c);M(a,0.8*b,0.5*c,h);N(a,0.7*b,(l+g)*c,(k+g)*b,(l+e)*c,0.2*b,1*c);N(a,0.45*b,0.75*c,0.45*b,0.25*c,0.2*b,0);N(a,(k+g)*b,(l-e)*c,0.7*b,(l-g)*c,0.8*b,0.5*c);e=0.1;g=0.1*d;k=0.9;l=0.5;M(a,(k-e)*b,l*c,h);N(a,(k-e)*b,(l-g)*c,(k-g)*b,(l-e)*c,k*b,(l-e)*c);N(a,(k+g)*b,(l-e)*c,(k+e)*b,(l-g)*c,(k+e)*b,l*c);N(a,(k+e)*b,(l+g)*c,(k+g)*b,(l+e)*c,
k*b,(l+e)*c);N(a,(k-g)*b,(l+e)*c,(k-e)*b,(l+g)*c,(k-e)*b,l*c);b=a.s;b.G=new J(0.4,0.25);b.H=new J(0.65,0.75);y.v(a);return b},XorGate:function(a,b,c){a=y.u();var d=0.5*H.ra;M(a,0.1*b,0,s);N(a,0.35*b,0.25*c,0.35*b,0.75*c,0.1*b,1*c);M(a,0.2*b,0,h);N(a,(0.2+d)*b,0*c,0.9*b,(0.5-d)*c,1*b,0.5*c);N(a,0.9*b,(0.5+d)*c,(0.2+d)*b,1*c,0.2*b,1*c);N(a,0.45*b,0.75*c,0.45*b,0.25*c,0.2*b,0);Qc(a);b=a.s;b.G=new J(0.4,0.25);b.H=new J(0.8,0.75);y.v(a);return b},Capacitor:function(a,b,c){a=y.u();M(a,0,0,s);a.lineTo(0,
1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);b=a.s;y.v(a);return b},Resistor:function(a,b,c){a=y.u();M(a,0,0.5*c,s);a.lineTo(0.1*b,0);a.lineTo(0.2*b,1*c);a.lineTo(0.3*b,0);a.lineTo(0.4*b,1*c);a.lineTo(0.5*b,0);a.lineTo(0.6*b,1*c);a.lineTo(0.7*b,0.5*c);b=a.s;y.v(a);return b},Inductor:function(a,b,c){a=y.u();var d=0.1*H.ra,e=0.1,g=0.5;M(a,(e-0.5*d)*b,(g+0.1)*c,s);N(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.3;g=0.5;N(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);N(a,(e-d)*b,(g+0.1)*
c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);g=e=0.5;N(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);N(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.7;g=0.5;N(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);N(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.9;g=0.5;N(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,(e+0.5*d)*b,(g+0.1)*c);b=a.s;y.v(a);return b},ACvoltageSource:function(a,b,c){a=y.u();var d=0.5*H.ra;M(a,0*b,0.5*c,s);N(a,0*b,(0.5-d)*c,(0.5-d)*b,0*c,0.5*b,0*c);N(a,
(0.5+d)*b,0*c,1*b,(0.5-d)*c,1*b,0.5*c);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0*b,(0.5+d)*c,0*b,0.5*c);a.moveTo(0.1*b,0.5*c);N(a,0.5*b,0*c,0.5*b,1*c,0.9*b,0.5*c);b=a.s;b.fc=Cg;y.v(a);return b},DCvoltageSource:function(a,b,c){a=y.u();M(a,0,0.75*c,s);a.lineTo(0,0.25*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);b=a.s;y.v(a);return b},Diode:function(a,b,c){a=y.u();M(a,1*b,0,s);a.lineTo(1*b,0.5*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,0.5*c);a.lineTo(1*b,1*c);b=a.s;b.G=new J(0,0.25);
b.H=new J(0.5,0.75);y.v(a);return b},Wifi:function(a,b,c){var d=b,e=c;b*=0.38;c*=0.6;a=y.u();var g=H.ra,k=0.8*g,l=0.8,m=0,n=0.5,d=(d-b)/2,e=(e-c)/2;M(a,m*b+d,(n+l)*c+e,h);N(a,(m-k)*b+d,(n+l)*c+e,(m-l)*b+d,(n+k)*c+e,(m-l)*b+d,n*c+e);N(a,(m-l)*b+d,(n-k)*c+e,(m-k)*b+d,(n-l)*c+e,m*b+d,(n-l)*c+e);N(a,m*b+d,(n-l)*c+e,(m-l+0.5*k)*b+d,(n-k)*c+e,(m-l+0.5*k)*b+d,n*c+e);N(a,(m-l+0.5*k)*b+d,(n+k)*c+e,m*b+d,(n+l)*c+e,m*b+d,(n+l)*c+e);Qc(a);k=0.4*g;l=0.4;m=0.2;n=0.5;M(a,m*b+d,(n+l)*c+e,h);N(a,(m-k)*b+d,(n+l)*c+
e,(m-l)*b+d,(n+k)*c+e,(m-l)*b+d,n*c+e);N(a,(m-l)*b+d,(n-k)*c+e,(m-k)*b+d,(n-l)*c+e,m*b+d,(n-l)*c+e);N(a,m*b+d,(n-l)*c+e,(m-l+0.5*k)*b+d,(n-k)*c+e,(m-l+0.5*k)*b+d,n*c+e);N(a,(m-l+0.5*k)*b+d,(n+k)*c+e,m*b+d,(n+l)*c+e,m*b+d,(n+l)*c+e);Qc(a);k=0.2*g;l=0.2;n=m=0.5;M(a,(m-l)*b+d,n*c+e,h);N(a,(m-l)*b+d,(n-k)*c+e,(m-k)*b+d,(n-l)*c+e,m*b+d,(n-l)*c+e);N(a,(m+k)*b+d,(n-l)*c+e,(m+l)*b+d,(n-k)*c+e,(m+l)*b+d,n*c+e);N(a,(m+l)*b+d,(n+k)*c+e,(m+k)*b+d,(n+l)*c+e,m*b+d,(n+l)*c+e);N(a,(m-k)*b+d,(n+l)*c+e,(m-l)*b+d,(n+
k)*c+e,(m-l)*b+d,n*c+e);k=0.4*g;l=0.4;m=0.8;n=0.5;M(a,m*b+d,(n-l)*c+e,h);N(a,(m+k)*b+d,(n-l)*c+e,(m+l)*b+d,(n-k)*c+e,(m+l)*b+d,n*c+e);N(a,(m+l)*b+d,(n+k)*c+e,(m+k)*b+d,(n+l)*c+e,m*b+d,(n+l)*c+e);N(a,m*b+d,(n+l)*c+e,(m+l-0.5*k)*b+d,(n+k)*c+e,(m+l-0.5*k)*b+d,n*c+e);N(a,(m+l-0.5*k)*b+d,(n-k)*c+e,m*b+d,(n-l)*c+e,m*b+d,(n-l)*c+e);Qc(a);k=0.8*g;l=0.8;m=1;n=0.5;M(a,m*b+d,(n-l)*c+e,h);N(a,(m+k)*b+d,(n-l)*c+e,(m+l)*b+d,(n-k)*c+e,(m+l)*b+d,n*c+e);N(a,(m+l)*b+d,(n+k)*c+e,(m+k)*b+d,(n+l)*c+e,m*b+d,(n+l)*c+e);
N(a,m*b+d,(n+l)*c+e,(m+l-0.5*k)*b+d,(n+k)*c+e,(m+l-0.5*k)*b+d,n*c+e);N(a,(m+l-0.5*k)*b+d,(n-k)*c+e,m*b+d,(n-l)*c+e,m*b+d,(n-l)*c+e);Qc(a);b=a.s;y.v(a);return b},Email:function(a,b,c){a=y.u();M(a,0,0,h);a.lineTo(1*b,0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);Qc(a);M(a,0,0,s);a.lineTo(0.5*b,0.6*c);a.lineTo(1*b,0);a.moveTo(0,1*c);a.lineTo(0.45*b,0.54*c);a.moveTo(1*b,1*c);a.lineTo(0.55*b,0.54*c);Sc(a);b=a.s;y.v(a);return b},Ethernet:function(a,b,c){a=y.u();M(a,0.35*b,0,h);a.lineTo(0.65*b,0);a.lineTo(0.65*
b,0.4*c);a.lineTo(0.35*b,0.4*c);a.lineTo(0.35*b,0);Qc(a);M(a,0.1*b,1*c,h,h);a.lineTo(0.4*b,1*c);a.lineTo(0.4*b,0.6*c);a.lineTo(0.1*b,0.6*c);a.lineTo(0.1*b,1*c);Qc(a);M(a,0.6*b,1*c,h,h);a.lineTo(0.9*b,1*c);a.lineTo(0.9*b,0.6*c);a.lineTo(0.6*b,0.6*c);a.lineTo(0.6*b,1*c);Qc(a);M(a,0,0.5*c,s);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.5*b,0.4*c);a.moveTo(0.75*b,0.5*c);a.lineTo(0.75*b,0.6*c);a.moveTo(0.25*b,0.5*c);a.lineTo(0.25*b,0.6*c);Sc(a);b=a.s;y.v(a);return b},Power:function(a,b,c){a=y.u();
var d=H.ra,e=0.4*d,g=0.4,k=y.M(),l=y.M(),m=y.M(),n=y.M();H.Yh(0.5,0.5-g,0.5+e,0.5-g,0.5+g,0.5-e,0.5+g,0.5,0.5,k,k,l,m,n);var p=y.ec(l.x,l.y);M(a,l.x*b,l.y*c,h);N(a,m.x*b,m.y*c,n.x*b,n.y*c,(0.5+g)*b,0.5*c);N(a,(0.5+g)*b,(0.5+e)*c,(0.5+e)*b,(0.5+g)*c,0.5*b,(0.5+g)*c);N(a,(0.5-e)*b,(0.5+g)*c,(0.5-g)*b,(0.5+e)*c,(0.5-g)*b,0.5*c);H.Yh(0.5-g,0.5,0.5-g,0.5-e,0.5-e,0.5-g,0.5,0.5-g,0.5,m,n,l,k,k);N(a,m.x*b,m.y*c,n.x*b,n.y*c,l.x*b,l.y*c);e=0.3*d;g=0.3;H.Yh(0.5-g,0.5,0.5-g,0.5-e,0.5-e,0.5-g,0.5,0.5-g,0.5,m,
n,l,k,k);a.lineTo(l.x*b,l.y*c);N(a,n.x*b,n.y*c,m.x*b,m.y*c,(0.5-g)*b,0.5*c);N(a,(0.5-g)*b,(0.5+e)*c,(0.5-e)*b,(0.5+g)*c,0.5*b,(0.5+g)*c);N(a,(0.5+e)*b,(0.5+g)*c,(0.5+g)*b,(0.5+e)*c,(0.5+g)*b,0.5*c);H.Yh(0.5,0.5-g,0.5+e,0.5-g,0.5+g,0.5-e,0.5+g,0.5,0.5,k,k,l,m,n);N(a,n.x*b,n.y*c,m.x*b,m.y*c,l.x*b,l.y*c);Qc(a);M(a,0.45*b,0,h);a.lineTo(0.45*b,0.5*c);a.lineTo(0.55*b,0.5*c);a.lineTo(0.55*b,0);Qc(a);y.B(k);y.B(l);y.B(m);y.B(n);y.B(p);b=a.s;b.G=new J(0.25,0.55);b.H=new J(0.75,0.8);y.v(a);return b},Fallout:function(a,
b,c){a=y.u();var d=0.5*H.ra;M(a,0*b,0.5*c,h);N(a,0*b,(0.5-d)*c,(0.5-d)*b,0*c,0.5*b,0*c);N(a,(0.5+d)*b,0*c,1*b,(0.5-d)*c,1*b,0.5*c);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0*b,(0.5+d)*c,0*b,0.5*c);var e=d=0;M(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);d=0.4;e=0;Qc(a);M(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);d=0.2;e=-0.3;Qc(a);M(a,
(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);Qc(a);b=a.s;b.fc=Cg;y.v(a);return b},IrritationHazard:function(a,b,c){a=y.u();M(a,0.2*b,0*c,h);a.lineTo(0.5*b,0.3*c);a.lineTo(0.8*b,0*c);a.lineTo(1*b,0.2*c);a.lineTo(0.7*b,0.5*c);a.lineTo(1*b,0.8*c);a.lineTo(0.8*b,1*c);a.lineTo(0.5*b,0.7*c);a.lineTo(0.2*b,1*c);a.lineTo(0*b,0.8*c);a.lineTo(0.3*b,0.5*c);a.lineTo(0*b,0.2*c);Qc(a);b=a.s;b.G=new J(0.3,0.3);b.H=new J(0.7,0.7);y.v(a);return b},
ElectricalHazard:function(a,b,c){a=y.u();M(a,0.37,0*c,h);a.lineTo(0.5*b,0.11*c);a.lineTo(0.77*b,0.04*c);a.lineTo(0.33*b,0.49*c);a.lineTo(1*b,0.37*c);a.lineTo(0.63*b,0.86*c);a.lineTo(0.77*b,0.91*c);a.lineTo(0.34*b,1*c);a.lineTo(0.34*b,0.78*c);a.lineTo(0.44*b,0.8*c);a.lineTo(0.65*b,0.56*c);a.lineTo(0*b,0.68*c);Qc(a);b=a.s;y.v(a);return b},FireHazard:function(a,b,c){a=y.u();M(a,0.1*b,1*c,h);N(a,-0.25*b,0.63*c,0.45*b,0.44*c,0.29*b,0*c);N(a,0.48*b,0.17*c,0.54*b,0.35*c,0.51*b,0.42*c);N(a,0.59*b,0.29*c,
0.58*b,0.28*c,0.59*b,0.18*c);N(a,0.8*b,0.34*c,0.88*b,0.43*c,0.75*b,0.6*c);N(a,0.87*b,0.48*c,0.88*b,0.43*c,0.88*b,0.31*c);N(a,1.17*b,0.76*c,0.82*b,0.8*c,0.9*b,1*c);Qc(a);b=a.s;b.G=new J(0.05,0.645);b.H=new J(0.884,0.908);y.v(a);return b},BpmnActivityLoop:function(a,b,c){a=y.u();var d=0.5*(4*(Math.SQRT2-1)/3);M(a,(0.5*Math.SQRT2/2+0.5)*b,(1-(0.5-0.5*Math.SQRT2/2))*c,s);N(a,1*b,0.7*c,1*b,0.5*c,1*b,0.5*c);N(a,1*b,(0.5-d+0)*c,(0.5+d+0)*b,0*c,0.5*b,0*c);N(a,(0.5-d+0)*b,0*c,0*b,(0.5-d+0)*c,0*b,0.5*c);N(a,
0*b,(0.5+d+0)*c,(0.5-d+0)*b,1*c,0.35*b,0.98*c);a.moveTo(0.35*b,0.8*c);a.lineTo(0.35*b,1*c);a.lineTo(0.15*b,1*c);b=a.s;y.v(a);return b},BpmnActivityParallel:function(a,b,c){a=y.u();M(a,0,0,s);a.lineTo(0,1*c);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);b=a.s;y.v(a);return b},BpmnActivitySequential:function(a,b,c){a=y.u();M(a,0,0,s);a.lineTo(1*b,0);a.moveTo(0,0.5*c);a.lineTo(1*b,0.5*c);a.moveTo(0,1*c);a.lineTo(1*b,1*c);b=a.s;y.v(a);return b},BpmnActivityAdHoc:function(a,b,
c){a=y.u();M(a,0,0,s);M(a,1*b,1*c,s);M(a,0,0.5*c,s);N(a,0.2*b,0.35*c,0.3*b,0.35*c,0.5*b,0.5*c);N(a,0.7*b,0.65*c,0.8*b,0.65*c,1*b,0.5*c);b=a.s;y.v(a);return b},BpmnActivityCompensation:function(a,b,c){a=y.u();M(a,0,0.5*c,h);a.lineTo(0.5*b,0);a.lineTo(0.5*b,0.5*c);a.lineTo(1*b,1*c);a.lineTo(1*b,0);a.lineTo(0.5*b,0.5*c);a.lineTo(0.5*b,1*c);Qc(a);b=a.s;y.v(a);return b},BpmnTaskMessage:function(a,b,c){a=y.u();M(a,0,0.2*c,h);a.lineTo(1*b,0.2*c);a.lineTo(1*b,0.8*c);a.lineTo(0,0.8*c);a.lineTo(0,0.8*c);Qc(a);
M(a,0,0.2*c,s);a.lineTo(0.5*b,0.5*c);a.lineTo(1*b,0.2*c);Sc(a);b=a.s;y.v(a);return b},BpmnTaskScript:function(a,b,c){a=y.u();M(a,0.7*b,1*c,h);a.lineTo(0.3*b,1*c);N(a,0.6*b,0.5*c,0,0.5*c,0.3*b,0);a.lineTo(0.7*b,0);N(a,0.4*b,0.5*c,1*b,0.5*c,0.7*b,1*c);Qc(a);M(a,0.45*b,0.73*c,s);a.lineTo(0.7*b,0.73*c);a.moveTo(0.38*b,0.5*c);a.lineTo(0.63*b,0.5*c);a.moveTo(0.31*b,0.27*c);a.lineTo(0.56*b,0.27*c);Sc(a);b=a.s;y.v(a);return b},BpmnTaskUser:function(a,b,c){a=y.u();M(a,0,0,s);M(a,0.335*b,(1-0.555)*c,h);a.lineTo(0.335*
b,0.595*c);a.lineTo(0.665*b,0.595*c);a.lineTo(0.665*b,(1-0.555)*c);N(a,0.88*b,0.46*c,0.98*b,0.54*c,1*b,0.68*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.68*c);N(a,0.02*b,0.54*c,0.12*b,0.46*c,0.335*b,(1-0.555)*c);a.lineTo(0.365*b,0.405*c);var d=0.5-0.285,e=Math.PI/4,g=4*(1-Math.cos(e))/(3*Math.sin(e)),e=g*d,g=g*d;N(a,(0.5-(e+d)/2)*b,(d+(d+g)/2)*c,(0.5-d)*b,(d+g)*c,(0.5-d)*b,d*c);N(a,(0.5-d)*b,(d-g)*c,(0.5-e)*b,(d-d)*c,0.5*b,(d-d)*c);N(a,(0.5+e)*b,(d-d)*c,(0.5+d)*b,(d-g)*c,(0.5+d)*b,d*c);N(a,(0.5+
d)*b,(d+g)*c,(0.5+(e+d)/2)*b,(d+(d+g)/2)*c,0.635*b,0.405*c);a.lineTo(0.635*b,0.405*c);a.lineTo(0.665*b,(1-0.555)*c);a.lineTo(0.665*b,0.595*c);a.lineTo(0.335*b,0.595*c);M(a,0.2*b,1*c,s);a.lineTo(0.2*b,0.8*c);M(a,0.8*b,1*c,s);a.lineTo(0.8*b,0.8*c);b=a.s;y.v(a);return b},BpmnEventConditional:function(a,b,c){a=y.u();M(a,0.1*b,0,h);a.lineTo(0.9*b,0);a.lineTo(0.9*b,1*c);a.lineTo(0.1*b,1*c);Qc(a);M(a,0.2*b,0.2*c,s);a.lineTo(0.8*b,0.2*c);a.moveTo(0.2*b,0.4*c);a.lineTo(0.8*b,0.4*c);a.moveTo(0.2*b,0.6*c);a.lineTo(0.8*
b,0.6*c);a.moveTo(0.2*b,0.8*c);a.lineTo(0.8*b,0.8*c);Sc(a);b=a.s;y.v(a);return b},BpmnEventError:function(a,b,c){a=y.u();M(a,0,1*c,h);a.lineTo(0.33*b,0);a.lineTo(0.66*b,0.5*c);a.lineTo(1*b,0);a.lineTo(0.66*b,1*c);a.lineTo(0.33*b,0.5*c);Qc(a);b=a.s;y.v(a);return b},BpmnEventEscalation:function(a,b,c){a=y.u();M(a,0,0,s);M(a,1*b,1*c,s);M(a,0.1*b,1*c,h);a.lineTo(0.5*b,0);a.lineTo(0.9*b,1*c);a.lineTo(0.5*b,0.5*c);Qc(a);b=a.s;y.v(a);return b},BpmnEventTimer:function(a,b,c){a=y.u();var d=0.5*H.ra;M(a,1*
b,0.5*c,h);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);M(a,0.5*b,0,s);a.lineTo(0.5*b,0.15*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0.85*c);a.moveTo(0,0.5*c);a.lineTo(0.15*b,0.5*c);a.moveTo(1*b,0.5*c);a.lineTo(0.85*b,0.5*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.58*b,0.1*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.78*b,0.54*c);Sc(a);b=a.s;b.fc=Cg;y.v(a);return b}};
for(var Bl in H.ei)H.ei[Bl.toLowerCase()]=Bl;
H.wu={Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",
OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",
BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",
BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",
Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",
BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",
TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",
OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",
OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z",None:""};H.fz={};H.xu={};H.Nn=function(a){if(H.wu){for(var b in H.wu){var c=Lc(H.wu[b],s);H.xu[b]=c;H.xu[b.toLowerCase()]=b}H.wu=f}return H.xu[a]};V.FigureGenerators=H.ei;V.ArrowheadGeometries=H.xu;
function R(a){0===arguments.length?D.call(this):D.call(this,a);this.Z=49663;this.Sm=this.Cg="";this.xq=this.uq=this.Gq=this.Ip=q;this.Iq="";this.sh=this.Hq=this.pl=q;this.wq="";this.dn=q;this.vq=(new ha(NaN,NaN)).freeze();this.yq="";this.en=q;this.Ld="";this.Rm=this.Zo=this.Rj=q;this.Fh=(new A(NaN,NaN)).freeze();this.Sp="";this.ek=q;this.Tp=Mb;this.bq=H.JE;this.Vp=H.IE;this.gp=q;this.Jp=Cl;this.jn=(new A(6,6)).freeze();this.hn="gray";this.gn=4;this.XE=-1;this.UE=new B;this.gk=q;this.Ji=NaN}
y.ba("Part",R);y.Ka(R,D);R.prototype.cloneProtected=function(a){D.prototype.cloneProtected.call(this,a);a.Z=this.Z&-4097|49152;a.Cg=this.Cg;a.Sm=this.Sm;a.Ip=this.Ip;a.Gq=this.Gq;a.uq=this.uq;a.xq=this.xq;a.Iq=this.Iq;a.Hq=this.Hq;a.sh=q;a.wq=this.wq;a.vq.assign(this.vq);a.yq=this.yq;a.Ld=this.Ld;a.Zo=this.Zo;a.Fh.assign(this.Fh);a.Sp=this.Sp;a.Tp=this.Tp.U();a.bq=this.bq.U();a.Vp=this.Vp.U();a.gp=this.gp;a.Jp=this.Jp;a.jn.assign(this.jn);a.hn=this.hn;a.gn=this.gn};
R.prototype.bh=function(a){D.prototype.bh.call(this,a);Cj(a);a.pl=q;a.dn=q;a.en=q;a.ek=q;a.gk=q};R.prototype.toString=function(){var a=y.dh(Object.getPrototypeOf(this))+"#"+y.bc(this);this.data&&(a+="("+ud(this.data)+")");return a};R.LayoutNone=0;var ui;R.LayoutAdded=ui=1;var zi;R.LayoutRemoved=zi=2;var Rj;R.LayoutShown=Rj=4;var Sj;R.LayoutHidden=Sj=8;R.LayoutNodeSized=16;var Qi;R.LayoutGroupLayout=Qi=32;var Cl;R.LayoutStandard=Cl=ui|zi|Rj|Sj|16|Qi;
R.prototype.Vl=function(a,b,c,d,e,g,k){var l=this.h;l!==q&&(a===sd&&"elements"===b?e instanceof D&&vi(e,function(a){wi(l,a)}):a===td&&"elements"===b&&e instanceof D&&vi(e,function(a){yi(l,a)}),l.Qc(a,b,c,d,e,g,k))};R.prototype.updateTargetBindings=R.prototype.zb=function(a){D.prototype.zb.call(this,a);if(this.data!==q)for(a=this.elements;a.next();){var b=a.value;b instanceof D&&vi(b,function(a){a.data!==q&&a.zb()})}};y.A(R,{su:"adornments"},function(){return this.sh===q?y.$f:this.sh.k});
R.prototype.findAdornment=R.prototype.Mn=function(a){x&&y.j(a,"string",R,"findAdornment:category");var b=this.sh;return b===q?q:b.wa(a)};R.prototype.addAdornment=R.prototype.ok=function(a,b){if(b!==q){x&&(y.j(a,"string",R,"addAdornment:category"),y.l(b,Ge,R,"addAdornment:ad"));var c=q,d=this.sh;d!==q&&(c=d.wa(a));if(c!==b){if(c!==q){var e=c.h;e!==q&&e.remove(c)}d===q&&(this.sh=d=new ma("string",Ge));b.Cg!==a&&(b.Ac=a);d.add(a,b);c=this.h;c!==q&&(c.add(b),b.data=this.data)}}};
R.prototype.removeAdornment=R.prototype.Ik=function(a){x&&y.j(a,"string",R,"removeAdornment:category");var b=this.sh;if(b!==q){var c=b.wa(a);if(c!==q){var d=c.h;d!==q&&d.remove(c)}b.remove(a);0===b.count&&(this.sh=q)}};R.prototype.clearAdornments=R.prototype.be=function(){var a=this.sh;if(a!==q){for(var b=y.ub(),a=a.k;a.next();)b.push(a.key);for(var a=b.length,c=0;c<a;c++)this.Ik(b[c]);y.ya(b)}};
R.prototype.updateAdornments=function(){var a=this.h;if(a!==q){a:{var b=q;if(this.Wa&&this.QD){var c=this.js;if(!(c===q||!this.ua.V()||!this.yb()||!c.Dk()||!c.ua.V())){b=this.Mn("Selection");if(b===q){b=this.RD;b===q&&(this instanceof U?b=a.XC:this instanceof R&&(b=this instanceof He?a.vC:a.lD));if(!(b instanceof Ge))break a;Je(b);b=b.copy();if(!(b instanceof Ge))break a;b.Ac="Selection";b.Ql=h;b.zc=c}if(b!==q){var d=b.placeholder;if(d!==q){var e=c.rj(),g=0;c instanceof V&&(g=c.jb);var k=y.Nk();k.q((c.Ta.width+
g)*e,(c.Ta.height+g)*e);d.Aa=k;y.qj(k)}b.angle=c.yk();b.type!==ig?(d=y.M(),b.location=c.hb(Mb,d),y.B(d)):b.aa()}this.ok("Selection",b)}}else this.Ik("Selection")}a=a.pb.Ze.n;c=a.length;for(b=0;b<c;b++)d=a[b],d.isEnabled&&d.updateAdornments(this);for(a=this.su;a.next();)c=a.value,c.Ql||c.mb!==q&&c.aa()}};y.A(R,{layer:"layer"},w("Rm"));y.A(R,{h:"diagram"},function(){var a=this.Rm;return a!==q?a.h:q});y.g(R,"layerName",R.prototype.ge);
y.defineProperty(R,{ge:"layerName"},w("Sm"),function(a){var b=this.Sm;if(b!==a){y.j(a,"string",R,"layerName");var c=this.h;if(!(c!==q&&c.ur(a)===q)&&(this.Sm=a,this.i("layerName",b,a),b=this.layer,b!==q&&b.name!==a&&(c=b.h,c!==q&&(a=c.ur(a),a!==q&&a!==b)))){var d=b.ze(-1,this,h);0<=d&&c.Qc(td,"parts",b,this,q,d,h);d=a.Ol(99999999,this,h);0<=d&&c.Qc(sd,"parts",a,q,this,h,d);d=this.bo;if(d!==q){var e=c.Ra;c.Ra=h;d(this,b,a);c.Ra=e}}}});y.g(R,"layerChanged",R.prototype.bo);
y.defineProperty(R,{bo:"layerChanged"},w("Ip"),function(a){var b=this.Ip;b!==a&&(a!==q&&y.j(a,"function",R,"layerChanged"),this.Ip=a,this.i("layerChanged",b,a))});y.A(R,{cc:"isTemporary"},function(){return this.Rm!==q?this.Rm.cc:s});function Dl(a){var b=a.h;b!==q&&(Kh(b),0!==(a.Z&16384)!==h&&(a.Z|=16384,a.ta(),b.yf.add(a),b.kc()))}function fh(a){0!==(a.Z&16384)!==s&&(a.updateAdornments(),a.Z&=-16385,a=a.h,a!==q&&(a.me=h))}y.g(R,"location",R.prototype.location);
y.defineProperty(R,{location:"location"},w("Fh"),function(a){var b=this.Fh;if(!b.L(a)&&!(this instanceof U)){x&&y.l(a,A,R,"location");a=a.U();var c=this.h;this.Fh=a;if(bi(this)===s){var d=this.nb,e=a.x-b.x,g=a.y-b.y,k=d.copy();d.q(k.x+e,k.y+g);Vj(this);!d.L(k)&&c&&this.i("position",k,d)}this.i("location",b,a)}});function Vj(a){if(ci(a)===s){var b=a.h;b!==q&&(b.yf.add(a),a instanceof T&&!b.va.cb&&a.rg(),b.kc());El(a,h)}}
function Wj(a){if(ci(a)!==s){var b=a.position,c=a.location;if(!c.V()||!b.V())Fl(a,b,c),oj(a);var b=a.nb,c=a.Pb,d=c.copy();c.Pa();c.x=b.x;c.y=b.y;c.freeze();rj(a,d,c);El(a,s)}}y.A(R,{Wb:"locationObject"},function(){if(this.ek===q){var a=this.hv;a!==f&&a!==q&&""!==a?(a=this.xe(a),this.ek=a!==q?a:this):this.ek=this instanceof Ge&&this.Y!==ig&&this.mb!==q?this.mb:this}return this.ek.visible?this.ek:this});y.g(R,"minLocation",R.prototype.eD);
y.defineProperty(R,{eD:"minLocation"},w("bq"),function(a){var b=this.bq;b.L(a)||(x&&y.l(a,A,R,"minLocation"),this.bq=a=a.U(),this.i("minLocation",b,a))});y.g(R,"maxLocation",R.prototype.ZC);y.defineProperty(R,{ZC:"maxLocation"},w("Vp"),function(a){var b=this.Vp;b.L(a)||(x&&y.l(a,A,R,"maxLocation"),this.Vp=a=a.U(),this.i("maxLocation",b,a))});y.g(R,"locationObjectName",R.prototype.hv);
y.defineProperty(R,{hv:"locationObjectName"},w("Sp"),function(a){var b=this.Sp;b!==a&&(x&&y.j(a,"string",R,"locationObjectName"),this.Sp=a,this.ek=q,Lj(this),this.i("locationObjectName",b,a))});y.g(R,"locationSpot",R.prototype.We);y.defineProperty(R,{We:"locationSpot"},w("Tp"),function(a){var b=this.Tp;b.L(a)||(x&&(y.l(a,J,R,"locationSpot"),yb(a)||y.m("Part.locationSpot must be a specific Spot value, not: "+a)),this.Tp=a=a.U(),Lj(this),this.i("locationSpot",b,a))});
R.prototype.move=R.prototype.move=ba("position");R.prototype.moveTo=R.prototype.moveTo=function(a,b){var c=y.ec(a,b);this.move(c);y.B(c)};
R.prototype.isVisible=R.prototype.yb=function(){if(!this.visible)return s;var a=this.layer;if(a!==q&&!a.visible)return s;a=this.bb;if(a!==q&&(!a.Ue||!a.yb()))return s;if(this instanceof T){a=this.lC();if(a!==q&&!a.Cc)return s;a=this.hd;if(a!==q){var b={};b[y.bc(this)]=h;return Gl(a,b)}}else if(this instanceof U){var b=h,c=this.h;c!==q&&(b=c.Dc);c=this.da;if(c!==q){if(this.ic&&b&&!c.Cc)return s;c=Hl(c);if(c===q||c===a)return s}c=this.fa;if(c!==q){if(this.ic&&!b&&!c.Cc)return s;b=Hl(c);if(b===q||b===
a)return s}}return h};function Gl(a,b){var c=a.da;if(c!==q){var d=c.hd;if(d!==q)b[y.bc(c)]||(b[y.bc(c)]=h,Gl(d,b));else if(Hl(c)===q)return s}c=a.fa;if(c!==q)if(d=c.hd,d!==q)b[y.bc(c)]||(b[y.bc(c)]=h,Gl(d,b));else if(Hl(c)===q)return s;return h}
R.prototype.findObject=R.prototype.xe=function(a){if(this.name===a)return this;this.gk===q&&(this.gk={});var b=this.gk;if(b[a]!==f)return b[a];for(var c=this.za.n,d=c.length,e=0;e<d;e++){var g=c[e];if(g.name===a)return b[a]=g;if(g instanceof D&&!g.MC()&&(g=g.xe(a),g!==q))return b[a]=g}return b[a]=q};
function Il(a,b,c,d){d===f&&(d=new A);Cb(c)&&(c=Sb);var e=b.Ta;d.q(e.width*c.x+c.offsetX,e.height*c.y+c.offsetY);if(b===q||b===a)return d;b.transform.Qa(d);for(b=b.ha;b!==q&&b!==a;)b.transform.Qa(d),b=b.ha;a.dk.Qa(d);d.offset(-a.wc.x,-a.wc.y);return d}R.prototype.ensureBounds=R.prototype.ci=function(){ah(this,Infinity,Infinity);this.tc()};
function ih(a,b,c){c=c===f?a.UE:c;var d;isNaN(a.Ji)&&(a.Ji=fl(a));d=a.Ji;var e=2*d;if(!a.Ck)return c.q(b.x-1-d,b.y-1-d,b.width+2+e,b.height+2+e),c;d=b.x;var e=b.y,g=b.width;b=b.height;var k=a.shadowBlur;a=a.WD;g+=k;b+=k;d-=k/2;e-=k/2;0<a.x?g+=a.x:(d+=a.x,g-=a.x);0<a.y?b+=a.y:(e+=a.y,b-=a.y);c.q(d-1,e-1,g+2,b+2);return c}
R.prototype.tc=function(){oj(this);if(bi(this)===s)Wj(this);else{var a=y.df();a.assign(this.Pb);Ij(this);this.Pb.Pa();var b=eh(this);this.gj(0,0,this.wc.width,this.wc.height);var c=this.position;Fl(this,c,this.location);var d=this.Pb;d.x=c.x;d.y=c.y;d.freeze();oj(this);rj(this,a,d);a.L(d)?this.uf(b):this.Pd()&&(!H.I(a.width,d.width)||!H.I(a.height,d.height))&&this.J(16);y.Bc(a);El(this,s)}};
function Fl(a,b,c){var d=NaN,e=NaN,g=y.M(),e=a.We,d=a.Wb;Cb(e)&&y.m("Spot must be real: "+e.toString());var k=d.Ta;g.ns(0,0,k.width,k.height,e);if(d!==a){d.transform.Qa(g);d.jb&&(e=d.Wg/2,g.offset(-e,-e));for(d=d.ha;d!==q&&d!==a;)d.transform.Qa(g),d=d.ha}a.dk.Qa(g);g.offset(-a.wc.x,-a.wc.y);c.V()?(d=c.x-g.x,e=c.y-g.y,b.q(d,e)):b.V()&&(d=b.x,e=b.y,c.q(d+g.x,e+g.y));y.B(g)}
function xi(a,b,c){Ej(a,s);a instanceof T&&Vi(c,a);!a.layer.cc&&!b&&c.pc();b=a.Pb;var d=c.eb;d.V()?(eh(a)?cb(b,d)||(a.uf(s),Dl(a)):b.qf(d)&&a.uf(h),a.updateAdornments()):c.$j=h}R.prototype.Bk=ca(h);
function gh(a,b){if(a.visible){var c=a.Pb;if(!(0===c.width||0===c.height||isNaN(c.x)||isNaN(c.y))){var d=a.transform,e=a.ha,g=a.km;g.reset();e!==q&&(e.mi()?g.multiply(e.oe):e.ha!==q&&g.multiply(e.ha.oe));g.multiply(a.Xc);a.Ge!==q&&(Hj(a,b,a.Ge,h,h),b.fillRect(c.x,c.y,c.width,c.height));a.Ge===q&&a.Uc===q&&(b.fillStyle="rgba(0,0,0,0.4)",b.fillRect(c.x,c.y,c.width,c.height));a.Uc!==q&&(d.Ir()||b.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),e=a.Ta,c=e.width,e=e.height,Hj(a,b,a.Uc,h),b.fillRect(0,0,c+
0,e+0),d.Ir()||(c=1/(d.m11*d.m22-d.m12*d.m21),b.transform(d.m22*c,-d.m12*c,-d.m21*c,d.m11*c,c*(d.m21*d.dy-d.m22*d.dx),c*(d.m12*d.dx-d.m11*d.dy))))}}}R.prototype.Pd=ca(h);y.g(R,"category",R.prototype.Ac);
y.defineProperty(R,{Ac:"category"},w("Cg"),function(a){var b=this.Cg;if(b!==a){y.j(a,"string",R,"category");this.Cg=a;this.i("category",b,a);var c=this.h,d=this.data;if(c!==q&&d!==q){var e=c.ea;this instanceof U?(e instanceof O?e.UD(d,a):e instanceof yd&&e.tH(d,a),c=c.findTemplateForLinkData(d,a),c instanceof U&&(Je(c),c=c.copy(),c instanceof U&&Jl(this,c,b,a))):this instanceof Ge||(e!==q&&e.uv(d,a),c=c.findTemplateForNodeData(d,a),c instanceof R&&(Je(c),c=c.copy(),c instanceof R&&!(c instanceof U)&&
Jl(this,c,b,a)))}this instanceof Ge&&(a=this.aj,a!==q&&(c=a.sh,c!==q&&c.remove(b),a.ok(this.Cg,this)))}});
function Jl(a,b,c,d){b.constructor!==a.constructor&&!y.xE&&(y.xE=h,y.trace('Should not change the class of the Part when changing category from "'+c+'" to "'+d+'"'),y.trace("  Old class: "+y.dh(a)+", new class: "+y.dh(b)+", part: "+a.toString()));a.be();var e=a.data;c=a.ge;var g=a.Wa,k=h,l=h,m=s;a instanceof T&&(k=a.gh,l=a.Cc,m=a.dm);b.bh(a);b.cloneProtected(a);a.Cg=d;a.aa();a.ta();b=a.h;d=h;b!==q&&(d=b.Xb,b.Xb=h);a.rm=e;e!==q&&a.zb();b!==q&&(b.Xb=d);e=a.ge;e!==c&&(a.Sm=c,a.ge=e);a instanceof T&&
(a.gh=k,a.Cc=l,a.dm=m);a.Wa=g}R.prototype.canCopy=function(){if(!this.TB)return s;var a=this.layer;if(a===q)return h;if(!a.cj)return s;a=a.h;return a===q?h:!a.cj?s:h};R.prototype.canDelete=function(){if(!this.$B)return s;var a=this.layer;if(a===q)return h;if(!a.rk)return s;a=a.h;return a===q?h:!a.rk?s:h};R.prototype.canEdit=function(){if(!this.fE)return s;var a=this.layer;if(a===q)return h;if(!a.zn)return s;a=a.h;return a===q?h:!a.zn?s:h};
R.prototype.canGroup=function(){if(!this.wC)return s;var a=this.layer;if(a===q)return h;if(!a.vn)return s;a=a.h;return a===q?h:!a.vn?s:h};R.prototype.canMove=function(){if(!this.hD)return s;var a=this.layer;if(a===q)return h;if(!a.sk)return s;a=a.h;return a===q?h:!a.sk?s:h};R.prototype.canReshape=function(){if(!this.zD)return s;var a=this.layer;if(a===q)return h;if(!a.wn)return s;a=a.h;return a===q?h:!a.wn?s:h};
R.prototype.canResize=function(){if(!this.AD)return s;var a=this.layer;if(a===q)return h;if(!a.xn)return s;a=a.h;return a===q?h:!a.xn?s:h};R.prototype.canRotate=function(){if(!this.GD)return s;var a=this.layer;if(a===q)return h;if(!a.yn)return s;a=a.h;return a===q?h:!a.yn?s:h};R.prototype.canSelect=function(){if(!this.Jk)return s;var a=this.layer;if(a===q)return h;if(!a.pe)return s;a=a.h;return a===q?h:!a.pe?s:h};y.g(R,"copyable",R.prototype.TB);
y.defineProperty(R,{TB:"copyable"},function(){return 0!==(this.Z&1)},function(a){var b=0!==(this.Z&1);b!==a&&(x&&y.j(a,"boolean",R,"copyable"),this.Z^=1,this.i("copyable",b,a))});y.g(R,"deletable",R.prototype.$B);y.defineProperty(R,{$B:"deletable"},function(){return 0!==(this.Z&2)},function(a){var b=0!==(this.Z&2);b!==a&&(x&&y.j(a,"boolean",R,"deletable"),this.Z^=2,this.i("deletable",b,a))});y.g(R,"textEditable",R.prototype.fE);
y.defineProperty(R,{fE:"textEditable"},function(){return 0!==(this.Z&4)},function(a){var b=0!==(this.Z&4);b!==a&&(x&&y.j(a,"boolean",R,"textEditable"),this.Z^=4,this.i("textEditable",b,a),this.updateAdornments())});y.g(R,"groupable",R.prototype.wC);y.defineProperty(R,{wC:"groupable"},function(){return 0!==(this.Z&8)},function(a){var b=0!==(this.Z&8);b!==a&&(x&&y.j(a,"boolean",R,"groupable"),this.Z^=8,this.i("groupable",b,a))});y.g(R,"movable",R.prototype.hD);
y.defineProperty(R,{hD:"movable"},function(){return 0!==(this.Z&16)},function(a){var b=0!==(this.Z&16);b!==a&&(x&&y.j(a,"boolean",R,"movable"),this.Z^=16,this.i("movable",b,a))});y.g(R,"selectionAdorned",R.prototype.QD);y.defineProperty(R,{QD:"selectionAdorned"},function(){return 0!==(this.Z&32)},function(a){var b=0!==(this.Z&32);b!==a&&(x&&y.j(a,"boolean",R,"selectionAdorned"),this.Z^=32,this.i("selectionAdorned",b,a),this.updateAdornments())});y.g(R,"isInDocumentBounds",R.prototype.Ly);
y.defineProperty(R,{Ly:"isInDocumentBounds"},function(){return 0!==(this.Z&64)},function(a){var b=0!==(this.Z&64);b!==a&&(x&&y.j(a,"boolean",R,"isInDocumentBounds"),this.Z^=64,this.i("isInDocumentBounds",b,a))});y.g(R,"isLayoutPositioned",R.prototype.Ny);y.defineProperty(R,{Ny:"isLayoutPositioned"},function(){return 0!==(this.Z&128)},function(a){var b=0!==(this.Z&128);b!==a&&(x&&y.j(a,"boolean",R,"isLayoutPositioned"),this.Z^=128,this.i("isLayoutPositioned",b,a),this.J(a?Rj:Sj))});
y.g(R,"selectable",R.prototype.Jk);y.defineProperty(R,{Jk:"selectable"},function(){return 0!==(this.Z&256)},function(a){var b=0!==(this.Z&256);b!==a&&(x&&y.j(a,"boolean",R,"selectable"),this.Z^=256,this.i("selectable",b,a),this.updateAdornments())});y.g(R,"reshapable",R.prototype.zD);y.defineProperty(R,{zD:"reshapable"},function(){return 0!==(this.Z&512)},function(a){var b=0!==(this.Z&512);b!==a&&(x&&y.j(a,"boolean",R,"selectable"),this.Z^=512,this.i("selectable",b,a),this.updateAdornments())});
y.g(R,"resizable",R.prototype.AD);y.defineProperty(R,{AD:"resizable"},function(){return 0!==(this.Z&1024)},function(a){var b=0!==(this.Z&1024);b!==a&&(x&&y.j(a,"boolean",R,"selectable"),this.Z^=1024,this.i("selectable",b,a),this.updateAdornments())});y.g(R,"rotatable",R.prototype.GD);y.defineProperty(R,{GD:"rotatable"},function(){return 0!==(this.Z&2048)},function(a){var b=0!==(this.Z&2048);b!==a&&(x&&y.j(a,"boolean",R,"selectable"),this.Z^=2048,this.i("selectable",b,a),this.updateAdornments())});
y.g(R,"isSelected",R.prototype.Wa);y.defineProperty(R,{Wa:"isSelected"},function(){return 0!==(this.Z&4096)},function(a){var b=0!==(this.Z&4096);if(b!==a){x&&y.j(a,"boolean",R,"isSelected");var c=this.h;if(!a||this.canSelect()&&!(c!==q&&c.selection.count>=c.$C)){this.Z^=4096;var d=s;if(c!==q){d=c.Xb;c.Xb=h;var e=c.selection;e.Pa();a?e.add(this):e.remove(this);e.freeze()}this.i("isSelected",b,a);Dl(this);a=this.SD;a!==q&&a(this);c!==q&&(c.kc(),c.Xb=d)}}});y.g(R,"isShadowed",R.prototype.Ck);
y.defineProperty(R,{Ck:"isShadowed"},function(){return 0!==(this.Z&8192)},function(a){var b=0!==(this.Z&8192);b!==a&&(x&&y.j(a,"boolean",R,"isShadowed"),this.Z^=8192,this.i("isShadowed",b,a),this.ta())});function ci(a){return 0!==(a.Z&32768)}function El(a,b){a.Z=b?a.Z|32768:a.Z&-32769}function Ej(a,b){a.Z=b?a.Z|65536:a.Z&-65537}function eh(a){return 0!==(a.Z&131072)}R.prototype.uf=function(a){this.Z=a?this.Z|131072:this.Z&-131073};y.g(R,"selectionObjectName",R.prototype.ks);
y.defineProperty(R,{ks:"selectionObjectName"},w("Iq"),function(a){var b=this.Iq;b!==a&&(x&&y.j(a,"string",R,"selectionObjectName"),this.Iq=a,this.pl=q,this.i("selectionObjectName",b,a))});y.g(R,"selectionAdornmentTemplate",R.prototype.RD);y.defineProperty(R,{RD:"selectionAdornmentTemplate"},w("Gq"),function(a){var b=this.Gq;b!==a&&(x&&y.l(a,Ge,R,"selectionAdornmentTemplate"),this instanceof U&&(a.type=ig),this.Gq=a,this.i("selectionAdornmentTemplate",b,a))});
y.A(R,{js:"selectionObject"},function(){if(this.pl===q){var a=this.ks;a!==q&&""!==a?(a=this.xe(a),this.pl=a!==q?a:this):this instanceof U?(a=this.path,this.pl=a!==q?a:this):this.pl=this}return this.pl});y.g(R,"selectionChanged",R.prototype.SD);y.defineProperty(R,{SD:"selectionChanged"},w("Hq"),function(a){var b=this.Hq;b!==a&&(a!==q&&y.j(a,"function",R,"selectionChanged"),this.Hq=a,this.i("selectionChanged",b,a))});y.g(R,"resizeAdornmentTemplate",R.prototype.BD);
y.defineProperty(R,{BD:"resizeAdornmentTemplate"},w("uq"),function(a){var b=this.uq;b!==a&&(x&&y.l(a,Ge,R,"resizeAdornmentTemplate"),this.uq=a,this.i("resizeAdornmentTemplate",b,a))});y.g(R,"resizeObjectName",R.prototype.ED);y.defineProperty(R,{ED:"resizeObjectName"},w("wq"),function(a){var b=this.wq;b!==a&&(x&&y.j(a,"string",R,"resizeObjectName"),this.wq=a,this.dn=q,this.i("resizeObjectName",b,a))});
y.A(R,{DD:"resizeObject"},function(){if(this.dn===q){var a=this.ED;a!==q&&""!==a?(a=this.xe(a),this.dn=a!==q?a:this):this.dn=this}return this.dn});y.g(R,"resizeCellSize",R.prototype.CD);y.defineProperty(R,{CD:"resizeCellSize"},w("vq"),function(a){var b=this.vq;b.L(a)||(x&&y.l(a,ha,R,"resizeCellSize"),this.vq=a=a.U(),this.i("resizeCellSize",b,a))});y.g(R,"rotateAdornmentTemplate",R.prototype.HD);
y.defineProperty(R,{HD:"rotateAdornmentTemplate"},w("xq"),function(a){var b=this.xq;b!==a&&(x&&y.l(a,Ge,R,"rotateAdornmentTemplate"),this.xq=a,this.i("rotateAdornmentTemplate",b,a))});y.g(R,"rotateObjectName",R.prototype.KD);y.defineProperty(R,{KD:"rotateObjectName"},w("yq"),function(a){var b=this.yq;b!==a&&(x&&y.j(a,"string",R,"rotateObjectName"),this.yq=a,this.en=q,this.i("rotateObjectName",b,a))});
y.A(R,{JD:"rotateObject"},function(){if(this.en===q){var a=this.KD;a!==q&&""!==a?(a=this.xe(a),this.en=a!==q?a:this):this.en=this}return this.en});y.g(R,"text",R.prototype.text);y.defineProperty(R,{text:"text"},w("Ld"),function(a){var b=this.Ld;b!==a&&(x&&y.j(a,"string",R,"text"),this.Ld=a,this.i("text",b,a))});y.g(R,"containingGroup",R.prototype.bb);
y.defineProperty(R,{bb:"containingGroup"},w("Rj"),function(a){if(this.Pd()){var b=this.Rj;if(b!==a){x&&a!==q&&y.l(a,He,R,"containingGroup");if(a!==q&&(this===a||a.Jr(this)))this===a&&y.m("Cannot make a Group a member of itself: "+this.toString()),y.m("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+a.toString());this.J(zi);var c=this.h;b!==q?Kl(b,this):this instanceof He&&c!==q&&c.mk.remove(this);this.Rj=a;a!==q?Ll(a,this):this instanceof He&&c!==q&&c.mk.add(this);
this.J(ui);if(c!==q){var d=this.data,e=c.ea;d!==q&&e instanceof O&&e.tz(d,e.sb(a!==q?a.data:q))}d=this.sy;d!==q&&(e=h,c!==q&&(e=c.Ra,c.Ra=h),d(this,b,a),c!==q&&(c.Ra=e));if(this instanceof He){c=new na(R);Fe(c,this,h,0);for(c=c.k;c.next();)if(d=c.value,d instanceof T)for(d=d.Qd;d.next();)e=d.value,Mi(e)}if(this instanceof T)for(d=this.Qd;d.next();)e=d.value,Mi(e);this.i("containingGroup",b,a);a!==q&&a.Bv()}}else y.m("cannot set the Part.containingGroup of a Link or Adornment")});
function Cj(a){a=a.bb;a!==q&&(a.aa(),a.mb!==q&&a.mb.aa(),a.rg())}R.prototype.Er=function(){var a=this.Rj;a!==q&&Ll(a,this)};R.prototype.Fr=function(){var a=this.Rj;a!==q&&Kl(a,this)};R.prototype.El=function(){var a=this.data;if(a!==q){var b=this.h;b!==q&&(b=b.ea,b!==q&&b.wD(a))}};y.g(R,"containingGroupChanged",R.prototype.sy);
y.defineProperty(R,{sy:"containingGroupChanged"},w("Zo"),function(a){var b=this.Zo;b!==a&&(a!==q&&y.j(a,"function",R,"containingGroupChanged"),this.Zo=a,this.i("containingGroupChanged",b,a))});y.A(R,{xJ:"topLevelPart"},function(){return Ml(this,this)});R.prototype.findTopLevelPart=R.prototype.EI=function(){return Ml(this,this)};function Ml(a,b){var c=b.bb;return c!==q?Ml(a,c):b instanceof T&&(c=b.hd,c!==q)?Ml(a,c):b}
y.A(R,{$n:"isTopLevel"},function(){return this.bb!==q||this instanceof T&&this.ii?s:h});R.prototype.isMemberOf=R.prototype.Jr=function(a){return!(a instanceof He)?s:Nl(this,this,a)};function Nl(a,b,c){if(b===c||c===q)return s;var d=b.bb;return d!==q&&(d===c||Nl(a,d,c))?h:b instanceof T&&(b=b.hd,b!==q)?Nl(a,b,c):s}R.prototype.findCommonContainingGroup=R.prototype.oG=function(a){return Ol(this,this,a)};
function Ol(a,b,c){if(b===q||c===q)return q;var d=b.bb;if(d===q)return q;if(b===c)return d;var e=c.bb;return e===q?q:d===e?e:Nl(a,c,d)?d:Nl(a,b,e)?e:Ol(a,d,e)}y.g(R,"layoutConditions",R.prototype.SC);y.defineProperty(R,{SC:"layoutConditions"},w("Jp"),function(a){var b=this.Jp;b!==a&&(x&&y.j(a,"number",R,"layoutConditions"),this.Jp=a,this.i("layoutConditions",b,a))});
R.prototype.canLayout=function(){if(!this.Ny||!this.yb())return s;var a=this.layer;return a!==q&&a.cc||this instanceof T&&this.ii?s:h};R.prototype.invalidateLayout=R.prototype.J=function(a){a===f&&(a=16777215);var b;!this.Ny||0===(a&this.SC)?b=s:(b=this.layer,b!==q&&b.cc||this instanceof T&&this.ii?b=s:(b=this.h,b=b!==q&&b.va.cb?s:h));if(b)if(b=this.Rj,b!==q){var c=b.Nb;c!==q?c.J():b.J(a)}else a=this.h,a!==q&&(c=a.Nb,c!==q&&c.J())};y.g(R,"dragComputation",R.prototype.vy);
y.defineProperty(R,{vy:"dragComputation"},w("gp"),function(a){var b=this.gp;b!==a&&(a!==q&&y.j(a,"function",R,"dragComputation"),this.gp=a,this.i("dragComputation",b,a))});y.g(R,"shadowOffset",R.prototype.WD);y.defineProperty(R,{WD:"shadowOffset"},w("jn"),function(a){var b=this.jn;b.L(a)||(x&&y.l(a,A,R,"shadowOffset"),this.jn=a=a.U(),this.ta(),this.i("shadowOffset",b,a))});y.g(R,"shadowColor",R.prototype.shadowColor);
y.defineProperty(R,{shadowColor:"shadowColor"},w("hn"),function(a){var b=this.hn;b!==a&&(x&&y.j(a,"string",R,"shadowColor"),this.hn=a,this.ta(),this.i("shadowColor",b,a))});y.g(R,"shadowBlur",R.prototype.shadowBlur);y.defineProperty(R,{shadowBlur:"shadowBlur"},w("gn"),function(a){var b=this.gn;b!==a&&(x&&y.j(a,"number",R,"shadowBlur"),this.gn=a,this.ta(),this.i("shadowBlur",b,a))});
function Ge(a){0===arguments.length?R.call(this,Fg):R.call(this,a);this.ge="Adornment";this.La=q;this.Z&=-257;this.Fh=new A(NaN,NaN);this.th=new F(B);this.mb=q;this.Zw=s}y.ba("Adornment",Ge);y.Ka(Ge,R);da=Ge.prototype;da.toString=function(){var a=this.aj;return"Adornment("+this.Ac+")"+(a!==q?a.toString():"")};da.Ai=function(){return this.La&&this.La.W instanceof U?this.La.W.Ai():q};da.rp=ca(q);
da.iv=function(){var a=this.zc.W,b=this.zc;if(a instanceof U&&b instanceof V){var c=a.path,b=c.Na;a.iv();for(var b=c.Na,a=this.za,c=a.length,d=0;d<c;d++){var e=a.n[d];e.ji&&e instanceof V&&(e.Na=b)}}};da.Nw=function(){var a=this.aj;return a instanceof U?a.sc:q};y.A(Ge,{placeholder:"placeholder"},w("mb"));y.g(Ge,"isStandard",Ge.prototype.Ql);y.defineProperty(Ge,{Ql:"isStandard"},w("Zw"),function(a){var b=this.Zw;b!==a&&(x&&y.j(a,"boolean",Ge,"isStandard"),this.Zw=a,this.i("isStandard",b,a))});
y.g(Ge,"adornedObject",Ge.prototype.zc);y.defineProperty(Ge,{zc:"adornedObject"},w("La"),function(a){x&&a!==q&&y.l(a,P,R,"adornedObject:val");var b=this.aj,c=q;a!==q&&(c=a.W);b!==q&&(a===q||b!==c)&&b.Ik(this.Ac);this.La=a;c&&c.ok(this.Ac,this)});y.A(Ge,{aj:"adornedPart"},function(){var a=this.La;return a!==q?a.W:q});Ge.prototype.Bk=function(){var a=this.La;if(a===q)return h;a=a.W;return a===q||!bi(a)};Ge.prototype.Pd=ca(s);y.A(Ge,{bb:"containingGroup"},ca(q));
Ge.prototype.Vl=function(a,b,c,d,e,g,k){if(a===sd&&"elements"===b)if(e instanceof Ag)this.mb===q?this.mb=e:this.mb!==e&&y.m("Cannot insert a second Placeholder into the visual tree of an Adornment.");else{if(e instanceof D){var l=dl(e,e,function(a){return a instanceof Ag});l instanceof Ag&&(this.mb===q?this.mb=l:this.mb!==l&&y.m("Cannot insert a second Placeholder into the visual tree of an Adornment."))}}else a===td&&"elements"===b&&this.mb!==q&&(d===this.mb?this.mb=q:d instanceof D&&this.mb.hi(d)&&
(this.mb=q));R.prototype.Vl.call(this,a,b,c,d,e,g,k)};Ge.prototype.updateAdornments=aa();Ge.prototype.El=aa();function T(a){0===arguments.length?R.call(this,Fg):R.call(this,a);this.Qb=new F(U);this.Pm=this.Op=this.Np=q;this.Dp=h;this.br=s;this.Xq=q;this.Uo=this.Ep=h;this.Vo=H.ME;this.dd=this.Bg=q;this.Yg=s}y.ba("Node",T);y.Ka(T,R);
T.prototype.cloneProtected=function(a){R.prototype.cloneProtected.call(this,a);a.Np=this.Np;a.Op=this.Op;a.Dp=this.Dp;a.br=this.br;a.Xq=this.Xq;a.Ep=this.Ep;a.Uo=this.Uo;a.Vo=this.Vo.U()};T.prototype.bh=function(a){R.prototype.bh.call(this,a);a.rg();a.Bg=this.Bg;a.dd=q};var Pl;T.DirectionDefault=Pl=y.w(T,"DirectionDefault",0);T.DirectionAbsolute=y.w(T,"DirectionAbsolute",1);var Ql;T.DirectionRotatedNode=Ql=y.w(T,"DirectionRotatedNode",2);var hj;
T.DirectionRotatedNodeOrthogonal=hj=y.w(T,"DirectionRotatedNodeOrthogonal",3);function Rl(a,b){b!==q&&(a.Bg===q&&(a.Bg=new na(Sl)),a.Bg.add(b))}T.prototype.Vl=function(a,b,c,d,e,g,k){a===sd&&"elements"===b?this.dd=q:a===td&&"elements"===b&&(this.h===q?this.dd=q:d instanceof P&&bl(this,d,function(a,b){Xj(a,b,h)}));R.prototype.Vl.call(this,a,b,c,d,e,g,k)};
T.prototype.invalidateConnectedLinks=T.prototype.rg=function(a){a===f&&(a=q);for(var b=this.Qd;b.next();){var c=b.value;if(!(a!==q&&a.contains(c))){var d=c.Oc;d!==q&&(d.Kd=q);var e=c.Ad;e!==q&&e!==d&&(e.Kd=q);c.Vb()}}};T.prototype.Bk=ca(h);y.g(T,"avoidable",T.prototype.ly);y.defineProperty(T,{ly:"avoidable"},w("Uo"),function(a){var b=this.Uo;if(b!==a){x&&y.j(a,"boolean",T,"avoidable");this.Uo=a;var c=this.h;c!==q&&Vi(c,this);this.i("avoidable",b,a)}});y.g(T,"avoidableMargin",T.prototype.HB);
y.defineProperty(T,{HB:"avoidableMargin"},w("Vo"),function(a){"number"===typeof a?a=new ab(a):y.l(a,ab,T,"avoidableMargin");var b=this.Vo;if(!b.L(a)){this.Vo=a=a.U();var c=this.h;c!==q&&Vi(c,this);this.i("avoidableMargin",b,a)}});T.prototype.canAvoid=function(){return this.ly&&!this.ii};T.prototype.getAvoidableRectangle=T.prototype.uG=function(a){a.set(this.ua);a.qu(this.HB);return a};function Hl(a){for(;a!==q&&!a.yb();)a=a.bb;return a}y.A(T,{Qd:"linksConnected"},function(){return this.Qb.k});
T.prototype.findLinksConnected=T.prototype.pG=function(a){a===f&&(a=q);if(a===q)return this.Qb.k;x&&y.j(a,"string",T,"findLinksConnected:pid");var b=new Ea(this.Qb),c=this;b.Hk=function(b){return b.da===c&&b.Lf===a||b.fa===c&&b.zg===a};return b};T.prototype.findLinksOutOf=T.prototype.Pu=function(a){a===f&&(a=q);x&&a!==q&&y.j(a,"string",T,"findLinksOutOf:pid");var b=new Ea(this.Qb),c=this;b.Hk=function(b){return b.da!==c?s:a===q?h:b.Lf===a};return b};
T.prototype.findLinksInto=T.prototype.Jf=function(a){a===f&&(a=q);x&&a!==q&&y.j(a,"string",T,"findLinksInto:pid");var b=new Ea(this.Qb),c=this;b.Hk=function(b){return b.fa!==c?s:a===q?h:b.zg===a};return b};
T.prototype.findNodesConnected=T.prototype.iC=function(a){a===f&&(a=q);x&&a!==q&&y.j(a,"string",T,"findNodesConnected:pid");for(var b=q,c=q,d=this.Qb.k;d.next();){var e=d.value;if(e.da===this){if(a===q||e.Lf===a)e=e.fa,b!==q?b.add(e):c!==q&&c!==e?(b=new na(T),b.add(c),b.add(e)):c=e}else if(e.fa===this&&(a===q||e.zg===a))e=e.da,b!==q?b.add(e):c!==q&&c!==e?(b=new na(T),b.add(c),b.add(e)):c=e}return b!==q?b.k:c!==q?new Da(c):y.$f};
T.prototype.findNodesOutOf=T.prototype.AI=function(a){a===f&&(a=q);x&&a!==q&&y.j(a,"string",T,"findNodesOutOf:pid");for(var b=q,c=q,d=this.Qb.k;d.next();){var e=d.value;if(e.da===this&&(a===q||e.Lf===a))e=e.fa,b!==q?b.add(e):c!==q&&c!==e?(b=new na(T),b.add(c),b.add(e)):c=e}return b!==q?b.k:c!==q?new Da(c):y.$f};
T.prototype.findNodesInto=T.prototype.zI=function(a){a===f&&(a=q);x&&a!==q&&y.j(a,"string",T,"findNodesInto:pid");for(var b=q,c=q,d=this.Qb.k;d.next();){var e=d.value;if(e.fa===this&&(a===q||e.zg===a))e=e.da,b!==q?b.add(e):c!==q&&c!==e?(b=new na(T),b.add(c),b.add(e)):c=e}return b!==q?b.k:c!==q?new Da(c):y.$f};
T.prototype.findLinksBetween=T.prototype.xI=function(a,b,c){b===f&&(b=q);c===f&&(c=q);x&&(y.l(a,T,T,"findLinksBetween:othernode"),b!==q&&y.j(b,"string",T,"findLinksBetween:pid"),c!==q&&y.j(c,"string",T,"findLinksBetween:otherpid"));var d=new Ea(this.Qb),e=this;d.Hk=function(d){return d.da===e&&d.fa===a&&(b===q||d.Lf===b)&&(c===q||d.zg===c)||d.da===a&&d.fa===e&&(c===q||d.Lf===c)&&(b===q||d.zg===b)?h:s};return d};
T.prototype.findLinksTo=T.prototype.yI=function(a,b,c){b===f&&(b=q);c===f&&(c=q);x&&(y.l(a,T,T,"findLinksTo:othernode"),b!==q&&y.j(b,"string",T,"findLinksTo:pid"),c!==q&&y.j(c,"string",T,"findLinksTo:otherpid"));var d=new Ea(this.Qb),e=this;d.Hk=function(d){return d.da!==e||d.fa!==a||b!==q&&d.Lf!==b||c!==q&&d.zg===c?s:h};return d};y.g(T,"linkConnected",T.prototype.UC);
y.defineProperty(T,{UC:"linkConnected"},w("Np"),function(a){var b=this.Np;b!==a&&(a!==q&&y.j(a,"function",T,"linkConnected"),this.Np=a,this.i("linkConnected",b,a))});y.g(T,"linkDisconnected",T.prototype.VC);y.defineProperty(T,{VC:"linkDisconnected"},w("Op"),function(a){var b=this.Op;b!==a&&(a!==q&&y.j(a,"function",T,"linkDisconnected"),this.Op=a,this.i("linkDisconnected",b,a))});
function Tl(a,b,c){if(!a.Qb.contains(b)){a.Qb.add(b);var d=a.UC;if(d!==q){var e=h,g=a.h;g!==q&&(e=g.Ra,g.Ra=h);d(a,b,c);g!==q&&(g.Ra=e)}b.ic&&(c=b.da,b=b.fa,c!==q&&(b!==q&&c!==b)&&(d=h,g=a.h,g!==q&&(d=g.Dc),a=d?b:c,e=d?c:b,a.Yg||(a.Yg=e),e.gh&&!(g!==q&&g.va.cb)&&(d?c===e&&(e.gh=s):b===e&&(e.gh=s))))}}
function Ul(a,b,c){if(a.Qb.remove(b)){var d=a.VC,e=a.h;if(d!==q){var g=h;e!==q&&(g=e.Ra,e.Ra=h);d(a,b,c);e!==q&&(e.Ra=g)}b.ic&&(c=h,e!==q&&(c=e.Dc),a=c?b.fa:b.da,b=c?b.da:b.fa,a!==q&&(a.Yg=s),b!==q&&!b.gh&&(0===b.Qb.count?(b.Yg=q,e!==q&&e.va.cb||(b.gh=h)):Ri(b)))}}function Ri(a){a.Yg=s;if(0!==a.Qb.count){var b=h,c=a.h;if(!(c!==q&&c.va.cb)){c!==q&&(b=c.Dc);for(c=a.Qb.k;c.next();){var d=c.value;if(d.ic)if(b){if(d.da===a){a.gh=s;return}}else if(d.fa===a){a.gh=s;return}}a.gh=h}}}
T.prototype.Er=function(){R.prototype.Er.call(this);Ri(this);var a=this.Pm;a!==q&&Vl(a,this)};T.prototype.Fr=function(){R.prototype.Fr.call(this);var a=this.Pm;a!==q&&a.Ke!==q&&(a.Ke.remove(this),a.aa())};T.prototype.El=function(){if(0<this.Qb.count){var a=this.h;if(a===q)return;for(var b=this.Qb.copy().k;b.next();)a.remove(b.value)}this.hd=q;R.prototype.El.call(this)};y.A(T,{ii:"isLinkLabel"},function(){return this.Pm!==q});y.g(T,"labeledLink",T.prototype.hd);
y.defineProperty(T,{hd:"labeledLink"},w("Pm"),function(a){var b=this.Pm;if(b!==a){x&&a!==q&&y.l(a,U,T,"labeledLink");var c=this.h,d=this.data;if(b!==q&&(b.Ke!==q&&(b.Ke.remove(this),b.aa()),c!==q&&d!==q&&!c.va.cb)){var e=b.data,g=c.ea;if(e!==q&&g instanceof O){var k=g.sb(d);k!==f&&g.mH(e,k)}}this.Pm=a;a!==q&&(Vl(a,this),c!==q&&(d!==q&&!c.va.cb)&&(e=a.data,g=c.ea,e!==q&&g instanceof O&&(k=g.sb(d),k!==f&&g.xB(e,k))));Lj(this);this.i("labeledLink",b,a)}});
T.prototype.findPort=T.prototype.xr=function(a){x&&y.j(a,"string",T,"findPort:pid");if(this.dd===q){if(""===a&&this.Bi===s)return this;Yj(this)}if(this.dd!==q){var b=this.dd.wa(a);if(b!==q)return b}if(""!==a&&this.dd!==q&&(b=this.dd.wa(""),b!==q))return b;this.dd===q&&Yj(this);return this};y.A(T,{port:"port"},function(){return this.xr("")});y.A(T,{ports:"ports"},function(){this.dd===q&&Yj(this);return this.dd!==q?this.dd.k:y.$f});
function Yj(a){a.dd!==q&&a.dd.clear();bl(a,a,function(a,c){Zj(a,c)})}function Zj(a,b){var c=b.Td;c!==q&&(a.dd===q&&(a.dd=new ma("string",P)),a.dd.add(c,b))}function Xj(a,b,c){var d=b.Td;if(d!==q&&(a.dd!==q&&a.dd.remove(d),b=a.h,b!==q&&c)){c=q;for(a=a.pG(d);a.next();)c===q&&(c=y.ub()),c.push(a.value);if(c!==q){for(a=0;a<c.length;a++)b.remove(c[a]);y.ya(c)}}}
T.prototype.isInTreeOf=T.prototype.TI=function(a){if(a===q||a===this)return s;var b=h,c=this.h;c!==q&&(b=c.Dc);c=this;if(b)for(;c!==a;){for(var b=q,d=c.Qb.k;d.next();){var e=d.value;if(e.ic&&(b=e.da,b!==c&&b!==this))break}if(b===this||b===q||b===c)return s;c=b}else for(;c!==a;){b=q;for(d=c.Qb.k;d.next()&&!(e=d.value,e.ic&&(b=e.fa,b!==c&&b!==this)););if(b===this||b===q||b===c)return s;c=b}return h};
T.prototype.findTreeRoot=T.prototype.GI=function(){var a=h,b=this.h;b!==q&&(a=b.Dc);b=this;if(a)for(;;){for(var a=q,c=b.Qb.k;c.next();){var d=c.value;if(d.ic&&(a=d.da,a!==b&&a!==this))break}if(a===this)return this;if(a===q||a===b)return b;b=a}else for(;;){a=q;for(c=b.Qb.k;c.next()&&!(d=c.value,d.ic&&(a=d.fa,a!==b&&a!==this)););if(a===this)return this;if(a===q||a===b)return b;b=a}};
T.prototype.findTreeParentLink=T.prototype.yr=function(){var a=h,b=this.h;b!==q&&(a=b.Dc);b=this.Qb.k;if(a)for(;b.next();){if(a=b.value,a.ic&&a.da!==this)return a}else for(;b.next();)if(a=b.value,a.ic&&a.fa!==this)return a;return q};
T.prototype.findTreeParentNode=T.prototype.lC=function(){if(this.Yg===q||this.Yg instanceof T)return this.Yg;var a=h,b=this.h;b!==q&&(a=b.Dc);var b=this.Qb.n,c=b.length;if(a)for(a=0;a<c;a++){var d=b[a];if(d.ic&&(d=d.da,d!==this))return this.Yg=d}else for(a=0;a<c;a++)if(d=b[a],d.ic&&(d=d.fa,d!==this))return this.Yg=d;return this.Yg=q};
T.prototype.findTreeChildrenLinks=T.prototype.Qu=function(){var a=h,b=this.h;b!==q&&(a=b.Dc);if(a){var a=new Ea(this.Qb),c=this;a.Hk=function(a){return!a.ic||a.da!==c?s:h}}else a=new Ea(this.Qb),c=this,a.Hk=function(a){return!a.ic||a.fa!==c?s:h};return a};
T.prototype.findTreeChildrenNodes=T.prototype.kC=function(){var a=h,b=this.h;b!==q&&(a=b.Dc);var c=b=q,d=this.Qb.k;if(a)for(;d.next();)a=d.value,a.ic&&a.da===this&&(a=a.fa,b!==q?b.add(a):c!==q&&c!==a?(b=new F(T),b.add(c),b.add(a)):c=a);else for(;d.next();)a=d.value,a.ic&&a.fa===this&&(a=a.da,b!==q?b.add(a):c!==q&&c!==a?(b=new F(T),b.add(c),b.add(a)):c=a);return b!==q?b.k:c!==q?new Da(c):y.$f};
T.prototype.findTreeParts=T.prototype.FI=function(a){a===f&&(a=Infinity);y.j(a,"number",T,"collapseTree:level");var b=new na(R);Fe(b,this,s,a);return b};T.prototype.collapseTree=T.prototype.collapseTree=function(a){a===f&&(a=1);y.p(a,T,"collapseTree:level");1>a&&(a=1);var b=this.h;if(b!==q&&!b.xd){b.xd=h;var c=b.Dc,d=new na(T);d.add(this);Wl(this,d,c,a,this.Cc);b.xd=s;b.ta()}};
function Wl(a,b,c,d,e){if(1<d)for(e=c?a.Pu():a.Jf();e.next();){var g=e.value;g.ic&&(g=g.Ey(a),g!==q&&(g!==a&&!b.contains(g))&&(b.add(g),Wl(g,b,c,d-1,g.Cc)))}else Xl(a,b,c,e)}function Xl(a,b,c,d){a.Cc=s;for(var e=c?a.Pu():a.Jf();e.next();){var g=e.value;d&&g.be();g.ic&&(g=g.Ey(a),g!==q&&(g!==a&&!b.contains(g))&&(b.add(g),d&&(g.ta(),g.be(),Cj(g),g.J(Sj)),g.Cc&&(g.dm=g.Cc,Xl(g,b,c,g.dm))))}}
T.prototype.expandTree=T.prototype.expandTree=function(a){a===f&&(a=2);y.p(a,T,"collapseTree:level");2>a&&(a=2);var b=this.h;if(b!==q&&!b.xd){b.xd=h;var c=b.Dc,d=new na(T);d.add(this);Yl(this,d,c,a,this.Cc);b.xd=s}};function Yl(a,b,c,d,e){a.Cc=h;for(var g=c?a.Pu():a.Jf();g.next();){var k=g.value;if(k.ic&&(e||k.updateAdornments(),k=k.Ey(a),k!==q&&(k!==a&&!b.contains(k))&&(b.add(k),e||(k.ta(),k.updateAdornments(),Cj(k),k.J(Rj)),2<d||k.dm)))k.dm=s,Yl(k,b,c,d-1,k.Cc)}}y.g(T,"isTreeExpanded",T.prototype.Cc);
y.defineProperty(T,{Cc:"isTreeExpanded"},w("Dp"),function(a){var b=this.Dp;if(b!==a){x&&y.j(a,"boolean",T,"isTreeExpanded");this.Dp=a;var c=this.h;this.i("isTreeExpanded",b,a);b=this.qE;if(b!==q){var d=h;c!==q&&(d=c.Ra,c.Ra=h);b(this);c!==q&&(c.Ra=d)}c!==q&&c.va.cb||(a?(a=2,2>a&&(a=2),c!==q&&!c.xd&&(c.xd=h,b=c.Dc,d=new na(T),d.add(this),Yl(this,d,b,a,s),c.xd=s)):(a=1,1>a&&(a=1),c!==q&&!c.xd&&(c.xd=h,b=c.Dc,d=new na(T),d.add(this),Wl(this,d,b,a,h),c.xd=s)))}});y.g(T,"wasTreeExpanded",T.prototype.dm);
y.defineProperty(T,{dm:"wasTreeExpanded"},w("br"),function(a){var b=this.br;b!==a&&(x&&y.j(a,"boolean",T,"wasTreeExpanded"),this.br=a,this.i("wasTreeExpanded",b,a))});y.g(T,"treeExpandedChanged",T.prototype.qE);y.defineProperty(T,{qE:"treeExpandedChanged"},w("Xq"),function(a){var b=this.Xq;b!==a&&(a!==q&&y.j(a,"function",T,"treeExpandedChanged"),this.Xq=a,this.i("treeExpandedChanged",b,a))});y.g(T,"isTreeLeaf",T.prototype.gh);
y.defineProperty(T,{gh:"isTreeLeaf"},w("Ep"),function(a){var b=this.Ep;b!==a&&(x&&y.j(a,"boolean",T,"isTreeLeaf"),this.Ep=a,this.i("isTreeLeaf",b,a))});
function U(){R.call(this,ig);this.xf=q;this.Ig="";this.Ef=this.pp=q;this.Xg="";this.Wq=q;this.tq=this.sq=this.rq=s;this.Fp=h;this.Po=cj;this.$o=0;this.cp=cj;this.dp=NaN;this.fn=ok;this.Nq=0.5;this.Oh=this.Ke=q;this.sc=(new F(A)).freeze();this.Wd=q;this.Zg=s;this.xx=q;this.Jx=s;this.Tk=this.Ah=this.Na=q;this.ke=0;this.th=new F(B);this.Ox=new A;this.lB=this.jB=q;this.uw=s;this.P=q}y.ba("Link",U);y.Ka(U,R);
U.prototype.cloneProtected=function(a){R.prototype.cloneProtected.call(this,a);a.Ig=this.Ig;a.pp=this.pp;a.Xg=this.Xg;a.Wq=this.Wq;a.rq=this.rq;a.sq=this.sq;a.tq=this.tq;a.Fp=this.Fp;a.Po=this.Po;a.$o=this.$o;a.cp=this.cp;a.dp=this.dp;a.fn=this.fn;a.Nq=this.Nq};U.prototype.bh=function(a){R.prototype.bh.call(this,a);this.Ig=a.Ig;this.Xg=a.Xg;a.Oh=q;a.Wd=q;a.Vb();a.Tk=this.Tk;a.ke=this.ke};var ok;U.Normal=ok=y.w(U,"Normal",1);var ik;U.Orthogonal=ik=y.w(U,"Orthogonal",2);var xf;
U.AvoidsNodes=xf=y.w(U,"AvoidsNodes",3);var cj;U.None=cj=y.w(U,"None",0);var vg;U.Bezier=vg=y.w(U,"Bezier",9);var jk;U.JumpGap=jk=y.w(U,"JumpGap",10);var kk;U.JumpOver=kk=y.w(U,"JumpOver",11);var lk;U.End=lk=y.w(U,"End",17);var mk;U.Scale=mk=y.w(U,"Scale",18);var nk;U.Stretch=nk=y.w(U,"Stretch",19);var sl;U.OrientAlong=sl=y.w(U,"OrientAlong",21);var Zl;U.OrientPlus90=Zl=y.w(U,"OrientPlus90",22);var $l;U.OrientMinus90=$l=y.w(U,"OrientMinus90",23);var am;U.OrientOpposite=am=y.w(U,"OrientOpposite",24);
var bm;U.OrientUpright=bm=y.w(U,"OrientUpright",25);var cm;U.OrientPlus90Upright=cm=y.w(U,"OrientPlus90Upright",26);var dm;U.OrientMinus90Upright=dm=y.w(U,"OrientMinus90Upright",27);var em;U.OrientUpright45=em=y.w(U,"OrientUpright45",28);U.prototype.fe=function(){this.P={zi:Ib,Zi:Ib,xi:NaN,Xi:NaN,wi:Pl,Wi:Pl,yi:NaN,Yi:NaN}};U.prototype.Bk=function(){var a=this.da;if(a!==q&&(bi(a)||ci(a)))return s;a=this.fa;return a!==q&&(bi(a)||ci(a))?s:h};U.prototype.Pd=ca(s);
U.prototype.computeAngle=function(a,b,c){switch(b){default:case cj:a=0;break;case sl:a=c;break;case Zl:a=c+90;break;case $l:a=c-90;break;case am:a=c+180;break;case bm:a=H.Yr(c);90<a&&270>a&&(a-=180);break;case cm:a=H.Yr(c+90);90<a&&270>a&&(a-=180);break;case dm:a=H.Yr(c-90);90<a&&270>a&&(a-=180);break;case em:a=H.Yr(c);if(45<a&&135>a||225<a&&315>a)return 0;90<a&&270>a&&(a-=180)}return H.Yr(a)};y.g(U,"fromNode",U.prototype.da);
y.defineProperty(U,{da:"fromNode"},w("xf"),function(a){var b=this.xf;if(b!==a){x&&a!==q&&y.l(a,T,U,"fromNode");var c=this.Oc;b!==q&&(this.Ef!==b&&Ul(b,this,c),c!==q&&(c.Kd=q),fm(this),b.J(zi));this.xf=a;this.Ah=q;this.Vb();var d=this.h;if(d!==q){var e=this.data,g=d.ea;if(e!==q)if(g instanceof O){var k=a!==q?a.data:q;g.xv(e,g.sb(k))}else g instanceof yd&&(k=a!==q?a.data:q,d.Dc?g.vf(e,g.sb(k)):(b!==q&&g.vf(b.data,f),g.vf(k,g.sb(this.Ef!==q?this.Ef.data:q))))}e=this.Oc;g=this.Dy;g!==q&&(k=h,d!==q&&(k=
d.Ra,d.Ra=h),g(this,c,e),d!==q&&(d.Ra=k));a!==q&&(this.Ef!==a&&Tl(a,this,e),e!==q&&(e.Kd=q),gm(this),a.J(ui));this.i("fromNode",b,a);Mi(this)}});y.g(U,"fromPortId",U.prototype.Lf);
y.defineProperty(U,{Lf:"fromPortId"},w("Ig"),function(a){var b=this.Ig;if(b!==a){x&&y.j(a,"string",U,"fromPortId");var c=this.Oc;c!==q&&(c.Kd=q);fm(this);this.Ig=a;var d=this.Oc;d!==q&&(d.Kd=q);var e=this.h;if(e!==q){var g=this.data,k=e.ea;g!==q&&k instanceof O&&k.ls(g,a)}c!==d&&(this.Ah=q,this.Vb(),g=this.Dy,g!==q&&(k=h,e!==q&&(k=e.Ra,e.Ra=h),g(this,c,d),e!==q&&(e.Ra=k)));gm(this);this.i("fromPortId",b,a)}});y.A(U,{Oc:"fromPort"},function(){var a=this.xf;return a===q?q:a.xr(this.Ig)});
y.g(U,"fromPortChanged",U.prototype.Dy);y.defineProperty(U,{Dy:"fromPortChanged"},w("pp"),function(a){var b=this.pp;b!==a&&(a!==q&&y.j(a,"function",U,"fromPortChanged"),this.pp=a,this.i("fromPortChanged",b,a))});y.g(U,"toNode",U.prototype.fa);
y.defineProperty(U,{fa:"toNode"},w("Ef"),function(a){var b=this.Ef;if(b!==a){x&&a!==q&&y.l(a,T,U,"toNode");var c=this.Ad;b!==q&&(this.xf!==b&&Ul(b,this,c),c!==q&&(c.Kd=q),fm(this),b.J(zi));this.Ef=a;this.Ah=q;this.Vb();var d=this.h;if(d!==q){var e=this.data,g=d.ea;if(e!==q)if(g instanceof O){var k=a!==q?a.data:q;g.yv(e,g.sb(k))}else g instanceof yd&&(k=a!==q?a.data:q,d.Dc?(b!==q&&g.vf(b.data,f),g.vf(k,g.sb(this.xf!==q?this.xf.data:q))):g.vf(e,g.sb(k)))}e=this.Ad;g=this.Ez;g!==q&&(k=h,d!==q&&(k=d.Ra,
d.Ra=h),g(this,c,e),d!==q&&(d.Ra=k));a!==q&&(this.xf!==a&&Tl(a,this,e),e!==q&&(e.Kd=q),gm(this),a.J(ui));this.i("toNode",b,a);Mi(this)}});y.g(U,"toPortId",U.prototype.zg);
y.defineProperty(U,{zg:"toPortId"},w("Xg"),function(a){var b=this.Xg;if(b!==a){x&&y.j(a,"string",U,"toPortId");var c=this.Ad;c!==q&&(c.Kd=q);fm(this);this.Xg=a;var d=this.Ad;d!==q&&(d.Kd=q);var e=this.h;if(e!==q){var g=this.data,k=e.ea;g!==q&&k instanceof O&&k.os(g,a)}c!==d&&(this.Ah=q,this.Vb(),g=this.Ez,g!==q&&(k=h,e!==q&&(k=e.Ra,e.Ra=h),g(this,c,d),e!==q&&(e.Ra=k)));gm(this);this.i("toPortId",b,a)}});y.A(U,{Ad:"toPort"},function(){var a=this.Ef;return a===q?q:a.xr(this.Xg)});
y.g(U,"toPortChanged",U.prototype.Ez);y.defineProperty(U,{Ez:"toPortChanged"},w("Wq"),function(a){var b=this.Wq;b!==a&&(a!==q&&y.j(a,"function",U,"toPortChanged"),this.Wq=a,this.i("toPortChanged",b,a))});y.defineProperty(U,{gb:"fromSpot"},function(){return this.P!==q?this.P.zi:Ib},function(a){this.P===q&&this.fe();var b=this.P.zi;b.L(a)||(x&&y.l(a,J,U,"fromSpot"),a=a.U(),this.P.zi=a,this.i("fromSpot",b,a),this.Vb())});
y.defineProperty(U,{Kl:"fromEndSegmentLength"},function(){return this.P!==q?this.P.xi:NaN},function(a){this.P===q&&this.fe();var b=this.P.xi;b!==a&&(x&&y.j(a,"number",U,"fromEndSegmentLength"),0>a&&y.ka(a,">= 0",U,"fromEndSegmentLength"),this.P.xi=a,this.i("fromEndSegmentLength",b,a),this.Vb())});
y.defineProperty(U,{Su:"fromEndSegmentDirection"},function(){return this.P!==q?this.P.wi:Pl},function(a){this.P===q&&this.fe();var b=this.P.wi;b!==a&&(x&&y.rb(a,T,U,"fromEndSegmentDirection"),this.P.wi=a,this.i("fromEndSegmentDirection",b,a),this.Vb())});y.defineProperty(U,{Tu:"fromShortLength"},function(){return this.P!==q?this.P.yi:NaN},function(a){this.P===q&&this.fe();var b=this.P.yi;b!==a&&(x&&y.j(a,"number",U,"fromShortLength"),this.P.yi=a,this.i("fromShortLength",b,a),this.Vb())});
y.defineProperty(U,{kb:"toSpot"},function(){return this.P!==q?this.P.Zi:Ib},function(a){this.P===q&&this.fe();var b=this.P.Zi;b.L(a)||(x&&y.l(a,J,U,"toSpot"),a=a.U(),this.P.Zi=a,this.i("toSpot",b,a),this.Vb())});y.defineProperty(U,{cm:"toEndSegmentLength"},function(){return this.P!==q?this.P.Xi:NaN},function(a){this.P===q&&this.fe();var b=this.P.Xi;b!==a&&(x&&y.j(a,"number",U,"toEndSegmentLength"),0>a&&y.ka(a,">= 0",U,"toEndSegmentLength"),this.P.Xi=a,this.i("toEndSegmentLength",b,a),this.Vb())});
y.defineProperty(U,{Fv:"toEndSegmentDirection"},function(){return this.P!==q?this.P.Wi:Pl},function(a){this.P===q&&this.fe();var b=this.P.Wi;b!==a&&(x&&y.rb(a,T,U,"toEndSegmentDirection"),this.P.Wi=a,this.i("toEndSegmentDirection",b,a),this.Vb())});y.defineProperty(U,{Gv:"toShortLength"},function(){return this.P!==q?this.P.Yi:NaN},function(a){this.P===q&&this.fe();var b=this.P.Yi;b!==a&&(x&&y.j(a,"number",U,"toShortLength"),this.P.Yi=a,this.i("toShortLength",b,a),this.Vb())});
function Mi(a){var b=a.da,c=a.fa;b!==q&&c!==q?hm(a,b.oG(c)):hm(a,q)}function hm(a,b){var c=a.Rj;if(c!==b){c!==q&&Kl(c,a);a.Rj=b;b!==q&&Ll(b,a);var d=a.sy;if(d!==q){var e=h,g=a.h;g!==q&&(e=g.Ra,g.Ra=h);d(a,c,b);g!==q&&(g.Ra=e)}a.Zg&&(a.jB===c||a.lB===c)&&a.Vb()}}U.prototype.getOtherNode=U.prototype.Ey=function(a){x&&y.l(a,T,U,"getOtherNode:node");var b=this.da;return a===b?this.fa:b};
U.prototype.getOtherPort=U.prototype.JI=function(a){x&&y.l(a,P,U,"getOtherPort:port");var b=this.Oc;return a===b?this.Ad:b};y.A(U,{UI:"isLabeledLink"},function(){return this.Ke===q?s:0<this.Ke.count});y.A(U,{tj:"labelNodes"},function(){return this.Ke===q?y.$f:this.Ke.k});function Vl(a,b){a.Ke===q&&(a.Ke=new na(T));a.Ke.add(b);a.aa()}
U.prototype.Er=function(){R.prototype.Er.call(this);im(this)&&jg(this,this.ua);var a=this.xf,b=this.Ef;if(a!==q){var c=this.Oc;c!==q&&(c.Kd=q);Tl(a,this,c);gm(this)}b!==q&&(c=this.Ad,c!==q&&(c.Kd=q),Tl(b,this,c),gm(this))};U.prototype.Fr=function(){R.prototype.Fr.call(this);im(this)&&jg(this,this.ua);var a=this.xf,b=this.Ef;if(a!==q){var c=this.Oc;c!==q&&(c.Kd=q);Ul(a,this,c);fm(this)}b!==q&&(c=this.Ad,c!==q&&(c.Kd=q),Ul(b,this,c),fm(this))};
U.prototype.El=function(){if(this.Ke!==q){var a=this.h;if(a===q)return;for(var b=this.Ke.copy().k;b.next();)a.remove(b.value)}b=this.data;b!==q&&(a=this.h,a!==q&&(a=a.ea,a instanceof O?a.nH(b):a instanceof yd&&a.vf(b,f)))};U.prototype.move=U.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);c=a.x-c;b=a.y-b;R.prototype.move.call(this,a);this.Ek(c,b);for(a=this.tj;a.next();){var d=a.value,e=d.position;d.moveTo(e.x+c,e.y+b)}};y.g(U,"relinkableFrom",U.prototype.rD);
y.defineProperty(U,{rD:"relinkableFrom"},w("rq"),function(a){var b=this.rq;b!==a&&(x&&y.j(a,"boolean",U,"relinkableFrom"),this.rq=a,this.i("relinkableFrom",b,a))});y.g(U,"relinkableTo",U.prototype.sD);y.defineProperty(U,{sD:"relinkableTo"},w("sq"),function(a){var b=this.sq;b!==a&&(x&&y.j(a,"boolean",U,"relinkableTo"),this.sq=a,this.i("relinkableTo",b,a))});U.prototype.canRelinkFrom=function(){if(!this.rD)return s;var a=this.layer;if(a!==q&&!a.dj)return s;a=a.h;return a!==q&&!a.dj?s:h};
U.prototype.canRelinkTo=function(){if(!this.sD)return s;var a=this.layer;if(a!==q&&!a.dj)return s;a=a.h;return a!==q&&!a.dj?s:h};y.g(U,"resegmentable",U.prototype.qv);y.defineProperty(U,{qv:"resegmentable"},w("tq"),function(a){var b=this.tq;b!==a&&(x&&y.j(a,"boolean",U,"resegmentable"),this.tq=a,this.i("resegmentable",b,a))});y.g(U,"isTreeLink",U.prototype.ic);
y.defineProperty(U,{ic:"isTreeLink"},w("Fp"),function(a){var b=this.Fp;b!==a&&(x&&y.j(a,"boolean",U,"isTreeLink"),this.Fp=a,this.i("isTreeLink",b,a))});y.A(U,{path:"path"},function(){var a=this.Oh;if(a!==q)return a;a=this.za;a=Mj(this,a,a.length);return a instanceof V?this.Oh=a:q});U.prototype.rp=w("path");U.prototype.Nw=w("sc");U.prototype.Ai=function(){this.updateRoute();var a=new B;this.Qe(a);return this.xx=a};
U.prototype.Qe=function(a){var b=Infinity,c=Infinity,d=this.qa;if(0===d)return a.q(NaN,NaN,0,0),a;if(1===d)d=this.o(0),b=Math.min(d.x,b),c=Math.min(d.y,c),a.q(d.x,d.y,0,0);else if(2===d){var e=this.o(0),g=this.o(1),b=Math.min(e.x,g.x),c=Math.min(e.y,g.y);a.q(e.x,e.y,0,0);a.yj(g)}else if(this.computeCurve()===vg&&3<=d&&!this.Ib)if(e=this.o(0),b=e.x,c=e.y,a.q(b,c,0,0),3===d)d=this.o(1),b=Math.min(d.x,b),c=Math.min(d.y,c),g=this.o(2),b=Math.min(g.x,b),c=Math.min(g.y,c),H.Dn(e.x,e.y,d.x,d.y,d.x,d.y,g.x,
g.y,0.5,a);else for(var k,l,m=3;m<d;m+=3)k=this.o(m-2),m+3>=d&&(m=d-1),l=this.o(m-1),g=this.o(m),H.Dn(e.x,e.y,k.x,k.y,l.x,l.y,g.x,g.y,0.5,a),b=Math.min(g.x,b),c=Math.min(g.y,c),e=g;else{e=this.o(0);g=this.o(1);b=Math.min(e.x,g.x);c=Math.min(e.y,g.y);a.q(e.x,e.y,0,0);a.yj(g);for(m=2;m<d;m++)e=this.o(m),b=Math.min(e.x,b),c=Math.min(e.y,c),a.yj(e)}this.Ox.q(b-a.x,c-a.y);return a};y.A(U,{dD:"midPoint"},function(){this.updateRoute();return this.computeMidPoint(new A)});
U.prototype.computeMidPoint=function(a){var b=this.qa;if(0===b)return a.assign(H.KE),a;if(1===b)return a.assign(this.o(0)),a;if(2===b){var c=this.o(0),d=this.o(1);a.q((c.x+d.x)/2,(c.y+d.y)/2);return a}if(this.computeCurve()===vg&&3<=b&&!this.Ib){if(3===b)return this.o(1);var b=(b-1)/3|0,e=3*(b/2|0);1===b%2?(c=this.o(e),d=this.o(e+1),b=this.o(e+2),e=this.o(e+3),H.IF(c.x,c.y,d.x,d.y,b.x,b.y,e.x,e.y,a)):a.assign(this.o(e));return a}for(var e=0,g=y.ub(),k=0;k<b-1;k++)c=this.o(k),d=this.o(k+1),H.Ha(c.x,
d.x)?(c=d.y-c.y,0>c&&(c=-c)):H.Ha(c.y,d.y)?(c=d.x-c.x,0>c&&(c=-c)):c=Math.sqrt(c.xk(d)),g.push(c),e+=c;for(d=k=c=0;c<e/2&&k<b;){d=g[k];if(c+d>e/2)break;c+=d;k++}y.ya(g);b=this.o(k);g=this.o(k+1);b.x===g.x?b.y>g.y?a.q(b.x,b.y-(e/2-c)):a.q(b.x,b.y+(e/2-c)):b.y===g.y?b.x>g.x?a.q(b.x-(e/2-c),b.y):a.q(b.x+(e/2-c),b.y):(e=(e/2-c)/d,a.q(b.x+e*(g.x-b.x),b.y+e*(g.y-b.y)));return a};y.A(U,{cD:"midAngle"},function(){this.updateRoute();return this.computeMidAngle()});
U.prototype.computeMidAngle=function(){var a=this.qa;if(2>a)return NaN;if(this.computeCurve()===vg&&4<=a&&!this.Ib){var b=(a-1)/3|0,c=3*(b/2|0);if(1===b%2){var c=Math.floor(c),a=this.o(c),b=this.o(c+1),d=this.o(c+2),c=this.o(c+3);return H.HF(a.x,a.y,b.x,b.y,d.x,d.y,c.x,c.y)}if(0<c&&c+1<a)return a=this.o(c-1),b=this.o(c+1),a.ai(b)}d=a/2|0;if(0===a%2)return a=this.o(d-1),b=this.o(d),a.ai(b);var a=this.o(d-1),b=this.o(d),d=this.o(d+1),c=a.xk(b),e=b.xk(d);return c>e?a.ai(b):b.ai(d)};y.g(U,"points",U.prototype.points);
y.defineProperty(U,{points:"points"},w("sc"),function(a){x&&y.l(a,F,U,"points");var b=this.sc;if(b!==a&&a!==q){a=a.copy();for(var c=a.k;c.next();)c.value.freeze();a.freeze();this.sc=a;this.Mf();jm(this);this.i("points",b,a)}});y.A(U,{qa:"pointsCount"},function(){return this.sc.count});U.prototype.getPoint=U.prototype.o=function(a){return this.sc.n[a]};
U.prototype.setPoint=U.prototype.bf=function(a,b){x&&(y.l(b,A,U,"setPoint"),b.V()||y.m("Link.setPoint called with a Point that does not have real numbers: "+b.toString()));this.Wd===q&&y.m("Call Link.startRoute before modifying the points of the route.");this.sc.Vf(a,b)};U.prototype.setPointAt=U.prototype.R=function(a,b,c){x&&(y.p(b,U,"setPointAt:x"),y.p(c,U,"setPointAt:y"));this.Wd===q&&y.m("Call Link.startRoute before modifying the points of the route.");this.sc.Vf(a,new A(b,c))};
U.prototype.insertPoint=U.prototype.OI=function(a,b){x&&(y.l(b,A,U,"insertPoint"),b.V()||y.m("Link.insertPoint called with a Point that does not have real numbers: "+b.toString()));this.Wd===q&&y.m("Call Link.startRoute before modifying the points of the route.");this.sc.wd(a,b)};U.prototype.insertPointAt=U.prototype.C=function(a,b,c){x&&(y.p(b,U,"insertPointAt:x"),y.p(c,U,"insertPointAt:y"));this.Wd===q&&y.m("Call Link.startRoute before modifying the points of the route.");this.sc.wd(a,new A(b,c))};
U.prototype.addPoint=U.prototype.$g=function(a){x&&(y.l(a,A,U,"addPoint"),a.V()||y.m("Link.addPoint called with a Point that does not have real numbers: "+a.toString()));this.Wd===q&&y.m("Call Link.startRoute before modifying the points of the route.");this.sc.add(a)};U.prototype.addPointAt=U.prototype.pk=function(a,b){x&&(y.p(a,U,"insertPointAt:x"),y.p(b,U,"insertPointAt:y"));this.Wd===q&&y.m("Call Link.startRoute before modifying the points of the route.");this.sc.add(new A(a,b))};
U.prototype.removePoint=U.prototype.xD=function(a){this.Wd===q&&y.m("Call Link.startRoute before modifying the points of the route.");this.sc.kd(a)};U.prototype.clearPoints=U.prototype.En=function(){this.Wd===q&&y.m("Call Link.startRoute before modifying the points of the route.");this.sc.clear()};U.prototype.movePoints=U.prototype.Ek=function(a,b){for(var c=new F(A),d=this.sc.k;d.next();){var e=d.value;c.add(new A(e.x+a,e.y+b))}this.points=c};
U.prototype.startRoute=U.prototype.Mk=function(){this.Wd===q&&(this.Wd=this.sc,this.sc=this.sc.copy())};
U.prototype.commitRoute=U.prototype.Zh=function(){if(this.Wd!==q){for(var a=this.Wd,b=this.sc,c=Infinity,d=Infinity,e=a.count,g=0;g<e;g++)var k=a.n[g],c=Math.min(k.x,c),d=Math.min(k.y,d);for(var l=Infinity,m=Infinity,n=b.count,g=0;g<n;g++)k=b.n[g],l=Math.min(k.x,l),m=Math.min(k.y,m),k.freeze();b.freeze();if(n===e)for(g=0;g<n;g++)if(e=a.n[g],k=b.n[g],e.x-c!==k.x-l||e.y-d!==k.y-m){this.Mf();break}this.Wd=q;jm(this);this.i("points",a,b)}};
U.prototype.rollbackRoute=U.prototype.pH=function(){this.Wd!==q&&(this.sc=this.Wd,this.Wd=q)};function jm(a){0===a.sc.count?a.Zg=s:(a.Zg=h,km(a,s))}U.prototype.invalidateRoute=U.prototype.Vb=function(){if(!this.Jx&&(!this.h||!this.h.va.cb)){var a=this.rp();a!==q&&(this.Zg=s,this.Mf(),a.aa())}};y.defineProperty(U,{ts:q},w("Jx"),ba("Jx"));U.prototype.updateRoute=function(){if(!this.Zg&&!this.uw){var a=h;try{this.uw=h,this.Mk(),a=this.computePoints()}finally{this.uw=s,a?this.Zh():this.pH()}}};
U.prototype.computePoints=function(){var a=this.da,b=q,b=a===q?q:this.Oc;if(b!==q){var c=ak(b);c===a||!a.yb()?(c=Hl(a),c!==q&&c!==a?(a=c,b=c.xr("")):a=c):b=c}this.jB=a;if(a===q||b===q||!a.location.V())return s;var c=this.fa,d=q,d=c===q?q:this.Ad;if(d!==q){var e=ak(d);e===c||!c.yb()?(e=Hl(c),e!==q&&e!==c?(c=e,d=e.xr("")):c=e):d=e}this.lB=c;if(c===q||d===q||!c.location.V())return s;var e=this.qa,g=lm(this,b),k=mm(this,d),l=b===d,m=this.Ib,n=this.Se===vg;this.Ah=l&&!m?n=h:s;var p=this.ru===cj||l;if(!m&&
g===Hb&&k===Hb&&!l){if(g=s,!p&&3<=e&&(p=this.getLinkPoint(a,b,Hb,h,s,c,d),g=this.getLinkPoint(c,d,Hb,s,s,a,b),g=this.adjustPoints(0,p,e-1,g)),!g)if(this.En(),n){var e=this.getLinkPoint(a,b,Hb,h,s,c,d),p=this.getLinkPoint(c,d,Hb,s,s,a,b),g=p.x-e.x,k=p.y-e.y,l=this.computeCurviness(),n=m=0,r=e.x+g/3,t=e.y+k/3,u=r,v=t;H.I(k,0)?v=0<g?v-l:v+l:(m=-g/k,n=Math.sqrt(l*l/(m*m+1)),0>l&&(n=-n),u=(0>k?-1:1)*n+r,v=m*(u-r)+t);var r=e.x+2*g/3,t=e.y+2*k/3,z=r,C=t;H.I(k,0)?C=0<g?C-l:C+l:(z=(0>k?-1:1)*n+r,C=m*(z-r)+
t);this.En();this.$g(e);this.pk(u,v);this.pk(z,C);this.$g(p);this.bf(0,this.getLinkPoint(a,b,Hb,h,s,c,d));this.bf(3,this.getLinkPoint(c,d,Hb,s,s,a,b))}else e=c,c=this.getLinkPoint(a,b,Hb,h,s,e,d),d=this.getLinkPoint(e,d,Hb,s,s,a,b),!isNaN(this.Hu)||0!==this.ke&&!this.Ib?(k=d.x-c.x,a=d.y-c.y,b=this.computeCurviness(),e=c.x+k/2,p=c.y+a/2,g=e,l=p,H.I(a,0)?l=0<k?l-b:l+b:(k=-k/a,g=Math.sqrt(b*b/(k*k+1)),0>b&&(g=-g),g=(0>a?-1:1)*g+e,l=k*(g-e)+p),this.$g(c),this.pk(g,l)):this.$g(c),this.$g(d)}else{n=this.kh===
xf;p&&(m&&n||l)&&this.En();var K=this.computeCurviness(),r=this.getLinkPoint(a,b,g,h,m,c,d),t=v=u=0;if(m||g!==Hb||l)if(z=this.computeEndSegmentLength(a,b,g,h),t=this.getLinkDirection(a,b,r,g,h,m,c,d),l&&(t-=m?90:30,0>K&&(t-=180)),0>t?t+=360:360<=t&&(t-=360),l&&(z+=Math.abs(K)),0===t?u=z:90===t?v=z:180===t?u=-z:270===t?v=-z:(u=z*Math.cos(t*Math.PI/180),v=z*Math.sin(t*Math.PI/180)),Cb(g)&&l){var I=b.hb(Sb,y.M()),Q=y.ec(I.x+1E3*u,I.y+1E3*v);this.getLinkPointFromPoint(a,b,I,Q,h,r);y.B(I);y.B(Q)}var z=
this.getLinkPoint(c,d,k,s,m,a,b),L=C=0,S=0;if(m||k!==Hb||l)I=this.computeEndSegmentLength(c,d,k,s),S=this.getLinkDirection(c,d,z,k,s,m,a,b),l&&(S+=m?0:30,0>K&&(S+=180)),0>S?S+=360:360<=S&&(S-=360),l&&(I+=Math.abs(K)),0===S?C=I:90===S?L=I:180===S?C=-I:270===S?L=-I:(C=I*Math.cos(S*Math.PI/180),L=I*Math.sin(S*Math.PI/180)),Cb(k)&&l&&(I=d.hb(Sb,y.M()),Q=y.ec(I.x+1E3*C,I.y+1E3*L),this.getLinkPointFromPoint(c,d,I,Q,s,z),y.B(I),y.B(Q));d=r;if(m||g!==Hb||l)d=new A(r.x+u,r.y+v);b=z;if(m||k!==Hb||l)b=new A(z.x+
C,z.y+L);!p&&!m&&Cb(g)&&3<e&&this.adjustPoints(0,r,e-2,b)?this.bf(e-1,z):!p&&!m&&Cb(k)&&3<e&&this.adjustPoints(1,d,e-1,z)?this.bf(0,r):!p&&!m&&4<e&&this.adjustPoints(1,d,e-2,b)?(this.bf(0,r),this.bf(e-1,z)):!p&&m&&6<=e&&!n&&this.adjustPoints(1,d,e-2,b)?(this.bf(0,r),this.bf(e-1,z)):(this.En(),this.$g(r),(m||g!==Hb||l)&&this.$g(d),m&&this.addOrthoPoints(d,t,b,S,a,c),(m||k!==Hb||l)&&this.$g(b),this.$g(z))}return h};
function nm(a,b){Math.abs(b.x-a.x)>Math.abs(b.y-a.y)?(b.x=b.x>=a.x?a.x+9E9:a.x-9E9,b.y=a.y):(b.y=b.y>=a.y?a.y+9E9:a.y-9E9,b.x=a.x);return b}
U.prototype.getLinkPointFromPoint=function(a,b,c,d,e,g){g===f&&(g=new A);if(a===q||b===q)return g.assign(c),g;a.yb()||(e=Hl(a),e!==q&&e!==a&&(b=e.port));var k;a=q;if(b.ha===q)e=d.x,d=d.y,k=c.x,c=c.y;else{a=b.ha.oe;e=1/(a.m11*a.m22-a.m12*a.m21);k=a.m22*e;var l=-a.m12*e,m=-a.m21*e,n=a.m11*e,p=e*(a.m21*a.dy-a.m22*a.dx),r=e*(a.m12*a.dx-a.m11*a.dy);e=d.x*k+d.y*m+p;d=d.x*l+d.y*n+r;k=c.x*k+c.y*m+p;c=c.x*l+c.y*n+r}b.Ar(e,d,k,c,g);a&&g.transform(a);return g};
function om(a,b){var c=a.Kd;c===q&&(c=new pm,c.port=a,c.vc=a.W,a.Kd=c);return qm(c,b)}U.prototype.getLinkPoint=function(a,b,c,d,e,g,k,l){l===f&&(l=new A);if(yb(c))return b.hb(c,l),l;if(Bb(c)&&(c=om(b,this),c!==q))return l.assign(c.io),l;c=b.hb(Sb,y.M());g=q;this.qa>(e?6:2)?(k=d?this.o(1):this.o(this.qa-2),e&&(k=nm(c,k.copy()))):(g=y.M(),k=k.hb(Sb,g),e&&(k=nm(c,k)));this.getLinkPointFromPoint(a,b,c,k,d,l);y.B(c);g!==q&&y.B(g);return l};
U.prototype.getLinkDirection=function(a,b,c,d,e,g,k,l){a:if(yb(d))c=d.x>d.y?d.x>1-d.y?0:d.x<1-d.y?270:315:d.x<d.y?d.x>1-d.y?90:d.x<1-d.y?180:135:0.5>d.x?225:0.5<d.x?45:0;else{if(Bb(d)&&(a=om(b,this),a!==q))switch(a.je){case y.ld:c=270;break a;case y.Sc:c=180;break a;default:case y.ad:c=0;break a;case y.$c:c=90;break a}a=b.hb(Sb,y.M());d=q;this.qa>(g?6:2)?(l=e?this.o(1):this.o(this.qa-2),l=g?nm(a,l.copy()):c):(d=y.M(),l=l.hb(Sb,d));c=Math.abs(l.x-a.x)>Math.abs(l.y-a.y)?l.x>=a.x?0:180:l.y>=a.y?90:270;
y.B(a);d!==q&&y.B(d)}g=Pl;g=e?this.Su:this.Fv;g===Pl&&(g=e?b.Su:b.Fv);switch(g){case Ql:b=b.yk();c+=b;360<=c&&(c-=360);break;case Pl:case hj:b=b.yk();if(0===b)break;45<=b&&135>b?c+=90:135<=b&&225>b?c+=180:225<=b&&315>b&&(c+=270);360<=c&&(c-=360)}return c};U.prototype.computeEndSegmentLength=function(a,b,c,d){if(Bb(c)&&(a=om(b,this),a!==q))return a.Mu;a=NaN;a=d?this.Kl:this.cm;isNaN(a)&&(a=d?b.Kl:b.cm);isNaN(a)&&(a=10);return a};
U.prototype.computeSpot=function(a){return a?lm(this,this.Oc):mm(this,this.Ad)};function lm(a,b){var c=a.gb;Db(c)&&(b===f&&(b=a.Oc),b!==q&&(c=b.gb));return c===Ib?Hb:c}function mm(a,b){var c=a.kb;Db(c)&&(b===f&&(b=a.Ad),b!==q&&(c=b.kb));return c===Ib?Hb:c}U.prototype.computeShortLength=function(a){return a?rm(this):sm(this)};function rm(a){var b=a.Tu;isNaN(b)&&(a=a.Oc,a!==q&&(b=a.Tu));return isNaN(b)?0:b}function sm(a){var b=a.Gv;isNaN(b)&&(a=a.Ad,a!==q&&(b=a.Gv));return isNaN(b)?0:b}
U.prototype.oj=function(a,b,c,d,e,g){if(this.$e===s)return s;b===f&&(b=q);c===f&&(c=q);var k=g;g===f&&(k=y.yg(),k.reset());k.multiply(this.transform);if(this.Bl(a,k))return gl(this,b,c,e),g===f&&y.ye(k),h;if(this.qf(a,k)){var l=s;if(!this.hg)for(var m=this.za.length;m--;){var n=this.za.n[m];if(n.visible||n===this.Wb){var p=n.ua,r=this.Ta;if(!(p.x>r.width||p.y>r.height||0>p.x+p.width||0>p.y+p.height)){p=y.yg();p.set(k);if(n instanceof D)l=n.oj(a,b,c,d,e,p);else if(this.path===n){var l=n,t=a,u=d,r=
p;if(l.$e===s)l=s;else if(r.multiply(l.transform),u)b:{var v=t,z=r;if(l.Bl(v,z))l=h;else{if(z===f&&(z=l.transform,v.ij(l.ua))){l=h;break b}var r=v.left,t=v.right,u=v.top,v=v.bottom,C=y.M(),K=y.M(),I=y.M(),Q=y.yg();Q.set(z);Q.iD(l.transform);Q.Iy();K.x=t;K.y=u;K.transform(Q);C.x=r;C.y=u;C.transform(Q);z=s;ql(l,C,K,I)?z=h:(C.x=t,C.y=v,C.transform(Q),ql(l,C,K,I)?z=h:(K.x=r,K.y=v,K.transform(Q),ql(l,C,K,I)?z=h:(C.x=r,C.y=u,C.transform(Q),ql(l,C,K,I)&&(z=h))));y.ye(Q);y.B(C);y.B(K);y.B(I);l=z}}else l=
l.Bl(t,r)}else l=lj(n,a,d,p);l&&(b!==q&&(n=b(n)),n&&(c===q||c(n))&&e.add(n));y.ye(p)}}}g===f&&y.ye(k);return l||this.background!==q||this.ej!==q}g===f&&y.ye(k);return s};y.A(U,{Ib:"isOrthogonal"},function(){var a=this.fn;return a===ik||a===xf});U.prototype.computeCurve=function(){if(this.Ah===q){var a=this.Ib;this.Ah=this.Oc===this.Ad&&!a}return this.Ah?vg:this.Se};U.prototype.computeCorner=function(){if(this.Se===vg)return 0;var a=this.UB;if(isNaN(a)||0>a)a=10;return a};
U.prototype.computeCurviness=function(){var a=this.Hu;if(isNaN(a)){var b=this.ke;if(0!==b){var c=this.Tk,a=c!==q?c.spacing:10,c=Math.abs(b),a=a/2+((c-1)/2|0)*a;0===c%2&&(a=-a);0>b&&(a=-a)}else a=10}return a};
U.prototype.adjustPoints=function(a,b,c,d){var e=this.ru;if(this.Ib){if(e===mk)return s;e===nk&&(e=lk)}switch(e){case mk:var g=this.o(a),k=this.o(c);if(!g.L(b)||!k.L(d)){var e=g.x,g=g.y,l=k.x-e,m=k.y-g,n=Math.sqrt(l*l+m*m);if(!H.I(n,0)){var p;H.I(l,0)?p=0>m?-Math.PI/2:Math.PI/2:(p=Math.atan(m/Math.abs(l)),0>l&&(p=Math.PI-p));var k=b.x,r=b.y,l=d.x-k,t=d.y-r,m=Math.sqrt(l*l+t*t);H.I(l,0)?t=0>t?-Math.PI/2:Math.PI/2:(t=Math.atan(t/Math.abs(l)),0>l&&(t=Math.PI-t));n=m/n;p=t-p;this.bf(a,b);for(a+=1;a<c;a++)b=
this.o(a),l=b.x-e,m=b.y-g,b=Math.sqrt(l*l+m*m),H.I(b,0)||(H.I(l,0)?m=0>m?-Math.PI/2:Math.PI/2:(m=Math.atan(m/Math.abs(l)),0>l&&(m=Math.PI-m)),l=m+p,b*=n,this.R(a,k+b*Math.cos(l),r+b*Math.sin(l)));this.bf(c,d)}}return h;case nk:g=this.o(a);r=this.o(c);if(!g.L(b)||!r.L(d)){e=g.x;g=g.y;k=r.x;r=r.y;n=(k-e)*(k-e)+(r-g)*(r-g);l=b.x;p=b.y;var m=d.x,t=d.y,u=0,v=1,u=0!==m-l?(t-p)/(m-l):9E9;0!==u&&(v=Math.sqrt(1+1/(u*u)));this.bf(a,b);for(a+=1;a<c;a++){b=this.o(a);var z=b.x,C=b.y,K=0.5;0!==n&&(K=((e-z)*(e-
k)+(g-C)*(g-r))/n);var I=e+K*(k-e),Q=g+K*(r-g);b=Math.sqrt((z-I)*(z-I)+(C-Q)*(C-Q));C<u*(z-I)+Q&&(b=-b);0<u&&(b=-b);z=l+K*(m-l);K=p+K*(t-p);0!==u?(b=z+b/v,this.R(a,b,K-(b-z)/u)):this.R(a,z,K+b)}this.bf(c,d)}return h;case lk:return this.Ib&&(e=this.o(a),g=this.o(a+1),k=this.o(a+2),H.I(e.y,g.y)?H.I(g.x,k.x)?this.R(a+1,g.x,b.y):H.I(g.y,k.y)&&this.R(a+1,b.x,g.y):H.I(e.x,g.x)&&(H.I(g.y,k.y)?this.R(a+1,b.x,g.y):H.I(g.x,k.x)&&this.R(a+1,g.x,b.y)),e=this.o(c),g=this.o(c-1),k=this.o(c-2),H.I(e.y,g.y)?H.I(g.x,
k.x)?this.R(c-1,g.x,d.y):H.I(g.y,k.y)&&this.R(c-1,d.x,g.y):H.I(e.x,g.x)&&(H.I(g.y,k.y)?this.R(c-1,d.x,g.y):H.I(g.x,k.x)&&this.R(c-1,g.x,d.y))),this.bf(a,b),this.bf(c,d),h;default:return s}};
U.prototype.addOrthoPoints=function(a,b,c,d,e,g){b=-45<=b&&45>b?0:45<=b&&135>b?90:135<=b&&225>b?180:270;d=-45<=d&&45>d?0:45<=d&&135>d?90:135<=d&&225>d?180:270;var k=e.ua.copy(),l=g.ua.copy();if(k.V()&&l.V()){k.qg(8,8);l.qg(8,8);k.yj(a);l.yj(c);var m,n;if(0===b)if(c.x>a.x||270===d&&c.y<a.y&&l.right>a.x||90===d&&c.y>a.y&&l.right>a.x)m=new A(c.x,a.y),n=new A(c.x,(a.y+c.y)/2),180===d?(m.x=this.computeMidOrthoPosition(a.x,c.x,s),n.x=m.x,n.y=c.y):270===d&&c.y<a.y||90===d&&c.y>a.y?(m.x=a.x<l.left?this.computeMidOrthoPosition(a.x,
l.left,s):a.x<l.right&&(270===d&&a.y<l.top||90===d&&a.y>l.bottom)?this.computeMidOrthoPosition(a.x,c.x,s):l.right,n.x=m.x,n.y=c.y):0===d&&(a.x<l.left&&a.y>l.top&&a.y<l.bottom)&&(m.x=a.x,m.y=a.y<c.y?Math.min(c.y,l.top):Math.max(c.y,l.bottom),n.y=m.y);else{m=new A(a.x,c.y);n=new A((a.x+c.x)/2,c.y);if(180===d||90===d&&c.y<k.top||270===d&&c.y>k.bottom){if(180===d&&(l.Ea(a)||k.Ea(c)))m.y=this.computeMidOrthoPosition(a.y,c.y,h);else if(c.y<a.y&&(180===d||90===d))m.y=this.computeMidOrthoPosition(k.top,Math.max(c.y,
l.bottom),h);else if(c.y>a.y&&(180===d||270===d))m.y=this.computeMidOrthoPosition(k.bottom,Math.min(c.y,l.top),h);n.x=c.x;n.y=m.y}if(m.y>k.top&&m.y<k.bottom)if(c.x>=k.left&&c.x<=a.x||a.x<=l.right&&a.x>=c.x){if(90===d||270===d)m=new A(Math.max((a.x+c.x)/2,a.x),a.y),n=new A(m.x,c.y)}else m.y=270===d||(0===d||180===d)&&c.y<a.y?Math.min(c.y,0===d?k.top:Math.min(k.top,l.top)):Math.max(c.y,0===d?k.bottom:Math.max(k.bottom,l.bottom)),n.x=c.x,n.y=m.y}else if(180===b)if(c.x<a.x||270===d&&c.y<a.y&&l.left<a.x||
90===d&&c.y>a.y&&l.left<a.x)m=new A(c.x,a.y),n=new A(c.x,(a.y+c.y)/2),0===d?(m.x=this.computeMidOrthoPosition(a.x,c.x,s),n.x=m.x,n.y=c.y):270===d&&c.y<a.y||90===d&&c.y>a.y?(m.x=a.x>l.right?this.computeMidOrthoPosition(a.x,l.right,s):a.x>l.left&&(270===d&&a.y<l.top||90===d&&a.y>l.bottom)?this.computeMidOrthoPosition(a.x,c.x,s):l.left,n.x=m.x,n.y=c.y):180===d&&(a.x>l.right&&a.y>l.top&&a.y<l.bottom)&&(m.x=a.x,m.y=a.y<c.y?Math.min(c.y,l.top):Math.max(c.y,l.bottom),n.y=m.y);else{m=new A(a.x,c.y);n=new A((a.x+
c.x)/2,c.y);if(0===d||90===d&&c.y<k.top||270===d&&c.y>k.bottom){if(0===d&&(l.Ea(a)||k.Ea(c)))m.y=this.computeMidOrthoPosition(a.y,c.y,h);else if(c.y<a.y&&(0===d||90===d))m.y=this.computeMidOrthoPosition(k.top,Math.max(c.y,l.bottom),h);else if(c.y>a.y&&(0===d||270===d))m.y=this.computeMidOrthoPosition(k.bottom,Math.min(c.y,l.top),h);n.x=c.x;n.y=m.y}if(m.y>k.top&&m.y<k.bottom)if(c.x<=k.right&&c.x>=a.x||a.x>=l.left&&a.x<=c.x){if(90===d||270===d)m=new A(Math.min((a.x+c.x)/2,a.x),a.y),n=new A(m.x,c.y)}else m.y=
270===d||(0===d||180===d)&&c.y<a.y?Math.min(c.y,180===d?k.top:Math.min(k.top,l.top)):Math.max(c.y,180===d?k.bottom:Math.max(k.bottom,l.bottom)),n.x=c.x,n.y=m.y}else if(90===b)if(c.y>a.y||180===d&&c.x<a.x&&l.bottom>a.y||0===d&&c.x>a.x&&l.bottom>a.y)m=new A(a.x,c.y),n=new A((a.x+c.x)/2,c.y),270===d?(m.y=this.computeMidOrthoPosition(a.y,c.y,h),n.x=c.x,n.y=m.y):180===d&&c.x<a.x||0===d&&c.x>a.x?(m.y=a.y<l.top?this.computeMidOrthoPosition(a.y,l.top,h):a.y<l.bottom&&(180===d&&a.x<l.left||0===d&&a.x>l.right)?
this.computeMidOrthoPosition(a.y,c.y,h):l.bottom,n.x=c.x,n.y=m.y):90===d&&(a.y<l.top&&a.x>l.left&&a.x<l.right)&&(m.x=a.x<c.x?Math.min(c.x,l.left):Math.max(c.x,l.right),m.y=a.y,n.x=m.x);else{m=new A(c.x,a.y);n=new A(c.x,(a.y+c.y)/2);if(270===d||0===d&&c.x<k.left||180===d&&c.x>k.right){if(270===d&&(l.Ea(a)||k.Ea(c)))m.x=this.computeMidOrthoPosition(a.x,c.x,s);else if(c.x<a.x&&(270===d||0===d))m.x=this.computeMidOrthoPosition(k.left,Math.max(c.x,l.right),s);else if(c.x>a.x&&(270===d||180===d))m.x=this.computeMidOrthoPosition(k.right,
Math.min(c.x,l.left),s);n.x=m.x;n.y=c.y}if(m.x>k.left&&m.x<k.right)if(c.y>=k.top&&c.y<=a.y||a.y<=l.bottom&&a.y>=c.y){if(0===d||180===d)m=new A(a.x,Math.max((a.y+c.y)/2,a.y)),n=new A(c.x,m.y)}else m.x=180===d||(90===d||270===d)&&c.x<a.x?Math.min(c.x,90===d?k.left:Math.min(k.left,l.left)):Math.max(c.x,90===d?k.right:Math.max(k.right,l.right)),n.x=m.x,n.y=c.y}else if(c.y<a.y||180===d&&c.x<a.x&&l.top<a.y||0===d&&c.x>a.x&&l.top<a.y)m=new A(a.x,c.y),n=new A((a.x+c.x)/2,c.y),90===d?(m.y=this.computeMidOrthoPosition(a.y,
c.y,h),n.x=c.x,n.y=m.y):180===d&&c.x<a.x||0===d&&c.x>=a.x?(m.y=a.y>l.bottom?this.computeMidOrthoPosition(a.y,l.bottom,h):a.y>l.top&&(180===d&&a.x<l.left||0===d&&a.x>l.right)?this.computeMidOrthoPosition(a.y,c.y,h):l.top,n.x=c.x,n.y=m.y):270===d&&(a.y>l.bottom&&a.x>l.left&&a.x<l.right)&&(m.x=a.x<c.x?Math.min(c.x,l.left):Math.max(c.x,l.right),m.y=a.y,n.x=m.x);else{m=new A(c.x,a.y);n=new A(c.x,(a.y+c.y)/2);if(90===d||0===d&&c.x<k.left||180===d&&c.x>k.right){if(90===d&&(l.Ea(a)||k.Ea(c)))m.x=this.computeMidOrthoPosition(a.x,
c.x,s);else if(c.x<a.x&&(90===d||0===d))m.x=this.computeMidOrthoPosition(k.left,Math.max(c.x,l.right),s);else if(c.x>a.x&&(90===d||180===d))m.x=this.computeMidOrthoPosition(k.right,Math.min(c.x,l.left),s);n.x=m.x;n.y=c.y}if(m.x>k.left&&m.x<k.right)if(c.y<=k.bottom&&c.y>=a.y||a.y>=l.top&&a.y<=c.y){if(0===d||180===d)m=new A(a.x,Math.min((a.y+c.y)/2,a.y)),n=new A(c.x,m.y)}else m.x=180===d||(90===d||270===d)&&c.x<a.x?Math.min(c.x,270===d?k.left:Math.min(k.left,l.left)):Math.max(c.x,270===d?k.right:Math.max(k.right,
l.right)),n.x=m.x,n.y=c.y}var p=m,r=n;if(this.kh!==xf)a=s;else{var t=this.h;if(t===q||k.Ea(c)||l.Ea(a)||e===g||this.layer.cc)a=s;else{t.sd===q&&(t.sd=new tm);e=this!==q?this.bb:q;if(t.sd.Gr||t.sd.group!==e){if(e===q){g=t.Ci?Nh(t):t.fd.copy();g.qg(100,100);t.sd.initialize(g);g=y.df();for(var u=t.uj;u.next();){var v=u.value,z=v.layer;z===q||(!z.visible||z.cc)||Ti(t,v,q,g)}}else{g=e.ua.copy();g.qg(20,20);t.sd.initialize(g);g=y.df();for(u=e.Ec;u.next();)v=u.value,v instanceof T&&Ti(t,v,q,g)}y.Bc(g);t.sd.group=
e;t.sd.Gr=s}else um(t.sd);t=t.sd;if(vm(t,Math.min(a.x,p.x),Math.min(a.y,p.y),Math.abs(a.x-p.x),Math.abs(a.y-p.y))&&vm(t,Math.min(p.x,r.x),Math.min(p.y,r.y),Math.abs(p.x-r.x),Math.abs(p.y-r.y))&&vm(t,Math.min(r.x,c.x),Math.min(r.y,c.y),Math.abs(r.x-c.x),Math.abs(r.y-c.y)))a=s;else if(k=k.copy().zj(l),k.qg(2*t.yl,2*t.xl),wm(t,a,b,c,d,k),l=xm(t,c.x,c.y),!t.abort&&l===ym&&(um(t),l=t.ZD,k.qg(t.yl*l,t.xl*l),wm(t,a,b,c,d,k),l=xm(t,c.x,c.y)),!t.abort&&l===ym&&(um(t),l=t.QC,k.qg(t.yl*l,t.xl*l),wm(t,a,b,c,
d,k),l=xm(t,c.x,c.y)),!t.abort&&(l===ym&&t.EE)&&(um(t),wm(t,a,b,c,d,t.Hb),l=xm(t,c.x,c.y)),!t.abort&&l<ym&&0!==xm(t,c.x,c.y)){zm(this,t,c.x,c.y,d,h);d=this.o(2);if(4>this.qa)0===b||180===b?(d.x=a.x,d.y=c.y):(d.x=c.x,d.y=a.y),this.R(2,d.x,d.y),this.C(3,d.x,d.y);else if(c=this.o(3),0===b||180===b)H.I(d.x,c.x)?(b=0===b?Math.max(d.x,a.x):Math.min(d.x,a.x),this.R(2,b,a.y),this.R(3,b,c.y)):H.I(d.y,c.y)?(Math.abs(a.y-d.y)<=t.xl/2&&(this.R(2,d.x,a.y),this.R(3,c.x,a.y)),this.C(2,d.x,a.y)):this.R(2,a.x,d.y);
else if(90===b||270===b)H.I(d.y,c.y)?(b=90===b?Math.max(d.y,a.y):Math.min(d.y,a.y),this.R(2,a.x,b),this.R(3,c.x,b)):H.I(d.x,c.x)?(Math.abs(a.x-d.x)<=t.yl/2&&(this.R(2,a.x,d.y),this.R(3,a.x,c.y)),this.C(2,a.x,d.y)):this.R(2,d.x,a.y);a=h}else a=s}}a||(this.$g(m),this.$g(n))}};U.prototype.computeMidOrthoPosition=function(a,b){if(!isNaN(this.Hu)||0!==this.ke&&!this.Ib){var c=this.computeCurviness();return(a+b)/2+c}return(a+b)/2};
function zm(a,b,c,d,e,g){var k=b.yl,l=b.xl,m=xm(b,c,d),n=c,p=d;for(0===e?n+=k:90===e?p+=l:180===e?n-=k:p-=l;m>Am&&xm(b,n,p)===m-Bm;)c=n,d=p,0===e?n+=k:90===e?p+=l:180===e?n-=k:p-=l,m-=Bm;if(g){if(m>Am)if(180===e||0===e)c=Math.floor(c/k)*k+k/2;else if(90===e||270===e)d=Math.floor(d/l)*l+l/2}else c=Math.floor(c/k)*k+k/2,d=Math.floor(d/l)*l+l/2;m>Am&&(g=e,n=c,p=d,0===e?(g=90,p+=l):90===e?(g=180,n-=k):180===e?(g=270,p-=l):270===e&&(g=0,n+=k),xm(b,n,p)===m-Bm?zm(a,b,n,p,g,s):(n=c,p=d,0===e?(g=270,p-=l):
90===e?(g=0,n+=k):180===e?(g=90,p+=l):270===e&&(g=180,n-=k),xm(b,n,p)===m-Bm&&zm(a,b,n,p,g,s)));a.pk(c,d)}U.prototype.findClosestSegment=U.prototype.tI=function(a){x&&y.l(a,A,U,"findClosestSegment:p");var b=a.x;a=a.y;for(var c=this.o(0),d=this.o(1),e=Ua(b,a,c.x,c.y,d.x,d.y),g=0,k=1;k<this.qa-1;k++){var c=this.o(k+1),l=Ua(b,a,d.x,d.y,c.x,c.y),d=c;l<e&&(g=k,e=l)}return g};U.prototype.invalidateGeometry=U.prototype.Mf=function(){this.Oh=this.Na=q;this.aa()};
y.A(U,{Pc:"geometry"},function(){this.Na===q&&(this.updateRoute(),this.Na=this.makeGeometry());return this.Na});U.prototype.iv=function(){if(this.Na===q&&this.Zg!==s){this.Na=this.makeGeometry();var a=this.rp();if(a!==q){a.Na=this.Na;for(var b=this.za,c=b.length,d=0;d<c;d++){var e=b.n[d];e!==a&&(e.ji&&e instanceof V)&&(e.Na=this.Na)}}}};
U.prototype.makeGeometry=function(){var a=this.qa;if(2>a){var b=new nc(oc),c=new pc(0,0);b.fb.add(c);return b}var d=this.o(0).copy(),e=d.copy(),g=this.computeCurve();if(g===vg&&3<=a&&!H.Ha(this.qs,0))if(3===a)var k=this.o(1),b=Math.min(d.x,k.x),c=Math.min(d.y,k.y),k=this.o(2),b=Math.min(b,k.x),c=Math.min(c,k.y);else{if(this.Ib)for(k=0;k<a;k++)b=this.sc.n[k],e.x=Math.min(b.x,e.x),e.y=Math.min(b.y,e.y);else for(var l,k=3;k<a;k+=3)k+3>=a&&(k=a-1),l=this.o(k),e.x=Math.min(l.x,e.x),e.y=Math.min(l.y,e.y);
b=e.x;c=e.y}else{for(k=0;k<a;k++)b=this.sc.n[k],e.x=Math.min(b.x,e.x),e.y=Math.min(b.y,e.y);b=e.x;c=e.y}b-=this.Ox.x;c-=this.Ox.y;d.x-=b;d.y-=c;if(2===a){var m=this.o(1).copy();m.x-=b;m.y-=c;0!==rm(this)&&Cm(this,d,h,e);0!==sm(this)&&Cm(this,m,s,e);b=new nc(wc);b.ia=d.x;b.ja=d.y;b.D=m.x;b.F=m.y}else{m=y.u();0!==rm(this)&&Cm(this,d,h,e);M(m,d.x,d.y,s,s);if(g===vg&&3<=a&&!H.Ha(this.qs,0))if(3===a)k=this.o(1),a=k.x-b,d=k.y-c,k=this.o(2).copy(),k.x-=b,k.y-=c,0!==sm(this)&&Cm(this,k,s,e),N(m,a,d,a,d,k.x,
k.y);else if(this.Ib){d=new A(b,c);g=this.o(1).copy();l=new A(b,c);for(var a=new A(b,c),e=this.o(0),n=q,p=this.qs/3,k=1;k<this.qa-1;k++){var n=this.o(k),r=e,t=n,u=this.o(Dm(this,n,k,s));if(!H.Ha(r.x,t.x)||!H.Ha(t.x,u.x))if(!H.Ha(r.y,t.y)||!H.Ha(t.y,u.y)){var v=p,z=l,C=a;isNaN(v)&&(v=this.qs/3);var K=r.x,r=r.y,I=t.x,t=t.y,Q=u.x,u=u.y,L=v*Em(K,r,I,t),v=v*Em(I,t,Q,u);H.Ha(r,t)&&H.Ha(I,Q)&&(I>K?u>t?(z.x=I-L,z.y=t-L,C.x=I+v,C.y=t+v):(z.x=I-L,z.y=t+L,C.x=I+v,C.y=t-v):u>t?(z.x=I+L,z.y=t-L,C.x=I-v,C.y=t+
v):(z.x=I+L,z.y=t+L,C.x=I-v,C.y=t-v));H.Ha(K,I)&&H.Ha(t,u)&&(t>r?(Q>I?(z.x=I-L,z.y=t-L,C.x=I+v):(z.x=I+L,z.y=t-L,C.x=I-v),C.y=t+v):(Q>I?(z.x=I-L,z.y=t+L,C.x=I+v):(z.x=I+L,z.y=t+L,C.x=I-v),C.y=t-v));if(H.Ha(K,I)&&H.Ha(I,Q)||H.Ha(r,t)&&H.Ha(t,u))K=0.5*(K+Q),r=0.5*(r+u),z.x=K,z.y=r,C.x=K,C.y=r;1===k?(g.x=0.5*(e.x+n.x),g.y=0.5*(e.y+n.y)):2===k&&(H.Ha(e.x,this.o(0).x)&&H.Ha(e.y,this.o(0).y))&&(g.x=0.5*(e.x+n.x),g.y=0.5*(e.y+n.y));N(m,g.x-b,g.y-c,l.x-b,l.y-c,n.x-b,n.y-c);d.set(l);g.set(a);e=n}}k=e.x;e=
e.y;d=this.o(this.qa-1);k=0.5*(k+d.x);e=0.5*(e+d.y);N(m,a.x-b,a.y-c,k-b,e-c,d.x-b,d.y-c)}else for(k=3;k<a;k+=3)e=this.o(k-2),k+3>=a&&(k=a-1),d=this.o(k-1),l=this.o(k),k===a-1&&0!==sm(this)&&(l=l.copy(),Cm(this,l,s,H.Aj)),N(m,e.x-b,e.y-c,d.x-b,d.y-c,l.x-b,l.y-c);else{e=y.M();e.assign(this.o(0));for(k=1;k<a;){k=Dm(this,e,k,1<k);p=this.o(k);if(k>=a-1){e!==p&&(0!==sm(this)&&(p=p.copy(),Cm(this,p,s,H.Aj)),Fm(this,m,-b,-c,e,p));break}k=Dm(this,p,k+1,k<a-3);d=m;g=-b;l=-c;n=e;z=this.o(k);C=e;H.I(n.y,p.y)&&
H.I(p.x,z.x)?(K=this.computeCorner(),K=Math.min(K,Math.abs(p.x-n.x)/2),K=r=Math.min(K,Math.abs(z.y-p.y)/2),H.I(K,0)?(Fm(this,d,g,l,n,p),C.assign(p)):(v=p.x,I=p.y,t=v,Q=I,v=p.x>n.x?p.x-K:p.x+K,Q=z.y>p.y?p.y+r:p.y-r,Fm(this,d,g,l,n,new A(v,I)),Oc(d,p.x+g,p.y+l,t+g,Q+l),C.q(t,Q))):H.I(n.x,p.x)&&H.I(p.y,z.y)?(K=this.computeCorner(),r=Math.min(K,Math.abs(p.y-n.y)/2),r=K=Math.min(r,Math.abs(z.x-p.x)/2),H.I(K,0)?(Fm(this,d,g,l,n,p),C.assign(p)):(v=p.x,Q=I=p.y,I=p.y>n.y?p.y-r:p.y+r,t=z.x>p.x?p.x+K:p.x-K,
Fm(this,d,g,l,n,new A(v,I)),Oc(d,p.x+g,p.y+l,t+g,Q+l),C.q(t,Q))):(Fm(this,d,g,l,n,p),C.assign(p))}y.B(e)}b=m.s;y.v(m)}return b};function Em(a,b,c,d){a=c-a;if(isNaN(a)||Infinity===a||-Infinity===a)return NaN;0>a&&(a=-a);b=d-b;if(isNaN(b)||Infinity===b||-Infinity===b)return NaN;0>b&&(b=-b);return H.Ha(a,0)?b:H.Ha(b,0)?a:Math.sqrt(a*a+b*b)}
function Cm(a,b,c,d){var e=a.qa;if(!(2>e))if(c){var g=a.o(1);c=g.x-d.x;d=g.y-d.y;g=Em(b.x,b.y,c,d);0!==g&&(e=2===e?0.5*g:g,a=rm(a),a>e&&(a=e),c=a*(c-b.x)/g,a=a*(d-b.y)/g,b.x+=c,b.y+=a)}else g=a.o(e-2),c=g.x-d.x,d=g.y-d.y,g=Em(b.x,b.y,c,d),0!==g&&(e=2===e?0.5*g:g,a=sm(a),a>e&&(a=e),c=a*(b.x-c)/g,a=a*(b.y-d)/g,b.x-=c,b.y-=a)}
function Dm(a,b,c,d){for(var e=a.qa,g=b;H.Ha(b.x,g.x)&&H.Ha(b.y,g.y);){if(c>=e)return e-1;g=a.o(c++)}if(!H.Ha(b.x,g.x)&&!H.Ha(b.y,g.y))return c-1;for(var k=g;H.Ha(b.x,g.x)&&H.Ha(g.x,k.x)&&(!d||(b.y>=g.y?g.y>=k.y:g.y<=k.y))||H.Ha(b.y,g.y)&&H.Ha(g.y,k.y)&&(!d||(b.x>=g.x?g.x>=k.x:g.x<=k.x));){if(c>=e)return e-1;k=a.o(c++)}return c-2}
function Fm(a,b,c,d,e,g){if(im(a)){var k=new F("number"),l=Gm(a,e,g,k),m=e.x,m=e.y;if(0<l)if(H.I(e.y,g.y))if(e.x<g.x)for(var n=0;n<l;){var p=Math.max(e.x,Math.min(k.n[n++]-5,g.x-10));b.lineTo(p+c,g.y+d);for(var m=p+c,r=Math.min(p+10,g.x);n<l;){var t=k.n[n];if(t<r+10)n++,r=Math.min(t+5,g.x);else break}t=(p+r)/2+c;t=g.y-10+d;p=r+c;r=g.y+d;a.Se===jk?M(b,p,r,s,s):N(b,m,t,p,t,p,r)}else for(n=l-1;0<=n;){p=Math.min(e.x,Math.max(k.n[n--]+5,g.x+10));b.lineTo(p+c,g.y+d);m=p+c;for(r=Math.max(p-10,g.x);0<=n;)if(t=
k.n[n],t>r-10)n--,r=Math.max(t-5,g.x);else break;t=g.y-10+d;p=r+c;r=g.y+d;a.Se===jk?M(b,p,r,s,s):N(b,m,t,p,t,p,r)}else if(H.I(e.x,g.x))if(e.y<g.y)for(n=0;n<l;){p=Math.max(e.y,Math.min(k.n[n++]-5,g.y-10));b.lineTo(g.x+c,p+d);m=p+d;for(r=Math.min(p+10,g.y);n<l;)if(t=k.n[n],t<r+10)n++,r=Math.min(t+5,g.y);else break;t=g.x-10+c;p=g.x+c;r+=d;a.Se===jk?M(b,p,r,s,s):N(b,t,m,t,r,p,r)}else for(n=l-1;0<=n;){p=Math.min(e.y,Math.max(k.n[n--]+5,g.y+10));b.lineTo(g.x+c,p+d);m=p+d;for(r=Math.max(p-10,g.y);0<=n;)if(t=
k.n[n],t>r-10)n--,r=Math.max(t-5,g.y);else break;t=g.x-10+c;p=g.x+c;r+=d;a.Se===jk?M(b,p,r,s,s):N(b,t,m,t,r,p,r)}}b.lineTo(g.x+c,g.y+d)}
function Gm(a,b,c,d){var e=a.h;if(e===q)return 0;Math.min(b.x,c.x);Math.min(b.y,c.y);Math.max(b.x,c.x);Math.max(b.y,c.y);for(e=e.fv;e.next();){var g=e.value;if(g!==q&&g.visible)for(var g=g.lb.n,k=g.length,l=0;l<k;l++){var m=g[l];if(m===a)return 0<d.length&&d.sort(function(a,b){return a-b}),d.length;if(m instanceof U&&a.yb()&&m.yb()&&im(m)){var n=m.Ai();n.V()&&(a.Ai().qf(n)&&!a.usesSamePort(m))&&(n=m.path,n!==q&&n.Dk()&&Hm(b,c,d,m))}}}0<d.length&&d.sort(function(a,b){return a-b});return d.length}
function Hm(a,b,c,d){for(var e=d.qa,g=1;g<e;g++){var k=d.o(g-1),l=d.o(g),m=y.M(),n;a:{n=a;var p=b,r=m;if(H.I(n.x,p.x)){if(H.I(k.y,l.y)&&Math.min(n.y,p.y)<=k.y&&Math.max(n.y,p.y)>=k.y&&Math.min(k.x,l.x)<=n.x&&Math.max(k.x,l.x)>=n.x&&!H.I(k.x,l.x)){r.x=n.x;r.y=k.y;n=h;break a}}else if(H.I(k.x,l.x)&&Math.min(n.x,p.x)<=k.x&&Math.max(n.x,p.x)>=k.x&&Math.min(k.y,l.y)<=n.y&&Math.max(k.y,l.y)>=n.y&&!H.I(k.y,l.y)){r.x=k.x;r.y=n.y;n=h;break a}r.x=0;r.y=0;n=s}n&&(H.I(a.y,b.y)?c.add(m.x):c.add(m.y));y.B(m)}}
y.A(U,{zr:"firstPickIndex"},function(){return 2>=this.qa?0:this.Ib||lm(this)!==Hb?1:0});y.A(U,{ev:"lastPickIndex"},function(){var a=this.qa;return 0===a?0:2>=a?a-1:this.Ib||mm(this)!==Hb?a-2:a-1});function im(a){a=a.Se;return a===kk||a===jk}function km(a,b){if(b||im(a)){var c=a.h;c!==q&&(!c.Am.contains(a)&&a.xx!==q)&&c.Am.add(a,a.xx)}}
function jg(a,b){var c=a.layer;if(!(c===q||!c.visible||c.cc)){var d=c.h;if(d!==q)for(var e=s,d=d.fv;d.next();){var g=d.value;if(g.visible)if(g===c)for(var e=h,k=s,g=g.lb.n,l=g.length,m=0;m<l;m++){var n=g[m];n instanceof U&&(n===a?k=h:k&&Im(a,n,b))}else if(e){g=g.lb.n;l=g.length;for(m=0;m<l;m++)n=g[m],n instanceof U&&Im(a,n,b)}}}}function Im(a,b,c){if(b!==q&&im(b)&&b.Na!==q){var d=b.Ai();if(d.V()&&(a.Ai().qf(d)||c.qf(d)))a.usesSamePort(b)||b.Mf()}}
U.prototype.usesSamePort=function(a){var b=this.qa,c=a.qa;if(0<b&&0<c){if(this.o(0).di(a.o(0))||this.o(b-1).di(a.o(c-1)))return h}else if(this.da===a.da||this.fa===a.fa)return h;return s};y.g(U,"adjusting",U.prototype.ru);y.defineProperty(U,{ru:"adjusting"},w("Po"),function(a){var b=this.Po;b!==a&&(x&&y.rb(a,U,U,"adjusting"),this.Po=a,this.i("adjusting",b,a))});y.g(U,"corner",U.prototype.UB);
y.defineProperty(U,{UB:"corner"},w("$o"),function(a){var b=this.$o;b!==a&&(x&&y.j(a,"number",U,"corner"),this.$o=a,this.Mf(),this.i("corner",b,a))});y.g(U,"curve",U.prototype.Se);y.defineProperty(U,{Se:"curve"},w("cp"),function(a){var b=this.cp;b!==a&&(x&&y.rb(a,U,U,"curve"),this.cp=a,this.Vb(),km(this,b===jk||b===kk||a===jk||a===kk),this.i("curve",b,a))});y.g(U,"curviness",U.prototype.Hu);
y.defineProperty(U,{Hu:"curviness"},w("dp"),function(a){var b=this.dp;b!==a&&(x&&y.j(a,"number",U,"curviness"),this.dp=a,this.Vb(),this.i("curviness",b,a))});y.g(U,"routing",U.prototype.kh);y.defineProperty(U,{kh:"routing"},w("fn"),function(a){var b=this.fn;b!==a&&(x&&y.rb(a,U,U,"routing"),this.fn=a,this.Ah=q,this.Vb(),km(this,b===ik||b===xf||a===ik||a===xf),this.i("routing",b,a))});y.g(U,"smoothness",U.prototype.qs);
y.defineProperty(U,{qs:"smoothness"},w("Nq"),function(a){var b=this.Nq;b!==a&&(x&&y.j(a,"number",U,"smoothness"),this.Nq=a,this.Mf(),this.i("smoothness",b,a))});
function gm(a){var b=a.xf;if(b!==q){var c=a.Ef;if(c!==q){var d=a.Ig;a=a.Xg;var e;a:{if(!(c===q||b.Bg===q))for(e=b.Bg.k;e.next();){var g=e.value;if(g.po===b&&g.Wr===c&&g.mv===d&&g.nv===a||g.po===c&&g.Wr===b&&g.mv===a&&g.nv===d){e=g;break a}}e=q}for(var k=g=q,l=b.Qb.n,m=l.length,n=0;n<m;n++){var p=l[n];if(p.xf===b&&p.Ig===d&&p.Ef===c&&p.Xg===a||p.xf===c&&p.Ig===a&&p.Ef===b&&p.Xg===d)k===q?k=p:(g===q&&(g=new F(U),g.add(k)),g.add(p))}if(g!==q){e===q&&(e=new Sl,e.po=b,e.mv=d,e.Wr=c,e.nv=a,Rl(b,e),Rl(c,
e));e.links=g;for(n=0;n<g.count;n++)if(p=g.n[n],0===p.ke){b=1;for(c=0;c<g.count;c++)Math.abs(g.n[c].ke)===b&&(b++,c=-1);p.Tk=e;p.ke=p.da===e.po?b:-b;p.Vb()}}}}}
function fm(a){var b=a.Tk;if(b!==q){var c=a.ke;a.Tk=q;a.ke=0;a.Vb();b.links.remove(a);if(2>b.links.count)1===b.links.count&&(c=b.links.n[0],c.Tk=q,c.ke=0,c.Vb()),c=b.po,b!==q&&c.Bg!==q&&c.Bg.remove(b),c=b.Wr,b!==q&&c.Bg!==q&&c.Bg.remove(b);else{c=Math.abs(c);a=0===c%2;for(b=b.links.k;b.next();){var d=b.value,e=Math.abs(d.ke),g=0===e%2;e>c&&a===g&&(d.ke=0<d.ke?d.ke-2:d.ke+2,d.Vb())}}}}function Sl(){y.mc(this);this.links=this.nv=this.Wr=this.mv=this.po=q;this.spacing=10}
y.Md(Sl,{po:h,mv:h,Wr:h,nv:h,links:h,spacing:h});function tm(){y.mc(this);this.group=q;this.Gr=h;this.abort=s;this.Bf=this.Af=1;this.Xp=this.Wp=-1;this.Ed=this.Dd=8;this.Yb=q;this.EE=s;this.ZD=22;this.QC=111}y.Md(tm,{group:h,Gr:h,abort:h,EE:h,ZD:h,QC:h});var Am=1,Bm=1,ym=999999999,Jm=ym;
tm.prototype.initialize=function(a){if(!(0>=a.width||0>=a.height)){var b=a.y,c=a.x+a.width,d=a.y+a.height;this.Af=Math.floor((a.x-this.Dd)/this.Dd)*this.Dd;this.Bf=Math.floor((b-this.Ed)/this.Ed)*this.Ed;this.Wp=Math.ceil((c+2*this.Dd)/this.Dd)*this.Dd;this.Xp=Math.ceil((d+2*this.Ed)/this.Ed)*this.Ed;a=1+(Math.ceil((this.Wp-this.Af)/this.Dd)|0);b=1+(Math.ceil((this.Xp-this.Bf)/this.Ed)|0);if(this.Yb===q||this.pn<a-1||this.qn<b-1){c=[];for(d=0;d<=a;d++){for(var e=[],g=0;g<=b;g++)e[g]=0;c[d]=e}this.Yb=
c;this.pn=a-1;this.qn=b-1}if(this.Yb!==q)for(a=0;a<=this.pn;a++)for(b=0;b<=this.qn;b++)this.Yb[a][b]=Jm}};y.A(tm,{Hb:q},function(){return new B(this.Af,this.Bf,this.Wp-this.Af,this.Xp-this.Bf)});y.g(tm,"cellWidth",tm.prototype.yl);y.defineProperty(tm,{yl:q},w("Dd"),function(a){0<a&&a!==this.Dd&&(this.Dd=a,this.initialize(this.Hb))});y.g(tm,"cellHeight",tm.prototype.xl);y.defineProperty(tm,{xl:q},w("Ed"),function(a){0<a&&a!==this.Ed&&(this.Ed=a,this.initialize(this.Hb))});
function Km(a,b,c){return a.Af<=b&&b<=a.Wp&&a.Bf<=c&&c<=a.Xp}function xm(a,b,c){if(!Km(a,b,c))return 0;b-=a.Af;b/=a.Dd;c-=a.Bf;c/=a.Ed;return a.Yb[b|0][c|0]}function Ui(a,b,c){Km(a,b,c)&&(b-=a.Af,b/=a.Dd,c-=a.Bf,c/=a.Ed,a.Yb[b|0][c|0]=0)}function um(a){if(a.Yb!==q)for(var b=0;b<=a.pn;b++)for(var c=0;c<=a.qn;c++)a.Yb[b][c]>=Am&&(a.Yb[b][c]|=ym)}
function vm(a,b,c,d,e){if(b>a.Wp||b+d<a.Af||c>a.Xp||c+e<a.Bf)return h;b=(b-a.Af)/a.Dd|0;c=(c-a.Bf)/a.Ed|0;d=Math.max(0,d)/a.Dd+1|0;var g=Math.max(0,e)/a.Ed+1|0;0>b&&(d+=b,b=0);0>c&&(g+=c,c=0);if(0>d||0>g)return h;e=Math.min(b+d-1,a.pn)|0;for(d=Math.min(c+g-1,a.qn)|0;b<=e;b++)for(g=c;g<=d;g++)if(0===a.Yb[b][g])return s;return h}
function Lm(a,b,c,d,e,g,k,l,m){if(!(b<g||b>k||c<l||c>m)){var n,p;n=b|0;p=c|0;var r=a.Yb[n][p];if(r>=Am&&r<ym){e?p+=d:n+=d;for(r+=Bm;g<=n&&(n<=k&&l<=p&&p<=m)&&!(r>=a.Yb[n][p]);)a.Yb[n][p]=r,r+=Bm,e?p+=d:n+=d}n=e?p:n;if(e)if(0<d)for(c+=d;c<n;c+=d)Lm(a,b,c,1,!e,g,k,l,m),Lm(a,b,c,-1,!e,g,k,l,m);else for(c+=d;c>n;c+=d)Lm(a,b,c,1,!e,g,k,l,m),Lm(a,b,c,-1,!e,g,k,l,m);else if(0<d)for(b+=d;b<n;b+=d)Lm(a,b,c,1,!e,g,k,l,m),Lm(a,b,c,-1,!e,g,k,l,m);else for(b+=d;b>n;b+=d)Lm(a,b,c,1,!e,g,k,l,m),Lm(a,b,c,-1,!e,g,
k,l,m)}}function Mm(a,b,c,d,e,g,k,l,m,n,p){for(var r=b|0,t=c|0,u=a.Yb[r][t];0===u&&r>l&&r<m&&t>n&&t<p;)if(k?t+=g:r+=g,u=a.Yb[r][t],1>=Math.abs(r-d)&&1>=Math.abs(t-e))return a.abort=h,0;r=b|0;t=c|0;u=a.Yb[r][t];b=Am;for(a.Yb[r][t]=b;0===u&&r>l&&r<m&&t>n&&t<p;)k?t+=g:r+=g,u=a.Yb[r][t],a.Yb[r][t]=b,b+=Bm;return k?t:r}
function wm(a,b,c,d,e,g){if(a.Yb!==q){a.abort=s;var k=b.x,l=b.y;if(Km(a,k,l)){var k=k-a.Af,k=k/a.Dd,l=l-a.Bf,l=l/a.Ed,m=d.x,n=d.y;if(Km(a,m,n))if(m-=a.Af,m/=a.Dd,n-=a.Bf,n/=a.Ed,1>=Math.abs(k-m)&&1>=Math.abs(l-n))a.abort=h;else{var p=g.x;b=g.y;d=g.x+g.width;var r=g.y+g.height,p=p-a.Af,p=p/a.Dd;b-=a.Bf;b/=a.Ed;d-=a.Af;d/=a.Dd;r-=a.Bf;r/=a.Ed;g=Math.max(0,Math.min(a.pn,p|0));d=Math.min(a.pn,Math.max(0,d|0));b=Math.max(0,Math.min(a.qn,b|0));var r=Math.min(a.qn,Math.max(0,r|0)),k=k|0,l=l|0,m=m|0,n=n|
0,p=k,t=l,u=0===c||90===c?1:-1;(c=90===c||270===c)?t=Mm(a,k,l,m,n,u,c,g,d,b,r):p=Mm(a,k,l,m,n,u,c,g,d,b,r);if(!a.abort){a:{c=0===e||90===e?1:-1;e=90===e||270===e;for(var u=m|0,v=n|0,z=a.Yb[u][v];0===z&&u>g&&u<d&&v>b&&v<r;)if(e?v+=c:u+=c,z=a.Yb[u][v],1>=Math.abs(u-k)&&1>=Math.abs(v-l)){a.abort=h;break a}u=m|0;v=n|0;z=a.Yb[u][v];for(a.Yb[u][v]=Jm;0===z&&u>g&&u<d&&v>b&&v<r;)e?v+=c:u+=c,z=a.Yb[u][v],a.Yb[u][v]=Jm}a.abort||(Lm(a,p,t,1,s,g,d,b,r),Lm(a,p,t,-1,s,g,d,b,r),Lm(a,p,t,1,h,g,d,b,r),Lm(a,p,t,-1,
h,g,d,b,r))}}}}}function pm(){y.mc(this);this.port=this.vc=q;this.Pf=[];this.Ur=s}y.Md(pm,{vc:h,port:h,Pf:h,Ur:h});pm.prototype.toString=function(){for(var a=this.Pf,b=this.vc.toString()+" "+a.length.toString()+":",c=0;c<a.length;c++){var d=a[c];d!==q&&(b+="\n  "+d.toString())}return b};
function Nm(a,b,c,d){b=b.offsetY;switch(b){case y.$c:return 90;case y.Sc:return 180;case y.ld:return 270;case y.ad:return 0}switch(b){case y.$c|y.ld:return 180<c?270:90;case y.Sc|y.ad:return 90<c&&270>=c?180:0}a=180*Math.atan2(a.height,a.width)/Math.PI;switch(b){case y.Sc|y.ld:return c>a&&c<=180+a?180:270;case y.ld|y.ad:return c>180-a&&c<=360-a?270:0;case y.ad|y.$c:return c>a&&c<=180+a?90:0;case y.$c|y.Sc:return c>180-a&&c<=360-a?180:90;case y.Sc|y.ld|y.ad:return 90<c&&c<=180+a?180:c>180+a&&c<=360-
a?270:0;case y.ld|y.ad|y.$c:return 180<c&&c<=360-a?270:c>a&&180>=c?90:0;case y.ad|y.$c|y.Sc:return c>a&&c<=180-a?90:c>180-a&&270>=c?180:0;case y.$c|y.Sc|y.ld:return c>180-a&&c<=180+a?180:c>180+a?270:90}d&&b!==(y.Sc|y.ld|y.ad|y.$c)&&(c-=15,0>c&&(c+=360));return c>a&&c<180-a?90:c>=180-a&&c<=180+a?180:c>180+a&&c<360-a?270:0}
function qm(a,b){var c=a.Pf;if(0===c.length){if(!a.Ur){c=a.Ur;a.Ur=h;var d=a.vc.Qd,e=a.Pf.length=0,g=a.port.hb(Mb,y.M()),k=a.port.hb(Zb,y.M()),l=y.xj(g.x,g.y,0,0);l.yj(k);y.B(g);y.B(k);g=y.ec(l.x+l.width/2,l.y+l.height/2);k=y.M();for(d=d.k;d.next();){var m=d.value;if(m.yb()){var n=Hb,n=m.Oc===a.port?lm(m,a.port):mm(m,a.port);if(Bb(n)){var p;p=m.Oc===a.port?m.Ad:m.Oc;if(p!==q&&p.W!==q){var r=p.hb(Sb,k);p=p.Kd;p=p!==q?qm(p,m):q;p!==q&&(r=p.io);p=g.ai(r);var n=Nm(l,n,p,m.Ib),t;0===n?(t=y.ad,180<p&&(p-=
360)):t=90===n?y.$c:180===n?y.Sc:y.ld;(n=a.Pf[e])?(n.link=m,n.angle=p,n.je=t):(n=new Om(m,p,t),a.Pf[e]=n);n.lv.set(r);e++}}}}y.B(g);y.B(k);a.Pf.sort(pm.prototype.ZG);g=a.Pf.length;k=-1;for(e=d=0;e<g;e++)n=a.Pf[e],n!==q&&(n.je!==k&&(k=n.je,d=0),n.Nl=d,d++);k=-1;d=0;for(e=g-1;0<=e;e--)n=a.Pf[e],n!==q&&(n.je!==k&&(k=n.je,d=n.Nl+1),n.rr=d);e=a.Pf;for(g=0;g<e.length;g++)if(k=e[g],k!==q){m=k;r=a.port;k=y.M();d=y.M();switch(m.je){case y.$c:r.hb(Zb,k);r.hb(Vb,d);break;case y.Sc:r.hb(Vb,k);r.hb(Mb,d);break;
case y.ld:r.hb(Mb,k);r.hb(Rb,d);break;default:case y.ad:r.hb(Rb,k),r.hb(Zb,d)}r=d.y-k.y;n=(m.Nl+1)/(m.rr+1);m=m.io;m.x=k.x+(d.x-k.x)*n;m.y=k.y+r*n;y.B(k);y.B(d)}e=a.Pf;for(g=0;g<e.length;g++)k=e[g],k!==q&&(k.Mu=a.computeEndSegmentLength(k));a.Ur=c;y.Bc(l)}c=a.Pf}for(l=0;l<c.length;l++)if(e=c[l],e!==q&&e.link===b)return e;return q}pm.prototype.ZG=function(a,b){return a===b?0:a===q?-1:b===q?1:a.je<b.je?-1:a.je>b.je?1:a.angle<b.angle?-1:a.angle>b.angle?1:0};
pm.prototype.computeEndSegmentLength=function(a){var b=a.link,c=b.computeEndSegmentLength(this.vc,this.port,Hb,b.Oc===this.port),d=a.Nl;if(0>d)return c;var e=a.rr;if(1>=e||!b.Ib)return c;var b=a.lv,g=a.io;if(a.je===y.Sc||a.je===y.$c)d=e-1-d;return((a=a.je===y.Sc||a.je===y.ad)?b.y<g.y:b.x<g.x)?c+8*d:(a?b.y===g.y:b.x===g.x)?c:c+8*(e-1-d)};function Om(a,b,c){this.link=a;this.angle=b;this.je=c;this.lv=new A;this.Nl=this.rr=this.Nl=0;this.io=new A;this.Mu=0}
y.Md(Om,{link:h,angle:h,je:h,lv:h,Nl:h,rr:h,io:h,Mu:h});Om.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.je.toString()+":"+this.Nl.toString()+"/"+this.rr.toString()+" "+this.io.toString()+" "+this.Mu.toString()+" "+this.lv.toString()};
function He(a){0===arguments.length?T.call(this,Fg):T.call(this,a);this.Zp=new na(R);this.Ym=new na(He);this.fk=this.$p=this.Yp=q;this.$q=s;this.Cp=h;this.ar=s;this.mb=this.Qq=q;this.Yo=s;this.qd=new ph;this.qd.group=this}y.ba("Group",He);y.Ka(He,T);
He.prototype.cloneProtected=function(a){T.prototype.cloneProtected.call(this,a);a.Yp=this.Yp;a.$p=this.$p;a.fk=this.fk;a.$q=this.$q;a.Cp=this.Cp;a.ar=this.ar;a.Qq=this.Qq;var b=dl(a,a,function(a){return a instanceof Ag});a.mb=b instanceof Ag?b:q;a.Yo=this.Yo;this.qd!==q?(a.qd=this.qd.copy(),a instanceof He&&(a.qd.group=a)):(a.qd!==q&&(a.qd.group=q),a.qd=q)};
He.prototype.bh=function(a){T.prototype.bh.call(this,a);var b=a.Qn();for(a=a.Ec;a.next();){var c=a.value;c.aa();c.J(Sj);c.be();c instanceof He&&(c.Iv=c.Ue,Pm(c,b));if(c instanceof T)c.rg(b);else if(c instanceof U)for(c=c.tj;c.next();)c.value.rg(b)}};
He.prototype.Vl=function(a,b,c,d,e,g,k){if(a===sd&&"elements"===b)if(e instanceof Ag)this.mb===q?this.mb=e:this.mb!==e&&y.m("Cannot insert a second Placeholder into the visual tree of a Group.");else{if(e instanceof D){var l=dl(e,e,function(a){return a instanceof Ag});l instanceof Ag&&(this.mb===q?this.mb=l:this.mb!==l&&y.m("Cannot insert a second Placeholder into the visual tree of a Group."))}}else a===td&&"elements"===b&&this.mb!==q&&(d===this.mb?this.mb=q:d instanceof D&&this.mb.hi(d)&&(this.mb=
q));T.prototype.Vl.call(this,a,b,c,d,e,g,k)};He.prototype.gj=function(a,b,c,d){this.ek=this.mb;D.prototype.gj.call(this,a,b,c,d)};He.prototype.Bk=function(){if(!T.prototype.Bk.call(this))return s;for(var a=this.Ec;a.next();){var b=a.value;if(b instanceof T){if(b.yb()&&bi(b))return s}else if(b instanceof U&&b.yb()&&bi(b)&&b.da!==this&&b.fa!==this)return s}return h};y.A(He,{placeholder:"placeholder"},w("mb"));y.g(He,"computesBoundsAfterDrag",He.prototype.qy);
y.defineProperty(He,{qy:"computesBoundsAfterDrag"},w("Yo"),function(a){var b=this.Yo;b!==a&&(y.j(a,"boolean",He,"computesBoundsAfterDrag"),this.Yo=a,this.i("computesBoundsAfterDrag",b,a))});y.A(He,{Ec:"memberParts"},function(){return this.Zp.k});function Ll(a,b){if(a.Zp.add(b)){b instanceof He&&a.Ym.add(b);var c=a.aD;if(c!==q){var d=h,e=a.h;e!==q&&(d=e.Ra,e.Ra=h);c(a,b);e!==q&&(e.Ra=d)}}c=a.mb;c===q&&(c=a);c.aa()}
function Kl(a,b){if(a.Zp.remove(b)){b instanceof He&&a.Ym.remove(b);var c=a.bD;if(c!==q){var d=h,e=a.h;e!==q&&(d=e.Ra,e.Ra=h);c(a,b);e!==q&&(e.Ra=d)}}c=a.mb;c===q&&(c=a);c.aa()}He.prototype.El=function(){if(0<this.Zp.count){var a=this.h;if(a===q)return;for(var b=this.Zp.copy().k;b.next();)a.remove(b.value)}T.prototype.El.call(this)};He.prototype.Bv=function(){var a=this.layer;a!==q&&a.Bv(this)};y.g(He,"layout",He.prototype.Nb);
y.defineProperty(He,{Nb:"layout"},w("qd"),function(a){var b=this.qd;b!==a&&(a!==q&&y.l(a,ph,He,"layout"),b!==q&&(b.h=q,b.group=q),this.qd=a,a!==q&&(a.h=this.h,a.group=this),this.i("layout",b,a))});y.g(He,"memberAdded",He.prototype.aD);y.defineProperty(He,{aD:"memberAdded"},w("Yp"),function(a){var b=this.Yp;b!==a&&(a!==q&&y.j(a,"function",He,"memberAdded"),this.Yp=a,this.i("memberAdded",b,a))});y.g(He,"memberRemoved",He.prototype.bD);
y.defineProperty(He,{bD:"memberRemoved"},w("$p"),function(a){var b=this.$p;b!==a&&(a!==q&&y.j(a,"function",He,"memberRemoved"),this.$p=a,this.i("memberRemoved",b,a))});y.g(He,"memberValidation",He.prototype.Pr);y.defineProperty(He,{Pr:"memberValidation"},w("fk"),function(a){var b=this.fk;b!==a&&(a!==q&&y.j(a,"function",He,"memberValidation"),this.fk=a,this.i("memberValidation",b,a))});
He.prototype.canAddMembers=He.prototype.TH=function(a){var b=this.h;if(b===q)return s;b=b.Pe;for(a=Me(a).k;a.next();)if(!b.isValidMember(this,a.value))return s;return h};He.prototype.addMembers=He.prototype.RH=function(a,b){var c=this.h;if(c===q)return s;for(var c=c.Pe,d=h,e=Me(a).k;e.next();){var g=e.value;!b||c.isValidMember(this,g)?g.bb=this:d=s}return d};y.g(He,"ungroupable",He.prototype.sE);
y.defineProperty(He,{sE:"ungroupable"},w("$q"),function(a){var b=this.$q;b!==a&&(y.j(a,"boolean",He,"ungroupable"),this.$q=a,this.i("ungroupable",b,a))});He.prototype.canUngroup=function(){if(!this.sE)return s;var a=this.layer;if(a!==q&&!a.An)return s;a=a.h;return a!==q&&!a.An?s:h};
He.prototype.findExternalLinksConnected=He.prototype.vI=function(){var a=this.Qn();a.add(this);for(var b=new na(U),c=a.k;c.next();){var d=c.value;if(d instanceof fa.LE)for(d=d.Qd;d.next();){var e=d.value;a.contains(e)||b.add(e)}}return b.k};
He.prototype.findExternalNodesConnected=He.prototype.wI=function(){var a=this.Qn();a.add(this);for(var b=new na(T),c=a.k;c.next();){var d=c.value;if(d instanceof fa.LE)for(d=d.Qd;d.next();){var e=d.value,g=e.da;(!a.contains(g)||g===this)&&b.add(g);e=e.fa;(!a.contains(e)||e===this)&&b.add(e)}}return b.k};He.prototype.findSubGraphParts=He.prototype.Qn=function(){var a=new na(R);Fe(a,this,h,0);a.remove(this);return a};
He.prototype.collapseSubGraph=He.prototype.collapseSubGraph=function(){var a=this.h;if(a!==q&&!a.xd){a.xd=h;var b=this.Qn();Pm(this,b);a.xd=s}};function Pm(a,b){a.Ue=s;for(var c=a.Ec;c.next();){var d=c.value;d.aa();d.J(Sj);d.be();d instanceof He&&(d.Iv=d.Ue,Pm(d,b));if(d instanceof T)d.rg(b);else if(d instanceof U)for(d=d.tj;d.next();)d.value.rg(b)}}He.prototype.expandSubGraph=He.prototype.expandSubGraph=function(){var a=this.h;if(a!==q&&!a.xd){a.xd=h;var b=this.Qn();Qm(this,b);a.xd=s}};
function Qm(a,b){a.Ue=h;for(var c=a.Ec;c.next();){var d=c.value;d.aa();d.J(Rj);d.updateAdornments();d instanceof He&&d.Iv&&Qm(d,b);if(d instanceof T)d.rg(b);else if(d instanceof U)for(d=d.tj;d.next();)d.value.rg(b)}}y.g(He,"isSubGraphExpanded",He.prototype.Ue);
y.defineProperty(He,{Ue:"isSubGraphExpanded"},w("Cp"),function(a){var b=this.Cp;if(b!==a){y.j(a,"boolean",He,"isSubGraphExpanded");this.Cp=a;var c=this.h;this.i("isSubGraphExpanded",b,a);b=this.dE;if(b!==q){var d=h;c!==q&&(d=c.Ra,c.Ra=h);b(this);c!==q&&(c.Ra=d)}c!==q&&c.va.cb||(a?this.expandSubGraph():this.collapseSubGraph())}});y.g(He,"wasSubGraphExpanded",He.prototype.Iv);
y.defineProperty(He,{Iv:"wasSubGraphExpanded"},w("ar"),function(a){var b=this.ar;b!==a&&(y.j(a,"boolean",He,"wasSubGraphExpanded"),this.ar=a,this.i("wasSubGraphExpanded",b,a))});y.g(He,"subGraphExpandedChanged",He.prototype.dE);y.defineProperty(He,{dE:"subGraphExpandedChanged"},w("Qq"),function(a){var b=this.Qq;b!==a&&(a!==q&&y.j(a,"function",He,"subGraphExpandedChanged"),this.Qq=a,this.i("subGraphExpandedChanged",b,a))});
He.prototype.move=He.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);c=a.x-c;b=a.y-b;T.prototype.move.call(this,a);for(a=this.Qn().k;a.next();){var d=a.value,e=d.position;T.prototype.move.call(d,new A(e.x+c,e.y+b))}};function Ag(){P.call(this);this.ne=H.Ko;this.Aq=new B(NaN,NaN,NaN,NaN)}y.ba("Placeholder",Ag);y.Ka(Ag,P);Ag.prototype.cloneProtected=function(a){P.prototype.cloneProtected.call(this,a);a.ne=this.ne.U();a.Aq=this.Aq.copy()};
Ag.prototype.hj=function(a){if(this.background===q&&this.ej===q)return s;var b=this.Ta;return kb(0,0,b.width,b.height,a.x,a.y)};
Ag.prototype.Nr=function(){var a=this.W;(a===q||!(a instanceof He)&&!(a instanceof Ge))&&y.m("Placeholder is not inside a Group or Adornment.");if(a instanceof He){var b;a:{b=this.Aq;var c=this.W;if(c instanceof He&&c.qy&&this.Aq.V()){var d=c.h;if(d!==q&&(d=d.Ma,d instanceof af&&!d.hp&&d.hc!==q&&!d.hc.contains(c))){b.assign(this.Aq);break a}}c=y.df();d=this.W;if(d instanceof He){for(var e=Infinity,g=Infinity,k=-Infinity,l=-Infinity,m=d.Ec;m.next();){var n=m.value;if(n.yb()){if(n instanceof U){if(ai(n))continue;
if(n.da===d||n.fa===d)continue}n=n.ua;n.left<e&&(e=n.left);n.top<g&&(g=n.top);n.right>k&&(k=n.right);n.bottom>l&&(l=n.bottom)}}!isFinite(e)||!isFinite(g)?(d=d.location,e=this.padding,c.q(d.x+e.left,d.y+e.top,0,0)):c.q(e,g,k-e,l-g)}else c.q(0,0,0,0);d=this.padding;b.q(c.x-d.left,c.y-d.top,c.width+d.left+d.right,c.height+d.top+d.bottom);y.Bc(c)}c=this.Jc;Za(c,b.width||0,b.height||0);jj(this,0,0,c.width,c.height);c=a.Ec;for(d=s;c.next();)if(c.value.yb()){d=h;break}d&&(!isNaN(b.x)&&!isNaN(b.y))&&(c=new A,
c.ms(b,a.We),a.location=new A(c.x,c.y))}else b=this.Aa,c=this.Jc,a=this.padding,d=a.left+a.right,e=a.top+a.bottom,b.V()?(Za(c,b.width+d||0,b.height+e||0),jj(this,-a.left,-a.top,c.width,c.height)):(g=this.W,k=g.zc,l=k.hb(Mb,y.M()),b=y.xj(l.x,l.y,0,0),b.yj(k.hb(Zb,l)),b.yj(k.hb(Rb,l)),b.yj(k.hb(Vb,l)),g.Fh.q(b.x,b.y),Za(c,b.width+d||0,b.height+e||0),jj(this,-a.left,-a.top,c.width,c.height),y.B(l),y.Bc(b))};Ag.prototype.gj=function(a,b,c,d){var e=this.ua;e.x=a;e.y=b;e.width=c;e.height=d};
y.g(Ag,"padding",Ag.prototype.padding);y.defineProperty(Ag,{padding:"padding"},w("ne"),function(a){"number"===typeof a?(0>a&&y.ka(a,">= 0",Ag,"padding"),a=new ab(a)):(y.l(a,ab,Ag,"padding"),0>a.left&&y.ka(a.left,">= 0",Ag,"padding:val.left"),0>a.right&&y.ka(a.right,">= 0",Ag,"padding:val.right"),0>a.top&&y.ka(a.top,">= 0",Ag,"padding:val.top"),0>a.bottom&&y.ka(a.bottom,">= 0",Ag,"padding:val.bottom"));var b=this.ne;b.L(a)||(this.ne=a=a.U(),this.i("padding",b,a))});
function ph(){0<arguments.length&&y.m("Layout constructor cannot take any arguments.");y.mc(this);this.Rw=this.ca=q;this.xp=this.zp=h;this.Gp=this.Nm=s;this.Ro=(new A(0,0)).freeze();this.Yw=h;this.mx=q;this.Ap=h}y.ba("Layout",ph);ph.prototype.cloneProtected=function(a){a.zp=this.zp;a.xp=this.xp;this.xp||(a.Nm=h);a.Gp=this.Gp;a.Ro.assign(this.Ro);a.Ap=this.Ap};ph.prototype.copy=function(){var a=new this.constructor;this.cloneProtected(a);return a};
ph.prototype.toString=function(){var a=y.dh(Object.getPrototypeOf(this)),a=a+"(";this.group!==q&&(a+=" in "+this.group);this.h!==q&&(a+=" for "+this.h);return a+")"};y.g(ph,"diagram",ph.prototype.h);y.defineProperty(ph,{h:"diagram"},w("ca"),function(a){this.ca!==a&&(a!==q&&y.l(a,E,ph,"diagram"),this.ca=a)});y.g(ph,"group",ph.prototype.group);y.defineProperty(ph,{group:"group"},w("Rw"),function(a){this.Rw!==a&&(a!==q&&y.l(a,He,ph,"group"),this.Rw=a)});y.g(ph,"isOngoing",ph.prototype.NC);
y.defineProperty(ph,{NC:"isOngoing"},w("zp"),function(a){this.zp!==a&&(y.j(a,"boolean",ph,"isOngoing"),this.zp=a)});y.g(ph,"isInitial",ph.prototype.LC);y.defineProperty(ph,{LC:"isInitial"},w("xp"),function(a){y.j(a,"boolean",ph,"isInitial");this.xp=a;a||(this.Nm=h)});y.g(ph,"isValidLayout",ph.prototype.Ve);y.defineProperty(ph,{Ve:"isValidLayout"},w("Nm"),function(a){this.Nm!==a&&(y.j(a,"boolean",ph,"isValidLayout"),this.Nm=a,a||(a=this.h,a!==q&&(a.Hs=h)))});
ph.prototype.invalidateLayout=ph.prototype.J=function(){if(this.Nm){var a=this.h;if(a!==q&&!a.va.cb&&(this.NC&&a.gg||this.LC&&!a.gg))this.Ve=s,a.kc(h)}};y.g(ph,"isRealtime",ph.prototype.Py);y.defineProperty(ph,{Py:"isRealtime"},w("Ap"),function(a){this.Ap!==a&&(y.j(a,"boolean",ph,"isRealtime"),this.Ap=a)});y.g(ph,"isViewportSized",ph.prototype.Lr);y.defineProperty(ph,{Lr:"isViewportSized"},w("Gp"),function(a){this.Gp!==a&&(y.j(a,"boolean",ph,"isViewportSized"),(this.Gp=a)&&this.J())});
y.g(ph,"isRouting",ph.prototype.Kr);y.defineProperty(ph,{Kr:"isRouting"},w("Yw"),function(a){this.Yw!==a&&(y.j(a,"boolean",ph,"isRouting"),this.Yw=a)});y.g(ph,"network",ph.prototype.network);y.defineProperty(ph,{network:"network"},w("mx"),function(a){var b=this.mx;b!==a&&(a!==q&&y.l(a,Rm,ph,"network"),b!==q&&Sm(b,q),this.mx=a,a!==q&&Sm(a,this))});ph.prototype.createNetwork=function(){var a=new Rm;Sm(a,this);return a};
ph.prototype.makeNetwork=function(a){var b=this.createNetwork();a instanceof E?(b.gr(a.uj,h),b.gr(a.links,h)):a instanceof He?b.gr(a.Ec):b.gr(a.k);return b};ph.prototype.updateParts=function(){var a=this.h;if(a===q&&this.network!==q)for(var b=this.network.vertexes.k;b.next();){var c=b.value.vc;if(c!==q&&(a=c.h,a!==q))break}this.Ve=h;a!==q&&a.lc("Layout");this.commitLayout();a!==q&&a.se("Layout")};ph.prototype.commitLayout=aa();
ph.prototype.doLayout=function(a){a||y.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");var b=new na(R);a===this.h?(Tm(this,b,a.uj,h,this.$y,h,s,h),Tm(this,b,a.as,h,this.$y,h,s,h)):a===this.group?Tm(this,b,a.Ec,s,this.$y,h,s,h):b.Me(a.k);var c=b.count;if(0<c){a=this.h;a!==q&&a.lc("Layout");for(var c=Math.ceil(Math.sqrt(c)),d=this.ed.x,e=d,g=this.ed.y,k=0,l=0,b=b.k;b.next();){var m=b.value;m.ci();var n=m.Ba,p=n.width,n=n.height;m.moveTo(e,g);
delete m.RA;e+=Math.max(p,50)+20;l=Math.max(l,Math.max(n,50));k>=c-1?(k=0,e=d,g+=l+20,l=0):k++}a!==q&&a.se("Layout")}this.Ve=h};ph.prototype.$y=function(a){return!a.location.V()||a instanceof He&&a.RA?h:s};function Tm(a,b,c,d,e,g,k,l){for(c=c.k;c.next();){var m=c.value;if(!d||m.$n)if(!e||e(m))m.canLayout()&&(g&&m instanceof T?m.ii||(m instanceof He&&m.Nb===q?Tm(a,b,m.Ec,s,e,g,k,l):b.add(m)):k&&m instanceof U?b.add(m):l&&(m.Pd()&&!(m instanceof T))&&b.add(m))}}y.g(ph,"arrangementOrigin",ph.prototype.ed);
y.defineProperty(ph,{ed:"arrangementOrigin"},w("Ro"),function(a){this.Ro.L(a)||(y.l(a,A,ph,"arrangementOrigin"),this.Ro.assign(a),this.J())});function Um(a,b){var c=a.group;if(c!==q){var d=c.location;if(isNaN(d.x)||isNaN(d.y))return b;var e=c.placeholder;e!==q?(d=e.hb(Mb),d.x+=e.padding.left,d.y+=e.padding.top):d=c.position.copy();return d}return b}function Rm(){y.mc(this);this.qd=q;this.clear()}y.ba("LayoutNetwork",Rm);
Rm.prototype.clear=function(){if(this.vertexes)for(var a=this.vertexes.k;a.next();){var b=a.value;b.clear();b.network=q}if(this.edges)for(a=this.edges.k;a.next();)b=a.value,b.clear(),b.network=q;this.vertexes=new na(Vm);this.edges=new na(Wm);this.cz=new ma(T,Vm);this.Sy=new ma(U,Wm)};Rm.prototype.toString=function(){return"LayoutNetwork"+(this.Nb!==q?"("+this.Nb.toString()+")":"")};y.A(Rm,{Nb:"layout"},w("qd"));function Sm(a,b){x&&b!==q&&y.l(b,ph,Rm,"setLayout");a.qd=b}Rm.prototype.createVertex=function(){return new Vm};
Rm.prototype.createEdge=function(){return new Wm};
Rm.prototype.addParts=Rm.prototype.gr=function(a,b){if(a!==q){b===f&&(b=s);y.j(b,"boolean",Rm,"addParts:toplevelonly");for(var c=a.k;c.next();){var d=c.value;if(d instanceof T&&(!b||d.$n)&&d.canLayout()&&!d.ii)if(d instanceof He&&d.Nb===q)this.gr(d.Ec,s);else if(this.Jl(d)===q){var e=this.createVertex();e.vc=d;this.qk(e)}}for(c.reset();c.next();)if(d=c.value,d instanceof U&&(!b||d.$n)&&d.canLayout()&&this.Nu(d)===q){var g=d.da,e=d.fa;g!==e&&(g=this.Ou(g),e=this.Ou(e),g!==q&&e!==q&&this.Sl(g,e,d))}}};
Rm.prototype.findGroupVertex=Rm.prototype.Ou=function(a){if(a===q)return q;a=Hl(a);if(a===q)return q;var b=this.Jl(a);if(b!==q)return b;a=a.bb;return a!==q&&(b=this.Jl(a),b!==q)?b:q};Rm.prototype.addVertex=Rm.prototype.qk=function(a){if(a!==q){x&&y.l(a,Vm,Rm,"addVertex:vertex");this.vertexes.add(a);var b=a.vc;b!==q&&this.cz.add(b,a);a.network=this}};
Rm.prototype.addNode=Rm.prototype.un=function(a){if(a===q)return q;x&&y.l(a,T,Rm,"addNode:node");var b=this.Jl(a);b===q&&(b=this.createVertex(),b.vc=a,this.qk(b));return b};Rm.prototype.deleteVertex=Rm.prototype.cC=function(a){if(a!==q&&(x&&y.l(a,Vm,Rm,"deleteVertex:vertex"),Xm(this,a))){for(var b=a.De,c=b.count-1;0<=c;c--){var d=b.sa(c);this.Jn(d)}b=a.ue;for(c=b.count-1;0<=c;c--)d=b.sa(c),this.Jn(d)}};
function Xm(a,b){if(b===q)return s;var c=a.vertexes.remove(b);c&&(a.cz.remove(b.vc),b.network=q);return c}Rm.prototype.deleteNode=Rm.prototype.bI=function(a){a!==q&&(x&&y.l(a,T,Rm,"deleteNode:node"),a=this.Jl(a),a!==q&&this.cC(a))};Rm.prototype.findVertex=Rm.prototype.Jl=function(a){if(a===q)return q;x&&y.l(a,T,Rm,"findVertex:node");return this.cz.wa(a)};
Rm.prototype.addEdge=Rm.prototype.tn=function(a){if(a!==q){x&&y.l(a,Wm,Rm,"addEdge:edge");this.edges.add(a);var b=a.link;b!==q&&this.Nu(b)===q&&this.Sy.add(b,a);b=a.toVertex;b!==q&&b.zB(a);b=a.fromVertex;b!==q&&b.vB(a);a.network=this}};
Rm.prototype.addLink=Rm.prototype.QH=function(a){if(a===q)return q;x&&y.l(a,U,Rm,"addLink:link");var b=a.da,c=a.fa,d=this.Nu(a);d===q?(d=this.createEdge(),d.link=a,b!==q&&(d.fromVertex=this.un(b)),c!==q&&(d.toVertex=this.un(c)),this.tn(d)):(d.fromVertex=b!==q?this.un(b):q,d.toVertex=c!==q?this.un(c):q);return d};Rm.prototype.deleteEdge=Rm.prototype.Jn=function(a){if(a!==q){x&&y.l(a,Wm,Rm,"deleteEdge:edge");var b=a.toVertex;b!==q&&b.bC(a);b=a.fromVertex;b!==q&&b.aC(a);Ym(this,a)}};
function Ym(a,b){b!==q&&a.edges.remove(b)&&(a.Sy.remove(b.link),b.network=q)}Rm.prototype.deleteLink=Rm.prototype.aI=function(a){a!==q&&(x&&y.l(a,U,Rm,"deleteLink:link"),a=this.Nu(a),a!==q&&this.Jn(a))};Rm.prototype.findEdge=Rm.prototype.Nu=function(a){if(a===q)return q;x&&y.l(a,U,Rm,"findEdge:link");return this.Sy.wa(a)};
Rm.prototype.linkVertexes=Rm.prototype.Sl=function(a,b,c){if(a===q||b===q)return q;x&&(y.l(a,Vm,Rm,"linkVertexes:fromVertex"),y.l(b,Vm,Rm,"linkVertexes:toVertex"),c!==q&&y.l(c,U,Rm,"linkVertexes:link"));if(a.network===this&&b.network===this){var d=this.createEdge();d.link=c;d.fromVertex=a;d.toVertex=b;this.tn(d);return d}return q};
Rm.prototype.reverseEdge=Rm.prototype.rv=function(a){if(a!==q){x&&y.l(a,Wm,Rm,"reverseEdge:edge");var b=a.fromVertex,c=a.toVertex;b===q||c===q||(b.aC(a),c.bC(a),a.rv(),b.zB(a),c.vB(a))}};Rm.prototype.deleteSelfEdges=Rm.prototype.Ku=function(){for(var a=y.ub(),b=this.edges.k;b.next();){var c=b.value;c.fromVertex===c.toVertex&&a.push(c)}b=a.length;for(c=0;c<b;c++)this.Jn(a[c]);y.ya(a)};
Rm.prototype.deleteArtificialVertexes=Rm.prototype.gG=function(){for(var a=y.ub(),b=this.vertexes.k;b.next();){var c=b.value;c.vc===q&&a.push(c)}c=a.length;for(b=0;b<c;b++)this.cC(a[b]);c=y.ub();for(b=this.edges.k;b.next();){var d=b.value;d.link===q&&c.push(d)}d=c.length;for(b=0;b<d;b++)this.Jn(c[b]);y.ya(a);y.ya(c)};function Zm(a){for(var b=y.ub(),c=a.edges.k;c.next();){var d=c.value;(d.fromVertex===q||d.toVertex===q)&&b.push(d)}c=b.length;for(d=0;d<c;d++)a.Jn(b[d]);y.ya(b)}
Rm.prototype.splitIntoSubNetworks=Rm.prototype.vH=function(){this.gG();Zm(this);this.Ku();for(var a=new F(Rm),b=h;b;)for(var b=s,c=this.vertexes.k;c.next();){var d=c.value;if(0<d.De.count||0<d.ue.count){b=this.Nb.createNetwork();a.add(b);$m(this,b,d);b=h;break}}a.sort(function(a,b){return a===q||b===q||a===b?0:b.vertexes.count-a.vertexes.count});return a};
function $m(a,b,c){if(c!==q&&c.network!==b){Xm(a,c);b.qk(c);for(var d=c.dc;d.next();){var e=d.value;e.network!==b&&(Ym(a,e),b.tn(e),$m(a,b,e.fromVertex))}for(d=c.Ub;d.next();)e=d.value,e.network!==b&&(Ym(a,e),b.tn(e),$m(a,b,e.toVertex))}}Rm.prototype.getParts=Rm.prototype.findAllParts=Rm.prototype.sI=function(){for(var a=new na(R),b=this.vertexes.k;b.next();)a.add(b.value.vc);for(b=this.edges.k;b.next();)a.add(b.value.link);return a};
function Vm(){y.mc(this);this.network=q;this.S=(new B(0,0,10,10)).freeze();this.N=(new A(5,5)).freeze();this.clear()}y.ba("LayoutVertex",Vm);Vm.prototype.clear=function(){this.Wc=q;this.De=new F(Wm);this.ue=new F(Wm)};Vm.prototype.toString=function(){return"LayoutVertex#"+y.bc(this)+(this.vc!==q?"("+this.vc.toString()+")":"")};y.g(Vm,"node",Vm.prototype.vc);
y.defineProperty(Vm,{vc:"node"},w("Wc"),function(a){if(this.Wc!==a){x&&a!==q&&y.l(a,T,Vm,"node");this.Wc=a;a.ci();var b=a.ua,c=b.x,d=b.y,e=b.width,b=b.height;isNaN(c)&&(c=0);isNaN(d)&&(d=0);this.S.q(c,d,e,b);c=a.Wb;c!==a&&!(a instanceof He)?(a=c.ua,this.N.q(a.x+a.width/2,a.y+a.height/2)):this.N.q(e/2,b/2)}});y.g(Vm,"bounds",Vm.prototype.Hb);y.defineProperty(Vm,{Hb:"bounds"},w("S"),function(a){this.S.L(a)||(x&&y.l(a,B,Vm,"bounds"),this.S.assign(a))});y.g(Vm,"focus",Vm.prototype.focus);
y.defineProperty(Vm,{focus:"focus"},w("N"),function(a){this.N.L(a)||(x&&y.l(a,A,Vm,"focus"),this.N.assign(a))});y.g(Vm,"centerX",Vm.prototype.xa);y.defineProperty(Vm,{xa:"centerX"},function(){return this.S.x+this.N.x},function(a){var b=this.S;b.x+this.N.x!==a&&(x&&y.p(a,Vm,"centerX"),b.Pa(),b.x=a-this.N.x,b.freeze())});y.g(Vm,"centerY",Vm.prototype.Ga);
y.defineProperty(Vm,{Ga:"centerY"},function(){return this.S.y+this.N.y},function(a){var b=this.S;b.y+this.N.y!==a&&(x&&y.p(a,Vm,"centerY"),b.Pa(),b.y=a-this.N.y,b.freeze())});y.g(Vm,"focusX",Vm.prototype.rG);y.defineProperty(Vm,{rG:"focusX"},function(){return this.N.x},function(a){var b=this.N;b.x!==a&&(b.Pa(),b.x=a,b.freeze())});y.g(Vm,"focusY",Vm.prototype.sG);y.defineProperty(Vm,{sG:"focusY"},function(){return this.N.y},function(a){var b=this.N;b.y!==a&&(b.Pa(),b.y=a,b.freeze())});y.g(Vm,"x",Vm.prototype.x);
y.defineProperty(Vm,{x:"x"},function(){return this.S.x},function(a){var b=this.S;b.x!==a&&(b.Pa(),b.x=a,b.freeze())});y.g(Vm,"y",Vm.prototype.y);y.defineProperty(Vm,{y:"y"},function(){return this.S.y},function(a){var b=this.S;b.y!==a&&(b.Pa(),b.y=a,b.freeze())});y.g(Vm,"width",Vm.prototype.width);y.defineProperty(Vm,{width:"width"},function(){return this.S.width},function(a){var b=this.S;b.width!==a&&(b.Pa(),b.width=a,b.freeze())});y.g(Vm,"height",Vm.prototype.height);
y.defineProperty(Vm,{height:"height"},function(){return this.S.height},function(a){var b=this.S;b.height!==a&&(b.Pa(),b.height=a,b.freeze())});Vm.prototype.commit=function(){var a=this.vc;if(a!==q){var b=this.Hb;a.moveTo(b.x,b.y)}};Vm.prototype.addSourceEdge=Vm.prototype.zB=function(a){a!==q&&(x&&y.l(a,Wm,Vm,"addSourceEdge:edge"),this.De.contains(a)||this.De.add(a))};Vm.prototype.deleteSourceEdge=Vm.prototype.bC=function(a){a!==q&&(x&&y.l(a,Wm,Vm,"deleteSourceEdge:edge"),this.De.remove(a))};
Vm.prototype.addDestinationEdge=Vm.prototype.vB=function(a){a!==q&&(x&&y.l(a,Wm,Vm,"addDestinationEdge:edge"),this.ue.contains(a)||this.ue.add(a))};Vm.prototype.deleteDestinationEdge=Vm.prototype.aC=function(a){a!==q&&(x&&y.l(a,Wm,Vm,"deleteDestinationEdge:edge"),this.ue.remove(a))};y.A(Vm,{uH:"sourceVertexes"},function(){for(var a=new na(Vm),b=this.dc;b.next();){var c=b.value.fromVertex;c!==q&&!a.contains(c)&&a.add(c)}return a.k});
y.A(Vm,{hG:"destinationVertexes"},function(){for(var a=new na(Vm),b=this.Ub;b.next();){var c=b.value.toVertex;c!==q&&!a.contains(c)&&a.add(c)}return a.k});y.A(Vm,{vertexes:"vertexes"},function(){for(var a=new na(Vm),b=this.dc;b.next();){var c=b.value,c=c.fromVertex;c!==q&&!a.contains(c)&&a.add(c)}for(b=this.Ub;b.next();)c=b.value,c=c.toVertex,c!==q&&!a.contains(c)&&a.add(c);return a.k});y.A(Vm,{dc:"sourceEdges"},function(){return this.De.k});y.A(Vm,{Ub:"destinationEdges"},function(){return this.ue.k});
y.A(Vm,{edges:"edges"},function(){for(var a=new F(Wm),b=this.dc;b.next();){var c=b.value;a.add(c)}for(b=this.Ub;b.next();)c=b.value,a.add(c);return a.k});y.A(Vm,{nG:"edgesCount"},function(){return this.De.count+this.ue.count});var an;Vm.standardComparer=an=function(a,b){x&&y.l(a,Vm,Vm,"standardComparer:m");x&&y.l(b,Vm,Vm,"standardComparer:n");var c=a.Wc,d=b.Wc;return c?d?(c=c.text,d=d.text,c<d?-1:c>d?1:0):1:d!==q?-1:0};
Vm.smartComparer=function(a,b){x&&y.l(a,Vm,Vm,"smartComparer:m");x&&y.l(b,Vm,Vm,"smartComparer:n");if(a!==q){if(b!==q){var c=a.Wc,d=b.Wc;if(c!==q){if(d!==q){var c=c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=d.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e;for(e=0;e<c.length;e++)if(""!==d[e]&&d[e]!==f){var g=parseFloat(c[e]),k=parseFloat(d[e]);if(isNaN(g))if(isNaN(k)){if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else return 1;
else{if(isNaN(k))return-1;if(0!==g-k)return g-k}}else if(""!==c[e])return 1;return""!==d[e]&&d[e]!==f?-1:0}return 1}return d!==q?-1:0}return 1}return b!==q?-1:0};function Wm(){y.mc(this);this.network=q;this.clear()}y.ba("LayoutEdge",Wm);Wm.prototype.clear=function(){this.toVertex=this.fromVertex=this.link=q};Wm.prototype.toString=function(){return"LayoutEdge#"+y.bc(this)+(this.link!==q?"("+this.link.toString()+")":"")};
Wm.prototype.rv=function(){var a=this.fromVertex;this.fromVertex=this.toVertex;this.toVertex=a};Wm.prototype.commit=aa();Wm.prototype.getOtherVertex=Wm.prototype.wG=function(a){x&&y.l(a,Vm,Wm,"getOtherVertex:v");return this.toVertex===a?this.fromVertex:this.fromVertex===a?this.toVertex:q};
function Zi(){0<arguments.length&&y.m("GridLayout constructor cannot take any arguments.");ph.call(this);this.Lr=h;this.cr=this.dr=NaN;this.qi=(new ha(NaN,NaN)).freeze();this.Ug=(new ha(10,10)).freeze();this.Ud=wk;this.Tc=uk;this.Tg=qk;this.Dg=bn}y.ba("GridLayout",Zi);y.Ka(Zi,ph);Zi.prototype.cloneProtected=function(a){ph.prototype.cloneProtected.call(this,a);a.dr=this.dr;a.cr=this.cr;a.qi.assign(this.qi);a.Ug.assign(this.Ug);a.Ud=this.Ud;a.Tc=this.Tc;a.Tg=this.Tg;a.Dg=this.Dg};
Zi.prototype.doLayout=function(a){a||y.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");var b=this.h;b===q&&y.m("The diagram for this layout is not set.");this.ed=Um(this,this.ed);var c=new na(R);a===this.h?(Tm(this,c,a.uj,h,q,h,s,h),Tm(this,c,a.links,h,q,h,s,h),Tm(this,c,a.as,h,q,h,s,h)):a===this.group?Tm(this,c,a.Ec,s,q,h,s,h):c.Me(a.k);for(a=c.copy().k;a.next();){var d=a.value;if(d instanceof U&&(d.da!==q||d.fa!==q))c.remove(d);else if(d.ci(),
d instanceof He)for(d=d.Ec;d.next();)c.remove(d.value)}c=c.Ee();if(0!==c.length){switch(this.sorting){case tk:c.reverse();break;case qk:c.sort(this.comparer);break;case rk:c.sort(this.comparer),c.reverse()}d=this.FE;isNaN(d)&&(d=0);a=this.Jz;a=isNaN(a)?Math.max(this.h.eb.width-b.padding.left-b.padding.right,0):Math.max(this.Jz,0);0>=d&&0>=a&&(d=1);var e=this.spacing.width;isFinite(e)||(e=0);var g=this.spacing.height;isFinite(g)||(g=0);b.lc("Layout");switch(this.alignment){case xk:var k=Math.max(this.tk.width,
1);if(!isFinite(k))for(var l=k=0;l<c.length;l++)var m=c[l],n=m.Ba,k=Math.max(k,n.width);var k=Math.max(k+e,1),p=Math.max(this.tk.height,1);if(!isFinite(p))for(l=p=0;l<c.length;l++)m=c[l],n=m.Ba,p=Math.max(p,n.height);for(var p=Math.max(p+g,1),r=this.qe,t=this.ed.x,u=t,v=this.ed.y,z=0,C=0,l=0;l<c.length;l++){var m=c[l],n=m.Ba,K=Math.ceil((n.width+e)/k)*k,I=Math.ceil((n.height+g)/p)*p,Q;switch(r){case vk:Q=Math.abs(u-n.width)+t;break;default:Q=u+n.width-t}if(0<d&&z>d-1||0<a&&0<z&&Q>a)z=0,u=t,v+=C,C=
0;C=Math.max(C,I);switch(r){case vk:n=-n.width;break;default:n=0}m.moveTo(u+n,v);switch(r){case vk:u-=K;break;default:u+=K}z++}break;case wk:k=Math.max(this.tk.width,1);l=C=z=0;m=y.M();for(p=0;p<c.length;p++)r=c[p],t=r.Ba,u=Il(r,r.Wb,r.We,m),z=Math.max(z,u.x),C=Math.max(C,t.width-u.x),l=Math.max(l,u.y);v=this.qe;switch(v){case vk:z+=e;break;default:C+=e}var k=isFinite(k)?Math.max(k+e,1):Math.max(z+C,1),L=z=this.ed.x,C=this.ed.y,n=K=0,I=Math.max(this.tk.height,1);Q=l=0;for(var S=h,Z=y.M(),p=0;p<c.length;p++){r=
c[p];t=r.Ba;u=Il(r,r.Wb,r.We,m);if(0<K)switch(v){case vk:L=Math.floor((L-z-(t.width-u.x))/k)*k+z;break;default:L=Math.ceil((L-z+u.x)/k)*k+z}else switch(v){case vk:n=L+u.x+t.width;break;default:n=L-u.x}var X;switch(v){case vk:X=-(L+u.x)+z+n;break;default:X=L+t.width-u.x-z-n}if(0<d&&K>d-1||0<a&&0<K&&X>a){for(L=0;L<K&&p!==K;L++){X=c[p-K+L];var ea=Il(X,X.Wb,X.We,Z);X.moveTo(X.position.x,X.position.y+l-ea.y)}Q+=g;C=S?C+Q:C+(Q+l);K=Q=l=0;L=z;S=s}l=Math.max(l,u.y);Q=Math.max(Q,t.height-u.y);isFinite(I)&&
(Q=Math.max(Q,Math.max(t.height,I)-u.y));S?r.moveTo(L-u.x,C-u.y):r.moveTo(L-u.x,C);switch(v){case vk:L-=u.x+e;break;default:L+=t.width-u.x+e}K++}for(L=0;L<K&&p!==K;L++)X=c[p-K+L],ea=Il(X,X.Wb,X.We,m),X.moveTo(X.position.x,X.position.y+l-ea.y);y.B(m);y.B(Z)}b.se("Layout");this.Ve=h}};y.g(Zi,"wrappingWidth",Zi.prototype.Jz);y.defineProperty(Zi,{Jz:"wrappingWidth"},w("dr"),function(a){if(this.dr!==a&&(0<a||isNaN(a)))this.dr=a,this.Lr=isNaN(a),this.J()});y.g(Zi,"wrappingColumn",Zi.prototype.FE);
y.defineProperty(Zi,{FE:"wrappingColumn"},w("cr"),function(a){if(this.cr!==a&&(0<a||isNaN(a)))this.cr=a,this.J()});y.g(Zi,"cellSize",Zi.prototype.tk);y.defineProperty(Zi,{tk:"cellSize"},w("qi"),function(a){this.qi.L(a)||(this.qi.assign(a),this.J())});y.g(Zi,"spacing",Zi.prototype.spacing);y.defineProperty(Zi,{spacing:"spacing"},w("Ug"),function(a){this.Ug.L(a)||(this.Ug.assign(a),this.J())});y.g(Zi,"alignment",Zi.prototype.alignment);
y.defineProperty(Zi,{alignment:"alignment"},w("Ud"),function(a){if(this.Ud!==a&&(x&&y.l(a,ga,Zi,"alignment"),a===wk||a===xk))this.Ud=a,this.J()});y.g(Zi,"arrangement",Zi.prototype.qe);y.defineProperty(Zi,{qe:"arrangement"},w("Tc"),function(a){if(this.Tc!==a&&(x&&y.l(a,ga,Zi,"arrangement"),a===uk||a===vk))this.Tc=a,this.J()});y.g(Zi,"sorting",Zi.prototype.sorting);
y.defineProperty(Zi,{sorting:"sorting"},w("Tg"),function(a){if(this.Tg!==a&&(x&&y.l(a,ga,Zi,"sorting"),a===sk||a===tk||a===qk||a===rk))this.Tg=a,this.J()});y.g(Zi,"comparer",Zi.prototype.comparer);y.defineProperty(Zi,{comparer:"comparer"},w("Dg"),function(a){this.Dg!==a&&(x&&y.j(a,"function",Zi,"comparer"),this.Dg=a,this.J())});var bn;Zi.standardComparer=bn=function(a,b){x&&y.l(a,R,Zi,"standardComparer:a");x&&y.l(b,R,Zi,"standardComparer:b");var c=a.text,d=b.text;return c<d?-1:c>d?1:0};
Zi.smartComparer=function(a,b){x&&y.l(a,R,Zi,"standardComparer:a");x&&y.l(b,R,Zi,"standardComparer:b");if(a!==q){if(b!==q){var c=a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e;for(e=0;e<c.length;e++)if(""!==d[e]&&d[e]!==f){var g=parseFloat(c[e]),k=parseFloat(d[e]);if(isNaN(g))if(isNaN(k)){if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else return 1;else{if(isNaN(k))return-1;
if(0!==g-k)return g-k}}else if(""!==c[e])return 1;return""!==d[e]&&d[e]!==f?-1:0}return 1}return b!==q?-1:0};var xk;Zi.Position=xk=y.w(Zi,"Position",0);var wk;Zi.Location=wk=y.w(Zi,"Location",1);var uk;Zi.LeftToRight=uk=y.w(Zi,"LeftToRight",2);var vk;Zi.RightToLeft=vk=y.w(Zi,"RightToLeft",3);var sk;Zi.Forward=sk=y.w(Zi,"Forward",4);var tk;Zi.Reverse=tk=y.w(Zi,"Reverse",5);var qk;Zi.Ascending=qk=y.w(Zi,"Ascending",6);var rk;Zi.Descending=rk=y.w(Zi,"Descending",7);
function yk(){0<arguments.length&&y.m("CircularLayout constructor cannot take any arguments.");ph.call(this);this.Hw=this.Bm=this.bd=0;this.ip=360;this.Gw=Kk;this.Tj=0;this.tA=Kk;this.Os=this.Hf=this.oB=0;this.nu=new cn;this.Rs=this.ml=0;this.$E=600;this.pq=NaN;this.To=1;this.Zd=0;this.$d=360;this.Tc=Kk;this.ma=Gk;this.Tg=Dk;this.Dg=an;this.Ug=6;this.jq=Nk}y.ba("CircularLayout",yk);y.Ka(yk,ph);
yk.prototype.cloneProtected=function(a){ph.prototype.cloneProtected.call(this,a);a.pq=this.pq;a.To=this.To;a.Zd=this.Zd;a.$d=this.$d;a.Tc=this.Tc;a.ma=this.ma;a.Tg=this.Tg;a.Dg=this.Dg;a.Ug=this.Ug;a.jq=this.jq};yk.prototype.createNetwork=function(){var a=new dn;Sm(a,this);return a};
yk.prototype.doLayout=function(a){a||y.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");this.network===q&&(this.network=this.makeNetwork(a));a=this.network.vertexes;if(1>=a.count)1===a.count&&(a=a.ob(),a.xa=0,a.Ga=0);else{var b=new F(en);b.Me(a.k);a=new F(en);var c=new F(en),b=this.sort(b);a=new F(en);var c=new F(en),d=this.Gw,e=this.tA,g=this.bd,k=this.Bm,l=this.Hw,m=this.ip,n=this.Tj,p=this.oB,r=this.Hf,t=this.Os,d=this.qe,e=this.Xr,g=this.qD;
if(!isFinite(g)||0>=g)g=NaN;k=this.FB;if(!isFinite(k)||0>=k)k=1;l=this.Wf;isFinite(l)||(l=0);m=this.nh;if(!isFinite(m)||360<m||1>m)m=360;n=this.spacing;isFinite(n)||(n=NaN);d===Lk&&e===Mk?d=Kk:d===Lk&&e!==Mk&&(e=Mk,d=this.qe);if((this.direction===Ek||this.direction===Fk)&&this.sorting!==Dk){for(var u=0;!(u>=b.length);u+=2){a.add(b.sa(u));if(u+1>=b.length)break;c.add(b.sa(u+1))}this.direction===Ek?(this.qe===Lk&&a.reverse(),b=new F(en),b.Me(a),b.Me(c)):(this.qe===Lk&&c.reverse(),b=new F(en),b.Me(c),
b.Me(a))}for(var v=b.length,z=p=0,u=0;u<b.length;u++){var r=l+m*z*(this.direction===Gk?1:-1)/v,C=b.sa(u).diameter;isNaN(C)&&(C=fn(b.sa(u),r));if(360>m&&(0===u||u===b.length-1))C/=2;p+=C;z++}if(isNaN(g)||d===Lk){isNaN(n)&&(n=6);if(d!==Kk&&d!==Lk){C=-Infinity;for(u=0;u<v;u++){var t=b.sa(u),K=b.sa(u===v-1?0:u+1);isNaN(t.diameter)&&fn(t,0);isNaN(K.diameter)&&fn(K,0);C=Math.max(C,(t.diameter+K.diameter)/2)}t=C+n;d===Ik?(r=2*Math.PI/v,g=(C+n)/r):g=gn(this,t*(360<=m?v:v-1),k,l*Math.PI/180,m*Math.PI/180)}else g=
gn(this,p+(360<=m?v:v-1)*(d!==Lk?n:1.6*n),k,l*Math.PI/180,m*Math.PI/180);r=g*k}else if(r=g*k,z=hn(this,g,r,l*Math.PI/180,m*Math.PI/180),isNaN(n)){if(d===Kk||d===Lk)n=(z-p)/(360<=m?v:v-1)}else if(d===Kk||d===Lk)u=(z-p)/(360<=m?v:v-1),u<n?(g=gn(this,p+n*(360<=m?v:v-1),k,l*Math.PI/180,m*Math.PI/180),r=g*k):n=u;else{C=-Infinity;for(u=0;u<v;u++)t=b.sa(u),K=b.sa(u===v-1?0:u+1),isNaN(t.diameter)&&fn(t,0),isNaN(K.diameter)&&fn(K,0),C=Math.max(C,(t.diameter+K.diameter)/2);t=C+n;u=gn(this,t*(360<=m?v:v-1),
k,l*Math.PI/180,m*Math.PI/180);u>g?(g=u,r=g*k):t=z/(360<=m?v:v-1)}this.Gw=d;this.tA=e;this.bd=g;this.Bm=k;this.Hw=l;this.ip=m;this.Tj=n;this.oB=p;this.Hf=r;this.Os=t;c=[b,a,c];b=c[0];a=c[1];c=c[2];d=this.Gw;e=this.bd;k=this.Hw;l=this.ip;m=this.Tj;n=this.Hf;p=this.Os;if((this.direction===Ek||this.direction===Fk)&&d===Lk)jn(this,b,l,k-l/2,Gk);else if(this.direction===Ek||this.direction===Fk){g=0;switch(d){case Jk:g=180*kn(this,e,n,k,p)/Math.PI;break;case Kk:p=b=0;g=a.ob();g!==q&&(b=fn(g,Math.PI/2));
g=c.ob();g!==q&&(p=fn(g,Math.PI/2));g=180*kn(this,e,n,k,m+(b+p)/2)/Math.PI;break;case Ik:g=l/b.length}if(this.direction===Ek){switch(d){case Jk:ln(this,a,k,Hk);break;case Kk:mn(this,a,k,Hk);break;case Ik:nn(this,a,l/2,k,Hk)}switch(d){case Jk:ln(this,c,k+g,Gk);break;case Kk:mn(this,c,k+g,Gk);break;case Ik:nn(this,c,l/2,k+g,Gk)}}else{switch(d){case Jk:ln(this,c,k,Hk);break;case Kk:mn(this,c,k,Hk);break;case Ik:nn(this,c,l/2,k,Hk)}switch(d){case Jk:ln(this,a,k+g,Gk);break;case Kk:mn(this,a,k+g,Gk);break;
case Ik:nn(this,a,l/2,k+g,Gk)}}}else switch(d){case Jk:ln(this,b,k,this.direction);break;case Kk:mn(this,b,k,this.direction);break;case Ik:nn(this,b,l,k,this.direction);break;case Lk:jn(this,b,l,k,this.direction)}}this.updateParts();this.network=q;this.Ve=h};
function nn(a,b,c,d,e){var g=a.ip,k=a.bd;a=a.Hf;d=d*Math.PI/180;c=c*Math.PI/180;for(var l=b.length,m=0;m<l;m++){var n=d+(e===Gk?m*c/(360<=g?l:l-1):-(m*c)/l),p=b.sa(m),r=k*Math.tan(n)/a,r=Math.sqrt((k*k+a*a*r*r)/(1+r*r));p.xa=r*Math.cos(n);p.Ga=r*Math.sin(n);p.actualAngle=180*n/Math.PI}}
function mn(a,b,c,d){var e=a.bd,g=a.Hf,k=a.Tj;c=c*Math.PI/180;for(var l=b.length,m=0;m<l;m++){var n=b.sa(m),p=b.sa(m===l-1?0:m+1),r=g*Math.sin(c);n.xa=e*Math.cos(c);n.Ga=r;n.actualAngle=180*c/Math.PI;isNaN(n.diameter)&&fn(n,0);isNaN(p.diameter)&&fn(p,0);n=kn(a,e,g,d===Gk?c:-c,(n.diameter+p.diameter)/2+k);c+=d===Gk?n:-n}}
function ln(a,b,c,d){var e=a.bd,g=a.Hf,k=a.Os;c=c*Math.PI/180;for(var l=b.length,m=0;m<l;m++){var n=b.sa(m);n.xa=e*Math.cos(c);n.Ga=g*Math.sin(c);n.actualAngle=180*c/Math.PI;n=kn(a,e,g,d===Gk?c:-c,k);c+=d===Gk?n:-n}}function jn(a,b,c,d,e){var g=a.Rs,g=a.ip;a.ml=0;a.nu=new cn;if(360>c){for(g=d+(e===Gk?g:-g);0>g;)g+=360;g%=360;180<g&&(g-=360);g*=Math.PI/180;a.Rs=g;on(a,b,c,d,e)}else pn(a,b,c,d,e);a.nu.commit(b)}
function pn(a,b,c,d,e){var g=a.bd,k=a.Hf,l=a.Tj,m=a.Bm,n=g*Math.cos(d*Math.PI/180),p=k*Math.sin(d*Math.PI/180),r=b.Ee();if(3===r.length)r[0].xa=g*Math.cos(0),r[0].Ga=k*Math.sin(0),r[1].xa=r[0].xa-r[0].width/2-r[1].width/2-l,r[1].y=r[0].y,r[2].xa=(r[0].xa+r[1].xa)/2,r[2].y=r[0].y-r[2].height-l;else if(4===r.length)r[0].xa=g*Math.cos(0),r[0].Ga=k*Math.sin(0),r[2].xa=-r[0].xa,r[2].Ga=r[0].Ga,r[1].xa=0,r[1].y=Math.min(r[0].y,r[2].y)-r[1].height-l,r[3].xa=0,r[3].y=Math.max(r[0].y+r[0].height+l,r[2].y+
r[2].height+l);else{for(g=0;g<r.length;g++){r[g].xa=n;r[g].Ga=p;if(g>=r.length-1)break;k=qn(a,n,p,r,g,e);k[0]||(k=rn(a,n,p,r,g,e));n=k[1];p=k[2]}a.ml++;if(!(23<a.ml)){var n=r[0].xa,p=r[0].Ga,g=r[r.length-1].xa,k=r[r.length-1].Ga,t=Math.abs(n-g)-((r[0].width+r[r.length-1].width)/2+l),u=Math.abs(p-k)-((r[0].height+r[r.length-1].height)/2+l),l=0;1>Math.abs(u)?Math.abs(n-g)<(r[0].width+r[r.length-1].width)/2&&(l=0):l=0<u?u:1>Math.abs(t)?0:t;t=s;t=Math.abs(g)>Math.abs(k)?0<g!==p>k:0<k!==n<g;if(t=e===Gk?
t:!t)l=-Math.abs(l),l=Math.min(l,-r[r.length-1].width),l=Math.min(l,-r[r.length-1].height);n=a.nu;if(0<l&&0>n.Sn||Math.abs(l)<Math.abs(n.Sn)&&!(0>l&&0<n.Sn)){n.Sn=l;n.em=[];n.Fo=[];for(p=0;p<r.length;p++)n.em[p]=r[p].Hb.x,n.Fo[p]=r[p].Hb.y}1<Math.abs(l)&&(a.bd=8>a.ml?a.bd-l/(2*Math.PI):5>r.length&&10<l?a.bd/2:a.bd-(0<l?1.7:-2.3),a.Hf=a.bd*m,pn(a,b,c,d,e))}}}
function on(a,b,c,d,e){for(var g=a.bd,k=a.Hf,l=a.Bm,m=g*Math.cos(d*Math.PI/180),n=k*Math.sin(d*Math.PI/180),p=b.Ee(),r=0;r<p.length;r++){p[r].xa=m;p[r].Ga=n;if(r>=p.length-1)break;var t=qn(a,m,n,p,r,e);t[0]||(t=rn(a,m,n,p,r,e));m=t[1];n=t[2]}a.ml++;if(!(23<a.ml)){m=Math.atan2(n,m);m=e===Gk?a.Rs-m:m-a.Rs;m=Math.abs(m)<Math.abs(m-2*Math.PI)?m:m-2*Math.PI;g=m*(g+k)/2;k=a.nu;if(Math.abs(g)<Math.abs(k.Sn)){k.Sn=g;k.em=[];k.Fo=[];for(m=0;m<p.length;m++)k.em[m]=p[m].Hb.x,k.Fo[m]=p[m].Hb.y}1<Math.abs(g)&&
(a.bd=8>a.ml?a.bd-g/(2*Math.PI):a.bd-(0<g?1.7:-2.3),a.Hf=a.bd*l,on(a,b,c,d,e))}}function qn(a,b,c,d,e,g){var k=a.bd,l=a.Hf,m=0,n=0;a=(d[e].width+d[e+1].width)/2+a.Tj;var p=s;if(0<=c!==(g===Gk)){if(m=b+a,m>k){m=b-a;if(m<-k)return b=[s],b[1]=m,b[2]=n,b;p=h}}else if(m=b-a,m<-k){m=b+a;if(m>k)return b=[s],b[1]=m,b[2]=n,b;p=h}n=Math.sqrt(1-Math.min(1,m*m/(k*k)))*l;0>c!==p&&(n=-n);b=Math.abs(c-n)>(d[e].height+d[e+1].height)/2?[s]:[h];b[1]=m;b[2]=n;return b}
function rn(a,b,c,d,e,g){var k=a.bd,l=a.Hf,m=0,n=0;a=(d[e].height+d[e+1].height)/2+a.Tj;var p=s;if(0<=b!==(g===Gk)){if(n=c-a,n<-l){n=c+a;if(n>l)return b=[s],b[1]=m,b[2]=n,b;p=h}}else if(n=c+a,n>l){n=c-a;if(n<-l)return b=[s],b[1]=m,b[2]=n,b;p=h}m=Math.sqrt(1-Math.min(1,n*n/(l*l)))*k;0>b!==p&&(m=-m);b=Math.abs(b-m)>(d[e].width+d[e+1].width)/2?[s]:[h];b[1]=m;b[2]=n;return b}function cn(){this.Sn=-Infinity;this.Fo=this.em=q}
cn.prototype.commit=function(a){if(!(this.em===q||this.Fo===q))for(var b=0;b<this.em.length;b++){var c=a.sa(b);c.x=this.em[b];c.y=this.Fo[b]}};yk.prototype.commitLayout=function(){this.commitNodes();this.Kr&&this.commitLinks()};yk.prototype.commitNodes=function(){for(var a=this.gF,b=this.network.vertexes.k,c;b.next();)c=b.value,c.x+=a.x,c.y+=a.y,c.commit()};yk.prototype.commitLinks=function(){for(var a=this.network.edges.k;a.next();)a.value.commit()};
function hn(a,b,c,d,e){var g=a.$E;if(0.001>Math.abs(a.Bm-1))return d!==f&&e!==f?e*b:2*Math.PI*b;a=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c;var k=0,l;l=d!==f&&e!==f?e/(g+1):Math.PI/(2*(g+1));for(var m=0;m<=g;m++)var n=Math.sin(d!==f&&e!==f?d+m*e/g:m*Math.PI/(2*g)),k=k+Math.sqrt(1-a*a*n*n)*l;return d!==f&&e!==f?(b>c?b:c)*k:4*(b>c?b:c)*k}function gn(a,b,c,d,e){a=d!==f&&e!==f?hn(a,1,c,d,e):hn(a,1,c);return b/a}
function kn(a,b,c,d,e){if(0.001>Math.abs(a.Bm-1))return e/b;var g=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,k=0;a=2*Math.PI/(700*a.network.vertexes.count);b>c&&(d+=Math.PI/2);for(var l=0;;l++){var m=Math.sin(d+l*a),k=k+(b>c?b:c)*Math.sqrt(1-g*g*m*m)*a;if(k>=e)return l*a}return 0}
yk.prototype.sort=function(a){switch(this.sorting){case Bk:break;case Ck:a.reverse();break;case zk:a.sort(this.comparer);break;case Ak:a.sort(this.comparer);a.reverse();break;case Dk:for(var b=[],c=0;c<a.length;c++)b.push(0);for(var d=new F(en),c=0;c<a.length;c++){var e=-1,g=-1;if(0===c)for(var k=0;k<a.length;k++){var l=a.sa(k).nG;l>e&&(e=l,g=k)}else for(k=0;k<a.length;k++)l=b[k],l>e&&(e=l,g=k);d.add(a.sa(g));b[g]=-1;g=a.sa(g);e=g.dc;for(g=g.Ub;e.next();)k=e.value,k=k.fromVertex,k=a.indexOf(k),0>
k||0<=b[k]&&b[k]++;for(;g.next();)k=g.value,k=k.toVertex,k=a.indexOf(k),0>k||0<=b[k]&&b[k]++}a=[];for(b=0;b<d.length;b++){l=d.sa(b);a[b]=[];for(var c=l.Ub,e=l.dc,m,n;c.next();)m=c.value,n=d.indexOf(m.toVertex),n!==b&&0>a[b].indexOf(n)&&a[b].push(n);for(;e.next();)m=e.value,n=d.indexOf(m.fromVertex),n!==b&&0>a[b].indexOf(n)&&a[b].push(n)}l=[];for(b=0;b<a.length;b++)l[b]=0;for(var c=[],p=[],r=[],e=[],g=new F(en),k=b=0;b<a.length;b++){var t=a[b].length;if(1===t)e.push(b);else if(0===t)g.add(d.sa(b));
else{if(0===k)c.push(b);else{for(var u=Infinity,v=Infinity,z=-1,C=[],t=0;t<c.length;t++)if(0>a[c[t]].indexOf(c[t===c.length-1?0:t+1]))C.push(t===c.length-1?0:t+1);if(0===C.length)for(t=0;t<c.length;t++)C.push(t);for(t=0;t<C.length;t++){var K=C[t],I;n=a[b];m=p;I=r;for(var Q=l,L=K,S=c,Z=0,X=0;X<m.length;X++){var ea=Q[m[X]],ia=Q[I[X]],W=0,wa=0;ea<ia?(W=ea,wa=ia):(W=ia,wa=ea);if(W<L&&L<=wa)for(ea=0;ea<n.length;ea++)ia=n[ea],0>S.indexOf(ia)||W<Q[ia]&&Q[ia]<wa||(W===Q[ia]||wa===Q[ia])||Z++;else for(ea=
0;ea<n.length;ea++)ia=n[ea],0>S.indexOf(ia)||W<Q[ia]&&Q[ia]<wa&&!(W===Q[ia]||wa===Q[ia])&&Z++}I=Z;for(m=Q=0;m<a[b].length;m++)n=c.indexOf(a[b][m]),0<=n&&(n=Math.abs(K-(n>=K?n+1:n)),Q+=n<c.length+1-n?n:c.length+1-n);for(m=0;m<p.length;m++)n=l[p[m]],L=l[r[m]],n>=K&&n++,L>=K&&L++,n>L&&(S=L,L=n,n=S),L-n<(c.length+2)/2===(n<K&&K<=L)&&Q++;if(I<u||I===u&&Q<v)u=I,v=Q,z=K}c.splice(z,0,b);for(t=0;t<c.length;t++)l[c[t]]=t;for(t=0;t<a[b].length;t++)u=a[b][t],0<=c.indexOf(u)&&(p.push(b),r.push(u))}k++}}p=s;for(r=
c.length;;){p=h;for(l=0;l<e.length;l++)if(b=e[l],t=a[b][0],n=c.indexOf(t),0<=n){for(k=v=0;k<a[t].length;k++)u=a[t][k],u=c.indexOf(u),0>u||u===n||(z=u>n?u-n:n-u,v+=u<n!==z>r-z?1:-1);c.splice(0>v?n:n+1,0,b);e.splice(l,1);l--}else p=s;if(p)break;else c.push(e[0]),e.splice(0,1)}for(b=0;b<c.length;b++)n=c[b],g.add(d.sa(n));return g;default:y.m("Invalid sorting type.")}return a};y.g(yk,"radius",yk.prototype.qD);
y.defineProperty(yk,{qD:"radius"},w("pq"),function(a){if(this.pq!==a&&(0<a||isNaN(a)))this.pq=a,this.J()});y.g(yk,"aspectRatio",yk.prototype.FB);y.defineProperty(yk,{FB:"aspectRatio"},w("To"),function(a){this.To!==a&&0<a&&(this.To=a,this.J())});y.g(yk,"startAngle",yk.prototype.Wf);y.defineProperty(yk,{Wf:"startAngle"},w("Zd"),function(a){this.Zd!==a&&(this.Zd=a,this.J())});y.g(yk,"sweepAngle",yk.prototype.nh);
y.defineProperty(yk,{nh:"sweepAngle"},w("$d"),function(a){this.$d!==a&&(this.$d=0<a&&360>=a?a:360,this.J())});y.g(yk,"arrangement",yk.prototype.qe);y.defineProperty(yk,{qe:"arrangement"},w("Tc"),function(a){if(this.Tc!==a&&(x&&y.l(a,ga,yk,"arrangement"),a===Lk||a===Kk||a===Jk||a===Ik))this.Tc=a,this.J()});y.g(yk,"direction",yk.prototype.direction);
y.defineProperty(yk,{direction:"direction"},w("ma"),function(a){if(this.ma!==a&&(x&&y.l(a,ga,yk,"direction"),a===Gk||a===Hk||a===Ek||a===Fk))this.ma=a,this.J()});y.g(yk,"sorting",yk.prototype.sorting);y.defineProperty(yk,{sorting:"sorting"},w("Tg"),function(a){if(this.Tg!==a&&(x&&y.l(a,ga,yk,"sorting"),a===Bk||a===Ck||a===zk||Ak||a===Dk))this.Tg=a,this.J()});y.g(yk,"comparer",yk.prototype.comparer);
y.defineProperty(yk,{comparer:"comparer"},w("Dg"),function(a){this.Dg!==a&&(x&&y.j(a,"function",yk,"comparer"),this.Dg=a,this.J())});y.g(yk,"spacing",yk.prototype.spacing);y.defineProperty(yk,{spacing:"spacing"},w("Ug"),function(a){this.Ug!==a&&(this.Ug=a,this.J())});y.g(yk,"nodeDiameterFormula",yk.prototype.Xr);y.defineProperty(yk,{Xr:"nodeDiameterFormula"},w("jq"),function(a){if(this.jq!==a&&(x&&y.l(a,ga,yk,"nodeDiameterFormula"),a===Nk||a===Mk))this.jq=a,this.J()});
y.A(yk,{hF:"actualXRadius"},w("bd"));y.A(yk,{iF:"actualYRadius"},w("Hf"));y.A(yk,{NH:"actualSpacing"},w("Tj"));y.A(yk,{gF:"actualCenter"},function(){return isNaN(this.ed.x)||isNaN(this.ed.y)?new A(0,0):new A(this.ed.x+this.hF,this.ed.y+this.iF)});var Kk;yk.ConstantSpacing=Kk=y.w(yk,"ConstantSpacing",0);var Jk;yk.ConstantDistance=Jk=y.w(yk,"ConstantDistance",1);var Ik;yk.ConstantAngle=Ik=y.w(yk,"ConstantAngle",2);var Lk;yk.Packed=Lk=y.w(yk,"Packed",3);var Gk;yk.Clockwise=Gk=y.w(yk,"Clockwise",4);var Hk;
yk.Counterclockwise=Hk=y.w(yk,"Counterclockwise",5);var Ek;yk.BidirectionalLeft=Ek=y.w(yk,"BidirectionalLeft",6);var Fk;yk.BidirectionalRight=Fk=y.w(yk,"BidirectionalRight",7);var Bk;yk.Forwards=Bk=y.w(yk,"Forwards",8);var Ck;yk.Reverse=Ck=y.w(yk,"Reverse",9);var zk;yk.Ascending=zk=y.w(yk,"Ascending",10);var Ak;yk.Descending=Ak=y.w(yk,"Descending",11);var Dk;yk.Optimized=Dk=y.w(yk,"Optimized",12);var Nk;yk.Pythagorean=Nk=y.w(yk,"Pythagorean",13);var Mk;yk.Circular=Mk=y.w(yk,"Circular",14);
function dn(){Rm.call(this)}y.ba("CircularNetwork",dn);y.Ka(dn,Rm);dn.prototype.createVertex=function(){return new en};dn.prototype.createEdge=function(){return new sn};function en(){Vm.call(this);this.actualAngle=this.diameter=NaN}y.ba("CircularVertex",en);y.Ka(en,Vm);
function fn(a,b){var c=a.network;if(c===q)return NaN;c=c.Nb;if(c===q)return NaN;if(c.qe===Lk)if(c.Xr===Mk)a.diameter=Math.max(a.width,a.height);else{var c=Math.abs(Math.sin(b)),d=Math.abs(Math.cos(b));if(0===c)return a.width;if(0===d)return a.height;a.diameter=Math.min(a.height/c,a.width/d)}else a.diameter=c.Xr===Mk?Math.max(a.width,a.height):Math.sqrt(a.width*a.width+a.height*a.height);return a.diameter}function sn(){Wm.call(this)}y.ba("CircularEdge",sn);y.Ka(sn,Wm);
function tn(){0<arguments.length&&y.m("ForceDirectedLayout constructor cannot take any arguments.");ph.call(this);this.Gf=q;this.Hp=0;this.wf=(new ha(100,100)).freeze();this.So=s;this.Xo=this.Sg=h;this.Xm=100;this.kp=1;this.Kg=1E3;this.xm=0.05;this.wm=50;this.um=150;this.vm=0;this.tm=20;this.sm=25}y.ba("ForceDirectedLayout",tn);y.Ka(tn,ph);
tn.prototype.cloneProtected=function(a){ph.prototype.cloneProtected.call(this,a);a.wf.assign(this.wf);a.So=this.So;a.Sg=this.Sg;a.Xo=this.Xo;a.Xm=this.Xm;a.kp=this.kp;a.Kg=this.Kg;a.xm=this.xm;a.wm=this.wm;a.um=this.um;a.vm=this.vm;a.tm=this.tm;a.sm=this.sm};tn.prototype.createNetwork=function(){var a=new un;Sm(a,this);return a};
tn.prototype.doLayout=function(a){a||y.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");this.network===q&&(this.network=this.makeNetwork(a));a=this.jv;if(0<this.network.vertexes.count){this.network.Ku();for(var b=this.network.vertexes.k;b.next();){var c=b.value;c.charge=this.electricalCharge(c);c.mass=this.gravitationalMass(c)}for(b=this.network.edges.k;b.next();)c=b.value,c.stiffness=this.springStiffness(c),c.length=this.springLength(c);this.Hp=
0;a:{if(!(3>this.network.vertexes.count)){var d=b=0,c=this.network.vertexes.k;c.next();for(var e=c.value.S;c.next();){if(c.value.S.qf(e)&&(b++,1<b)){b=h;break a}if(10<d)break;d++}}b=s}if(b){b=this.network;for(d=b.vH().k;d.next();){this.network=e=d.value;for(c=this.network.vertexes.k;c.next();){for(var e=c.value,g=0,k=e.vertexes;k.next();)g++;e.sf=g;e.vj=1;e.Al=q;e.xg=q}vn(this,0,a)}this.network=b;d.reset();x&&y.l(b,un,tn,"arrangeConnectedGraphs:singletons");for(var c=this.vu,l=d.count,m=h,g=e=0,k=
y.ub(),n=0;n<l+b.vertexes.count+2;n++)k[n]=q;l=0;d.reset();for(n=y.df();d.next();){var p=d.value;this.Qe(p,n);if(m)m=s,e=n.x+n.width/2,g=n.y+n.height/2,k[0]=new A(n.x+n.width+c.width,n.y),k[1]=new A(n.x,n.y+n.height+c.height),l=2;else{var r=wn(k,l,e,g,n.width,n.height,c),t=k[r],u=new A(t.x+n.width+c.width,t.y),v=new A(t.x,t.y+n.height+c.height);r+1<l&&k.splice(r+1,0,q);k[r]=u;k[r+1]=v;l++;r=t.x-n.x;t=t.y-n.y;for(p=p.vertexes.k;p.next();){var z=p.value;z.xa+=r;z.Ga+=t}}}y.Bc(n);for(p=b.vertexes.k;p.next();)z=
p.value,m=z.S,2>l?(e=m.x+m.width/2,g=m.y+m.height/2,k[0]=new A(m.x+m.width+c.width,m.y),k[1]=new A(m.x,m.y+m.height+c.height),l=2):(r=wn(k,l,e,g,m.width,m.height,c),t=k[r],u=new A(t.x+m.width+c.width,t.y),v=new A(t.x,t.y+m.height+c.height),r+1<l&&k.splice(r+1,0,q),k[r]=u,k[r+1]=v,l++,z.xa=t.x+z.width/2,z.Ga=t.y+z.height/2);y.ya(k);for(d.reset();d.next();){e=d.value;for(g=e.vertexes.k;g.next();)c=g.value,b.qk(c);for(e=e.edges.k;e.next();)c=e.value,b.tn(c)}}xn(this,a);this.updateParts()}this.Xm=a;this.network=
q;this.Ve=h};tn.prototype.Qe=function(a,b){for(var c=h,d=a.vertexes.k;d.next();){var e=d.value;c?(c=s,b.set(e.S)):b.zj(e.S)}return b};function yn(a,b,c){x&&(y.p(b,tn,"computeClusterLayoutIterations:level"),y.p(c,tn,"computeClusterLayoutIterations:maxiter"));return Math.max(Math.min(a.network.vertexes.count,c*(b+1)/11),10)}
function vn(a,b,c){x&&(y.p(b,tn,"layoutClusters:level"),y.p(c,tn,"layoutClusters:maxiter"));if(zn(a,b)){var d=a.Kg;a.Kg*=1+1/(b+1);var e=An(a,b),g=Math.max(0,yn(a,b,c));a.jv+=g;vn(a,b+1,c);xn(a,g);Bn(a,e,b);c=a.Gf;c===q?c=new F(Cn):c.clear();c.Me(e.vertexes);c.sort(function(a,b){return a===q||b===q||a===b?0:b.sf-a.sf});for(e=c.k;e.next();)Dn(a,e.value,b);a.Kg=d}}
function zn(a,b){x&&y.p(b,tn,"hasClusters:level");if(10<b||3>a.network.vertexes.count)return s;a.Gf===q?a.Gf=new F(Cn):a.Gf.clear();a.Gf.Me(a.network.vertexes);var c=a.Gf;c.sort(function(a,b){return a===q||b===q||a===b?0:b.sf-a.sf});for(var d=c.count-1;0<=d&&1>=c.n[d].sf;)d--;return 1<c.count-d}
function An(a,b){x&&y.p(b,tn,"pushSubNetwork:level");for(var c=a.network,d=new un,e=a.Gf.k;e.next();){var g=e.value;if(1<g.sf){d.qk(g);var k={Pz:g.sf,Rz:g.width,Oz:g.height,GE:g.N.x,HE:g.N.y};g.xg===q&&(g.xg=new F);g.xg.add(k);g.qz=g.xg.count-1}else break}for(var l=c.edges.k;l.next();){var m=l.value;if(m.fromVertex.network===d&&m.toVertex.network===d)d.tn(m);else if(m.fromVertex.network===d){var n=m.fromVertex.Al;n===q&&(n=new F(Cn),m.fromVertex.Al=n);n.add(m.toVertex);m.fromVertex.sf--;m.fromVertex.vj+=
m.toVertex.vj}else m.toVertex.network===d&&(n=m.toVertex.Al,n===q&&(n=new F(Cn),m.toVertex.Al=n),n.add(m.fromVertex),m.toVertex.sf--,m.toVertex.vj+=m.fromVertex.vj)}for(l=d.edges.k;l.next();)m=l.value,m.length*=Math.max(1,H.sqrt((m.fromVertex.vj+m.toVertex.vj)/(4*b+1)));for(e=d.vertexes.k;e.next();)if(g=e.value,n=g.Al,n!==q&&0<n.count&&(k=g.xg.n[g.xg.count-1],k=k.Pz-g.sf,!(0>=k))){for(var p=0,r=0,t=n.count-k;t<n.count;t++){for(var u=n.n[t],m=q,l=u.edges.k;l.next();){var v=l.value;if(v.wG(u)===g){m=
v;break}}m!==q&&(r+=m.length,p+=u.width*u.height)}n=g.xa;l=g.Ga;m=g.width;t=g.height;u=g.N;v=m*t;1>v&&(v=1);p=H.sqrt((p+v+4*r*r/(k*k))/v);k=(p-1)*m/2;p=(p-1)*t/2;g.Hb=new B(n-u.x-k,l-u.y-p,m+2*k,t+2*p);g.focus=new A(u.x+k,u.y+p)}a.network=d;return c}
function Bn(a,b,c){x&&(y.l(b,un,tn,"popNetwork:oldnet"),y.p(c,tn,"popNetwork:level"));for(c=a.network.vertexes.k;c.next();){var d=c.value;d.network=b;if(d.xg!==q){var e=d.xg.n[d.qz];d.sf=e.Pz;var g=e.GE,k=e.HE;d.Hb=new B(d.xa-g,d.Ga-k,e.Rz,e.Oz);d.focus=new A(g,k);d.qz--}}for(c=a.network.edges.k;c.next();)c.value.network=b;a.network=b}
function Dn(a,b,c){x&&(y.l(b,Cn,tn,"surroundNode:oldnet"),y.p(c,tn,"surroundNode:level"));var d=b.Al;if(!(d===q||0===d.count)){c=b.xa;var e=b.Ga,g=b.width,k=b.height;b.xg!==q&&0<b.xg.count&&(k=b.xg.n[0],g=k.Rz,k=k.Oz);for(var g=H.sqrt(g*g+k*k)/2,l=s,m=k=0,n=0,p=b.vertexes.k;p.next();){var r=p.value;1>=r.sf?m++:(l=h,n++,k+=Math.atan2(b.Ga-r.Ga,b.xa-r.xa))}if(0!==m){0<n&&(k/=n);n=b=0;b=l?2*Math.PI/(m+1):2*Math.PI/m;0===m%2&&(n=b/2);1<d.count&&d.sort(function(a,b){return a===q||b===q||a===b?0:b.width*
b.height-a.width*a.height});l=0===m%2?0:1;for(p=d.k;p.next();)if(r=p.value,!(1<r.sf)&&!a.isFixed(r)){d=q;for(m=r.edges.k;m.next();){d=m.value;break}var m=r.width,t=r.height,m=H.sqrt(m*m+t*t)/2,d=g+d.length+m,m=k+(b*(l/2>>1)+n)*(0==l%2?1:-1);r.xa=c+d*Math.cos(m);r.Ga=e+d*Math.sin(m);l++}}}}
function wn(a,b,c,d,e,g,k){var l=9E19,m=-1,n=0;a:for(;n<b;n++){var p=a[n],r=p.x-c,t=p.y-d,r=r*r+t*t;if(r<l){for(t=n-1;0<=t;t--)if(a[t].y>p.y&&a[t].x-p.x<e+k.width)continue a;for(t=n+1;t<b;t++)if(a[t].x>p.x&&a[t].y-p.y<g+k.height)continue a;m=n;l=r}}return m}tn.prototype.addComments=function(a){var b=a.vc;if(b!==q)for(b=b.iC();b.next();){var c=b.value;if("Comment"===c.Ac){var d=this.network.Jl(c);d===q&&(d=this.network.un(c),d.charge=this.sm,c=this.network.Sl(a,d,q),c!==q&&(c.length=this.tm))}}};
function En(a,b){x&&(y.l(a,Cn,tn,"getNodeDistance:vertexA"),y.l(b,Cn,tn,"getNodeDistance:vertexB"));var c=a.S,d=c.x,e=c.y,g=c.width,c=c.height,k=b.S,l=k.x,m=k.y,n=k.width,k=k.height;return d+g<l?e>m+k?(d=d+g-l,e=e-m-k,H.sqrt(d*d+e*e)):e+c<m?(d=d+g-l,e=e+c-m,H.sqrt(d*d+e*e)):l-(d+g):d>l+n?e>m+k?(d=d-l-n,e=e-m-k,H.sqrt(d*d+e*e)):e+c<m?(d=d-l-n,e=e+c-m,H.sqrt(d*d+e*e)):d-(l+n):e>m+k?e-(m+k):e+c<m?m-(e+c):0.1}
function xn(a,b){x&&y.p(b,tn,"performIterations:num");a.Gf=q;for(var c=a.Hp+b;a.Hp<c&&!(a.Hp++,!Fn(a)););a.Gf=q}
function Fn(a){a.Gf===q&&(a.Gf=new F(Cn),a.Gf.Me(a.network.vertexes));var b=a.Gf;if(0>=b.count)return s;var c=b.n[0];c.forceX=0;c.forceY=0;for(var d=c.xa,e=d,g=c.Ga,k=g,c=1;c<b.count;c++){var l=b.n[c];l.forceX=0;l.forceY=0;var m=l.xa,l=l.Ga,d=Math.min(d,m),e=Math.max(e,m),g=Math.min(g,l),k=Math.max(k,l)}(k=e-d>k-g)?b.sort(function(a,b){return a===q||b===q||a===b?0:a.xa-b.xa}):b.sort(function(a,b){return a===q||b===q||a===b?0:a.Ga-b.Ga});for(var n=0,p=m=0,c=0;c<b.count;c++){l=b.n[c];d=l.xa;e=l.Ga;
m=l.charge*a.electricalFieldX(d,e);p=l.charge*a.electricalFieldY(d,e);l.forceX+=m;l.forceY+=p;m=l.mass*a.gravitationalFieldX(d,e);p=l.mass*a.gravitationalFieldY(d,e);l.forceX+=m;l.forceY+=p;for(var r=a.Kg,t=c+1;t<b.count;t++)if(g=b.n[t],g!==l){var p=g.xa,u=g.Ga;if(Math.abs(d-p)>r){if(k)break}else if(Math.abs(e-u)>r){if(!k)break}else{var v=En(l,g);1>v?(d>p?(m=Math.abs(g.S.right-l.S.x),m=Gn(1+m)):d<p?(m=Math.abs(g.S.x-l.S.right),m=-Gn(1+m)):(m=Math.max(g.width,l.width),m=Gn(1+m)-m/2),e>u?(p=Math.abs(g.S.bottom-
l.S.y),p=Gn(1+p)):d<p?(p=Math.abs(g.S.y-l.S.bottom),p=-Gn(1+p)):(p=Math.max(g.height,l.height),p=Gn(1+p)-p/2)):(n=-(l.charge*g.charge)/(v*v),m=n*((p-d)/v),p=n*((u-e)/v));l.forceX+=m;l.forceY+=p;g.forceX-=m;g.forceY-=p}}}for(c=a.network.edges.k;c.next();)k=c.value,l=k.fromVertex,g=k.toVertex,d=l.xa,e=l.Ga,p=g.xa,u=g.Ga,v=En(l,g),1>v?(m=(d>p?1:-1)*Gn(1+Math.max(g.width,l.width)),p=(e>u?1:-1)*Gn(1+Math.max(g.height,l.height))):(n=k.stiffness*(v-k.length),m=n*((p-d)/v),p=n*((u-e)/v)),l.forceX+=m,l.forceY+=
p,g.forceX-=m,g.forceY-=p;c=0;d=Math.max(a.Kg/20,50);for(e=0;e<b.count;e++)l=b.n[e],a.isFixed(l)||(g=l.forceX,k=l.forceY,g<-d?g=-d:g>d&&(g=d),k<-d?k=-d:k>d&&(k=d),l.xa+=g,l.Ga+=k,c=Math.max(c,g*g+k*k));return c>a.wy*a.wy}function Gn(a){return Math.floor(a*Math.random())}tn.prototype.commitLayout=function(){this.vz();this.commitNodes();this.Kr&&this.commitLinks()};tn.prototype.vz=function(){if(this.Lk)for(var a=this.network.edges.k;a.next();){var b=a.value.link;b!==q&&(b.gb=Ib,b.kb=Ib)}};
tn.prototype.commitNodes=function(){var a=0,b=0;if(this.DB){var c=y.df();this.Qe(this.network,c);b=this.ed;a=b.x-c.x;b=b.y-c.y;y.Bc(c)}for(var c=y.df(),d=this.network.vertexes.k;d.next();){var e=d.value;if(0!==a||0!==b)c.assign(e.S),c.x+=a,c.y+=b,e.Hb=c;e.commit()}y.Bc(c)};tn.prototype.commitLinks=function(){for(var a=this.network.edges.k;a.next();)a.value.commit()};tn.prototype.springStiffness=function(a){a=a.stiffness;return!isNaN(a)?a:this.xm};
tn.prototype.springLength=function(a){a=a.length;return!isNaN(a)?a:this.wm};tn.prototype.electricalCharge=function(a){a=a.charge;return!isNaN(a)?a:this.um};tn.prototype.electricalFieldX=ca(0);tn.prototype.electricalFieldY=ca(0);tn.prototype.gravitationalMass=function(a){a=a.mass;return!isNaN(a)?a:this.vm};tn.prototype.gravitationalFieldX=ca(0);tn.prototype.gravitationalFieldY=ca(0);tn.prototype.isFixed=function(a){return a.isFixed};y.A(tn,{YH:"currentIteration"},w("Hp"));
y.g(tn,"arrangementSpacing",tn.prototype.vu);y.defineProperty(tn,{vu:"arrangementSpacing"},w("wf"),function(a){this.wf.L(a)||(this.wf.assign(a),this.J())});y.g(tn,"arrangesToOrigin",tn.prototype.DB);y.defineProperty(tn,{DB:"arrangesToOrigin"},w("So"),function(a){this.So!==a&&(this.So=a,this.J())});y.g(tn,"setsPortSpots",tn.prototype.Lk);y.defineProperty(tn,{Lk:"setsPortSpots"},w("Sg"),function(a){this.Sg!==a&&(this.Sg=a,this.J())});y.g(tn,"comments",tn.prototype.comments);
y.defineProperty(tn,{comments:"comments"},w("Xo"),function(a){this.Xo!==a&&(this.Xo=a,this.J())});y.g(tn,"maxIterations",tn.prototype.jv);y.defineProperty(tn,{jv:"maxIterations"},w("Xm"),function(a){this.Xm!==a&&0<=a&&(this.Xm=a,this.J())});y.g(tn,"epsilonDistance",tn.prototype.wy);y.defineProperty(tn,{wy:"epsilonDistance"},w("kp"),function(a){this.kp!==a&&0<a&&(this.kp=a,this.J())});y.g(tn,"infinityDistance",tn.prototype.FG);
y.defineProperty(tn,{FG:"infinityDistance"},w("Kg"),function(a){this.Kg!==a&&1<a&&(this.Kg=a,this.J())});y.g(tn,"defaultSpringStiffness",tn.prototype.eG);y.defineProperty(tn,{eG:"defaultSpringStiffness"},w("xm"),function(a){this.xm!==a&&(this.xm=a,this.J())});y.g(tn,"defaultSpringLength",tn.prototype.dG);y.defineProperty(tn,{dG:"defaultSpringLength"},w("wm"),function(a){this.wm!==a&&(this.wm=a,this.J())});y.g(tn,"defaultElectricalCharge",tn.prototype.XF);
y.defineProperty(tn,{XF:"defaultElectricalCharge"},w("um"),function(a){this.um!==a&&(this.um=a,this.J())});y.g(tn,"defaultGravitationalMass",tn.prototype.ZF);y.defineProperty(tn,{ZF:"defaultGravitationalMass"},w("vm"),function(a){this.vm!==a&&(this.vm=a,this.J())});y.g(tn,"defaultCommentSpringLength",tn.prototype.WF);y.defineProperty(tn,{WF:"defaultCommentSpringLength"},w("tm"),function(a){this.tm!==a&&(this.tm=a,this.J())});y.g(tn,"defaultCommentElectricalCharge",tn.prototype.VF);
y.defineProperty(tn,{VF:"defaultCommentElectricalCharge"},w("sm"),function(a){this.sm!==a&&(this.sm=a,this.J())});function un(){Rm.call(this)}y.ba("ForceDirectedNetwork",un);y.Ka(un,Rm);un.prototype.createVertex=function(){return new Cn};un.prototype.createEdge=function(){return new Hn};function Cn(){Vm.call(this);this.isFixed=s;this.mass=this.charge=NaN;this.vj=this.sf=this.forceY=this.forceX=0;this.xg=this.Al=q;this.qz=0}y.ba("ForceDirectedVertex",Cn);y.Ka(Cn,Vm);
function Hn(){Wm.call(this);this.length=this.stiffness=NaN}y.ba("ForceDirectedEdge",Hn);y.Ka(Hn,Wm);function pk(){0<arguments.length&&y.m("LayeredDigraphLayout constructor cannot take any arguments.");ph.call(this);this.md=this.Tm=25;this.ma=0;this.qm=In;this.Um=Jn;this.Jm=Kn;this.hl=4;this.jm=Ln;this.Mh=Mn;this.Sg=h;this.Qp=4;this.wb=this.ut=this.ab=-1;this.kf=this.aq=0;this.pd=this.hf=this.jg=this.Pg=this.nd=q;this.gq=0;this.Dt=this.kl=q;this.Cf=0;this.hq=q;this.kg=[];this.kg.length=100}
y.ba("LayeredDigraphLayout",pk);y.Ka(pk,ph);pk.prototype.cloneProtected=function(a){ph.prototype.cloneProtected.call(this,a);a.Tm=this.Tm;a.md=this.md;a.ma=this.ma;a.qm=this.qm;a.Um=this.Um;a.Jm=this.Jm;a.hl=this.hl;a.jm=this.jm;a.Mh=this.Mh;a.Sg=this.Sg;a.Qp=this.Qp};pk.prototype.createNetwork=function(){var a=new Nn;Sm(a,this);return a};
pk.prototype.doLayout=function(a){a||y.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");this.network===q&&(this.network=this.makeNetwork(a));this.ed=Um(this,this.ed);this.ut=-1;this.kf=this.aq=0;this.hq=this.Dt=this.kl=q;for(a=0;a<this.kg.length;a++)this.kg[a]=q;if(0<this.network.vertexes.count){this.network.Ku();for(a=this.network.edges.k;a.next();)a.value.rev=s;switch(this.qm){default:case On:var b=0,c=this.network.vertexes.count-1;a=[];
a.length=c+1;for(var d=this.network.vertexes.k;d.next();)d.value.valid=h;for(;Pn(this.network)!==q;){for(d=Qn(this.network);d!==q;)a[c]=d,c--,d.valid=s,d=Qn(this.network);for(d=Rn(this.network);d!==q;)a[b]=d,b++,d.valid=s,d=Rn(this.network);for(var d=q,e=0,g=this.network.vertexes.k;g.next();){var k=g.value;if(k.valid){for(var l=0,m=k.Ub;m.next();)m.value.toVertex.valid&&l++;for(var m=0,n=k.dc;n.next();)n.value.fromVertex.valid&&m++;if(d===q||e<l-m)d=k,e=l-m}}d!==q&&(a[b]=d,b++,d.valid=s)}for(b=0;b<
this.network.vertexes.count;b++)a[b].index=b;for(a=this.network.edges.k;a.next();)b=a.value,b.fromVertex.index>b.toVertex.index&&(this.network.rv(b),b.rev=h);break;case In:for(b=this.network.vertexes.k;b.next();)b.value.Kn=-1,b.value.finish=-1;for(a=this.network.edges.k;a.next();)a.value.forest=s;this.gq=0;for(b.reset();b.next();)0===b.value.dc.count&&Sn(this,b.value);for(b.reset();b.next();)-1===b.value.Kn&&Sn(this,b.value);for(a.reset();a.next();)b=a.value,b.forest||(c=b.fromVertex,d=c.finish,e=
b.toVertex,g=e.finish,e.Kn<c.Kn&&d<g&&(this.network.rv(b),b.rev=h))}for(a=this.network.vertexes.k;a.next();)b=a.value,b.layer=-1;this.ab=-1;this.assignLayers();for(a.reset();a.next();)this.ab=Math.max(this.ab,a.value.layer);c=this.network.edges.k;for(b=[];c.next();)a=c.value,a.valid=s,b.push(a);for(c=0;c<b.length;c++)if(a=b[c],!a.valid&&!((a.fromVertex.Wc===q||a.toVertex.Wc===q)&&a.fromVertex.layer===a.toVertex.layer)){g=l=k=m=0;e=a.fromVertex;d=a.toVertex;if(a.link!==q){l=a.link;if(l===q)continue;
var p=e.Wc,g=d.Wc;if(p===q||g===q)continue;var r=l.da,k=l.fa,t=l.Oc,m=l.Ad;a.rev&&(l=r,n=t,r=k,t=m,k=l,m=n);var u=e.N,l=a.toVertex.N,v=a.rev?d.S:e.S,n=y.M();isNaN(v.x)?n.assign(u):Il(r,t,Sb,n);p!==r&&(!isNaN(v.x)&&r.yb())&&(p=e.S,isNaN(p.x)||(n.x+=v.x-p.x,n.y+=v.y-p.y));r=a.rev?e.S:d.S;p=y.M();isNaN(r.x)?p.assign(l):Il(k,m,Sb,p);g!==k&&(!isNaN(r.x)&&k.yb())&&(g=d.S,isNaN(g.x)||(p.x+=r.x-g.x,p.y+=r.y-g.y));90===this.ma||270===this.ma?(g=Math.round((n.x-u.x)/this.md),k=n.x,l=Math.round((p.x-l.x)/this.md),
m=p.x):(g=Math.round((n.y-u.y)/this.md),k=n.y,l=Math.round((p.y-l.y)/this.md),m=p.y);y.B(n);y.B(p);a.portFromColOffset=g;a.portFromPos=k;a.portToColOffset=l;a.portToPos=m}else a.portFromColOffset=0,a.portFromPos=0,a.portToColOffset=0,a.portToPos=0;n=e.layer;u=d.layer;p=a;r=0;v=p.link;if(v!==q){var z=v.Oc,C=v.Ad;if(z!==q&&C!==q){var K=v.da,t=v.fa;if(K!==q&&t!==q){var I=z.gb,Q=C.kb;this.Lk||(Db(v.gb)||(I=v.gb),Db(v.kb)||(Q=v.kb));if(Db(I)||I===Hb)I=Tn(this,h);if(Db(Q)||Q===Hb)Q=Tn(this,s);var L=v.Ib,
S=v.getLinkPoint(K,z,I,h,L,t,C,y.M()),I=v.getLinkDirection(K,z,S,I,h,L,t,C);y.B(S);I===Un(this,p,h)?r+=1:this.Lk&&K!==q&&1===K.ports.count&&p.rev&&(r+=1);S=v.getLinkPoint(t,C,Q,s,L,K,z,y.M());v=v.getLinkDirection(t,C,S,Q,s,L,K,z);y.B(S);v===Un(this,p,s)?r+=2:this.Lk&&t!==q&&1===t.ports.count&&p.rev&&(r+=2)}}}p=1===r||3===r?h:s;if(r=2===r||3===r?h:s)t=this.network.createVertex(),t.Wc=q,t.vl=1,t.layer=n,t.near=e,this.network.qk(t),e=this.network.Sl(e,t,a.link),e.valid=s,e.rev=a.rev,e.portFromColOffset=
g,e.portToColOffset=0,e.portFromPos=k,e.portToPos=0,e=t;v=1;p&&v--;if(n-u>v&&0<n){a.valid=s;t=this.network.createVertex();t.Wc=q;t.vl=2;t.layer=n-1;this.network.qk(t);e=this.network.Sl(e,t,a.link);e.valid=h;e.rev=a.rev;e.portFromColOffset=r?0:g;e.portToColOffset=0;e.portFromPos=r?0:k;e.portToPos=0;e=t;for(n--;n-u>v&&0<n;)t=this.network.createVertex(),t.Wc=q,t.vl=3,t.layer=n-1,this.network.qk(t),e=this.network.Sl(e,t,a.link),e.valid=h,e.rev=a.rev,e.portFromColOffset=0,e.portToColOffset=0,e.portFromPos=
0,e.portToPos=0,e=t,n--;e=this.network.Sl(t,d,a.link);e.valid=!p;p&&(t.near=d);e.rev=a.rev;e.portFromColOffset=0;e.portToColOffset=l;e.portFromPos=0;e.portToPos=m}else a.valid=h}b=this.nd=[];for(c=0;c<=this.ab;c++)b[c]=0;for(a=this.network.vertexes.k;a.next();)a.value.index=-1;this.initializeIndices();this.ut=-1;for(c=this.kf=this.aq=0;c<=this.ab;c++)b[c]>b[this.kf]&&(this.ut=b[c]-1,this.kf=c),b[c]<b[this.aq]&&(this.aq=c);this.hq=[];for(c=0;c<b.length;c++)this.hq[c]=[];for(a.reset();a.next();)c=a.value,
b=c.layer,this.hq[b][c.index]=c;this.wb=-1;for(a=0;a<=this.ab;a++){b=Vn(this,a);c=0;d=this.nd[a];for(e=0;e<d;e++)g=b[e],c+=Wn(this,g,h),g.column=c,c+=1,c+=Wn(this,g,s);this.wb=Math.max(this.wb,c-1);Xn(this,a,b)}this.reduceCrossings();this.straightenAndPack();this.updateParts()}this.network=q;this.Ve=h};function co(a){var b=a.toVertex,c=0;for(a=a.fromVertex.Ub;a.next();)a.value.toVertex===b&&c++;return 1<c?2:1}
function ko(a){var b=a.fromVertex.Wc;a=a.toVertex.Wc;return b===q&&a===q?8:b===q||a===q?4:1}function lo(a,b,c){return b.Wc===q?0:90===a.ma||270===a.ma?c?b.N.y+10:b.S.height-b.N.y+10:c?b.N.x+10:b.S.width-b.N.x+10}function Wn(a,b,c){if(b.Wc===q)return 0;var d=c?b.bz:b.az;if(d!==f)return d;d=a.ma;return 90===d||270===d?c?b.bz=b.N.x/a.md+1|0:b.az=(b.S.width-b.N.x)/a.md+1|0:c?b.bz=b.N.y/a.md+1|0:b.az=(b.S.height-b.N.y)/a.md+1|0}
function mo(a){a.kl===q&&(a.kl=[]);for(var b=0,c=a.network.vertexes.k,d;c.next();)d=c.value,a.kl[b]=d.layer,b++,a.kl[b]=d.column,b++,a.kl[b]=d.index,b++;return a.kl}function no(a,b){for(var c=0,d=a.network.vertexes.k,e;d.next();)e=d.value,e.layer=b[c],c++,e.column=b[c],c++,e.index=b[c],c++}
function oo(a,b,c){x&&(y.p(b,pk,"crossingMatrix:unfixedLayer"),y.p(c,pk,"crossingMatrix:direction"));var d=Vn(a,b),e=a.nd[b];a.Dt||(a.Dt=[]);for(var g=a.Dt,k,l=0;l<e;l++){k=0;var m=d[l],n=m.near,p,r;if(n!==q&&n.layer===m.layer)if(m=n.index,m>l)for(r=l+1;r<m;r++)p=d[r],(p.near!==n||p.vl!==n.vl)&&k++;else for(r=l-1;r>m;r--)p=d[r],(p.near!==n||p.vl!==n.vl)&&k++;var t,u,v,z,C,K;if(0<=c){m=d[l].De;for(n=0;n<m.count;n++)if(t=m.n[n],t.valid&&t.fromVertex.layer!==b){p=t.fromVertex.index;r=t.portToPos;t=t.portFromPos;
for(u=n+1;u<m.count;u++)v=m.n[u],v.valid&&v.fromVertex.layer!==b&&(z=v.fromVertex.index,C=v.portToPos,v=v.portFromPos,r<C&&(p>z||p===z&&t>v)&&k++,C<r&&(z>p||z===p&&v>t)&&k++)}}if(0>=c){m=d[l].ue;for(n=0;n<m.count;n++)if(t=m.n[n],t.valid&&t.toVertex.layer!==b){p=t.toVertex.index;r=t.portToPos;t=t.portFromPos;for(u=n+1;u<m.count;u++)v=m.n[u],v.valid&&v.toVertex.layer!==b&&(z=v.toVertex.index,C=v.portToPos,v=v.portFromPos,t<v&&(p>z||p===z&&r>C)&&k++,v<t&&(z>p||z===p&&C>r)&&k++)}}g[l*e+l]=k;for(m=l+1;m<
e;m++){var I=0,Q=0;if(0<=c){k=d[l].De;K=d[m].De;for(n=0;n<k.count;n++)if(t=k.n[n],t.valid&&t.fromVertex.layer!==b){p=t.fromVertex.index;t=t.portFromPos;for(u=0;u<K.count;u++)v=K.n[u],v.valid&&v.fromVertex.layer!==b&&(z=v.fromVertex.index,v=v.portFromPos,(p<z||p===z&&t<v)&&Q++,(z<p||z===p&&v<t)&&I++)}}if(0>=c){k=d[l].ue;K=d[m].ue;for(n=0;n<k.count;n++)if(t=k.n[n],t.valid&&t.toVertex.layer!==b){p=t.toVertex.index;r=t.portToPos;for(u=0;u<K.count;u++)v=K.n[u],v.valid&&v.toVertex.layer!==b&&(z=v.toVertex.index,
C=v.portToPos,(p<z||p===z&&r<C)&&Q++,(z<p||z===p&&C<r)&&I++)}}g[l*e+m]=I;g[m*e+l]=Q}}Xn(a,b,d);return g}pk.prototype.countCrossings=function(){var a,b=0,c,d;for(a=0;a<=this.ab;a++){c=oo(this,a,1);d=this.nd[a];for(var e=0;e<d;e++)for(var g=e;g<d;g++)b+=c[e*d+g]}return b};
function po(a){for(var b=0,c=0;c<=a.ab;c++){for(var d=a,e=c,g=Vn(d,e),k=d.nd[e],l=0,m=f,m=0;m<k;m++){var n=g[m].ue,p,r,t;if("undefined"!==typeof n)for(var u=0;u<n.count;u++)p=n.n[u],p.valid&&p.toVertex.layer!==e&&(r=p.fromVertex.column+p.portFromColOffset,t=p.toVertex.column+p.portToColOffset,l+=(Math.abs(r-t)+1)*ko(p))}Xn(d,e,g);b+=l}return b}
pk.prototype.normalize=function(){var a=Infinity;this.wb=-1;for(var b=this.network.vertexes.k,c;b.next();)c=b.value,a=Math.min(a,c.column-Wn(this,c,h)),this.wb=Math.max(this.wb,c.column+Wn(this,c,s));for(b.reset();b.next();)b.value.column-=a;this.wb-=a};
function qo(a,b,c){x&&(y.p(b,pk,"barycenters:unfixedLayer"),y.p(c,pk,"barycenters:direction"));var d=Vn(a,b),e=a.nd[b],g=[],k;for(k=0;k<e;k++){var l=d[k],m=q;0>=c&&(m=l.De);var n=q;0<=c&&(n=l.ue);var p=0,r=0,t=l.near;t!==q&&t.layer===l.layer&&(p+=t.column-1,r++);if(m!==q)for(t=0;t<m.count;t++){var l=m.n[t],u=l.fromVertex;l.valid&&(!l.rev&&u.layer!==b)&&(p+=u.column+l.portFromColOffset,r++)}if(n!==q)for(m=0;m<n.count;m++)l=n.n[m],t=l.toVertex,l.valid&&(!l.rev&&t.layer!==b)&&(p+=t.column+l.portToColOffset,
r++);g[k]=0===r?-1:p/r}Xn(a,b,d);return g}
function ro(a,b,c){x&&(y.p(b,pk,"medians:unfixedLayer"),y.p(c,pk,"medians:direction"));for(var d=Vn(a,b),e=a.nd[b],g=[],k=0;k<e;k++){var l=d[k],m=q;0>=c&&(m=l.De);var n=q;0<=c&&(n=l.ue);var p=0,r=[],t=l.near;t!==q&&t.layer===l.layer&&(r[p]=t.column-1,p++);if(m!==q)for(t=0;t<m.count;t++){var l=m.n[t],u=l.fromVertex;l.valid&&(!l.rev&&u.layer!==b)&&(r[p]=u.column+l.portFromColOffset,p++)}if(n!==q)for(m=0;m<n.count;m++)l=n.n[m],t=l.toVertex,l.valid&&(!l.rev&&t.layer!==b)&&(r[p]=t.column+l.portToColOffset,
p++);0===p?g[k]=-1:(r.sort(function(a,b){return a-b}),n=p>>1,g[k]=p&1?r[n]:r[n-1]+r[n]>>1)}Xn(a,b,d);return g}function so(a,b,c,d,e,g){if(b.component===d){b.component=c;var k,l;if(e)for(var m=b.Ub;m.next();){var n=m.value.toVertex;k=b.layer-n.layer;l=co(m.value);k===l&&so(a,n,c,d,e,g)}if(g)for(m=b.dc;m.next();)n=m.value.fromVertex,k=n.layer-b.layer,l=co(m.value),k===l&&so(a,n,c,d,e,g)}}
function to(a,b,c,d,e,g){if(b.component===d){b.component=c;if(e)for(var k=b.Ub,l;k.next();)l=k.value.toVertex,to(a,l,c,d,e,g);if(g)for(b=b.dc;b.next();)k=b.value.fromVertex,to(a,k,c,d,e,g)}}function Pn(a){for(a=a.vertexes.k;a.next();){var b=a.value;if(b.valid)return b}return q}function Qn(a){for(a=a.vertexes.k;a.next();){var b=a.value;if(b.valid){for(var c=h,d=b.Ub;d.next();)if(d.value.toVertex.valid){c=s;break}if(c)return b}}return q}
function Rn(a){for(a=a.vertexes.k;a.next();){var b=a.value;if(b.valid){for(var c=h,d=b.dc;d.next();)if(d.value.fromVertex.valid){c=s;break}if(c)return b}}return q}function Sn(a,b){b.Kn=a.gq;a.gq++;for(var c=b.Ub;c.next();){var d=c.value,e=d.toVertex;-1===e.Kn&&(d.forest=h,Sn(a,e))}b.finish=a.gq;a.gq++}
pk.prototype.assignLayers=function(){switch(this.Um){case uo:vo(this);break;case wo:for(var a,b=this.network.vertexes.k;b.next();)a=xo(this,b.value),this.ab=Math.max(a,this.ab);for(b.reset();b.next();)a=b.value,a.layer=this.ab-a.layer;break;default:case Jn:vo(this);for(b=this.network.vertexes.k;b.next();)b.value.valid=s;for(b.reset();b.next();)0===b.value.dc.count&&yo(this,b.value);a=Infinity;for(b.reset();b.next();)a=Math.min(a,b.value.layer);this.ab=-1;for(b.reset();b.next();)b.value.layer-=a,this.ab=
Math.max(this.ab,b.value.layer)}};function vo(a){for(var b=a.network.vertexes.k;b.next();){var c=zo(a,b.value);a.ab=Math.max(c,a.ab)}}function zo(a,b){var c=0;if(-1===b.layer){for(var d=b.Ub;d.next();)var e=d.value,g=co(e),c=Math.max(c,zo(a,e.toVertex)+g);b.layer=c}else c=b.layer;return c}function xo(a,b){var c=0;if(-1===b.layer){for(var d,e,g=b.dc;g.next();)e=g.value,d=co(e),c=Math.max(c,xo(a,e.fromVertex)+d);b.layer=c}else c=b.layer;return c}
function yo(a,b){if(!b.valid){b.valid=h;for(var c=b.Ub;c.next();)yo(a,c.value.toVertex);for(c=a.network.vertexes.k;c.next();)c.value.component=-1;for(var d=b.De.n,e=d.length,g=0;g<e;g++){var k=d[g],l=co(k);k.fromVertex.layer-k.toVertex.layer>l&&so(a,k.fromVertex,0,-1,h,s)}for(so(a,b,1,-1,h,h);0!==b.component;){for(var l=0,d=Infinity,m=0,n=q,p=a.network.vertexes.k;p.next();){var r=p.value;if(1===r.component){for(var t=0,u=s,v=r.De.n,e=v.length,g=0;g<e;g++){var k=v[g],z=k.fromVertex,t=t+1;1!==z.component&&
(l+=1,z=z.layer-r.layer,k=co(k),d=Math.min(d,z-k))}k=r.ue.n;e=k.length;for(g=0;g<e;g++)v=k[g].toVertex,t-=1,1!==v.component?l-=1:u=h;if((n===q||t<m)&&!u)n=r,m=t}}if(0<l){for(c.reset();c.next();)e=c.value,1===e.component&&(e.layer+=d);b.component=0}else n.component=0}for(c=a.network.vertexes.k;c.next();)c.value.component=-1;for(so(a,b,1,-1,h,s);0!==b.component;){g=0;e=Infinity;d=0;l=q;for(m=a.network.vertexes.k;m.next();)if(n=m.value,1===n.component){p=0;r=s;k=n.De.n;t=k.length;for(u=0;u<t;u++)v=k[u].fromVertex,
p+=1,1!==v.component?g+=1:r=h;k=n.ue.n;t=k.length;for(u=0;u<t;u++)v=k[u],z=v.toVertex,p-=1,1!==z.component&&(g-=1,z=n.layer-z.layer,v=co(v),e=Math.min(e,z-v));if((l===q||p>d)&&!r)l=n,d=p}if(0>g){for(c.reset();c.next();)g=c.value,1===g.component&&(g.layer-=e);b.component=0}else l.component=0}}}function Un(a,b,c){return 90===a.ma?c&&!b.rev||!c&&b.rev?270:90:180===a.ma?c&&!b.rev||!c&&b.rev?0:180:270===a.ma?c&&!b.rev||!c&&b.rev?90:270:c&&!b.rev||!c&&b.rev?180:0}
pk.prototype.initializeIndices=function(){switch(this.Jm){default:case Ao:for(var a,b=this.network.vertexes.k;b.next();){var c=b.value;a=c.layer;c.index=this.nd[a];this.nd[a]++}break;case Kn:b=this.network.vertexes.k;for(a=this.ab;0<=a;a--){for(;b.next();)b.value.layer===a&&-1===b.value.index&&Bo(this,b.value);b.reset()}break;case Co:b=this.network.vertexes.k;for(a=0;a<=this.ab;a++){for(;b.next();)b.value.layer===a&&-1===b.value.index&&Do(this,b.value);b.reset()}}};
function Bo(a,b){var c=b.layer;b.index=a.nd[c];a.nd[c]++;for(var c=b.ue.Ee(),d=h,e;d;){d=s;for(e=0;e<c.length-1;e++){var g=c[e],k=c[e+1];g.portFromColOffset>k.portFromColOffset&&(d=h,c[e]=k,c[e+1]=g)}}for(e=0;e<c.length;e++)d=c[e],d.valid&&(d=d.toVertex,-1===d.index&&Bo(a,d))}
function Do(a,b){var c=b.layer;b.index=a.nd[c];a.nd[c]++;for(var c=b.De.Ee(),d=h,e;d;){d=s;for(e=0;e<c.length-1;e++){var g=c[e],k=c[e+1];g.portToColOffset>k.portToColOffset&&(d=h,c[e]=k,c[e+1]=g)}}for(e=0;e<c.length;e++)d=c[e],d.valid&&(d=d.fromVertex,-1===d.index&&Do(a,d))}
pk.prototype.reduceCrossings=function(){var a=this.countCrossings(),b=mo(this),c,d,e;for(c=0;c<this.hl;c++){for(d=0;d<=this.ab;d++)Eo(this,d,1),Fo(this,d,1);e=this.countCrossings();e<a&&(a=e,b=mo(this));for(d=this.ab;0<=d;d--)Eo(this,d,-1),Fo(this,d,-1);e=this.countCrossings();e<a&&(a=e,b=mo(this))}no(this,b);for(c=0;c<this.hl;c++){for(d=0;d<=this.ab;d++)Eo(this,d,0),Fo(this,d,0);e=this.countCrossings();e<a&&(a=e,b=mo(this));for(d=this.ab;0<=d;d--)Eo(this,d,0),Fo(this,d,0);e=this.countCrossings();
e<a&&(a=e,b=mo(this))}no(this,b);var g,k,l;switch(this.jm){case Go:break;case Ho:for(l=a+1;(d=this.countCrossings())<l;){l=d;for(c=this.ab;0<=c;c--)for(k=0;k<=c;k++){for(g=h;g;){g=s;for(d=c;d>=k;d--)g=Fo(this,d,-1)||g}e=this.countCrossings();e>=a?no(this,b):(a=e,b=mo(this));for(g=h;g;){g=s;for(d=c;d>=k;d--)g=Fo(this,d,1)||g}e=this.countCrossings();e>=a?no(this,b):(a=e,b=mo(this));for(g=h;g;){g=s;for(d=k;d<=c;d++)g=Fo(this,d,1)||g}e>=a?no(this,b):(a=e,b=mo(this));for(g=h;g;){g=s;for(d=k;d<=c;d++)g=
Fo(this,d,-1)||g}e>=a?no(this,b):(a=e,b=mo(this));for(g=h;g;){g=s;for(d=c;d>=k;d--)g=Fo(this,d,0)||g}e>=a?no(this,b):(a=e,b=mo(this));for(g=h;g;){g=s;for(d=k;d<=c;d++)g=Fo(this,d,0)||g}e>=a?no(this,b):(a=e,b=mo(this))}}break;default:case Ln:c=this.ab;k=0;for(l=a+1;(d=this.countCrossings())<l;){l=d;for(g=h;g;){g=s;for(d=c;d>=k;d--)g=Fo(this,d,-1)||g}e=this.countCrossings();e>=a?no(this,b):(a=e,b=mo(this));for(g=h;g;){g=s;for(d=c;d>=k;d--)g=Fo(this,d,1)||g}e=this.countCrossings();e>=a?no(this,b):(a=
e,b=mo(this));for(g=h;g;){g=s;for(d=k;d<=c;d++)g=Fo(this,d,1)||g}e>=a?no(this,b):(a=e,b=mo(this));for(g=h;g;){g=s;for(d=k;d<=c;d++)g=Fo(this,d,-1)||g}e>=a?no(this,b):(a=e,b=mo(this));for(g=h;g;){g=s;for(d=c;d>=k;d--)g=Fo(this,d,0)||g}e>=a?no(this,b):(a=e,b=mo(this));for(g=h;g;){g=s;for(d=k;d<=c;d++)g=Fo(this,d,0)||g}e>=a?no(this,b):(a=e,b=mo(this))}}no(this,b)};
function Eo(a,b,c){x&&(y.p(b,pk,"medianBarycenterCrossingReduction:unfixedLayer"),y.p(c,pk,"medianBarycenterCrossingReduction:direction"));var d=Vn(a,b),e=a.nd[b],g=ro(a,b,c),k=qo(a,b,c);for(c=0;c<e;c++)-1===k[c]&&(k[c]=d[c].column),-1===g[c]&&(g[c]=d[c].column);for(var l=h,m;l;){l=s;for(c=0;c<e-1;c++)if(g[c+1]<g[c]||g[c+1]===g[c]&&k[c+1]<k[c])l=h,m=g[c],g[c]=g[c+1],g[c+1]=m,m=k[c],k[c]=k[c+1],k[c+1]=m,m=d[c],d[c]=d[c+1],d[c+1]=m}for(c=g=0;c<e;c++)m=d[c],m.index=c,g+=Wn(a,m,h),m.column=g,g+=1,g+=
Wn(a,m,s);Xn(a,b,d)}
function Fo(a,b,c){var d=Vn(a,b),e=a.nd[b];c=oo(a,b,c);var g,k;k=[];for(g=0;g<e;g++)k[g]=-1;var l;l=[];for(g=0;g<e;g++)l[g]=-1;for(var m=s,n=h;n;){n=s;for(g=0;g<e-1;g++){var p=c[d[g].index*e+d[g+1].index],r=c[d[g+1].index*e+d[g].index],t=0,u=0,v=d[g].column,z=d[g+1].column,C=Wn(a,d[g],h),K=Wn(a,d[g],s),I=Wn(a,d[g+1],h),Q=Wn(a,d[g+1],s),C=v-C+I,K=z-K+Q,L=d[g].dc.k;for(L.reset();L.next();)if(Q=L.value,Q.valid&&Q.fromVertex.layer===b){Q=Q.fromVertex;for(I=0;d[I]!==Q;)I++;I<g&&(t+=2*(g-I),u+=2*(g+1-I));
I===g+1&&(t+=1);I>g+1&&(t+=4*(I-g),u+=4*(I-(g+1)))}L=d[g].Ub.k;for(L.reset();L.next();)if(Q=L.value,Q.valid&&Q.toVertex.layer===b){Q=Q.toVertex;for(I=0;d[I]!==Q;)I++;I===g+1&&(u+=1)}L=d[g+1].dc.k;for(L.reset();L.next();)if(Q=L.value,Q.valid&&Q.fromVertex.layer===b){Q=Q.fromVertex;for(I=0;d[I]!==Q;)I++;I<g&&(t+=2*(g+1-I),u+=2*(g-I));I===g&&(u+=1);I>g+1&&(t+=4*(I-(g+1)),u+=4*(I-g))}L=d[g+1].Ub.k;for(L.reset();L.next();)if(Q=L.value,Q.valid&&Q.toVertex.layer===b){Q=Q.toVertex;for(I=0;d[I]!==Q;)I++;I===
g&&(t+=1)}var I=Q=0,L=k[d[g].index],S=l[d[g].index],Z=k[d[g+1].index],X=l[d[g+1].index];-1!==L&&(Q+=Math.abs(L-v),I+=Math.abs(L-K));-1!==S&&(Q+=Math.abs(S-v),I+=Math.abs(S-K));-1!==Z&&(Q+=Math.abs(Z-z),I+=Math.abs(Z-C));-1!==X&&(Q+=Math.abs(X-z),I+=Math.abs(X-C));if(u<t-0.5||u===t&&r<p-0.5||u===t&&r===p&&I<Q-0.5)n=m=h,d[g].column=K,d[g+1].column=C,p=d[g],d[g]=d[g+1],d[g+1]=p}}for(g=0;g<e;g++)d[g].index=g;Xn(a,b,d);return m}
pk.prototype.straightenAndPack=function(){var a,b,c=0!==(this.Mh&Io);a=this.Mh===Mn;1E3<this.network.edges.count&&!a&&(c=s);if(c){b=[];for(a=0;a<=this.ab;a++)b[a]=0;for(var d=this.network.vertexes.k,e,g;d.next();)e=d.value,a=e.layer,g=e.column,e=Wn(this,e,s),b[a]=Math.max(b[a],g+e);for(d.reset();d.next();)e=d.value,a=e.layer,g=e.column,e.column=(8*(this.wb-b[a])>>1)+8*g;this.wb*=8}if(0!==(this.Mh&Jo))for(b=h;b;){b=s;for(a=this.kf+1;a<=this.ab;a++)b=Ko(this,a,1)||b;for(a=this.kf-1;0<=a;a--)b=Ko(this,
a,-1)||b;b=Ko(this,this.kf,0)||b}if(0!==(this.Mh&Lo)){for(a=this.kf+1;a<=this.ab;a++)Mo(this,a,1);for(a=this.kf-1;0<=a;a--)Mo(this,a,-1);Mo(this,this.kf,0)}c&&(No(this,-1),No(this,1));if(0!==(this.Mh&Jo))for(b=h;b;){b=s;b=Ko(this,this.kf,0)||b;for(a=this.kf+1;a<=this.ab;a++)b=Ko(this,a,0)||b;for(a=this.kf-1;0<=a;a--)b=Ko(this,a,0)||b}};function Ko(a,b,c){x&&(y.p(b,pk,"bendStraighten:unfixedLayer"),y.p(c,pk,"bendStraighten:direction"));for(var d=s;Oo(a,b,c);)d=h;return d}
function Oo(a,b,c){x&&(y.p(b,pk,"shiftbendStraighten:unfixedLayer"),y.p(c,pk,"shiftbendStraighten:direction"));var d,e=Vn(a,b),g=a.nd[b],k=qo(a,b,-1);if(0<c)for(d=0;d<g;d++)k[d]=-1;var l=qo(a,b,1);if(0>c)for(d=0;d<g;d++)l[d]=-1;for(var m=s,n=h;n;){n=s;for(d=0;d<g;d++){var p=e[d].column,r=Wn(a,e[d],h),t=Wn(a,e[d],s),r=0>d-1||p-e[d-1].column-1>r+Wn(a,e[d-1],s)?p-1:p,t=d+1>=g||e[d+1].column-p-1>t+Wn(a,e[d+1],h)?p+1:p,u=0,v=0,z=0,C,K,I,Q;if(0>=c)for(var L=e[d].dc.k;L.next();)C=L.value,C.valid&&C.fromVertex.layer!==
b&&(K=ko(C),I=C.portFromColOffset,Q=C.portToColOffset,C=C.fromVertex.column,u+=(Math.abs(p+Q-(C+I))+1)*K,v+=(Math.abs(r+Q-(C+I))+1)*K,z+=(Math.abs(t+Q-(C+I))+1)*K);if(0<=c)for(L=e[d].Ub.k;L.next();)C=L.value,C.valid&&C.toVertex.layer!==b&&(K=ko(C),I=C.portFromColOffset,Q=C.portToColOffset,C=C.toVertex.column,u+=(Math.abs(p+I-(C+Q))+1)*K,v+=(Math.abs(r+I-(C+Q))+1)*K,z+=(Math.abs(t+I-(C+Q))+1)*K);Q=I=K=0;C=k[e[d].index];L=l[e[d].index];-1!==C&&(K+=Math.abs(C-p),I+=Math.abs(C-r),Q+=Math.abs(C-t));-1!==
L&&(K+=Math.abs(L-p),I+=Math.abs(L-r),Q+=Math.abs(L-t));if(v<u||v===u&&I<K)n=m=h,e[d].column=r;if(z<u||z===u&&Q<K)n=m=h,e[d].column=t}}Xn(a,b,e);a.normalize();return m}
function Mo(a,b,c){x&&(y.p(b,pk,"medianStraighten:unfixedLayer"),y.p(c,pk,"medianStraighten:direction"));var d=Vn(a,b),e=a.nd[b],g=ro(a,b,c),k=[];for(c=0;c<e;c++)k[c]=g[c];for(g=h;g;){g=s;for(c=0;c<e;c++){var l=d[c].column,m=Wn(a,d[c],h),n=Wn(a,d[c],s),p=0,r;-1===k[c]?0===c&&c===e-1?p=l:0===c?(r=d[c+1].column,p=r-l===n+Wn(a,d[c+1],h)?l-1:l):c===e-1?(r=d[c-1].column,p=l-r===m+Wn(a,d[c-1],s)?l+1:l):(r=d[c-1].column,m=r+Wn(a,d[c-1],s)+m+1,r=d[c+1].column,n=r-Wn(a,d[c+1],h)-n-1,p=(m+n)/2|0):0===c&&c===
e-1?p=k[c]:0===c?(r=d[c+1].column,n=r-Wn(a,d[c+1],h)-n-1,p=Math.min(k[c],n)):c===e-1?(r=d[c-1].column,m=r+Wn(a,d[c-1],s)+m+1,p=Math.max(k[c],m)):(r=d[c-1].column,m=r+Wn(a,d[c-1],s)+m+1,r=d[c+1].column,n=r-Wn(a,d[c+1],h)-n-1,m<k[c]&&k[c]<n?p=k[c]:m>=k[c]?p=m:n<=k[c]&&(p=n));p!==l&&(g=h,d[c].column=p)}}Xn(a,b,d);a.normalize()}
function Po(a,b){x&&(y.p(b,pk,"packAux:column"),y.p(1,pk,"packAux:direction"));for(var c=h,d=a.network.vertexes.k,e;d.next();){e=d.value;var g=Wn(a,e,h),k=Wn(a,e,s);if(e.column-g<=b&&e.column+k>=b){c=s;break}}g=s;if(c)for(d.reset();d.next();)e=d.value,e.column>b&&(e.column-=1,g=h);return g}
function Qo(a,b){x&&(y.p(b,pk,"tightPackAux:column"),y.p(1,pk,"tightPackAux:direction"));var c=b,c=b+1,d,e=[],g=[];for(d=0;d<=a.ab;d++)e[d]=s,g[d]=s;for(var k=a.network.vertexes.k;k.next();){d=k.value;var l=d.column-Wn(a,d,h),m=d.column+Wn(a,d,s);l<=b&&m>=b&&(e[d.layer]=h);l<=c&&m>=c&&(g[d.layer]=h)}l=h;c=s;for(d=0;d<=a.ab;d++)l=l&&!(e[d]&&g[d]);if(l)for(k.reset();k.next();)d=k.value,d.column>b&&(d.column-=1,c=h);return c}
function No(a,b){x&&y.p(b,pk,"componentPack:direction");for(var c=0;c<=a.wb;c++)for(;Po(a,c););a.normalize();for(c=0;c<a.wb;c++)for(;Qo(a,c););a.normalize();var d,e,g,k;if(0<b)for(c=0;c<=a.wb;c++){d=mo(a);e=po(a);for(g=e+1;e<g;)g=e,Ro(a,c,1),k=po(a),k>e?no(a,d):k<e&&(e=k,d=mo(a))}if(0>b)for(c=a.wb;0<=c;c--){d=mo(a);e=po(a);for(g=e+1;e<g;)g=e,Ro(a,c,-1),k=po(a),k>e?no(a,d):k<e&&(e=k,d=mo(a))}a.normalize()}
function Ro(a,b,c){a.Cf=0;for(var d=a.network.vertexes.k,e;d.next();)d.value.component=-1;if(0<c)for(d.reset();d.next();)e=d.value,e.column-Wn(a,e,h)<=b&&(e.component=a.Cf);if(0>c)for(d.reset();d.next();)e=d.value,e.column+Wn(a,e,s)>=b&&(e.component=a.Cf);a.Cf++;for(d.reset();d.next();)e=d.value,-1===e.component&&(to(a,e,a.Cf,-1,h,h),a.Cf++);b=[];for(e=0;e<a.Cf*a.Cf;e++)b[e]=s;var g=[];for(e=0;e<(a.ab+1)*(a.wb+1);e++)g[e]=-1;for(d.reset();d.next();){e=d.value;for(var k=e.layer,l=Math.max(0,e.column-
Wn(a,e,h)),m=Math.min(a.wb,e.column+Wn(a,e,s));l<=m;l++)g[k*(a.wb+1)+l]=e.component}for(e=0;e<=a.ab;e++){if(0<c)for(l=0;l<a.wb;l++)-1!==g[e*(a.wb+1)+l]&&(-1!==g[e*(a.wb+1)+l+1]&&g[e*(a.wb+1)+l]!==g[e*(a.wb+1)+l+1])&&(b[g[e*(a.wb+1)+l]*a.Cf+g[e*(a.wb+1)+l+1]]=h);if(0>c)for(l=a.wb;0<l;l--)-1!==g[e*(a.wb+1)+l]&&(-1!==g[e*(a.wb+1)+l-1]&&g[e*(a.wb+1)+l]!==g[e*(a.wb+1)+l-1])&&(b[g[e*(a.wb+1)+l]*a.Cf+g[e*(a.wb+1)+l-1]]=h)}g=[];for(e=0;e<a.Cf;e++)g[e]=h;k=new F("number");for(k.add(0);0!==k.count;)if(m=k.n[k.count-
1],k.kd(k.count-1),g[m]){g[m]=s;for(e=0;e<a.Cf;e++)b[m*a.Cf+e]&&k.wd(0,e)}if(0<c)for(d.reset();d.next();)e=d.value,g[e.component]&&(e.column-=1);if(0>c)for(d.reset();d.next();)e=d.value,g[e.component]&&(e.column+=1)}pk.prototype.commitLayout=function(){if(this.Lk)for(var a=Tn(this,h),b=Tn(this,s),c=this.network.edges.k,d;c.next();)d=c.value.link,d!==q&&(d.gb=a,d.kb=b);this.commitNodes();this.Kr&&this.commitLinks()};
function Tn(a,b){return 270===a.ma?b?$b:cc:90===a.ma?b?cc:$b:180===a.ma?b?ac:bc:b?bc:ac}
pk.prototype.commitNodes=function(){this.Pg=[];this.jg=[];this.hf=[];this.pd=[];for(var a=0;a<=this.ab;a++)this.Pg[a]=0,this.jg[a]=0,this.hf[a]=0,this.pd[a]=0;for(var a=this.network.vertexes.k,b,c;a.next();)b=a.value,c=b.layer,this.Pg[c]=Math.max(this.Pg[c],lo(this,b,h)),this.jg[c]=Math.max(this.jg[c],lo(this,b,s));b=0;for(var d=this.Tm,e=0;e<=this.ab;e++)c=d,0>=this.Pg[e]+this.jg[e]&&(c=0),0<e&&(b+=c/2),90===this.ma||0===this.ma?(b+=this.jg[e],this.hf[e]=b,b+=this.Pg[e]):(b+=this.Pg[e],this.hf[e]=
b,b+=this.jg[e]),e<this.ab&&(b+=c/2),this.pd[e]=b;d=this.ed;for(e=0;e<=this.ab;e++)270===this.ma?(this.hf[e]=d.y+this.hf[e],this.pd[e]=d.y+this.pd[e]):90===this.ma?(this.hf[e]=d.y+b-this.hf[e],this.pd[e]=d.y+b-this.pd[e]):180===this.ma?(this.hf[e]=d.x+this.hf[e],this.pd[e]=d.x+this.pd[e]):(this.hf[e]=d.x+b-this.hf[e],this.pd[e]=d.x+b-this.pd[e]);for(a.reset();a.next();){b=a.value;c=b.layer;var g=b.column|0;270===this.ma||90===this.ma?(e=d.x+this.md*g,c=this.hf[c]):(e=this.hf[c],c=d.y+this.md*g);b.xa=
e;b.Ga=c;b.commit()}};
pk.prototype.commitLinks=function(){for(var a=this.network.edges.k,b,c;a.next();)c=a.value.link,"undefined"!==typeof c&&c!==q&&(c.Mk(),c.En(),c.Zh());for(a.reset();a.next();)c=a.value.link,"undefined"!==typeof c&&c!==q&&c.updateRoute();for(a.reset();a.next();)if(b=a.value,c=b.link){c.Mk();var d=c,e=d.da,g=d.fa,k=d.Oc,l=d.Ad;if(b.valid){if(c.Se===vg&&4===c.qa){if(b.rev)var m=e,e=g,g=m,n=k,k=l,l=n;if(b.fromVertex.column===b.toVertex.column){var p=c.getLinkPoint(e,k,c.computeSpot(h),h,s,g,l),r=c.getLinkPoint(g,
l,c.computeSpot(s),s,s,e,k);c.En();c.pk(p.x,p.y);c.pk((2*p.x+r.x)/3,(2*p.y+r.y)/3);c.pk((p.x+2*r.x)/3,(p.y+2*r.y)/3);c.pk(r.x,r.y)}else{var t=s,u=s;k!==q&&c.computeSpot(h)===Hb&&(t=h);l!==q&&c.computeSpot(s)===Hb&&(u=h);if(t||u){var v=c.o(0).x,z=c.o(0).y,C=c.o(1).x,K=c.o(1).y,I=c.o(2).x,Q=c.o(2).y,L=c.o(3).x,S=c.o(3).y;if(t){90===this.ma||270===this.ma?(C=v,K=(z+S)/2):(C=(v+L)/2,K=z);c.R(1,C,K);var Z=c.getLinkPoint(e,k,c.computeSpot(h),h,s,g,l);c.R(0,Z.x,Z.y)}u&&(90===this.ma||270===this.ma?(I=L,
Q=(z+S)/2):(I=(v+L)/2,Q=S),c.R(2,I,Q),Z=c.getLinkPoint(g,l,c.computeSpot(s),s,s,e,k),c.R(3,Z.x,Z.y))}}}c.Zh()}else if(b.fromVertex.layer===b.toVertex.layer)c.Zh();else{var X=s,ea=s,ia,W=c.zr+1;if(c.Ib)ea=h,ia=c.qa,4<ia&&c.points.removeRange(2,ia-3);else if(c.Se===vg)X=h,ia=c.qa,4<ia&&c.points.removeRange(2,ia-3),W=2;else{ia=c.qa;var wa=c.computeSpot(h)===Hb,Oa=c.computeSpot(s)===Hb;2<ia&&wa&&Oa?c.points.removeRange(1,ia-2):3<ia&&wa&&!Oa?c.points.removeRange(1,ia-3):3<ia&&!wa&&Oa?c.points.removeRange(2,
ia-2):4<ia&&(!wa&&!Oa)&&c.points.removeRange(2,ia-3)}var Qa=b.fromVertex,Sa=b.toVertex,Aa,Wa;if(b.rev){for(var Fa;Sa!==q&&Qa!==Sa;){Wa=Aa=q;for(var xb=Sa.dc.k;xb.next()&&!(sc=xb.value,sc.link===b.link&&(Aa=sc.fromVertex,Wa=sc.toVertex,Aa.Wc===q)););Aa!==Qa&&(qb=c.o(W-1).x,rb=c.o(W-1).y,La=Aa.xa,Pa=Aa.Ga,ea?180===this.ma||0===this.ma?2===W?(c.C(W++,qb,rb),c.C(W++,qb,Pa)):(Rf=Wa!==q?Wa.Ga:rb,Rf!==Pa&&(ib=this.pd[Aa.layer-1],c.C(W++,ib,rb),c.C(W++,ib,Pa))):2===W?(c.C(W++,qb,rb),c.C(W++,La,rb)):(nd=Wa!==
q?Wa.xa:qb,nd!==La&&(ib=this.pd[Aa.layer-1],c.C(W++,qb,ib),c.C(W++,La,ib))):2===W?X?(zb=Math.max(10,this.Pg[Sa.layer]),db=Math.max(10,this.jg[Sa.layer]),180===this.ma?(Fa=Sa.S.x,c.C(W++,Fa-zb,Pa),c.C(W++,Fa,Pa),c.C(W++,Fa+db,Pa)):90===this.ma?(Fa=Sa.S.y+Sa.S.height,c.C(W++,La,Fa+db),c.C(W++,La,Fa),c.C(W++,La,Fa-zb)):270===this.ma?(Fa=Sa.S.y,c.C(W++,La,Fa-zb),c.C(W++,La,Fa),c.C(W++,La,Fa+db)):(Fa=Sa.S.x+Sa.S.width,c.C(W++,Fa+db,Pa),c.C(W++,Fa,Pa),c.C(W++,Fa-zb,Pa))):(c.C(W++,qb,rb),180===this.ma||
0===this.ma?c.C(W++,qb,Pa):c.C(W++,La,rb),c.C(W++,La,Pa)):(zb=Math.max(10,this.Pg[Aa.layer]),db=Math.max(10,this.jg[Aa.layer]),180===this.ma?(X&&c.C(W++,La-zb,Pa),c.C(W++,La,Pa),X&&c.C(W++,La+db,Pa)):90===this.ma?(X&&c.C(W++,La,Pa+db),c.C(W++,La,Pa),X&&c.C(W++,La,Pa-zb)):270===this.ma?(X&&c.C(W++,La,Pa-zb),c.C(W++,La,Pa),X&&c.C(W++,La,Pa+db)):(X&&c.C(W++,La+db,Pa),c.C(W++,La,Pa),X&&c.C(W++,La-zb,Pa))));Sa=Aa}if(l===q||c.computeSpot(s)!==Hb)if(qb=c.o(W-1).x,rb=c.o(W-1).y,La=c.o(W).x,Pa=c.o(W).y,ea){var of=
this.jg[Qa.layer],rc;180===this.ma||0===this.ma?(rc=rb,rc>=Qa.S.y&&rc<=Qa.S.bottom&&(Fa=Qa.xa+of,rc=rc<Qa.S.y+Qa.S.height/2?Qa.S.y-this.md/2:Qa.S.bottom+this.md/2,c.C(W++,Fa,rb),c.C(W++,Fa,rc)),c.C(W++,La,rc)):(rc=qb,rc>=Qa.S.x&&rc<=Qa.S.right&&(Fa=Qa.Ga+of,rc=rc<Qa.S.x+Qa.S.width/2?Qa.S.x-this.md/2:Qa.S.right+this.md/2,c.C(W++,qb,Fa),c.C(W++,rc,Fa)),c.C(W++,rc,Pa));c.C(W++,La,Pa)}else X?(zb=Math.max(10,this.Pg[Qa.layer]),db=Math.max(10,this.jg[Qa.layer]),180===this.ma?(Fa=Qa.S.x+Qa.S.width,c.R(W-
2,Fa,rb),c.R(W-1,Fa+db,rb)):90===this.ma?(Fa=Qa.S.y,c.R(W-2,qb,Fa),c.R(W-1,qb,Fa-zb)):270===this.ma?(Fa=Qa.S.y+Qa.S.height,c.R(W-2,qb,Fa),c.R(W-1,qb,Fa+db)):(Fa=Qa.S.x,c.R(W-2,Fa,rb),c.R(W-1,Fa-zb,rb))):(180===this.ma||0===this.ma?c.C(W++,La,rb):c.C(W++,qb,Pa),c.C(W++,La,Pa))}else{for(;Qa!==q&&Qa!==Sa;){Wa=Aa=q;for(var pf=Qa.Ub.k,sc;pf.next()&&!(sc=pf.value,sc.link===b.link&&(Aa=sc.toVertex,Wa=sc.fromVertex,Wa.Wc!==q&&(Wa=q),Aa.Wc===q)););var qb,rb,La,Pa,ib,zb,db;if(Aa!==Sa)if(qb=c.o(W-1).x,rb=c.o(W-
1).y,La=Aa.xa,Pa=Aa.Ga,ea)if(180===this.ma||0===this.ma){var Rf=Wa!==q?Wa.Ga:rb;Rf!==Pa&&(ib=this.pd[Aa.layer],2===W&&(ib=0===this.ma?Math.max(ib,qb):Math.min(ib,qb)),c.C(W++,ib,rb),c.C(W++,ib,Pa))}else{var nd=Wa!==q?Wa.xa:qb;nd!==La&&(ib=this.pd[Aa.layer],2===W&&(ib=90===this.ma?Math.max(ib,rb):Math.min(ib,rb)),c.C(W++,qb,ib),c.C(W++,La,ib))}else zb=Math.max(10,this.Pg[Aa.layer]),db=Math.max(10,this.jg[Aa.layer]),180===this.ma?(c.C(W++,La+db,Pa),X&&c.C(W++,La,Pa),c.C(W++,La-zb,Pa)):90===this.ma?
(c.C(W++,La,Pa-zb),X&&c.C(W++,La,Pa),c.C(W++,La,Pa+db)):270===this.ma?(c.C(W++,La,Pa+db),X&&c.C(W++,La,Pa),c.C(W++,La,Pa-zb)):(c.C(W++,La-zb,Pa),X&&c.C(W++,La,Pa),c.C(W++,La+db,Pa));Qa=Aa}ea&&(qb=c.o(W-1).x,rb=c.o(W-1).y,La=c.o(W).x,Pa=c.o(W).y,180===this.ma||0===this.ma?rb!==Pa&&(ib=0===this.ma?Math.min(Math.max((La+qb)/2,this.pd[Sa.layer]),La):Math.max(Math.min((La+qb)/2,this.pd[Sa.layer]),La),c.C(W++,ib,rb),c.C(W++,ib,Pa)):qb!==La&&(ib=90===this.ma?Math.min(Math.max((Pa+rb)/2,this.pd[Sa.layer]),
Pa):Math.max(Math.min((Pa+rb)/2,this.pd[Sa.layer]),Pa),c.C(W++,qb,ib),c.C(W++,La,ib)))}if(d!==q&&X){if(k!==q){if(Cb(c.computeSpot(h))){var Ad=c.o(0),Od=c.o(2);Ad.L(Od)||c.R(1,(Ad.x+Od.x)/2,(Ad.y+Od.y)/2)}Z=c.getLinkPoint(e,k,Hb,h,s,g,l);c.R(0,Z.x,Z.y)}l!==q&&(Cb(c.computeSpot(s))&&(Ad=c.o(c.qa-1),Od=c.o(c.qa-3),Ad.L(Od)||c.R(c.qa-2,(Ad.x+Od.x)/2,(Ad.y+Od.y)/2)),Z=c.getLinkPoint(g,l,Hb,s,s,e,k),c.R(c.qa-1,Z.x,Z.y))}c.Zh();b.commit()}}for(var ce=new F(U),Bd=this.network.edges.k,de;Bd.next();)de=Bd.value.link,
de!==q&&(de.Ib&&!ce.contains(de))&&ce.add(de);if(0<ce.count)if(90===this.ma||270===this.ma){for(var Jg=0,Jb=new F(So),qf=ce.k,Pb,lc,Tb;qf.next();)if(Pb=qf.value,Pb!==q&&Pb.Ib)for(var Xa=2;Xa<Pb.qa-3;Xa++)if(lc=Pb.o(Xa),Tb=Pb.o(Xa+1),this.I(lc.y,Tb.y)&&!this.I(lc.x,Tb.x)){var tc=new So;tc.layer=Math.floor(lc.y/2);var Se=Pb.o(0),Sf=Pb.o(Pb.qa-1);tc.ob=Se.x*Se.x+Se.y;tc.yd=Sf.x*Sf.x+Sf.y;tc.de=Math.min(lc.x,Tb.x);tc.ud=Math.max(lc.x,Tb.x);tc.index=Xa;tc.link=Pb;if(Xa+2<Pb.qa){var mg=Pb.o(Xa-1),Nb=Pb.o(Xa+
2),od=0;mg.y<lc.y?od=Nb.y<lc.y?3:lc.x<Tb.x?2:1:mg.y>lc.y&&(od=Nb.y>lc.y?0:Tb.x<lc.x?2:1);tc.oh=od}Jb.add(tc)}if(1<Jb.count){Jb.sort(this.OD);for(var zc=0;zc<Jb.count;){for(var pd=Jb.n[zc].layer,eb=zc+1;eb<Jb.count&&Jb.n[eb].layer===pd;)eb++;if(1<eb-zc)for(var ob=zc;ob<eb;){for(var ec=Jb.n[ob].ud,Ab=zc+1;Ab<eb&&Jb.n[Ab].de<ec;)ec=Math.max(ec,Jb.n[Ab].ud),Ab++;var uc=Ab-ob;if(1<uc){Jb.Bo(this.tv,ob,ob+uc);for(var rf=1,Ac=Jb.n[ob].yd,Eb,Xa=ob;Xa<Ab;Xa++)Eb=Jb.n[Xa],Eb.yd!==Ac&&(rf++,Ac=Eb.yd);Jb.Bo(this.ND,
ob,ob+uc);for(var Pd=1,Ac=Jb.n[ob].ob,Xa=ob;Xa<Ab;Xa++)Eb=Jb.n[Xa],Eb.ob!==Ac&&(Pd++,Ac=Eb.ob);var qe,Fb;rf<Pd?(qe=s,Fb=rf,Ac=Jb.n[ob].yd,Jb.Bo(this.tv,ob,ob+uc)):(qe=h,Fb=Pd,Ac=Jb.n[ob].ob);for(var Qd=0,Xa=ob;Xa<Ab;Xa++){Eb=Jb.n[Xa];if((qe?Eb.ob:Eb.yd)!==Ac)Qd++,Ac=qe?Eb.ob:Eb.yd;Pb=Eb.link;lc=Pb.o(Eb.index);Tb=Pb.o(Eb.index+1);var Te=this.Ry*(Qd-(Fb-1)/2);if(Pb.kh!==xf||To(lc.x,lc.y+Te,Tb.x,Tb.y+Te))Jg++,Pb.Mk(),Pb.R(Eb.index,lc.x,lc.y+Te),Pb.R(Eb.index+1,Tb.x,Tb.y+Te),Pb.Zh()}}ob=Ab}zc=eb}}}else{for(var re=
0,pb=new F(So),sf=ce.k,Gb,fb,Xc;sf.next();)if(Gb=sf.value,Gb!==q&&Gb.Ib)for(var Ub=2;Ub<Gb.qa-3;Ub++)if(fb=Gb.o(Ub),Xc=Gb.o(Ub+1),this.I(fb.x,Xc.x)&&!this.I(fb.y,Xc.y)){var Rd=new So;Rd.layer=Math.floor(fb.x/2);var ee=Gb.o(0),fe=Gb.o(Gb.qa-1);Rd.ob=ee.x+ee.y*ee.y;Rd.yd=fe.x+fe.y*fe.y;Rd.de=Math.min(fb.y,Xc.y);Rd.ud=Math.max(fb.y,Xc.y);Rd.index=Ub;Rd.link=Gb;if(Ub+2<Gb.qa){var se=Gb.o(Ub-1),Yc=Gb.o(Ub+2),Cd=0;se.x<fb.x?Cd=Yc.x<fb.x?3:fb.y<Xc.y?2:1:se.x>fb.x&&(Cd=Yc.x>fb.x?0:Xc.y<fb.y?2:1);Rd.oh=Cd}pb.add(Rd)}if(1<
pb.count){pb.sort(this.OD);for(var sb=0;sb<pb.count;){for(var Ue=pb.n[sb].layer,Ve=sb+1;Ve<pb.count&&pb.n[Ve].layer===Ue;)Ve++;if(1<Ve-sb)for(var wb=sb;wb<Ve;){for(var te=pb.n[wb].ud,Kb=sb+1;Kb<Ve&&pb.n[Kb].de<te;)te=Math.max(te,pb.n[Kb].ud),Kb++;var Bc=Kb-wb;if(1<Bc){pb.Bo(this.tv,wb,wb+Bc);for(var Dd=1,Hc=pb.n[wb].yd,Qb,Ub=wb;Ub<Kb;Ub++)Qb=pb.n[Ub],Qb.yd!==Hc&&(Dd++,Hc=Qb.yd);pb.Bo(this.ND,wb,wb+Bc);for(var ue=1,Hc=pb.n[wb].ob,Ub=wb;Ub<Kb;Ub++)Qb=pb.n[Ub],Qb.ob!==Hc&&(ue++,Hc=Qb.ob);var tb,gb;Dd<
ue?(tb=s,gb=Dd,Hc=pb.n[wb].yd,pb.Bo(this.tv,wb,wb+Bc)):(tb=h,gb=ue,Hc=pb.n[wb].ob);for(var We=0,Ub=wb;Ub<Kb;Ub++){Qb=pb.n[Ub];if((tb?Qb.ob:Qb.yd)!==Hc)We++,Hc=tb?Qb.ob:Qb.yd;Gb=Qb.link;fb=Gb.o(Qb.index);Xc=Gb.o(Qb.index+1);var Mc=this.Ry*(We-(gb-1)/2);if(Gb.kh!==xf||To(fb.x+Mc,fb.y,Xc.x+Mc,Xc.y))re++,Gb.Mk(),Gb.R(Qb.index,fb.x+Mc,fb.y),Gb.R(Qb.index+1,Xc.x+Mc,Xc.y),Gb.Zh()}}wb=Kb}sb=Ve}}}};function So(){this.index=this.ud=this.de=this.yd=this.ob=this.layer=0;this.link=q;this.oh=0}
y.Md(So,{layer:h,ob:h,yd:h,de:h,ud:h,index:h,link:h,oh:h});pk.prototype.OD=function(a,b){return!(a instanceof So)||!(b instanceof So)||a===b?0:a.layer<b.layer?-1:a.layer>b.layer?1:a.de<b.de?-1:a.de>b.de?1:a.ud<b.ud?-1:a.ud>b.ud?1:0};pk.prototype.ND=function(a,b){return!(a instanceof So)||!(b instanceof So)||a===b?0:a.ob<b.ob?-1:a.ob>b.ob||a.oh<b.oh?1:a.oh>b.oh||a.de<b.de?-1:a.de>b.de?1:a.ud<b.ud?-1:a.ud>b.ud?1:0};
pk.prototype.tv=function(a,b){return!(a instanceof So)||!(b instanceof So)||a===b?0:a.yd<b.yd?-1:a.yd>b.yd||a.oh<b.oh?1:a.oh>b.oh||a.de<b.de?-1:a.de>b.de?1:a.ud<b.ud?-1:a.ud>b.ud?1:0};pk.prototype.I=function(a,b){x&&(y.p(a,pk,"isApprox:a"),y.p(b,pk,"isApprox:b"));var c=a-b;return-1<c&&1>c};function To(a,b,c,d){x&&(y.p(a,pk,"isUnoccupied2:px"),y.p(b,pk,"isUnoccupied2:py"),y.p(c,pk,"isUnoccupied2:qx"),y.p(d,pk,"isUnoccupied2:qy"));return h}
function Vn(a,b){var c,d=a.nd[b];if(d>=a.kg.length){c=[];var e;for(e=0;e<a.kg.length;e++)c[e]=a.kg[e];a.kg=c}"undefined"===typeof a.kg[d]||a.kg[d]===q?c=[]:(c=a.kg[d],a.kg[d]=q);var d=a.hq[b],g;for(e=0;e<d.length;e++)g=d[e],g instanceof Uo&&(c[g.index]=g);return c}function Xn(a,b,c){a.kg[a.nd[b]]=c}y.g(pk,"layerSpacing",pk.prototype.layerSpacing);y.defineProperty(pk,{layerSpacing:"layerSpacing"},w("Tm"),function(a){this.Tm!==a&&("number"===typeof a&&0<=a)&&(this.Tm=a,this.J())});
y.g(pk,"columnSpacing",pk.prototype.MF);y.defineProperty(pk,{MF:"columnSpacing"},w("md"),function(a){this.md!==a&&("number"===typeof a&&0<=a)&&(this.md=a,this.J())});y.g(pk,"direction",pk.prototype.direction);y.defineProperty(pk,{direction:"direction"},w("ma"),function(a){this.ma!==a&&"number"===typeof a&&(this.ma=a,this.J())});y.g(pk,"cycleRemoveOption",pk.prototype.WB);
y.defineProperty(pk,{WB:"cycleRemoveOption"},w("qm"),function(a){if(this.qm!==a&&(x&&y.l(a,ga,Nn,"cycleRemoveOption"),a===On||a===In))this.qm=a,this.J()});y.g(pk,"layeringOption",pk.prototype.RC);y.defineProperty(pk,{RC:"layeringOption"},w("Um"),function(a){if(this.Um!==a&&(x&&y.l(a,ga,Nn,"layeringOption"),a===Jn||a===uo||a===wo))this.Um=a,this.J()});y.g(pk,"initializeOption",pk.prototype.HC);
y.defineProperty(pk,{HC:"initializeOption"},w("Jm"),function(a){if(this.Jm!==a&&(x&&y.l(a,ga,Nn,"initializeOption"),a===Kn||a===Co||a===Ao))this.Jm=a,this.J()});y.g(pk,"iterations",pk.prototype.QG);y.defineProperty(pk,{QG:"iterations"},w("hl"),function(a){x&&y.p(a,Nn,"iterations");this.hl!==a&&("number"===typeof a&&0<=a)&&(this.hl=a,this.J())});y.g(pk,"aggressiveOption",pk.prototype.AB);
y.defineProperty(pk,{AB:"aggressiveOption"},w("jm"),function(a){if(this.jm!==a&&(x&&y.l(a,ga,Nn,"cycleRemoveOption"),a===Go||a===Ln||a===Ho))this.jm=a,this.J()});y.g(pk,"packOption",pk.prototype.hH);y.defineProperty(pk,{hH:"packOption"},w("Mh"),function(a){this.Mh!==a&&("number"===typeof a&&0<=a&&8>a)&&(this.Mh=a,this.J())});y.g(pk,"setsPortSpots",pk.prototype.Lk);y.defineProperty(pk,{Lk:"setsPortSpots"},w("Sg"),function(a){this.Sg!==a&&"boolean"===typeof a&&(this.Sg=a,this.J())});
y.g(pk,"linkSpacing",pk.prototype.Ry);y.defineProperty(pk,{Ry:"linkSpacing"},w("Qp"),function(a){this.Qp!==a&&(this.Qp=a,this.J())});y.A(pk,{cJ:"maxLayer"},w("ab"));y.A(pk,{aJ:"maxIndex"},w("ut"));y.A(pk,{$I:"maxColumn"},w("wb"));y.A(pk,{fJ:"minIndexLayer"},w("aq"));y.A(pk,{bJ:"maxIndexLayer"},w("kf"));var In;pk.CycleDepthFirst=In=y.w(pk,"CycleDepthFirst",0);var On;pk.CycleGreedy=On=y.w(pk,"CycleGreedy",1);var Jn;pk.LayerOptimalLinkLength=Jn=y.w(pk,"LayerOptimalLinkLength",0);var uo;
pk.LayerLongestPathSink=uo=y.w(pk,"LayerLongestPathSink",1);var wo;pk.LayerLongestPathSource=wo=y.w(pk,"LayerLongestPathSource",2);var Kn;pk.InitDepthFirstOut=Kn=y.w(pk,"InitDepthFirstOut",0);var Co;pk.InitDepthFirstIn=Co=y.w(pk,"InitDepthFirstIn",1);var Ao;pk.InitNaive=Ao=y.w(pk,"InitNaive",2);var Go;pk.AggressiveNone=Go=y.w(pk,"AggressiveNone",0);var Ln;pk.AggressiveLess=Ln=y.w(pk,"AggressiveLess",1);var Ho;pk.AggressiveMore=Ho=y.w(pk,"AggressiveMore",2);pk.PackNone=0;var Io;pk.PackExpand=Io=1;
var Jo;pk.PackStraighten=Jo=2;var Lo;pk.PackMedian=Lo=4;var Mn;pk.PackAll=Mn=7;function Nn(){Rm.call(this)}y.ba("LayeredDigraphNetwork",Nn);y.Ka(Nn,Rm);Nn.prototype.createVertex=function(){return new Uo};Nn.prototype.createEdge=function(){return new Vo};function Uo(){Vm.call(this);this.index=this.column=this.layer=-1;this.component=NaN;this.near=q;this.valid=s;this.finish=this.Kn=NaN;this.vl=0;this.az=this.bz=f}y.ba("LayeredDigraphVertex",Uo);y.Ka(Uo,Vm);
function Vo(){Wm.call(this);this.forest=this.rev=this.valid=s;this.portToPos=this.portFromPos=NaN;this.portToColOffset=this.portFromColOffset=0}y.ba("LayeredDigraphEdge",Vo);y.Ka(Vo,Wm);function Y(){0<arguments.length&&y.m("TreeLayout constructor cannot take any arguments.");ph.call(this);this.yc=new na(Object);this.Oh=Wo;this.gf=Xo;this.Yq=Yo;this.Tc=Zo;this.wf=(new ha(10,10)).freeze();this.pa=new $o;this.oa=new $o}y.ba("TreeLayout",Y);y.Ka(Y,ph);
Y.prototype.cloneProtected=function(a){ph.prototype.cloneProtected.call(this,a);a.Oh=this.Oh;a.Yq=this.Yq;a.Tc=this.Tc;a.wf.assign(this.wf);a.pa.copyInheritedPropertiesFrom(this.pa);a.oa.copyInheritedPropertiesFrom(this.oa)};Y.prototype.createNetwork=function(){var a=new ap;Sm(a,this);return a};Y.prototype.makeNetwork=function(a){var b=this.createNetwork();a instanceof E?(bp(this,b,a.uj,h),bp(this,b,a.links,h)):a instanceof He?bp(this,b,a.Ec,s):bp(this,b,a.k,s);return b};
function bp(a,b,c,d){for(c=c.k;c.next();){var e=c.value;if(e instanceof T&&e.canLayout()&&"Comment"!==e.Ac&&(!d||e.$n))e.ii||(e instanceof He&&e.Nb===q?bp(a,b,e.Ec,s):b.un(e))}for(c.reset();c.next();)if(e=c.value,e instanceof U&&e.canLayout()&&"Comment"!==e.Ac&&(!d||e.$n)){var g=e.da;a=e.fa;if(!(g===q||a===q||g===a)&&"Comment"!==g.Ac&&"Comment"!==a.Ac)g=b.Ou(g),a=b.Ou(a),g!==q&&a!==q&&b.Sl(g,a,e)}}
Y.prototype.doLayout=function(a){a||y.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");this.network===q&&(this.network=this.makeNetwork(a));this.qe!==cp&&(this.ed=Um(this,this.ed));var b=this.h;b===q&&a instanceof E&&(b=a);this.gf=this.path===Wo&&b!==q?b.Dc?Xo:dp:this.path===Wo?Xo:this.path;if(0<this.network.vertexes.count){this.network.Ku();for(b=this.network.vertexes.k;b.next();)a=b.value,a.initialized=s,a.level=0,a.parent=q,a.children=[];
if(0<this.yc.count){b=this.yc.k;for(this.yc=new na($o);b.next();)a=b.value,a instanceof T?(a=this.network.Jl(a),a!==q&&this.yc.add(a)):a instanceof $o&&this.yc.add(a)}if(0===this.yc.count){for(a=this.network.vertexes.k;a.next();)switch(b=a.value,this.gf){case Xo:0===b.dc.count&&this.yc.add(b);break;case dp:0===b.Ub.count&&this.yc.add(b);break;default:y.m("Unhandled path value "+this.gf.toString())}if(0===this.yc.count){a=999999;for(var b=q,c=this.network.vertexes.k;c.next();){var d=c.value;switch(this.gf){case Xo:d.dc.count<
a&&(a=d.dc.count,b=d);break;case dp:d.Ub.count<a&&(a=d.Ub.count,b=d);break;default:y.m("Unhandled path value "+this.gf.toString())}}b!==q&&this.yc.add(b)}}for(b=this.yc.k;b.next();)a=b.value,a.initialized||(a.initialized=h,ep(this,a));for(a=this.yc.k;a.next();)fp(this,a.value);for(a=this.yc.k;a.next();)gp(this,a.value);for(a=this.yc.k;a.next();)hp(this,a.value);for(a=this.network.vertexes.k;a.next();)this.addComments(a.value);for(a=this.yc.k;a.next();)ip(this,a.value);this.arrangeTrees();this.updateParts()}this.network=
q;this.yc=new na(Object);this.Ve=h};
function ep(a,b){x&&y.l(b,$o,Y,"walkTree:v");if(b!==q){switch(a.gf){case Xo:if(0<b.Ub.count){for(var c=new F($o),d=b.hG;d.next();){var e=d.value;jp(a,b,e)&&c.add(e)}0<c.count&&(b.children=c.Ee())}break;case dp:if(0<b.dc.count){c=new F($o);for(d=b.uH;d.next();)e=d.value,jp(a,b,e)&&c.add(e);0<c.count&&(b.children=c.Ee())}break;default:y.m("Unhandled path value"+a.gf.toString())}for(var c=b.children,d=c.length,g=0;g<d;g++)e=c[g],e.initialized=h,e.level=b.level+1,e.parent=b,a.yc.remove(e);for(g=0;g<d;g++)e=
c[g],ep(a,e)}}function jp(a,b,c){x&&y.l(b,$o,Y,"walkOK:v");x&&y.l(c,$o,Y,"walkOK:c");if(c.initialized){var d;x&&y.l(c,$o,Y,"isAncestor:a");x&&y.l(b,$o,Y,"isAncestor:b");if(b===q)d=s;else{for(d=b.parent;d!==q&&d!==c;)d=d.parent;d=d===c}if(d||c.level>b.level)return s;a.removeChild(c.parent,c)}return h}
Y.prototype.removeChild=function(a,b){x&&y.l(a,$o,Y,"removeChild:p");x&&y.l(b,$o,Y,"removeChild:c");if(a!==q&&b!==q){for(var c=a.children,d=0,e=0;e<c.length;e++)c[e]===b&&d++;if(0<d){for(var d=Array(c.length-d),g=0,e=0;e<c.length;e++)c[e]!==b&&(d[g++]=c[e]);a.children=d}}};
function fp(a,b){x&&y.l(b,$o,Y,"initializeTree:v");if(b!==q){a.initializeTreeVertexValues(b);b.alignment===kp&&a.sortTreeVertexChildren(b);for(var c=0,d=b.zl,e=0,g=b.children,k=g.length,l=0;l<k;l++){var m=g[l];fp(a,m);c+=m.descendantCount+1;d=Math.max(d,m.maxChildrenCount);e=Math.max(e,m.maxGenerationCount)}b.descendantCount=c;b.maxChildrenCount=d;b.maxGenerationCount=0<d?e+1:0}}
function lp(a,b){x&&y.l(b,$o,Y,"mom:v");switch(a.Yq){default:case Yo:return b.parent!==q?b.parent:a.pa;case mp:return b.parent===q?a.pa:b.parent.parent===q?a.oa:b.parent;case np:if(b.parent!==q)return b.parent.parent!==q?b.parent.parent:a.oa;case op:var c=h;if(0===b.zl)c=s;else for(var d=b.children,e=d.length,g=0;g<e;g++)if(0<d[g].zl){c=s;break}return c&&b.parent!==q?a.oa:b.parent!==q?b.parent:a.pa}}
Y.prototype.initializeTreeVertexValues=function(a){x&&y.l(a,$o,Y,"initializeTreeVertexValues:v");var b=lp(this,a);a.copyInheritedPropertiesFrom(b);if(a.parent!==q&&a.parent.alignment===kp){for(var b=a.angle,c=a.parent.children,d=0;d<c.length&&a!==c[d];)d++;0===d%2?d!==c.length-1&&(b=90===b?180:180===b?270:270===b?180:270):b=90===b?0:180===b?90:270===b?0:90;a.angle=b}a.initialized=h};
function gp(a,b){x&&y.l(b,$o,Y,"assignTree:v");if(b!==q){a.assignTreeVertexValues(b);for(var c=b.children,d=c.length,e=0;e<d;e++)gp(a,c[e])}}Y.prototype.assignTreeVertexValues=aa();function hp(a,b){x&&y.l(b,$o,Y,"sortTree:v");if(b!==q){b.alignment!==kp&&a.sortTreeVertexChildren(b);for(var c=b.children,d=c.length,e=0;e<d;e++)hp(a,c[e])}}
Y.prototype.sortTreeVertexChildren=function(a){x&&y.l(a,$o,Y,"sortTreeVertexChildren:v");switch(a.sorting){case pp:break;case qp:a.children.reverse();break;case rp:a.children.sort(a.comparer);break;case sp:a.children.sort(a.comparer);a.children.reverse();break;default:y.m("Unhandled sorting value "+a.sorting.toString())}};
Y.prototype.addComments=function(a){x&&y.l(a,$o,Y,"addComments:v");var b=a.angle,c=a.parent,d=0,e=tp,e=s;c!==q&&(d=c.angle,e=c.alignment,e=up(e));var b=90===b||270===b,d=90===d||270===d,c=0===a.zl,g=0,k=0,l=0,m=a.commentSpacing;if(a.vc!==q)for(var n=a.vc.iC();n.next();){var p=n.value;"Comment"===p.Ac&&p.yb()&&(a.comments===q&&(a.comments=[]),a.comments.push(p),p.ci(),p=p.Ba,b&&!c||!e&&!d&&c||e&&d&&c?(g=Math.max(g,p.width),k+=p.height+Math.abs(l)):(g+=p.width+Math.abs(l),k=Math.max(k,p.height)),l=
m)}a.comments!==q&&(b&&!c||!e&&!d&&c||e&&d&&c?(g+=Math.abs(a.commentMargin),k=Math.max(0,k-a.height)):(k+=Math.abs(a.commentMargin),g=Math.max(0,g-a.width)),e=y.xj(0,0,a.S.width+g,a.S.height+k),a.Hb=e,y.Bc(e))};function up(a){return a===vp||a===kp||a===wp||a===xp}function yp(a){return a===vp||a===kp}
function zp(a){x&&y.l(a,$o,Y,"isLeftSideBus:v");var b=a.parent;if(b!==q){var c=b.alignment;if(up(c)){if(yp(c)){b=b.children;for(c=0;c<b.length&&a!==b[c];)c++;return 0===c%2}if(c===wp)return h}}return s}
Y.prototype.layoutComments=function(a){x&&y.l(a,$o,Y,"layoutComments:v");if(a.comments!==q){var b=a.vc.Ba,c=a.parent,d=a.angle,e=0,g=tp,g=s;c!==q&&(e=c.angle,g=c.alignment,g=up(g));for(var d=90===d||270===d,k=90===e||270===e,l=0===a.zl,m=zp(a),n=0,p=a.comments,r=p.length,t=y.M(),u=0;u<r;u++){var c=p[u],v=c.Ba;if(d&&!l||!g&&!k&&l||g&&k&&l){if(135<e&&!g||k&&m)if(0<=a.commentMargin){t.q(a.S.x-a.commentMargin-v.width,a.S.y+n);c.location=t;for(var z=c.Jf();z.next();)c=z.value,c.gb=ac,c.kb=bc}else{t.q(a.S.x+
2*a.N.x-a.commentMargin,a.S.y+n);c.location=t;for(z=c.Jf();z.next();)c=z.value,c.gb=bc,c.kb=ac}else if(0<=a.commentMargin){t.q(a.S.x+2*a.N.x+a.commentMargin,a.S.y+n);c.location=t;for(z=c.Jf();z.next();)c=z.value,c.gb=bc,c.kb=ac}else{t.q(a.S.x+a.commentMargin-v.width,a.S.y+n);c.location=t;for(z=c.Jf();z.next();)c=z.value,c.gb=ac,c.kb=bc}n=0<=a.commentSpacing?n+(v.height+a.commentSpacing):n+(a.commentSpacing-v.height)}else{if(135<e&&!g||!k&&m)if(0<=a.commentMargin){t.q(a.S.x+n,a.S.y-a.commentMargin-
v.height);c.location=t;for(z=c.Jf();z.next();)c=z.value,c.gb=$b,c.kb=cc}else{t.q(a.S.x+n,a.S.y+2*a.N.y-a.commentMargin);c.location=t;for(z=c.Jf();z.next();)c=z.value,c.gb=cc,c.kb=$b}else if(0<=a.commentMargin){t.q(a.S.x+n,a.S.y+2*a.N.y+a.commentMargin);c.location=t;for(z=c.Jf();z.next();)c=z.value,c.gb=cc,c.kb=$b}else{t.q(a.S.x+n,a.S.y+a.commentMargin-v.height);c.location=t;for(z=c.Jf();z.next();)c=z.value,c.gb=$b,c.kb=cc}n=0<=a.commentSpacing?n+(v.width+a.commentSpacing):n+(a.commentSpacing-v.width)}}y.B(t);
b=n-a.commentSpacing-(d?b.height:b.width);if(this.gf===Xo)for(a=a.Ub;a.next();){if(e=a.value,(c=e.link)&&c.kh!==xf)c.Kl=0<b?b:NaN}else for(a=a.dc;a.next();)if(e=a.value,(c=e.link)&&c.kh!==xf)c.cm=0<b?b:NaN}};
function ip(a,b){x&&y.l(b,$o,Y,"layoutTree:v");if(b!==q){for(var c=b.children,d=c.length,e=0;e<d;e++)ip(a,c[e]);switch(b.compaction){case Ap:Bp(a,b);break;case Cp:if(b.alignment===kp)Bp(a,b);else if(x&&y.l(b,$o,Y,"layoutTreeBlock:v"),0===b.zl){var e=b.parent,c=s,d=0,g=tp;e!==q&&(d=e.angle,g=e.alignment,c=up(g));e=zp(b);b.ga.q(0,0);b.Va.q(b.width,b.height);b.parent!==q&&b.comments!==q&&((180===d||270===d)&&!c||e)?180===d&&!c||(90===d||270===d)&&e?b.Ia.q(b.width-2*b.N.x,0):b.Ia.q(0,b.height-2*b.N.y):
b.Ia.q(0,0);b.Mr=q;b.ds=q}else{for(var k=Dp(b),c=90===k||270===k,l=0,m=b.children,n=m.length,p=0;p<n;p++)var r=m[p],l=Math.max(l,c?r.Va.width:r.Va.height);var t=b.alignment,e=t===Ep,u=t===Fp,v=up(t),z=Math.max(0,b.breadthLimit),d=Gp(b),C=b.nodeSpacing,K=Hp(b),I=b.rowSpacing,Q=0;if(e||u||b.yo||b.zo&&1===b.maxGenerationCount)Q=Math.max(0,b.rowIndent);var e=b.width,g=b.height,L=0,S=0,Z=0,X=q,ea=q,ia=0,W=0,wa=0,Oa=0,Qa=0,Sa=0,Aa=0,Wa=0,r=0;v&&!yp(t)&&135<k&&m.reverse();if(yp(t))if(1<n)for(p=0;p<n;p++)0===
p%2&&p!==n-1?Wa=Math.max(Wa,c?m[p].Va.width:m[p].Va.height):0!==p%2&&(r=Math.max(r,c?m[p].Va.width:m[p].Va.height));else 1===n&&(Wa=c?m[0].Va.width:m[0].Va.height);if(v){switch(t){case vp:W=135>k?Ip(b,m,Wa,L,S):Jp(b,m,Wa,L,S);Wa=W[0];L=W[1];S=W[2];break;case wp:for(p=0;p<n;p++){var r=m[p],Fa=r.Va,X=0===Sa?0:I;c?(r.ga.q(l-Fa.width,Oa+X),L=Math.max(L,Fa.width),S=Math.max(S,Oa+X+Fa.height),Oa+=X+Fa.height):(r.ga.q(wa+X,l-Fa.height),L=Math.max(L,wa+X+Fa.width),S=Math.max(S,Fa.height),wa+=X+Fa.width);
Sa++}break;case xp:for(p=0;p<n;p++)r=m[p],Fa=r.Va,X=0===Sa?0:I,c?(r.ga.q(C/2+b.N.x,Oa+X),L=Math.max(L,Fa.width),S=Math.max(S,Oa+X+Fa.height),Oa+=X+Fa.height):(r.ga.q(wa+X,C/2+b.N.y),L=Math.max(L,wa+X+Fa.width),S=Math.max(S,Fa.height),wa+=X+Fa.width),Sa++}X=Kp(a,2);ea=Kp(a,2);c?(X[0].q(0,0),X[1].q(0,S),ea[0].q(L,0)):(X[0].q(0,0),X[1].q(L,0),ea[0].q(0,S));ea[1].q(L,S)}else for(p=0;p<n;p++){r=m[p];Fa=r.Va;if(c){0<z&&(0<Sa&&wa+C+Fa.width>z)&&(wa<l&&Lp(b,t,l-wa,0,Aa,p-1),Qa++,Sa=0,Aa=p,Z=S,wa=0,Oa=135<
k?-S-I:S+I);Mp(a,r,0,Oa);var xb=0;if(0===Sa){if(X=r.Mr,ea=r.ds,ia=Fa.width,W=Fa.height,X===q||ea===q||k!==Dp(r))X=Kp(a,2),ea=Kp(a,2),X[0].q(0,0),X[1].q(0,W),ea[0].q(ia,0),ea[1].q(ia,W)}else W=Np(a,b,r,X,ea,ia,W),xb=W[0],X=W[1],ea=W[2],ia=W[3],W=W[4],wa<Fa.width&&0>xb&&(Op(b,-xb,0,Aa,p-1),Pp(X,-xb,0),Pp(ea,-xb,0),xb=0);r.ga.q(xb,Oa);L=Math.max(L,ia);S=Math.max(S,Z+(0===Qa?0:I)+Fa.height);wa=ia}else{0<z&&(0<Sa&&Oa+C+Fa.height>z)&&(Oa<l&&Lp(b,t,0,l-Oa,Aa,p-1),Qa++,Sa=0,Aa=p,Z=L,Oa=0,wa=135<k?-L-I:L+
I);Mp(a,r,wa,0);xb=0;if(0===Sa){if(X=r.Mr,ea=r.ds,ia=Fa.width,W=Fa.height,X===q||ea===q||k!==Dp(r))X=Kp(a,2),ea=Kp(a,2),X[0].q(0,0),X[1].q(ia,0),ea[0].q(0,W),ea[1].q(ia,W)}else W=Np(a,b,r,X,ea,ia,W),xb=W[0],X=W[1],ea=W[2],ia=W[3],W=W[4],Oa<Fa.height&&0>xb&&(Op(b,0,-xb,Aa,p-1),Pp(X,0,-xb),Pp(ea,0,-xb),xb=0);r.ga.q(wa,xb);S=Math.max(S,W);L=Math.max(L,Z+(0===Qa?0:I)+Fa.width);Oa=W}Sa++}0<Qa&&(c?(S+=Math.max(0,d),wa<L&&Lp(b,t,L-wa,0,Aa,n-1),0<Q&&(u||Op(b,Q,0,0,n-1),L+=Q)):(L+=Math.max(0,d),Oa<S&&Lp(b,
t,0,S-Oa,Aa,n-1),0<Q&&(u||Op(b,0,Q,0,n-1),S+=Q)));u=l=0;switch(t){case Qp:c?l+=L/2-b.N.x-K/2:u+=S/2-b.N.y-K/2;break;case tp:0<Qa?c?l+=L/2-b.N.x-K/2:u+=S/2-b.N.y-K/2:c?(p=m[0].ga.x+m[0].Ia.x,Wa=m[n-1].ga.x+m[n-1].Ia.x+2*m[n-1].N.x,l+=p+(Wa-p)/2-b.N.x-K/2):(p=m[0].ga.y+m[0].Ia.y,Wa=m[n-1].ga.y+m[n-1].Ia.y+2*m[n-1].N.y,u+=p+(Wa-p)/2-b.N.y-K/2);break;case Ep:c?(l-=K,L+=K):(u-=K,S+=K);break;case Fp:c?(l+=L-b.width+K,L+=K):(u+=S-b.height+K,S+=K);break;case vp:c?l=1<n?l+(Wa+C/2-b.N.x):l+(m[0].N.x-b.N.x+
m[0].Ia.x):u=1<n?u+(Wa+C/2-b.N.y):u+(m[0].N.y-b.N.y+m[0].Ia.y);break;case wp:c?l+=L+C/2-b.N.x:u+=S+C/2-b.N.y;break;case xp:break;default:y.m("Unhandled alignment value "+t.toString())}for(p=0;p<n;p++)r=m[p],c?r.ga.q(r.ga.x+r.Ia.x-l,r.ga.y+(135<k?(v?-S:-r.Va.height)+r.Ia.y-d:g+d+r.Ia.y)):r.ga.q(r.ga.x+(135<k?(v?-L:-r.Va.width)+r.Ia.x-d:e+d+r.Ia.x),r.ga.y+r.Ia.y-u);n=m=0;v?c?(L=Rp(b,L,l),0>l&&(l=0),135<k&&(u+=S+d),S+=g+d,t===xp&&(m+=C/2+b.N.x),n+=g+d):(135<k&&(l+=L+d),L+=e+d,S=Sp(b,S,u),0>u&&(u=0),
t===xp&&(n+=C/2+b.N.y),m+=e+d):c?(b.comments===q?e>L&&(t=Tp(t,e-L,0),m=t[0],n=t[1],L=e,l=0):L=Rp(b,L,l),0>l&&(m-=l,l=0),135<k&&(u+=S+d),S=Math.max(Math.max(S,g),S+g+d),n+=g+d):(135<k&&(l+=L+d),L=Math.max(Math.max(L,e),L+e+d),b.comments===q?g>S&&(t=Tp(t,0,g-S),m=t[0],n=t[1],S=g,u=0):S=Sp(b,S,u),0>u&&(n-=u,u=0),m+=e+d);if(0<Qa)k=Kp(a,4),t=Kp(a,4),c?(k[2].q(0,g+d),k[3].q(k[2].x,S),t[2].q(L,k[2].y),t[3].q(t[2].x,k[3].y)):(k[2].q(e+d,0),k[3].q(L,k[2].y),t[2].q(k[2].x,S),t[3].q(k[3].x,t[2].y));else{k=Kp(a,
X.length+2);t=Kp(a,ea.length+2);for(p=0;p<X.length;p++)v=X[p],k[p+2].q(v.x+m,v.y+n);for(p=0;p<ea.length;p++)v=ea[p],t[p+2].q(v.x+m,v.y+n)}c?(k[0].q(l,0),k[1].q(k[0].x,g),k[2].y<k[1].y&&(k[2].x>k[0].x?k[2].assign(k[1]):k[1].assign(k[2])),k[3].y<k[2].y&&(k[3].x>k[0].x?k[3].assign(k[2]):k[2].assign(k[3])),t[0].q(l+e,0),t[1].q(t[0].x,g),t[2].y<t[1].y&&(t[2].x<t[0].x?t[2].assign(t[1]):t[1].assign(t[2])),t[3].y<t[2].y&&(t[3].x<t[0].x?t[3].assign(t[2]):t[2].assign(t[3])),k[2].y-=d/2,t[2].y-=d/2):(k[0].q(0,
u),k[1].q(e,k[0].y),k[2].x<k[1].x&&(k[2].y>k[0].y?k[2].assign(k[1]):k[1].assign(k[2])),k[3].x<k[2].x&&(k[3].y>k[0].y?k[3].assign(k[2]):k[2].assign(k[3])),t[0].q(0,u+g),t[1].q(e,t[0].y),t[2].x<t[1].x&&(t[2].y<t[0].y?t[2].assign(t[1]):t[1].assign(t[2])),t[3].x<t[2].x&&(t[3].y<t[0].y?t[3].assign(t[2]):t[2].assign(t[3])),k[2].x-=d/2,t[2].x-=d/2);Up(a,X);Up(a,ea);b.Mr=k;b.ds=t;b.Ia.q(l,u);b.Va.q(L,S)}break;default:y.m("Unhandled compaction value "+b.compaction.toString())}}}
function Bp(a,b){x&&y.l(b,$o,Y,"layoutTreeNone:v");if(0===b.zl){var c=s,d=0,e=tp;b.parent!==q&&(d=b.parent.angle,e=b.parent.alignment,c=up(e));e=zp(b);b.ga.q(0,0);b.Va.q(b.width,b.height);b.parent!==q&&b.comments!==q&&((180===d||270===d)&&!c||e)?180===d&&!c||(90===d||270===d)&&e?b.Ia.q(b.width-2*b.N.x,0):b.Ia.q(0,b.height-2*b.N.y):b.Ia.q(0,0)}else{for(var c=Dp(b),d=90===c||270===c,g=0,e=b.children,k=e.length,l=0;l<k;l++)var m=e[l],g=Math.max(g,d?m.Va.width:m.Va.height);var n=b.alignment,p=n===Ep,
r=n===Fp,t=up(n),u=Math.max(0,b.breadthLimit),v=Gp(b),z=b.nodeSpacing,C=Hp(b),K=p||r?0:C/2,I=b.rowSpacing,Q=0;if(p||r||b.yo||b.zo&&1===b.maxGenerationCount)Q=Math.max(0,b.rowIndent);var p=b.width,L=b.height,S=0,Z=0,X=0,ea=0,ia=0,W=0,wa=0,Oa=0,Qa=0,Sa=0;t&&!yp(n)&&135<c&&e.reverse();if(yp(n))if(1<k)for(l=0;l<k;l++){var m=e[l],Aa=m.Va;0===l%2&&l!==k-1?Qa=Math.max(Qa,(d?Aa.width:Aa.height)+Vp(m)-z):0!==l%2&&(Sa=Math.max(Sa,(d?Aa.width:Aa.height)+Vp(m)-z))}else 1===k&&(Qa=d?e[0].Va.width:e[0].Va.height);
if(t)switch(n){case vp:case kp:Z=135>c?Ip(b,e,Qa,S,Z):Jp(b,e,Qa,S,Z);Qa=Z[0];S=Z[1];Z=Z[2];break;case wp:for(l=0;l<k;l++)m=e[l],Aa=m.Va,u=0===wa?0:I,d?(m.ga.q(g-Aa.width,ia+u),S=Math.max(S,Aa.width),Z=Math.max(Z,ia+u+Aa.height),ia+=u+Aa.height):(m.ga.q(ea+u,g-Aa.height),S=Math.max(S,ea+u+Aa.width),Z=Math.max(Z,Aa.height),ea+=u+Aa.width),wa++;break;case xp:for(g=0;g<k;g++)m=e[g],Aa=m.Va,u=0===wa?0:I,d?(m.ga.q(z/2+b.N.x,ia+u),S=Math.max(S,Aa.width),Z=Math.max(Z,ia+u+Aa.height),ia+=u+Aa.height):(m.ga.q(ea+
u,z/2+b.N.y),S=Math.max(S,ea+u+Aa.width),Z=Math.max(Z,Aa.height),ea+=u+Aa.width),wa++}else for(l=0;l<k;l++)m=e[l],Aa=m.Va,d?(0<u&&(0<wa&&ea+z+Aa.width>u)&&(ea<g&&Lp(b,n,g-ea,0,Oa,l-1),W++,wa=0,Oa=l,X=Z,ea=0,ia=135<c?-Z-I:Z+I),Sa=0===wa?K:z,Mp(a,m,0,ia),m.ga.q(ea+Sa,ia),S=Math.max(S,ea+Sa+Aa.width),Z=Math.max(Z,X+(0===W?0:I)+Aa.height),ea+=Sa+Aa.width):(0<u&&(0<wa&&ia+z+Aa.height>u)&&(ia<g&&Lp(b,n,0,g-ia,Oa,l-1),W++,wa=0,Oa=l,X=S,ia=0,ea=135<c?-S-I:S+I),Sa=0===wa?K:z,Mp(a,m,ea,0),m.ga.q(ea,ia+Sa),
Z=Math.max(Z,ia+Sa+Aa.height),S=Math.max(S,X+(0===W?0:I)+Aa.width),ia+=Sa+Aa.height),wa++;0<W&&(d?(Z+=Math.max(0,v),ea<S&&Lp(b,n,S-ea,0,Oa,k-1),0<Q&&(r||Op(b,Q,0,0,k-1),S+=Q)):(S+=Math.max(0,v),ia<Z&&Lp(b,n,0,Z-ia,Oa,k-1),0<Q&&(r||Op(b,0,Q,0,k-1),Z+=Q)));Q=r=0;switch(n){case Qp:d?r+=S/2-b.N.x-C/2:Q+=Z/2-b.N.y-C/2;break;case tp:0<W?d?r+=S/2-b.N.x-C/2:Q+=Z/2-b.N.y-C/2:d?(n=e[0].ga.x+e[0].Ia.x,z=e[k-1].ga.x+e[k-1].Ia.x+2*e[k-1].N.x,r+=n+(z-n)/2-b.N.x-C/2):(n=e[0].ga.y+e[0].Ia.y,z=e[k-1].ga.y+e[k-1].Ia.y+
2*e[k-1].N.y,Q+=n+(z-n)/2-b.N.y-C/2);break;case Ep:d?(r-=C,S+=C):(Q-=C,Z+=C);break;case Fp:d?(r+=S-b.width+C,S+=C):(Q+=Z-b.height+C,Z+=C);break;case vp:case kp:d?r=1<k?r+(Qa+z/2-b.N.x):r+(e[0].N.x-b.N.x+e[0].Ia.x):Q=1<k?Q+(Qa+z/2-b.N.y):Q+(e[0].N.y-b.N.y+e[0].Ia.y);break;case wp:d?r+=S+z/2-b.N.x:Q+=Z+z/2-b.N.y;break;case xp:break;default:y.m("Unhandled alignment value "+n.toString())}for(l=0;l<k;l++)m=e[l],d?m.ga.q(m.ga.x+m.Ia.x-r,m.ga.y+(135<c?(t?-Z:-m.Va.height)+m.Ia.y-v:L+v+m.Ia.y)):m.ga.q(m.ga.x+
(135<c?(t?-S:-m.Va.width)+m.Ia.x-v:p+v+m.Ia.x),m.ga.y+m.Ia.y-Q);d?(S=Rp(b,S,r),0>r&&(r=0),135<c&&(Q+=Z+v),Z+=L+v):(135<c&&(r+=S+v),S+=p+v,Z=Sp(b,Z,Q),0>Q&&(Q=0));b.Ia.q(r,Q);b.Va.q(S,Z)}}
function Ip(a,b,c,d,e){x&&y.l(a,$o,Y,"layoutBusChildrenPosDir:v");var g=b.length;if(0===g)return a=[],a[0]=c,a[1]=d,a[2]=e,a;if(1===g){var k=b[0];d=k.Va.width;e=k.Va.height;a=[];a[0]=c;a[1]=d;a[2]=e;return a}for(var l=a.nodeSpacing,m=a.rowSpacing,n=90===Dp(a),p=0,r=0,t=0,u=0;u<g;u++)if(!(0!==u%2||1<g&&u===g-1)){var k=b[u],v=k.Va,z=0===p?0:m;if(n){var C=Vp(k)-l;k.ga.q(c-(v.width+C),t+z);d=Math.max(d,v.width+C);e=Math.max(e,t+z+v.height);t+=z+v.height}else C=Vp(k)-l,k.ga.q(r+z,c-(v.height+C)),e=Math.max(e,
v.height+C),d=Math.max(d,r+z+v.width),r+=z+v.width;p++}var p=0,K=r,I=t;n?(r=c+l,t=0):(r=0,t=c+l);for(u=0;u<g;u++)0!==u%2&&(k=b[u],v=k.Va,z=0===p?0:m,n?(C=Vp(k)-l,k.ga.q(r+C,t+z),d=Math.max(d,r+v.width+C),e=Math.max(e,t+z+v.height),t+=z+v.height):(C=Vp(k)-l,k.ga.q(r+z,t+C),d=Math.max(d,r+z+v.width),e=Math.max(e,t+v.height+C),r+=z+v.width),p++);1<g&&1===g%2&&(k=b[g-1],v=k.Va,b=Wp(k,n?Math.max(Math.abs(I),Math.abs(t)):Math.max(Math.abs(K),Math.abs(r))),n?(k.ga.q(c+l/2-k.N.x-k.Ia.x,e+b),n=c+l/2-k.N.x-
k.Ia.x,d=Math.max(d,n+v.width),0>n&&(d-=n),e=Math.max(e,Math.max(I,t)+b+v.height),0>k.ga.x&&(c=bq(a,k.ga.x,s,c,l))):(k.ga.q(d+b,c+l/2-k.N.y-k.Ia.y),d=Math.max(d,Math.max(K,r)+b+v.width),n=c+l/2-k.N.y-k.Ia.y,e=Math.max(e,n+v.height),0>n&&(e-=n),0>k.ga.y&&(c=bq(a,k.ga.y,h,c,l))));a=[];a[0]=c;a[1]=d;a[2]=e;return a}
function Jp(a,b,c,d,e){x&&y.l(a,$o,Y,"layoutBusChildrenNegDir:v");var g=b.length;if(0===g)return a=[],a[0]=c,a[1]=d,a[2]=e,a;if(1===g){var k=b[0];d=k.Va.width;e=k.Va.height;a=[];a[0]=c;a[1]=d;a[2]=e;return a}for(var l=a.nodeSpacing,m=a.rowSpacing,n=270===Dp(a),p=0,r=0,t=0,u=0;u<g;u++)if(!(0!==u%2||1<g&&u===g-1)){var k=b[u],v=k.Va,z=0===p?0:m;if(n){var C=Vp(k)-l,t=t-(z+v.height);k.ga.q(c-(v.width+C),t);d=Math.max(d,v.width+C);e=Math.max(e,Math.abs(t))}else C=Vp(k)-l,r-=z+v.width,k.ga.q(r,c-(v.height+
C)),e=Math.max(e,v.height+C),d=Math.max(d,Math.abs(r));p++}var p=0,K=r,I=t;n?(r=c+l,t=0):(r=0,t=c+l);for(u=0;u<g;u++)0!==u%2&&(k=b[u],v=k.Va,z=0===p?0:m,n?(C=Vp(k)-l,t-=z+v.height,k.ga.q(r+C,t),d=Math.max(d,r+v.width+C),e=Math.max(e,Math.abs(t))):(C=Vp(k)-l,r-=z+v.width,k.ga.q(r,t+C),e=Math.max(e,t+v.height+C),d=Math.max(d,Math.abs(r))),p++);1<g&&1===g%2&&(k=b[g-1],v=k.Va,m=Wp(k,n?Math.max(Math.abs(I),Math.abs(t)):Math.max(Math.abs(K),Math.abs(r))),n?(k.ga.q(c+l/2-k.N.x-k.Ia.x,-e-v.height-m),r=c+
l/2-k.N.x-k.Ia.x,d=Math.max(d,r+v.width),0>r&&(d-=r),e=Math.max(e,Math.abs(Math.min(I,t))+m+v.height),0>k.ga.x&&(c=bq(a,k.ga.x,s,c,l))):(k.ga.q(-d-v.width-m,c+l/2-k.N.y-k.Ia.y),d=Math.max(d,Math.abs(Math.min(K,r))+m+v.width),r=c+l/2-k.N.y-k.Ia.y,e=Math.max(e,r+v.height),0>r&&(e-=r),0>k.ga.y&&(c=bq(a,k.ga.y,h,c,l))));for(u=0;u<g;u++)k=b[u],n?k.ga.q(k.ga.x,k.ga.y+e):k.ga.q(k.ga.x+d,k.ga.y);a=[];a[0]=c;a[1]=d;a[2]=e;return a}
function Vp(a){x&&y.l(a,$o,Y,"fixRelativePostions:child");return a.parent===q?0:a.parent.nodeSpacing}function Wp(a){x&&y.l(a,$o,Y,"fixRelativePostions:lastchild");return a.parent===q?0:a.parent.rowSpacing}function bq(a,b,c,d,e){x&&y.l(a,$o,Y,"fixRelativePostions:v");a=a.children;for(var g=a.length,k=0;k<g;k++)c?a[k].ga.q(a[k].ga.x,a[k].ga.y-b):a[k].ga.q(a[k].ga.x-b,a[k].ga.y);b=a[g-1];return Math.max(d,c?b.Ia.y+b.N.y-e/2:b.Ia.x+b.N.x-e/2)}
function Rp(a,b,c){x&&y.l(a,$o,Y,"calculateSubwidth:v");switch(a.alignment){case tp:case Qp:var d=b;c+a.width>d&&(d=c+a.width);0>c&&(d-=c);return d;case Ep:return a.width>b?a.width:b;case Fp:return 2*a.N.x>b?a.width:b+a.width-2*a.N.x;case vp:case kp:return d=Math.min(0,c),c=Math.max(b,c+a.width),Math.max(a.width,c-d);case wp:return a.width-a.N.x+a.nodeSpacing/2+b;case xp:return Math.max(a.width,a.N.x+a.nodeSpacing/2+b);default:return b}}
function Sp(a,b,c){x&&y.l(a,$o,Y,"calculateSubheight:v");switch(a.alignment){case tp:case Qp:var d=b;c+a.height>d&&(d=c+a.height);0>c&&(d-=c);return d;case Ep:return a.height>b?a.height:b;case Fp:return 2*a.N.y>b?a.height:b+a.height-2*a.N.y;case vp:case kp:return d=Math.min(0,c),c=Math.max(b,c+a.height),Math.max(a.height,c-d);case wp:return a.height-a.N.y+a.nodeSpacing/2+b;case xp:return Math.max(a.height,a.N.y+a.nodeSpacing/2+b);default:return b}}
function Tp(a,b,c){x&&y.l(a,ga,Y,"alignOffset:align");switch(a){case Qp:b/=2;c/=2;break;case tp:b/=2;c/=2;break;case Ep:c=b=0;break;case Fp:break;default:y.m("Unhandled alignment value "+a.toString())}a=[];a[0]=b;a[1]=c;return a}function Lp(a,b,c,d,e,g){x&&y.l(a,$o,Y,"shiftRelPosAlign:v");x&&y.l(b,ga,Y,"shiftRelPosAlign:align");b=Tp(b,c,d);Op(a,b[0],b[1],e,g)}function Op(a,b,c,d,e){x&&y.l(a,$o,Y,"shiftRelPos:v");if(!(0===b&&0===c))for(a=a.children;d<=e;d++){var g=a[d].ga;g.x+=b;g.y+=c}}
function Mp(a,b,c,d){x&&(y.l(b,$o,Y,"recordMidPoints:v"),y.j(c,"number",Y,"recordMidPoints:x"),y.j(d,"number",Y,"recordMidPoints:y"));var e=b.parent;switch(a.gf){case Xo:for(a=b.dc;a.next();)b=a.value,b.fromVertex===e&&b.qq.q(c,d);break;case dp:for(a=b.Ub;a.next();)b=a.value,b.toVertex===e&&b.qq.q(c,d);break;default:y.m("Unhandled path value "+a.gf.toString())}}function Pp(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];e.x+=b;e.y+=c}}
function Np(a,b,c,d,e,g,k){x&&y.l(b,$o,Y,"mergeFringes:parent");x&&y.l(c,$o,Y,"mergeFringes:child");var l=Dp(b),m=90===l||270===l,n=b.nodeSpacing;b=d;var p=e;d=g;e=k;var r=c.Mr,t=c.ds;k=c.Va;var u=m?Math.max(e,k.height):Math.max(d,k.width);if(r===q||l!==Dp(c))r=Kp(a,2),t=Kp(a,2),m?(r[0].q(0,0),r[1].q(0,k.height),t[0].q(k.width,0),t[1].q(t[0].x,r[1].y)):(r[0].q(0,0),r[1].q(k.width,0),t[0].q(0,k.height),t[1].q(r[1].x,t[0].y));if(m){c=d;d=9999999;if(!(p===q||2>p.length||r===q||2>r.length))for(g=e=0;e<
p.length&&g<r.length;){var l=p[e],v=r[g],m=v.x,z=v.y,m=m+c,C=l;e+1<p.length&&(C=p[e+1]);var K=v,v=K.x,K=K.y;g+1<r.length&&(K=r[g+1],v=K.x,K=K.y,v+=c);var I=d;l.y===z?I=m-l.x:l.y>z&&l.y<K?I=m+(l.y-z)/(K-z)*(v-m)-l.x:z>l.y&&z<C.y&&(I=m-(l.x+(z-l.y)/(C.y-l.y)*(C.x-l.x)));I<d&&(d=I);C.y<=l.y?e++:K<=z?g++:(C.y<=K&&e++,K<=C.y&&g++)}c-=d;c+=n;e=r;g=c;if(b===q||2>b.length||e===q||2>e.length)d=q;else{n=Kp(a,b.length+e.length);for(d=m=l=0;m<e.length&&e[m].y<b[0].y;)z=e[m++],n[d++].q(z.x+g,z.y);for(;l<b.length;)z=
b[l++],n[d++].q(z.x,z.y);for(l=b[b.length-1].y;m<e.length&&e[m].y<=l;)m++;for(;m<e.length&&e[m].y>l;)z=e[m++],n[d++].q(z.x+g,z.y);e=Kp(a,d);for(l=0;l<d;l++)e[l].assign(n[l]);Up(a,n);d=e}m=t;z=c;if(p===q||2>p.length||m===q||2>m.length)e=q;else{n=Kp(a,p.length+m.length);for(g=C=e=0;e<p.length&&p[e].y<m[0].y;)l=p[e++],n[g++].q(l.x,l.y);for(;C<m.length;)l=m[C++],n[g++].q(l.x+z,l.y);for(m=m[m.length-1].y;e<p.length&&p[e].y<=m;)e++;for(;e<p.length&&p[e].y>m;)l=p[e++],n[g++].q(l.x,l.y);l=Kp(a,g);for(e=0;e<
g;e++)l[e].assign(n[e]);Up(a,n);e=l}g=Math.max(0,c)+k.width;k=u}else{c=e;d=9999999;if(!(p===q||2>p.length||r===q||2>r.length))for(g=e=0;e<p.length&&g<r.length;)l=p[e],v=r[g],m=v.x,z=v.y,z+=c,C=l,e+1<p.length&&(C=p[e+1]),K=v,v=K.x,K=K.y,g+1<r.length&&(K=r[g+1],v=K.x,K=K.y,K+=c),I=d,l.x===m?I=z-l.y:l.x>m&&l.x<v?I=z+(l.x-m)/(v-m)*(K-z)-l.y:m>l.x&&m<C.x&&(I=z-(l.y+(m-l.x)/(C.x-l.x)*(C.y-l.y))),I<d&&(d=I),C.x<=l.x?e++:v<=m?g++:(C.x<=v&&e++,v<=C.x&&g++);c-=d;c+=n;e=r;g=c;if(b===q||2>b.length||e===q||2>
e.length)d=q;else{n=Kp(a,b.length+e.length);for(d=m=l=0;m<e.length&&e[m].x<b[0].x;)z=e[m++],n[d++].q(z.x,z.y+g);for(;l<b.length;)z=b[l++],n[d++].q(z.x,z.y);for(l=b[b.length-1].x;m<e.length&&e[m].x<=l;)m++;for(;m<e.length&&e[m].x>l;)z=e[m++],n[d++].q(z.x,z.y+g);e=Kp(a,d);for(l=0;l<d;l++)e[l].assign(n[l]);Up(a,n);d=e}m=t;z=c;if(p===q||2>p.length||m===q||2>m.length)e=q;else{n=Kp(a,p.length+m.length);for(g=C=e=0;e<p.length&&p[e].x<m[0].x;)l=p[e++],n[g++].q(l.x,l.y);for(;C<m.length;)l=m[C++],n[g++].q(l.x,
l.y+z);for(m=m[m.length-1].x;e<p.length&&p[e].x<=m;)e++;for(;e<p.length&&p[e].x>m;)l=p[e++],n[g++].q(l.x,l.y);l=Kp(a,g);for(e=0;e<g;e++)l[e].assign(n[e]);Up(a,n);e=l}g=u;k=Math.max(0,c)+k.height}Up(a,b);Up(a,r);Up(a,p);Up(a,t);a=[];a[0]=c;a[1]=d;a[2]=e;a[3]=g;a[4]=k;return a}function Kp(a,b){a.Sq||(a.Sq=[]);var c=a.Sq[b];if(c!==f&&(c=c.pop(),c!==f))return c;for(var c=[],d=0;d<b;d++)c[d]=new A;return c}function Up(a,b){if(a.Sq){var c=b.length,d=a.Sq[c];d===f&&(d=[],a.Sq[c]=d);d.push(b)}}
Y.prototype.arrangeTrees=function(){if(this.Tc===cp)for(var a=this.yc.k;a.next();){var b=a.value,c=b.vc;if(c!==q){var d=c.position,c=d.x,d=d.y;isFinite(c)||(c=0);isFinite(d)||(d=0);cq(this,b,c,d)}}else{a=this.ed;c=a.x;d=a.y;for(a=this.yc.k;a.next();)switch(b=a.value,cq(this,b,c+b.Ia.x,d+b.Ia.y),this.Tc){case Zo:d+=b.Va.height+this.wf.height;break;case dq:c+=b.Va.width+this.wf.width;break;default:y.m("Unhandled arrangement value "+this.Tc.toString())}}};
function cq(a,b,c,d){if(b!==q){x&&y.l(b,$o,Y,"assignAbsolutePositions:v");b.x=c;b.y=d;b=b.children;for(var e=b.length,g=0;g<e;g++){var k=b[g];cq(a,k,c+k.ga.x,d+k.ga.y)}}}Y.prototype.commitLayout=function(){this.vz();this.commitNodes();this.Kr&&this.commitLinks()};Y.prototype.commitNodes=function(){for(var a=this.network.vertexes.k,b;a.next();)b=a.value,b.commit();for(a.reset();a.next();)b=a.value,this.layoutComments(b)};Y.prototype.commitLinks=function(){for(var a=this.network.edges.k;a.next();)a.value.commit()};
Y.prototype.vz=function(){for(var a=this.yc.k;a.next();)eq(this,a.value)};function eq(a,b){if(b!==q){x&&y.l(b,$o,Y,"setPortSpotsTree:v");a.setPortSpots(b);for(var c=b.children,d=c.length,e=0;e<d;e++)eq(a,c[e])}}
Y.prototype.setPortSpots=function(a){x&&y.l(a,$o,Y,"setPortSpots:v");var b=a.alignment;if(up(b)){x&&y.l(a,$o,Y,"setPortSpotsBus:v");x&&y.l(b,ga,Y,"setPortSpots:align");var c=this.gf===Xo,d=Dp(a),e;switch(d){case 0:e=bc;break;case 90:e=cc;break;case 180:e=ac;break;default:e=$b}var g=a.children,k=g.length;switch(b){case vp:case kp:for(b=0;b<k;b++){var l=g[b],l=c?l.dc:l.Ub;if(l.next()){var m=l.value,m=m.link;if(m!==q){var n=90===d||270===d?ac:$b;if(1===k||b===k-1&&1===k%2)switch(d){case 0:n=ac;break;
case 90:n=$b;break;case 180:n=bc;break;default:n=cc}else 0===b%2&&(n=90===d||270===d?bc:cc);c?(a.setsPortSpot&&(m.gb=e),a.setsChildPortSpot&&(m.kb=n)):(a.setsPortSpot&&(m.gb=n),a.setsChildPortSpot&&(m.kb=e))}}}break;case wp:n=90===d||270===d?bc:cc;for(l=c?a.Ub:a.dc;l.next();)m=l.value,m=m.link,m!==q&&(c?(a.setsPortSpot&&(m.gb=e),a.setsChildPortSpot&&(m.kb=n)):(a.setsPortSpot&&(m.gb=n),a.setsChildPortSpot&&(m.kb=e)));break;case xp:n=90===d||270===d?ac:$b;for(l=c?a.Ub:a.dc;l.next();)m=l.value,m=m.link,
m!==q&&(c?(a.setsPortSpot&&(m.gb=e),a.setsChildPortSpot&&(m.kb=n)):(a.setsPortSpot&&(m.gb=n),a.setsChildPortSpot&&(m.kb=e)))}}else if(c=Dp(a),this.gf===Xo)for(d=a.Ub;d.next();){if(e=d.value,e=e.link,e!==q){if(a.setsPortSpot)if(Db(a.portSpot))switch(c){case 0:e.gb=bc;break;case 90:e.gb=cc;break;case 180:e.gb=ac;break;default:e.gb=$b}else e.gb=a.portSpot;if(a.setsChildPortSpot)if(Db(a.childPortSpot))switch(c){case 0:e.kb=ac;break;case 90:e.kb=$b;break;case 180:e.kb=bc;break;default:e.kb=cc}else e.kb=
a.childPortSpot}}else for(d=a.dc;d.next();)if(e=d.value,e=e.link,e!==q){if(a.setsPortSpot)if(Db(a.portSpot))switch(c){case 0:e.kb=bc;break;case 90:e.kb=cc;break;case 180:e.kb=ac;break;default:e.kb=$b}else e.kb=a.portSpot;if(a.setsChildPortSpot)if(Db(a.childPortSpot))switch(c){case 0:e.gb=ac;break;case 90:e.gb=$b;break;case 180:e.gb=bc;break;default:e.gb=cc}else e.gb=a.childPortSpot}};function Dp(a){a=a.angle;return 45>=a?0:135>=a?90:225>=a?180:315>=a?270:0}
function Gp(a){x&&y.l(a,$o,Y,"computeLayerSpacing:v");var b=Dp(a),b=90===b||270===b,c=a.layerSpacing;if(0<a.layerSpacingParentOverlap)var d=Math.min(1,a.layerSpacingParentOverlap),c=c-(b?a.height*d:a.width*d);if(c<(b?-a.height:-a.width))c=b?-a.height:-a.width;return c}function Hp(a){x&&y.l(a,$o,Y,"computeNodeIndent:v");var b=Dp(a),b=90===b||270===b,c=a.nodeIndent;if(0<a.nodeIndentPastParent)var d=Math.min(1,a.nodeIndentPastParent),c=c+(b?a.width*d:a.height*d);return c=Math.max(0,c)}
y.g(Y,"roots",Y.prototype.rH);y.defineProperty(Y,{rH:"roots"},w("yc"),function(a){this.yc!==a&&(y.l(a,na,Y,"roots"),this.yc=a,this.J())});y.g(Y,"path",Y.prototype.path);y.defineProperty(Y,{path:"path"},w("Oh"),function(a){this.Oh!==a&&(y.l(a,ga,Y,"path"),this.Oh=a,this.J())});y.g(Y,"treeStyle",Y.prototype.rE);y.defineProperty(Y,{rE:"treeStyle"},w("Yq"),function(a){if(this.Tc!==a&&(x&&y.l(a,ga,Y,"treeStyle"),a===Yo||a===np||a===op||a===mp))this.Yq=a,this.J()});y.g(Y,"arrangement",Y.prototype.qe);
y.defineProperty(Y,{qe:"arrangement"},w("Tc"),function(a){if(this.Tc!==a&&(x&&y.l(a,ga,Y,"arrangement"),a===Zo||a===dq||a===cp))this.Tc=a,this.J()});y.g(Y,"arrangementSpacing",Y.prototype.vu);y.defineProperty(Y,{vu:"arrangementSpacing"},w("wf"),function(a){this.wf.L(a)||(this.wf.assign(a),this.J())});y.g(Y,"rootDefaults",Y.prototype.qH);y.defineProperty(Y,{qH:"rootDefaults"},w("pa"),function(a){this.pa!==a&&(x&&y.l(a,$o,Y,"rootDefaults"),this.pa=a,this.J())});y.g(Y,"alternateDefaults",Y.prototype.uF);
y.defineProperty(Y,{uF:"alternateDefaults"},w("oa"),function(a){this.oa!==a&&(x&&y.l(a,$o,Y,"alternateDefaults"),this.oa=a,this.J())});y.g(Y,"sorting",Y.prototype.sorting);y.defineProperty(Y,{sorting:"sorting"},function(){return this.pa.sorting},function(a){if(this.pa.sorting!==a&&(x&&y.l(a,ga,Y,"sorting"),a===pp||a===qp||a===rp||sp))this.pa.sorting=a,this.J()});y.g(Y,"comparer",Y.prototype.comparer);
y.defineProperty(Y,{comparer:"comparer"},function(){return this.pa.comparer},function(a){this.pa.comparer!==a&&(x&&y.j(a,"function",Y,"comparer"),this.pa.comparer=a,this.J())});y.g(Y,"angle",Y.prototype.angle);y.defineProperty(Y,{angle:"angle"},function(){return this.pa.angle},function(a){if(this.pa.angle!==a&&(0===a||90===a||180===a||270===a))this.pa.angle=a,this.J()});y.g(Y,"alignment",Y.prototype.alignment);
y.defineProperty(Y,{alignment:"alignment"},function(){return this.pa.alignment},function(a){this.pa.alignment!==a&&(x&&y.rb(a,Y,Y,"alignment"),this.pa.alignment=a,this.J())});y.g(Y,"nodeIndent",Y.prototype.nodeIndent);y.defineProperty(Y,{nodeIndent:"nodeIndent"},function(){return this.pa.nodeIndent},function(a){this.pa.nodeIndent!==a&&0<=a&&(this.pa.nodeIndent=a,this.J())});y.g(Y,"nodeIndentPastParent",Y.prototype.nodeIndentPastParent);
y.defineProperty(Y,{nodeIndentPastParent:"nodeIndentPastParent"},function(){return this.pa.nodeIndentPastParent},function(a){this.pa.nodeIndentPastParent!==a&&(0<=a&&1>=a)&&(this.pa.nodeIndentPastParent=a,this.J())});y.g(Y,"nodeSpacing",Y.prototype.nodeSpacing);y.defineProperty(Y,{nodeSpacing:"nodeSpacing"},function(){return this.pa.nodeSpacing},function(a){this.pa.nodeSpacing!==a&&(this.pa.nodeSpacing=a,this.J())});y.g(Y,"layerSpacing",Y.prototype.layerSpacing);
y.defineProperty(Y,{layerSpacing:"layerSpacing"},function(){return this.pa.layerSpacing},function(a){this.pa.layerSpacing!==a&&(this.pa.layerSpacing=a,this.J())});y.g(Y,"layerSpacingParentOverlap",Y.prototype.layerSpacingParentOverlap);y.defineProperty(Y,{layerSpacingParentOverlap:"layerSpacingParentOverlap"},function(){return this.pa.layerSpacingParentOverlap},function(a){this.pa.layerSpacingParentOverlap!==a&&(0<=a&&1>=a)&&(this.pa.layerSpacingParentOverlap=a,this.J())});y.g(Y,"compaction",Y.prototype.compaction);
y.defineProperty(Y,{compaction:"compaction"},function(){return this.pa.compaction},function(a){if(this.pa.compaction!==a&&(x&&y.l(a,ga,Y,"compaction"),a===Ap||a===Cp))this.pa.compaction=a,this.J()});y.g(Y,"breadthLimit",Y.prototype.breadthLimit);y.defineProperty(Y,{breadthLimit:"breadthLimit"},function(){return this.pa.breadthLimit},function(a){this.pa.breadthLimit!==a&&0<=a&&(this.pa.breadthLimit=a,this.J())});y.g(Y,"rowSpacing",Y.prototype.rowSpacing);
y.defineProperty(Y,{rowSpacing:"rowSpacing"},function(){return this.pa.rowSpacing},function(a){this.pa.rowSpacing!==a&&(this.pa.rowSpacing=a,this.J())});y.g(Y,"rowIndent",Y.prototype.rowIndent);y.defineProperty(Y,{rowIndent:"rowIndent"},function(){return this.pa.rowIndent},function(a){this.pa.rowIndent!==a&&0<=a&&(this.pa.rowIndent=a,this.J())});y.g(Y,"commentSpacing",Y.prototype.commentSpacing);
y.defineProperty(Y,{commentSpacing:"commentSpacing"},function(){return this.pa.commentSpacing},function(a){this.pa.commentSpacing!==a&&(this.pa.commentSpacing=a,this.J())});y.g(Y,"commentMargin",Y.prototype.commentMargin);y.defineProperty(Y,{commentMargin:"commentMargin"},function(){return this.pa.commentMargin},function(a){this.pa.commentMargin!==a&&(this.pa.commentMargin=a,this.J())});y.g(Y,"setsPortSpot",Y.prototype.setsPortSpot);
y.defineProperty(Y,{setsPortSpot:"setsPortSpot"},function(){return this.pa.setsPortSpot},function(a){this.pa.setsPortSpot!==a&&(this.pa.setsPortSpot=a,this.J())});y.g(Y,"portSpot",Y.prototype.portSpot);y.defineProperty(Y,{portSpot:"portSpot"},function(){return this.pa.portSpot},function(a){this.pa.portSpot.L(a)||(this.pa.portSpot=a,this.J())});y.g(Y,"setsChildPortSpot",Y.prototype.setsChildPortSpot);
y.defineProperty(Y,{setsChildPortSpot:"setsChildPortSpot"},function(){return this.pa.setsChildPortSpot},function(a){this.pa.setsChildPortSpot!==a&&(this.pa.setsChildPortSpot=a,this.J())});y.g(Y,"childPortSpot",Y.prototype.childPortSpot);y.defineProperty(Y,{childPortSpot:"childPortSpot"},function(){return this.pa.childPortSpot},function(a){this.pa.childPortSpot.L(a)||(this.pa.childPortSpot=a,this.J())});y.g(Y,"alternateSorting",Y.prototype.FF);
y.defineProperty(Y,{FF:"alternateSorting"},function(){return this.oa.sorting},function(a){if(this.oa.sorting!==a&&(x&&y.l(a,ga,Y,"alternateSorting"),a===pp||a===qp||a===rp||sp))this.oa.sorting=a,this.J()});y.g(Y,"alternateComparer",Y.prototype.sF);y.defineProperty(Y,{sF:"alternateComparer"},function(){return this.oa.comparer},function(a){this.oa.comparer!==a&&(x&&y.j(a,"function",Y,"alternateComparer"),this.oa.comparer=a,this.J())});y.g(Y,"alternateAngle",Y.prototype.mF);
y.defineProperty(Y,{mF:"alternateAngle"},function(){return this.oa.angle},function(a){if(this.oa.angle!==a&&(0===a||90===a||180===a||270===a))this.oa.angle=a,this.J()});y.g(Y,"alternateAlignment",Y.prototype.lF);y.defineProperty(Y,{lF:"alternateAlignment"},function(){return this.oa.alignment},function(a){this.oa.alignment!==a&&(x&&y.rb(a,Y,Y,"alternateAlignment"),this.oa.alignment=a,this.J())});y.g(Y,"alternateNodeIndent",Y.prototype.xF);
y.defineProperty(Y,{xF:"alternateNodeIndent"},function(){return this.oa.nodeIndent},function(a){this.oa.nodeIndent!==a&&0<=a&&(this.oa.nodeIndent=a,this.J())});y.g(Y,"alternateNodeIndentPastParent",Y.prototype.yF);y.defineProperty(Y,{yF:"alternateNodeIndentPastParent"},function(){return this.oa.nodeIndentPastParent},function(a){this.oa.nodeIndentPastParent!==a&&(0<=a&&1>=a)&&(this.oa.nodeIndentPastParent=a,this.J())});y.g(Y,"alternateNodeSpacing",Y.prototype.zF);
y.defineProperty(Y,{zF:"alternateNodeSpacing"},function(){return this.oa.nodeSpacing},function(a){this.oa.nodeSpacing!==a&&(this.oa.nodeSpacing=a,this.J())});y.g(Y,"alternateLayerSpacing",Y.prototype.vF);y.defineProperty(Y,{vF:"alternateLayerSpacing"},function(){return this.oa.layerSpacing},function(a){this.oa.layerSpacing!==a&&(this.oa.layerSpacing=a,this.J())});y.g(Y,"alternateLayerSpacingParentOverlap",Y.prototype.wF);
y.defineProperty(Y,{wF:"alternateLayerSpacingParentOverlap"},function(){return this.oa.layerSpacingParentOverlap},function(a){this.oa.layerSpacingParentOverlap!==a&&(0<=a&&1>=a)&&(this.oa.layerSpacingParentOverlap=a,this.J())});y.g(Y,"alternateCompaction",Y.prototype.rF);y.defineProperty(Y,{rF:"alternateCompaction"},function(){return this.oa.compaction},function(a){if(this.oa.compaction!==a&&(x&&y.l(a,ga,Y,"alternateCompaction"),a===Ap||a===Cp))this.oa.compaction=a,this.J()});
y.g(Y,"alternateBreadthLimit",Y.prototype.nF);y.defineProperty(Y,{nF:"alternateBreadthLimit"},function(){return this.oa.breadthLimit},function(a){this.oa.breadthLimit!==a&&0<=a&&(this.oa.breadthLimit=a,this.J())});y.g(Y,"alternateRowSpacing",Y.prototype.CF);y.defineProperty(Y,{CF:"alternateRowSpacing"},function(){return this.oa.rowSpacing},function(a){this.oa.rowSpacing!==a&&(this.oa.rowSpacing=a,this.J())});y.g(Y,"alternateRowIndent",Y.prototype.BF);
y.defineProperty(Y,{BF:"alternateRowIndent"},function(){return this.oa.rowIndent},function(a){this.oa.rowIndent!==a&&0<=a&&(this.oa.rowIndent=a,this.J())});y.g(Y,"alternateCommentSpacing",Y.prototype.qF);y.defineProperty(Y,{qF:"alternateCommentSpacing"},function(){return this.oa.commentSpacing},function(a){this.oa.commentSpacing!==a&&(this.oa.commentSpacing=a,this.J())});y.g(Y,"alternateCommentMargin",Y.prototype.pF);
y.defineProperty(Y,{pF:"alternateCommentMargin"},function(){return this.oa.commentMargin},function(a){this.oa.commentMargin!==a&&(this.oa.commentMargin=a,this.J())});y.g(Y,"alternateSetsPortSpot",Y.prototype.EF);y.defineProperty(Y,{EF:"alternateSetsPortSpot"},function(){return this.oa.setsPortSpot},function(a){this.oa.setsPortSpot!==a&&(this.oa.setsPortSpot=a,this.J())});y.g(Y,"alternatePortSpot",Y.prototype.AF);
y.defineProperty(Y,{AF:"alternatePortSpot"},function(){return this.oa.portSpot},function(a){this.oa.portSpot.L(a)||(this.oa.portSpot=a,this.J())});y.g(Y,"alternateSetsChildPortSpot",Y.prototype.DF);y.defineProperty(Y,{DF:"alternateSetsChildPortSpot"},function(){return this.oa.setsChildPortSpot},function(a){this.oa.setsChildPortSpot!==a&&(this.oa.setsChildPortSpot=a,this.J())});y.g(Y,"alternateChildPortSpot",Y.prototype.oF);
y.defineProperty(Y,{oF:"alternateChildPortSpot"},function(){return this.oa.childPortSpot},function(a){this.oa.childPortSpot.L(a)||(this.oa.childPortSpot=a,this.J())});var Wo;Y.PathDefault=Wo=y.w(Y,"PathDefault",-1);var Xo;Y.PathDestination=Xo=y.w(Y,"PathDestination",0);var dp;Y.PathSource=dp=y.w(Y,"PathSource",1);var pp;Y.SortingForwards=pp=y.w(Y,"SortingForwards",10);var qp;Y.SortingReverse=qp=y.w(Y,"SortingReverse",11);var rp;Y.SortingAscending=rp=y.w(Y,"SortingAscending",12);var sp;
Y.SortingDescending=sp=y.w(Y,"SortingDescending",13);var Qp;Y.AlignmentCenterSubtrees=Qp=y.w(Y,"AlignmentCenterSubtrees",20);var tp;Y.AlignmentCenterChildren=tp=y.w(Y,"AlignmentCenterChildren",21);var Ep;Y.AlignmentStart=Ep=y.w(Y,"AlignmentStart",22);var Fp;Y.AlignmentEnd=Fp=y.w(Y,"AlignmentEnd",23);var vp;Y.AlignmentBus=vp=y.w(Y,"AlignmentBus",24);var kp;Y.AlignmentBusBranching=kp=y.w(Y,"AlignmentBusBranching",25);var wp;Y.AlignmentTopLeftBus=wp=y.w(Y,"AlignmentTopLeftBus",26);var xp;
Y.AlignmentBottomRightBus=xp=y.w(Y,"AlignmentBottomRightBus",27);var Ap;Y.CompactionNone=Ap=y.w(Y,"CompactionNone",30);var Cp;Y.CompactionBlock=Cp=y.w(Y,"CompactionBlock",31);var Yo;Y.StyleLayered=Yo=y.w(Y,"StyleLayered",40);var op;Y.StyleLastParents=op=y.w(Y,"StyleLastParents",41);var np;Y.StyleAlternating=np=y.w(Y,"StyleAlternating",42);var mp;Y.StyleRootOnly=mp=y.w(Y,"StyleRootOnly",43);var Zo;Y.ArrangementVertical=Zo=y.w(Y,"ArrangementVertical",50);var dq;
Y.ArrangementHorizontal=dq=y.w(Y,"ArrangementHorizontal",51);var cp;Y.ArrangementFixedRoots=cp=y.w(Y,"ArrangementFixedRoots",52);function ap(){Rm.call(this)}y.ba("TreeNetwork",ap);y.Ka(ap,Rm);ap.prototype.createVertex=function(){return new $o};ap.prototype.createEdge=function(){return new fq};
function $o(){Vm.call(this);this.initialized=s;this.parent=q;this.children=[];this.maxGenerationCount=this.maxChildrenCount=this.descendantCount=this.level=0;this.comments=q;this.ga=new A(0,0);this.Va=new ha(0,0);this.Ia=new A(0,0);this.zo=this.yo=this.sH=s;this.ds=this.Mr=q;this.sorting=pp;this.comparer=an;this.angle=0;this.alignment=tp;this.nodeIndentPastParent=this.nodeIndent=0;this.nodeSpacing=20;this.layerSpacing=50;this.layerSpacingParentOverlap=0;this.compaction=Cp;this.breadthLimit=0;this.rowSpacing=
25;this.commentSpacing=this.rowIndent=10;this.commentMargin=20;this.setsPortSpot=h;this.portSpot=Ib;this.setsChildPortSpot=h;this.childPortSpot=Ib}y.ba("TreeVertex",$o);y.Ka($o,Vm);
$o.prototype.copyInheritedPropertiesFrom=function(a){a!==q&&(this.sorting=a.sorting,this.comparer=a.comparer,this.angle=a.angle,this.alignment=a.alignment,this.nodeIndent=a.nodeIndent,this.nodeIndentPastParent=a.nodeIndentPastParent,this.nodeSpacing=a.nodeSpacing,this.layerSpacing=a.layerSpacing,this.layerSpacingParentOverlap=a.layerSpacingParentOverlap,this.compaction=a.compaction,this.breadthLimit=a.breadthLimit,this.rowSpacing=a.rowSpacing,this.rowIndent=a.rowIndent,this.commentSpacing=a.commentSpacing,
this.commentMargin=a.commentMargin,this.setsPortSpot=a.setsPortSpot,this.portSpot=a.portSpot,this.setsChildPortSpot=a.setsChildPortSpot,this.childPortSpot=a.childPortSpot)};y.A($o,{zl:"childrenCount"},function(){return this.children.length});y.g($o,"relativePosition",$o.prototype.lH);y.defineProperty($o,{lH:"relativePosition"},w("ga"),function(a){y.l(a,A,$o,"relativePosition");this.ga.set(a)});y.g($o,"subtreeSize",$o.prototype.BH);
y.defineProperty($o,{BH:"subtreeSize"},w("Va"),function(a){y.l(a,ha,$o,"subtreeSize");this.Va.set(a)});y.g($o,"subtreeOffset",$o.prototype.AH);y.defineProperty($o,{AH:"subtreeOffset"},w("Ia"),function(a){y.l(a,A,$o,"subtreeOffset");this.Ia.set(a)});function fq(){Wm.call(this);this.qq=new A(0,0)}y.ba("TreeEdge",fq);y.Ka(fq,Wm);
fq.prototype.commit=function(){var a=this.link;if(a!==q&&a.kh!==xf){var b=this.network.Nb,c=q,d=q;switch(b.gf){case Xo:c=this.fromVertex;d=this.toVertex;break;case dp:c=this.toVertex;d=this.fromVertex;break;default:y.m("Unhandled path value "+b.gf.toString())}if(!(c===q||d===q))if(b=this.qq,0===b.x&&0===b.y&&!c.sH){var e=c,g=d;x&&y.l(e,$o,fq,"adjustRouteForAngleChange:parent");x&&y.l(g,$o,fq,"adjustRouteForAngleChange:child");a=this.link;c=Dp(e);if(c!==Dp(g)&&(b=Gp(e),d=e.Hb,e=g.Hb,!(0===c&&e.left-
d.right<b+1||90===c&&e.top-d.bottom<b+1||180===c&&d.left-e.right<b+1||270===c&&d.top-e.bottom<b+1))){a.updateRoute();var e=a.Se===vg,g=a.Ib,k=up(this.fromVertex.alignment);a.Mk();0===c?(c=d.right+b/2,e?4===a.qa&&(b=a.o(3).y,a.R(1,c-20,a.o(1).y),a.C(2,c-20,b),a.C(3,c,b),a.C(4,c+20,b),a.R(5,a.o(5).x,b)):g?k?a.R(3,a.o(2).x,a.o(4).y):6===a.qa&&(a.R(2,c,a.o(2).y),a.R(3,c,a.o(3).y)):4===a.qa?a.C(2,c,a.o(2).y):3===a.qa?a.R(1,c,a.o(2).y):2===a.qa&&a.C(1,c,a.o(1).y)):90===c?(b=d.bottom+b/2,e?4===a.qa&&(c=
a.o(3).x,a.R(1,a.o(1).x,b-20),a.C(2,c,b-20),a.C(3,c,b),a.C(4,c,b+20),a.R(5,c,a.o(5).y)):g?k?a.R(3,a.o(2).x,a.o(4).y):6===a.qa&&(a.R(2,a.o(2).x,b),a.R(3,a.o(3).x,b)):4===a.qa?a.C(2,a.o(2).x,b):3===a.qa?a.R(1,a.o(2).x,b):2===a.qa&&a.C(1,a.o(1).x,b)):180===c?(c=d.left-b/2,e?4===a.qa&&(b=a.o(3).y,a.R(1,c+20,a.o(1).y),a.C(2,c+20,b),a.C(3,c,b),a.C(4,c-20,b),a.R(5,a.o(5).x,b)):g?k?a.R(3,a.o(2).x,a.o(4).y):6===a.qa&&(a.R(2,c,a.o(2).y),a.R(3,c,a.o(3).y)):4===a.qa?a.C(2,c,a.o(2).y):3===a.qa?a.R(1,c,a.o(2).y):
2===a.qa&&a.C(1,c,a.o(1).y)):270===c&&(b=d.top-b/2,e?4===a.qa&&(c=a.o(3).x,a.R(1,a.o(1).x,b+20),a.C(2,c,b+20),a.C(3,c,b),a.C(4,c,b-20),a.R(5,c,a.o(5).y)):g?k?a.R(3,a.o(2).x,a.o(4).y):6===a.qa&&(a.R(2,a.o(2).x,b),a.R(3,a.o(3).x,b)):4===a.qa?a.C(2,a.o(2).x,b):3===a.qa?a.R(1,a.o(2).x,b):2===a.qa&&a.C(1,a.o(1).x,b));a.Zh()}}else{var d=c.Hb,l=Dp(c),e=Gp(c),g=c.rowSpacing;a.updateRoute();var k=a.Se===vg,m=a.Ib,n,p,r,t;a.Mk();if(m||k){for(n=2;4<a.qa;)a.xD(2);p=a.o(1);r=a.o(2)}else{for(n=1;3<a.qa;)a.xD(1);
p=a.o(0);r=a.o(a.qa-1)}t=a.o(a.qa-1);0===l?(c.alignment===Fp?(l=d.bottom+b.y,0===b.y&&p.y>t.y+c.rowIndent&&(l=Math.min(l,Math.max(p.y,l-Hp(c))))):c.alignment===Ep?(l=d.top+b.y,0===b.y&&p.y<t.y-c.rowIndent&&(l=Math.max(l,Math.min(p.y,l+Hp(c))))):l=c.yo||c.zo&&1===c.maxGenerationCount?d.top-c.Ia.y+b.y:d.y+d.height/2+b.y,k?(a.C(n,p.x,l),n++,a.C(n,d.right+e,l),n++,a.C(n,d.right+e+(b.x-g)/3,l),n++,a.C(n,d.right+e+2*(b.x-g)/3,l),n++,a.C(n,d.right+e+(b.x-g),l),n++,a.C(n,r.x,l)):(m&&(a.C(n,d.right+e/2,p.y),
n++),a.C(n,d.right+e/2,l),n++,a.C(n,d.right+e+b.x-(m?g/2:g),l),n++,m&&a.C(n,a.o(n-1).x,r.y))):90===l?(c.alignment===Fp?(l=d.right+b.x,0===b.x&&p.x>t.x+c.rowIndent&&(l=Math.min(l,Math.max(p.x,l-Hp(c))))):c.alignment===Ep?(l=d.left+b.x,0===b.x&&p.x<t.x-c.rowIndent&&(l=Math.max(l,Math.min(p.x,l+Hp(c))))):l=c.yo||c.zo&&1===c.maxGenerationCount?d.left-c.Ia.x+b.x:d.x+d.width/2+b.x,k?(a.C(n,l,p.y),n++,a.C(n,l,d.bottom+e),n++,a.C(n,l,d.bottom+e+(b.y-g)/3),n++,a.C(n,l,d.bottom+e+2*(b.y-g)/3),n++,a.C(n,l,d.bottom+
e+(b.y-g)),n++,a.C(n,l,r.y)):(m&&(a.C(n,p.x,d.bottom+e/2),n++),a.C(n,l,d.bottom+e/2),n++,a.C(n,l,d.bottom+e+b.y-(m?g/2:g)),n++,m&&a.C(n,r.x,a.o(n-1).y))):180===l?(c.alignment===Fp?(l=d.bottom+b.y,0===b.y&&p.y>t.y+c.rowIndent&&(l=Math.min(l,Math.max(p.y,l-Hp(c))))):c.alignment===Ep?(l=d.top+b.y,0===b.y&&p.y<t.y-c.rowIndent&&(l=Math.max(l,Math.min(p.y,l+Hp(c))))):l=c.yo||c.zo&&1===c.maxGenerationCount?d.top-c.Ia.y+b.y:d.y+d.height/2+b.y,k?(a.C(n,p.x,l),n++,a.C(n,d.left-e,l),n++,a.C(n,d.left-e+(b.x+
g)/3,l),n++,a.C(n,d.left-e+2*(b.x+g)/3,l),n++,a.C(n,d.left-e+(b.x+g),l),n++,a.C(n,r.x,l)):(m&&(a.C(n,d.left-e/2,p.y),n++),a.C(n,d.left-e/2,l),n++,a.C(n,d.left-e+b.x+(m?g/2:g),l),n++,m&&a.C(n,a.o(n-1).x,r.y))):270===l?(c.alignment===Fp?(l=d.right+b.x,0===b.x&&p.x>t.x+c.rowIndent&&(l=Math.min(l,Math.max(p.x,l-Hp(c))))):c.alignment===Ep?(l=d.left+b.x,0===b.x&&p.x<t.x-c.rowIndent&&(l=Math.max(l,Math.min(p.x,l+Hp(c))))):l=c.yo||c.zo&&1===c.maxGenerationCount?d.left-c.Ia.x+b.x:d.x+d.width/2+b.x,k?(a.C(n,
l,p.y),n++,a.C(n,l,d.top-e),n++,a.C(n,l,d.top-e+(b.y+g)/3),n++,a.C(n,l,d.top-e+2*(b.y+g)/3),n++,a.C(n,l,d.top-e+(b.y+g)),n++,a.C(n,l,r.y)):(m&&(a.C(n,p.x,d.top-e/2),n++),a.C(n,l,d.top-e/2),n++,a.C(n,l,d.top-e+b.y+(m?g/2:g)),n++,m&&a.C(n,r.x,a.o(n-1).y))):y.m("Invalid angle "+l);a.Zh()}}};y.g(fq,"relativePoint",fq.prototype.kH);y.defineProperty(fq,{kH:"relativePoint"},w("qq"),function(a){this.qq.set(a)});function gq(){this.Gm=[]}
function dk(a){var b=new gq,c;if("string"===typeof a)c=(new DOMParser).parseFromString(a,"text/xml");else if(a instanceof Document)c=a.implementation.createDocument("http://www.w3.org/2000/svg","svg",q),c.appendChild(c.importNode(a.documentElement,h));else return q;a=c.getElementsByTagName("svg");if(0===a.length)return q;var d=a[0],e=c.getElementsByTagName("linearGradient"),g=c.getElementsByTagName("radialGradient");for(a=0;a<e.length;a++){for(var k=e[a],l=ek(Gd,Jd,{start:dc,end:fc}),m=k.childNodes,
n=0;n<m.length;n++)if("stop"===m[n].tagName){var p=m[n].getAttribute("stop-color"),r=m[n].getAttribute("offset");-1!==r.indexOf("%")?l.addColorStop(0.01*parseFloat(r),p):l.addColorStop(parseFloat(r),p)}k=k.getAttribute("id");"string"===typeof k&&(b["_brush"+k]=l)}for(a=0;a<g.length;a++){k=g[a];l=ek(Gd,Kd,{start:Sb,end:Sb});m=k.childNodes;for(n=0;n<m.length;n++)"stop"===m[n].tagName&&(p=m[n].getAttribute("stop-color"),r=m[n].getAttribute("offset"),-1!==r.indexOf("%")?l.addColorStop(0.01*parseFloat(r),
p):l.addColorStop(parseFloat(r),p));k=k.getAttribute("id");"string"===typeof k&&(b["_brush"+k]=l)}for(e=h;e;){e=s;g=c.getElementsByTagName("use");for(a=0;a<g.length;a++)l=g[a],0===l.childNodes.length&&(k=l.href,k!==f&&(k=c.getElementById(k.baseVal.substring(1)),k!==q&&(k=k.cloneNode(h),k.removeAttribute("id"),m=parseFloat(l.getAttribute("x")),n=parseFloat(l.getAttribute("y")),isNaN(m)&&(m=0),isNaN(n)&&(n=0),p=l.getAttribute("transform"),p===q&&(p=""),l.setAttribute("transform",p+" translate("+m+","+
n+")"),l.appendChild(k),"use"===k.tagName&&(e=h))))}hq(b,d,q);if(0===b.Gm.length)return q;if(1===b.Gm.length)return b.Gm[0];c=new D;for(a=0;a<b.Gm.length;a++)c.add(b.Gm[a]);return c}
function hq(a,b,c){var d=b.tagName;if(!("g"!==d&&"svg"!==d&&"use"!==d&&"symbol"!==d))for(var d=b.childNodes,e=0;e<d.length;e++){var g=d[e],k=q;if(g.getAttribute!==f){var l=g.getAttribute("transform");switch(g.tagName){case "g":l===q?hq(a,g,q):(k=new D,hq(a,g,k));break;case "use":l===q?hq(a,g,q):(k=new D,hq(a,g,k));break;case "symbol":if("use"!==b.tagName)break;k=new D;hq(a,g,k);var m=k,n=g;n.getAttribute("preserveAspectRatio");n.getAttribute("viewBox");m.scale=1;break;case "path":m=g;k=new V;m=m.getAttribute("d");
"string"===typeof m&&(k.rC=Gc(m));break;case "line":var p=g,k=new V,m=parseFloat(p.getAttribute("x1")),n=parseFloat(p.getAttribute("y1")),r=parseFloat(p.getAttribute("x2")),p=parseFloat(p.getAttribute("y2"));isNaN(m)&&(m=0);isNaN(n)&&(n=0);isNaN(r)&&(r=0);isNaN(p)&&(p=0);var t=new nc(wc);k.position=new A(Math.min(m,r),Math.min(n,p));0<(r-m)/(p-n)?(t.ia=0,t.ja=0,t.D=Math.abs(r-m),t.F=Math.abs(p-n)):(t.ia=0,t.ja=Math.abs(p-n),t.D=Math.abs(r-m),t.F=0);k.Pc=t;break;case "circle":r=g;k=new V;m=parseFloat(r.getAttribute("r"));
n=parseFloat(r.getAttribute("cx"));r=parseFloat(r.getAttribute("cy"));isNaN(m)?k=q:(isNaN(n)&&(n=0),isNaN(r)&&(r=0),p=new nc(yc),p.ia=0,p.ja=0,p.D=2*m,p.F=2*m,k.position=new A(n-m,r-m),k.Pc=p);break;case "ellipse":p=g;k=new V;m=parseFloat(p.getAttribute("rx"));n=parseFloat(p.getAttribute("ry"));r=parseFloat(p.getAttribute("cx"));p=parseFloat(p.getAttribute("cy"));isNaN(r)&&(r=0);isNaN(p)&&(p=0);isNaN(m)||isNaN(n)?k=q:(t=new nc(yc),t.ia=0,t.ja=0,t.D=2*m,t.F=2*n,k.position=new A(r-m,p-n),k.Pc=t);break;
case "rect":p=g;k=new V;m=parseFloat(p.getAttribute("height"));n=parseFloat(p.getAttribute("width"));r=parseFloat(p.getAttribute("x"));p=parseFloat(p.getAttribute("y"));isNaN(m)||isNaN(n)?k=q:(isNaN(r)&&(r=0),isNaN(p)&&(p=0),t=new nc(xc),t.ia=0,t.ja=0,t.D=n,t.F=m,k.position=new A(r,p),k.Pc=t);break;case "polygon":k=iq(g);break;case "polyline":k=iq(g)}if(k!==q){k instanceof V&&(m=parseFloat(jq(a,g,"stroke-width")),isNaN(m)||(k.jb=m),m=jq(a,g,"stroke-linecap"),m!==q&&(k.cE=m),m=jq(a,g,"fill"),m!==q&&
-1!==m.indexOf("url")?(m=m.substring(m.indexOf("#")+1,m.length-1),m=a["_brush"+m],k.fill=m instanceof Gd?m:"black"):k.fill=m===q?"black":"none"===m?q:m,g=jq(a,g,"stroke"),g!==q&&-1!==g.indexOf("url")?(m=g.substring(g.indexOf("#")+1,g.length-1),m=a["_brush"+m],k.stroke=m instanceof Gd?m:"black"):k.stroke="none"===g?q:g,k.Jy=h);if(l!==q){l=l.split(")");m=h;for(g=0;g<l.length;g++)/\(.*[^0-9\.,\s-]/.test(l[g])&&(m=s),/\(.*[0-9]-[0-9]/.test(l[g])&&(m=s);if(m)for(g=l.length-1;0<=g;g--)if(n=l[g],""!==n)switch(r=
n.indexOf("("),m=n.substring(0,r).replace(/\s*/,""),r=n.substring(r+1).split(/\s*[\s,]\s*/),m){case "rotate":kq(a,k,r);break;case "translate":m=k;n=parseFloat(r[0]);r=parseFloat(r[1]);if(!isNaN(n)||!isNaN(r))p=m.position.copy(),isNaN(p.x)&&(p.x=0),isNaN(p.y)&&(p.y=0),m.position=new A(n+p.x,r+p.y);break;case "scale":lq(a,k,r);break;case "skewX":mq(a,k,parseFloat(r[0])*Math.PI/180);break;case "skewY":nq(a,k,parseFloat(r[0])*Math.PI/180);break;case "matrix":oq(a,k,r)}}if(k instanceof D){l=k.elements.k;
m=g=0;n=k.position.copy();isNaN(n.x)&&(n.x=0);isNaN(n.y)&&(n.y=0);for(;l.next();)r=l.value.position.copy(),isNaN(r.x)&&(r.x=0),isNaN(r.y)&&(r.y=0),r.x<g&&(g=r.x),r.y<m&&(m=r.y);n.x+=g;n.y+=m;k.position=n}c===q?a.Gm.push(k):c.add(k)}}}}
function oq(a,b,c){var d=parseFloat(c[0]),e=parseFloat(c[1]),g=parseFloat(c[2]),k=parseFloat(c[3]),l=parseFloat(c[4]),m=parseFloat(c[5]);if(!isNaN(d+e+g+k+l+m)){var n=b.position.copy();isNaN(n.x)&&(n.x=0);isNaN(n.y)&&(n.y=0);if(b instanceof V){c=b.Pc.copy();if(c.type===xc)c=a.Zq(c);else if(c.type===yc)c=pq(c);else if(c.type===wc){c.type=oc;a=new pc(c.ia,c.ja);var p=new gd(Ec,c.D,c.F);a.Ca.add(p);c.fb.add(a)}c.offset(n.x,n.y);c.transform(d,e,g,k,l-n.x,m-n.y);a=c.normalize();b.Pc=c;n.x-=a.x;n.y-=a.y;
b.position=n}else{for(b=b.elements.k;b.next();)d=b.value.position.copy(),d.x+=n.x,d.y+=n.y,b.value.position=d;for(b.reset();b.next();)oq(a,b.value,c);for(b.reset();b.next();)d=b.value.position.copy(),d.x-=n.x,d.y-=n.y,b.value.position=d}}}
function kq(a,b,c){var d=parseFloat(c[0]),e=parseFloat(c[1]),g=parseFloat(c[2]);isNaN(e)&&(e=0);isNaN(g)&&(g=0);if(!isNaN(d)){var k=d*Math.PI/180,l=b.position.copy();isNaN(l.x)&&(l.x=0);isNaN(l.y)&&(l.y=0);if(b instanceof V){c=b.Pc.copy();c.type===yc?c=pq(c):c.type===xc&&(c=a.Zq(c));if(c.type===oc)c.rotate(d,e-l.x,g-l.y),g=c.normalize(),b.Pc=c,l.x-=g.x,l.y-=g.y,b.position=l;else{var d=c.ia-e+l.x,m=c.ja-g+l.y,n=c.D-e+l.x,p=c.F-g+l.y;a=d*Math.cos(k)-m*Math.sin(k)+e-l.x;d=m*Math.cos(k)+d*Math.sin(k)+
g-l.y;e=n*Math.cos(k)-p*Math.sin(k)+e-l.x;g=p*Math.cos(k)+n*Math.sin(k)+g-l.y;n=Math.min(a,e);p=Math.min(d,g);c.ia=a-n;c.ja=d-p;c.D=e-n;c.F=g-p;l.x+=n;l.y+=p;b.position=l;b.Pc=c}b.fill instanceof Gd&&(l=b.fill.copy(),c=Math.atan((0.5-l.start.y)/(0.5-l.start.x)),c+=k,l.start=new J((1-Math.cos(c))/2,(1-Math.sin(c))/2),l.end=new J((1+Math.cos(c))/2,(1+Math.sin(c))/2),b.fill=l);b.stroke instanceof Gd&&(l=b.stroke.copy(),c=Math.atan((0.5-l.start.y)/(0.5-l.start.x)),c+=k,l.start=new J((1-Math.cos(c))/2,
(1-Math.sin(c))/2),l.end=new J((1+Math.cos(c))/2,(1+Math.sin(c))/2),b.stroke=l)}else{for(b=b.elements.k;b.next();)k=b.value.position.copy(),k.x+=l.x,k.y+=l.y,b.value.position=k;for(b.reset();b.next();)kq(a,b.value,c);for(b.reset();b.next();)k=b.value.position.copy(),k.x-=l.x,k.y-=l.y,b.value.position=k}}}
function lq(a,b,c){var d=parseFloat(c[0]),e=parseFloat(c[1]);if(!isNaN(d)){isNaN(e)&&(e=d);var g=b.position.copy();isNaN(g.x)&&(g.x=0);isNaN(g.y)&&(g.y=0);if(b instanceof V)a=b.Pc.copy(),g.x*=d,g.y*=e,b.position=g,a.scale(d,e),b.Pc=a;else{for(b=b.elements.k;b.next();)d=b.value.position.copy(),d.x+=g.x,d.y+=g.y,b.value.position=d;for(b.reset();b.next();)lq(a,b.value,c);for(b.reset();b.next();)d=b.value.position.copy(),d.x-=g.x,d.y-=g.y,b.value.position=d}}}
function mq(a,b,c){if(!isNaN(c)){var d=b.position.copy();isNaN(d.x)&&(d.x=0);isNaN(d.y)&&(d.y=0);if(b instanceof V){var e=b.Pc.copy();if(e.type===xc)e=a.Zq(e);else if(e.type===yc)e=pq(e);else if(e.type===wc){e.type=oc;a=new pc(e.ia,e.ja);var g=new gd(Ec,e.D,e.F);a.Ca.add(g);e.fb.add(a)}e.offset(d.x,d.y);e.transform(1,0,Math.tan(c),1,-d.x,-d.y);c=e.normalize();b.Pc=e;d.x-=c.x;d.y-=c.y;b.position=d}else{for(b=b.elements.k;b.next();)e=b.value.position.copy(),e.x+=d.x,e.y+=d.y,b.value.position=e;for(b.reset();b.next();)mq(a,
b.value,c);for(b.reset();b.next();)e=b.value.position.copy(),e.x-=d.x,e.y-=d.y,b.value.position=e}}}
function nq(a,b,c){if(!isNaN(c)){var d=b.position.copy();isNaN(d.x)&&(d.x=0);isNaN(d.y)&&(d.y=0);if(b instanceof V){var e=b.Pc.copy();if(e.type===xc)e=a.Zq(e);else if(e.type===yc)e=pq(e);else if(e.type===wc){e.type=oc;a=new pc(e.ia,e.ja);var g=new gd(Ec,e.D,e.F);a.Ca.add(g);e.fb.add(a)}e.offset(d.x,d.y);e.transform(1,Math.tan(c),0,1,-d.x,-d.y);c=e.normalize();b.Pc=e;d.x-=c.x;d.y-=c.y;b.position=d}else{for(b=b.elements.k;b.next();)e=b.value.position.copy(),e.x+=d.x,e.y+=d.y,b.value.position=e;for(b.reset();b.next();)nq(a,
b.value,c);for(b.reset();b.next();)e=b.value.position.copy(),e.x-=d.x,e.y-=d.y,b.value.position=e}}}
function iq(a){var b=s;if("polygon"===a.tagName)b=h;else if("polyline"!==a.tagName)return q;var c=new V,d=a.getAttribute("points");a=new nc;var e=new F(pc),g=d.split(/\s*[\s,]\s*/);if(4>g.length)return q;for(var k,d=new F(gd),l,m,n=1;n<g.length;n+=2){l=eval(g[n-1]);m=eval(g[n]);if("number"!==typeof l||isNaN(l)||"number"!==typeof m||isNaN(m))return q;1===n?k=new pc(l,m):d.add(new gd(Ec,l,m))}b&&(b=new gd(Ec,k.ia,k.ja),b.close(),d.add(b));k.Ca=d;e.add(k);a.fb=e;k=a.normalize();c.position=new A(-k.x,
-k.y);c.Pc=a;return c}function jq(a,b,c){var d=b.getAttribute(c);"string"!==typeof d&&(d=b.style[c]);return"string"!==typeof d||""===d?(b=b.parentNode,"g"===b.tagName||"use"===b.tagName?jq(a,b,c):q):d}
function pq(a){var b=a.ia,c=a.ja,d=a.D,e=a.F,g=Math.abs(d-b)/2,k=Math.abs(e-c)/2,b=Math.min(b,d)+g,c=Math.min(c,e)+k;new A;e=new pc(b,c-k);d=new gd(Wc);d.ib=b+H.ra*g;d.Bb=c-k;d.Rd=b+g;d.Sd=c-H.ra*k;d.D=b+g;d.F=c;e.Ca.add(d);d=new gd(Wc);d.ib=b+g;d.Bb=c+H.ra*k;d.Rd=b+H.ra*g;d.Sd=c+k;d.D=b;d.F=c+k;e.Ca.add(d);d=new gd(Wc);d.ib=b-H.ra*g;d.Bb=c+k;d.Rd=b-g;d.Sd=c+H.ra*k;d.D=b-g;d.F=c;e.Ca.add(d);d=new gd(Wc);d.ib=b-g;d.Bb=c-H.ra*k;d.Rd=b-H.ra*g;d.Sd=c-k;d.D=b;d.F=c-k;e.Ca.add(d);a.type=oc;a.fb.add(e);
return a}gq.prototype.Zq=function(a){var b=a.ia,c=a.ja,d=a.D,e=a.F,g=Math.min(b,d),k=Math.min(c,e),b=Math.abs(d-b),c=Math.abs(e-c),e=new pc(g,k);e.Ca.add(new gd(Ec,g+b,k));e.Ca.add(new gd(Ec,g+b,k+c));e.Ca.add((new gd(Ec,g,k+c)).close());a.type=oc;a.fb.add(e);return a};window.go=fa;fa.version="1.2.7"; })(window);
